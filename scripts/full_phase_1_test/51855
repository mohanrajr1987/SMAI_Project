Positive 51855 pIm back to the drawing board with my json API, doing a few test to see if I can speed a few things up.p  pFirst thing I did, was to create a new rails application and configure it to be an codeapionlycode applicationp  precoderequire File.expandpath..boot, FILE  require rails require railsapi   Pick the frameworks you want require activemodelrailtie require activejobrailtie  require activerecordrailtie require actioncontrollerrailtie require actionmailerrailtie require actionviewrailtie require sprocketsrailtie  require railstestunitrailtie   Require the gems listed in Gemfile, including any gems  youve limited to test, development, or production. Bundler.requireRails.groups     module testApi         class Application lt RailsApplication             config.apionly  true         end end codepre  pThen I modified the Gemfilep  precodesource httpsrubygems.org    Bundle edge Rails instead gem rails, github railsrails gem rails, 4.2.3 gem railsapi  Database gem mongoid  Response gem activemodelserializers  gem activemodelshaz, github kristianmandrupactivemodelshaz  gem mongoidserializer   Build JSON APIs with ease. Read more httpsgithub.comrailsjbuilder gem jbuilder, gt 2.0   Use ActiveModel hassecurepassword  gem bcrypt, gt 3.1.7   Use Unicorn as the app server  gem unicorn   Use Capistrano for deployment  gem capistranorails, group development  group development, test do    Call byebug anywhere in the code to stop execution and get a debugger console   gem byebug     Access an IRB console on exception pages or by using lt console gt in views   gem webconsole, gt 2.0 end codepre  pOnce I had these, I wrote an codeams initializercodep  precodeMongoidDocument.sendinclude, ActiveModelSerializerSupport MongoidCriteria.delegateactivemodelserializer, to gt toa   ActiveModelSerializer.setup do config   config.embed  ids   config.embedinroot  false end  module BSON   class ObjectId     alias tojson tos     alias asjson tos   end end codepre  pand Wrote my modelsp  precodeclass Place   include MongoidDocument   include MongoidTimestamps    field name, type gt String   field coordinates,  type gt Array   field lon, type gt Float   field lat, type gt Float    hasmany posts    Relation Indexes   index posts 1     Class Indexes   index name 1    index coordinates 2d ,  min 200, max 200    index lon 1    index lat 1  end   class Post   include MongoidDocument   include MongoidTimestamps    belongsto place    field type, type gt String   field isprivate, type gt Boolean, default false   Relation Indexes   index place 1     Class Indexes   index type 1    index isprivate 1    index createdat 1    index updatedat 1   end codepre  pOnce I had these, I created my mongoid indexes and created a placescontroller with a method to insert dummy datap  precodeclass PlacesController lt ApplicationController   beforeaction setplace, only [show, update, destroy]    def dummy     150.times do        create places       place  Place.new                              coordinates gt [range117,118, range32,33],                             name gt New place range1,1000.toi                                if place.save         150.times do           post  Post.new                               place place.id,                               type picture                                      post.save         end       end     end     render json gt place   end    def index     places  Place.all     render json places   end    private   def setplace     place  Place.findparams[id]   end   def placeparams     params.permitname, lon, lat, coordinates gt []   end   def range min, max     rand  maxmin  min   end end codepre  pI ran the dummy route multiple times giving me approx 800 places and a little over 100K posts to go along with it.p  pI then created a serializer using coderails g serializer placecode, it didnt create it like I expected it to but eh i can wing it  or so I think.  So I modified the serializer as I suspect it works.p  pclass PlaceSerializer lt ActiveModelSerializer   attributes coordinates, lat, lon, results   hasmany postsp  pdef results     results  hello world   end endp  pI then run the codeplacescode routes in the the terminal, and in postman and I get back all 800 places.  But, its missing my key for results and my key for posts and I cant seem to figure out exactly why its not working the way it should.p  pWhat I am getting back currently isp  precode[              id 55ae994c4a757304b4000000,         coordinates [             117.80632651221987,             32.35275002408346         ],         createdat 20150721T191108.162Z,         lat null,         lon null,         name New place 882,         updatedat 20150721T191108.162Z     ,              id 55ae994c4a757304b4000097,         coordinates [             117.92741327810995,             32.39414931372753         ],         createdat 20150721T191108.835Z,         lat null,         lon null,         name New place 284,         updatedat 20150721T191108.835Z      ] codepre  pThe id is coming back as a string, so I know that the initializer is working, as thats where I specify to turn codeBSONcode to a string in my return.p
Positive 51855 pSorry if its trivial, but I cant find an answer, so maybe I dont know how to ask the question. I have a simple casep  pI dop  precodeSomeMongoidObject.new.save codepre  pAnd after that I want to use the id of new object to start a new background worker process. I cant find how can I get the id of the newly created object The save method returns a status.p  pCould you help me with thatp
Positive 51855 pI have a report object that belongsto a customerusertype. I have it setup so that the customer is able to grant or remove permission from an admin to see the customers report. I need to know what steps or direction do I need to take to get the reports viewable to the admin user. The admin user should only have the ability to see reports show and see an index of reports that they have access to.p  pI am thinking maybe I should create a new controller but I am not sure if that is correct or how to do another controller tied to an object that already has a controller.p
Positive 51855 pI have error when I try to load feed entriesp  precodeArgumentError wrong number of arguments 2 for 1 codepre  pI use feedjira 2.0, mongoid No error when using 1.6.0.p  precode  def loadfeedentries     lastentry  self.feedentries.last     if lastentry.nil       feed  FeedjiraFeed.fetchandparseself.url     else       feed  FeedjiraFeed.fetchandparseself.url,         ifmodifiedsince gt lastentry.publishedat.totime     end      Source.addentriesfeed.entries, self.id   end    def self.updateallfeedsurls     FeedjiraFeed.fetchandparseurls,       onsuccess gt lambda  url, feed         rss  Source.onlyid.whereurl gt url.first         Source.addentriesfeed.entries, rss.id               end codepre
Positive 51855 pI have installed rails admin with mongodb backend, it works fine, one thing I couldnt made to work is searching by associations, so when I have a one to many, belongs to or many to many relationship in my models, the search field doesnt workp  pIs this feature supported at all, or am I wasting my timep  pI followed this wiki p  pa hrefhttpsgithub.comsferikrailsadminwikiList relnofollowhttpsgithub.comsferikrailsadminwikiLista the Fields searching section.p
Positive 51855 pI am working on a Mongo document store for a data feed using Mongoid in Ruby.  The feed itself has a created and last updated set of fields. I want to store them in my Mongoid document as createdat and updatedat but Mongoid internally doesnt like having those as explicit attributes of my own since they are the field names when you declare include MongoidTimestamps on a document.p  pIs there a way to use createdat and updatedat as my own fields Or do I need to just punt and figure out different names for these fieldsp  pI tried just defining those fields, and it works when the document is first created, but when I update it, I get something likep  precodemnttaskgemsgemsmongoid4.0.2libmongoidatomicmodifiers.rb121in addoperation undefined method each for 20150518 145507String NoMethodError from mnttaskgemsgemsmongoid4.0.2libmongoidatomicmodifiers.rb87in block in set from mnttaskgemsgemsmongoid4.0.2libmongoidatomicmodifiers.rb84in eachpair from mnttaskgemsgemsmongoid4.0.2libmongoidatomicmodifiers.rb84in set from mnttaskgemsgemsmongoid4.0.2libmongoidatomic.rb353in generateatomicupdates from mnttaskgemsgemsmongoid4.0.2libmongoidatomic.rb134in block in atomicupdates from mnttaskgemsgemsmongoid4.0.2libmongoidatomic.rb132in each from mnttaskgemsgemsmongoid4.0.2libmongoidatomic.rb132in atomicupdates codepre  pIn other words, it is trying to do an iteration over the string, probably because within Mongoid it believes that its a Date object, even though Ive defined it as a String.p  pI welcome any suggestions.p
Positive 51855 pI have codeUsercode, codeShopcode and codeFavouriteShopcode models. Im using mongoidp  precodeclass User    include MongoidDocument    hasmany favouriteshops, dependent destroy end  class Shop    include MongoidDocument    hasmany favouriteshops, dependent destroy end  class FavouriteShop    include MongoidDocument    include MongoidTimestamps     belongsto user    belongsto shop end codepre  pAs you can see, there is manytomany relationship with codeUsercode and codeShopcode via codeFavouriteShopcode.p  pNow If I got one userp  precodeuser  User.all.first codepre  pHow can I get all Shops which are associatied to Userp
Positive 51855 pIm using a hrefhttpsgithub.comelasticelasticsearchrailselasticsearchrailsa and a hrefhttpsgithub.commongoidmongoidmongoida I have the following simple mapping with fieldsp  precodetitle                type string,               fields                   raw                      type string,                     index notanalyzed                                              codepre  pMy model looks like thisp  precodeclass ArticlesEvent include MongoidDocument include ElasticsearchModel  field title, type String  attraccessible title  def asindexedjsonoptions   asjsonexcept [id, id] end codepre  pCan anyone show an example how to define the rails model with the title.raw field, and how to access  that field Since the multi fields have been deprecated its hard to find a working example with rails and mongoid.p  pThanksp
Positive 51855 pI have my model codeAcode with following fieldsp  precodefield location, type Array  index  location 2d ,  min 180, max 180    Check if location is float beforesave fixlocation, if locationchanged def fixlocation   self.location  self.location.mapamptof end codepre  pThen I have run indexing rake task.p  pNow I have model with cooridnates code[4.430577206803733, 100.27785445050375]codep  pI want to query this model by its coordinates, I use same coordinates of my modelp  precodeloc  [4.430577206803733, 100.27785445050375] distance  50 km  models  A.wherelocation near gt loc, maxDistance gt distance.fdiv111.12 codepre  pWhen I run this code, It does return nothing. I change value of codeloccode that is near to my coordinates and it still gives nothing.p  pWhat did I missp  p Update p  pI have changed my code to thisp  precodemodels  A.wherelocation near gt lng 100.27785445050375, lat 4.430577206803733, maxDistance gt distance.fdiv111.12 codepre  pStill gives me an empty arrayp
Positive 51855 pI want to know if it is necessary to escape regex in query calls with railsmongoID p  pThis is my current queryp  precodemodel.whereniceidstring params[niceidstring]i codepre  pI am now unsure if it is not secure enough, because of the regex.p  pShould i use this code below or does MongoID escape automatically query callsp  precodemodel.whereniceidstring Regexp.escapeparams[niceidstring]i codepre
Negative 51855 pI have the following thing named codeoffercodep  pImage herep  pimg srchttpi.stack.imgur.comuy6YB.png altenter image description herep  pI want to get the value of codeassetidcode in codeitemstogivecode. I can get the value of codesteamidothercode by codeoffer.steamidothercode. However, codeoffer.itemstogive.assedidcode comes as undefined.p  pHow can I access that get its valuep
Negative 51855 pHow to escape column special characters in SQL select statement. p  pI have that sql select statement and the column accountname has values that contains special characters, it gives me error as it doesnt escape those special characters.p  precodeselect  from account where accountname accountname   codepre
Negative 51855 pI have an ImageView and a GridView. When I start to drag the image, i make it invisible GONEp  precodeimageView.setOnLongClickListenernew View.OnLongClickListener              Override             public boolean onLongClickView view                   ClipData.Item item  new ClipData.ItemCharSequence view.getTag                 String[] mimeTypes  ClipDescription.MIMETYPETEXTPLAIN                 ClipData dragData  new ClipDataview.getTag.toString, mimeTypes, item                  View.DragShadowBuilder myShadow  new View.DragShadowBuilderimageView                  view.startDragdragData, myShadow, piece, 0                 imageView.setVisibilityView.GONE                  return false                       codepre  pNow the view that I drop matches one view on the GridView. If I drop it on it, I dont need nothing to happen, and if I drop it on any other view I make it visible again and that works fine all this happens inside the GridView Adapter.p  pBUT, I also want to make it visible if it want dropped on the GridView at all for example, it was dropped on the empty space between the GridView and the original View. I tried thisp  precodeimageView.setOnDragListenernew View.OnDragListener              Override             public boolean onDragView view, DragEvent dragEvent                  int action  dragEvent.getAction                 switch action                      case DragEvent.ACTIONDRAGENDED                             Log.dtest, visible                             imageView.setVisibilityView.VISIBLE                         break                                  return true                       codepre  pI see the log message so the ACTIONDRAGENDED is fired, but the imageViews visibility doesnt change. Any ideas anyonep
Negative 51855 pYes, I sounds crazy to me too. Pull my hair out, bang my head on the keyboard crazy. Thats why Im here begging p  pHopefully this isnt too briefp  pIm embedding an iframe in a WordPress adminside add new entry form. Prior to the iframe being displayed in a meta box a cookie is set. The iframe looks for that cookie as a means of authentication. If the cookie has a particular value the user does not have to signin to the service provided by the iframe. They are automatically logged in. However, the only way I can get the iframe to see the cookie is to hit F12 and then refresh the page. Once I do that the autologin happens as expected. Obviously, hitting F12 is not an optimal UX p  pEverything works fine in Chrome and Firefox.   p  pThe only other detail Ive noticed is that even once I get the iframe to see the cookie and authenticate the button for selecting a file to upload doesnt work. I click it and its dead. p  pFinally, the iframe widget is from FileMobile. Its an uploader to Brightcove. That detail probably doesnt matter but if youve read this far Im sure youre curious.p  pAgain, everything works fine in Chrome and Firefox.p
Negative 51855 pI want to make comment form with Ajax call.p  precode appviewscommentsindex.html.erb ltdiv idcommentsectiongt   lt render comments gt ltdivgt lt formforcomment, remote true do f gt   lt f.input contents gt lt f.submit gt   appviescommentscomment.html.erb ltpgtlt comment.content gtltpgt   appcontrollerscommentscontroller.rb def create   comment  Comment.createcommentparams   respondto do format     format.js   end end   appviewscommentscreate.js.erb newcomment.bindajaxsuccess, function   commentsection.prependlt j render comment, locals  comment comment  gt  codepre  pI thought it is very simple and there is no chance to have any errors. When I submit the form for the first timee.g. contents  a, it makes no error and just one comment is prepended in the commentsection. But when I submit forms after thate.g. contents  b , contents  c, it always prepend comments which was created before.p  h31st timesubmit content  ah3  ul liain the commentsectionli ul  h32nd timesubmit content  bh3  ul libli liaI dont know why it appearsli liafirst created oneli ul  h33rd timesubmit content  ch3  ul licli libit occurs againli liait occurs againli libsecondli liasecondli liafirst oneli ul  pWhat is going on Log just says there was just one query and one render for new comment. After refreshing the page, it appears right.p  h3After refreshh3  ul licli libli liali ul  pWhat am I missing I dont know jQuery and Ajax well so I doubted turbolink could make some errors for this.just my own guess Any comments will be a huge help for me, thanksp
Negative 51855 pI want to implement measures to preventmitigate session hijacking. Thus, I want to know the options, either from builtin ASP.NET or custom components. p  pPlease note that session hijacking refers to codeForms Auth sessioncode and codeSession Statecode.p  pMy ASP.NET is using HTTPS for all pages all the time. But it is possible that session can be compromised once the session cookie id is obtained by third party somehow, e.g. from users hard drive, crosssite scripting attacks, and maninthemiddle attacksp  pIn particular, I am concerned about session id hijacking because https is used all the time for my projectsp  pBelow is the links I reviewed, which are written a few years backp  pa hrefhttpmsdn.microsoft.comenusmagazinecc300500.aspx relnofollowFoiling Session Hijacking Attempts Jeff Prosisea Please refer to Caveats section for its shortcomings.p  pI cannot find much relevant information, or different from Jeffs on the web.p
Negative 51855 pIm using the Spring Security 2.0RC4 and the Facebook Authentication for Spring Security 0.15.2CORE2 to allow users to authenticate with a Facebook login.  I request the extra FB permission email since I use email as the primary key for my User class, so if the email permission is unselected by the user I need to abort login.  Currently I check for null email in my codeFacebookAuthService.createcode and return null if email was not set.p  pIn the normal case everything works fine.  Login succeeds, I get new User and FacebookUser records created and my User objects email property is updated with the Facebook users email address.  However, if the user elects to remove email permission during login then I run into problems.p  pIn my codeFacebookAuthService.createcode I check if email was returned similar to a hrefhttpstackoverflow.comquestions11378351grailsfacebookpluginhowtohandleinvaliduserin this questiona, and if not return null to abort the authentication processp  precodeFacebookUser createFacebookAuthToken token      Facebook facebook     FacebookProfile fbProfile     try          facebook  new FacebookTemplatetoken.accessToken.accessToken         fbProfile  facebook.userOperations.userProfile      catch org.springframework.social.ApiException apiex          return null          String email  fbProfile.email      if email          return null          ... codepre  pWhen email is null and I return null my security state seems to be messed up.  I have a beforeInterceptor on my controller which gets called after I return null from createp  precodedef beforeInterceptor       def user  springSecurityService.currentUser     log.traceuser.email  End action controllerNameController.actionName  returns model, view modelAndView.viewName  codepre  pgetCurrentUser should be returning null but instead it throws an exceptionp  precodeorg.codehaus.groovy.grails.web.errors.GrailsExceptionResolver  NullPointerException occurred when processing request [GET] raruserhome Cannot get property username on null object. Stacktrace follows java.lang.NullPointerException Cannot get property username on null object     at org.codehaus.groovy.runtime.NullObject.getPropertyNullObject.java56     at org.codehaus.groovy.runtime.InvokerHelper.getPropertyInvokerHelper.java169     at org.codehaus.groovy.runtime.callsite.NullCallSite.getPropertyNullCallSite.java44     at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callGetPropertyAbstractCallSite.java227     at grails.plugin.springsecurity.SpringSecurityService.getCurrentUserSpringSecurityService.groovy87      at grails.plugin.springsecurity.SpringSecurityServiceFastClassBySpringCGLIB6e53ab8e.invokeltgeneratedgt ... codepre  pIt seems that SpringSecurityService thinks that someone is logged in because codegetCurrentUsercodes call to codeisLoggedIncode returns true, which causes an exception later when principal is null and a property is accessed on the null principal object.p  pShould I be aborting the Facebook login process in a different way instead of returning null from codeFacebookAuthService.createcodep
Negative 51855 pI want to just url rewriting in address bar fromp  precodehttpswww.tinycent.comwebsinglepost.phpslugsamsungsprint codepre  pto p  precodehttpswww.tinycent.comwebsinglepostsamsungsprint codepre  pAny one can help me for this thing its need to in better way also i had saw  p  pMore 10 demo at stackoverflow or other but he doesnt work for me.p
Negative 51855 pHere is my html page.p  precodeltDOCTYPE HTMLgt     ltheadgt         ltstylegt             foot                 positionabsolute                bottom0                width100                height60px    Height of the footer                 background6cf                           .container                 border 1px solid RGB100,100,100                 webkitborderradius 10px                 mozborderradius 10px                 borderradius 5px                 height 940px                 width 1200px                 background white                 boxshadow 0px 0px 5px                 position absolute                 marginleft 25px                 marginright 20px                 margintop 80px                      ltstylegt     ltheadgt     ltbodygt         lth1gtMy Pagelth1gt         ltdiv classcontainergt         ltdivgt         ltfooter idfootgt             My footer         ltfootergt     ltbodygt lthtmlgt codepre  pBut this keeps the footer in between the page. Can some one help me out herep
Negative 51855 pstrongUpdate 1 Solvedstrong Somehow Pow did not restart its processes, so after updates it was loading the old config files. And it was loading the wrong locale file.p  pI deleted gems I installed recently only from Gemfile and restarted Pow. Then one by one I added gems back to the Gemfile. As well ActiveAdmin as Rails localization started working normally.p  pstrongOriginal questionstrongp  pI am trying to setup ActiveAdmin to support my taxonomies. My setup is as followingp  pre classlangrb prettyprintoverridecodeclass Taxonomy lt ActiveRecordBase end  class Category lt Taxonomy   hasancestry  implements a tree of categories end  class Tag lt Taxonomy end codepre  pSo now I added the following to ActiveAdminp  pre classlangrb prettyprintoverridecodeActiveAdmin.register Category do end codepre  pAnd it returns the folioing errorp  precodeCould not find table categories codepre  pMy migrations were definitely ran. And I have some valid STI records in the codetaxonomiescode table. So what can be wrongp
