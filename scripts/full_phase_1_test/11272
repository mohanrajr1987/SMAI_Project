Positive 11272 pI have a groovy grails application that uses the grails strongspring security 2.0.RC5strong plugin. Lets say I have 2 tabs open. On the 1st one I logout of the application. Then, on the 2nd one I click a button that makes an ajax call to the application. p  pBecause I am logged out, the entry point will be codeLoginController.authAjaxcode. The default code generated by the plugin in this method isp  pcoderesponse.setHeader Location, SpringSecurityUtils.securityConfig.auth.ajaxLoginFormUrlcode coderesponse.sendError HttpServletResponse.SCUNAUTHORIZEDcodep  pI get the 401 on my ajax call and its ok. The problem comes that now, if I go back on the login page and resubmit the login form I get redirected to the method codeLoginController.authAjaxcode. p  pThe code in this method isp  pcoderender[success true, username springSecurityService.authentication.name] as JSONcodep  pThis in turn does not redirect me to the dashboard page in the application but renders codesuccesstrue,usernameuser1codep  pObviously this is not the intended behaviour. How do I fix this  thank youp
Positive 11272 pIm trying to recover password in spring security and I have included code.antMatchersloginrecover.permitAllcode this in codeSecurityConfig.javacode.p  pHow do I implement login password recovery in Spring securityp
Positive 11272 pI am writing a program in springboot where user can access the application in two ways with a combination of usernamepassword or a use of single unique 16 digit alphanumeric character which resides in separate table. I am comfortable with logging the user with either combination of username  password or the use of 16 digit character at a time. But What I need is ability to switch between userbased and character based login. Ive considered filter based approach but not sure how to start it can anyone point me to the right direction.  What I desire is something like thisp  precodeifrequest.getParameteruserType.equalsuserbased auth.jdbcAuthentication.dataSourcedataSource             .usersByUsernameQuery                     select username,password,enabled from user where username             .authoritiesByUsernameQuery                     SELECT u.username,r.role FROM user u  INNER JOIN userrole ur ON u.id  ur.userid INNER JOIN role r ON ur.roleid  r.id WHERE u.username   else ifrequest.getParameteruserType.equalstokenNo    token based login logic with structure same as above  codepre
Positive 11272 pI am using the latest spring security 4 version and it introduces a new feature to use the logged in user details directly in the query method using expression language. Here is my spring data repository codep  precodepublic interface UserRepository extends JpaRepositoryltUser, Longgt      Queryselect username from User u where u.username   principal.username      User findByUsernameString username  codepre  pIn the above code, I have an entity User as below Entity Tablename  usersp  precodepublic class User        Id     Columnname  username, nullable  false, unique  true     private String username     Columnname  password, nullable  false     NotNull     private String password     Columnname  enabled, nullable  false     NotNull     private Boolean enabled      Columnname  role, nullable  false     EnumeratedEnumType.STRING     private Role role     getters and setters codepre  pAlso I have this entry for enabling this featurep  precodeBean public SecurityEvaluationContextExtension securityEvaluationContextExtension      return new SecurityEvaluationContextExtension  codepre  pWhen I run the application, I get the errorp  precodeCaused by org.springframework.dao.InvalidDataAccessApiUsageException Authentication object cannot be null nested exception is java.lang.IllegalArgumentException Authentication object cannot be null     at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossibleEntityManagerFactoryUtils.java381     at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossibleHibernateJpaDialect.java223     at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossibleAbstractEntityManagerFactoryBean.java417  Caused by java.lang.IllegalArgumentException Authentication object cannot be null     at org.springframework.security.access.expression.SecurityExpressionRoot.ltinitgtSecurityExpressionRoot.java46     at org.springframework.security.data.repository.query.SecurityEvaluationContextExtension1.ltinitgtSecurityEvaluationContextExtension.java113     at org.springframework.security.data.repository.query.SecurityEvaluationContextExtension.getRootObjectSecurityEvaluationContextExtension.java113     at org.springframework.data.repository.query.ExtensionAwareEvaluationContextProviderEvaluationContextExtensionAdapter.ltinitgtExtensionAwareEvaluationContextProvider.java463     at org.springframework.data.repository.query.ExtensionAwareEvaluationContextProvider.toAdaptersExtensionAwareEvaluationContextProvider.java210     at org.springframework.data.repository.query.ExtensionAwareEvaluationContextProvider.access000ExtensionAwareEvaluationContextProvider.java58 codepre  pWhat could be the issue. Here I am posting to check if there is any issue in using the query method. Can i use like principal.username, is that correctp  pstrongUpdatestrong When I removed the Query from repository it works fine. That means its problem with the new spring security 4 using principal.username. Is there anything wrong in this expressionp  precodeQueryselect username from User u where u.username   principal.username  codepre
Positive 11272 pI get the user name in my JAXRS resource with codeSecurityContextHoldercode and that works p  precodePathmyresource public class MyResoure        Get      public String getUserName            return SecurityContextHolder.getContext.getAuthentication.getName        codepre  pBut I want to inject the SecurityContext into a class field to write JUnit tests. I tried some documented waysp  pWith codejavax.ws.rs.core.SecurityContextcode I get a codeNullPointerExceptioncode, because the codesecurityContextcode is always codenullcode. p  precodePathmyresource public class MyResoure       Context     private javax.ws.rs.core.SecurityContext securityContext      Get     public String getUserName          return securityContext.getUserPrincipal.getName       codepre  pWith codeorg.apache.cxf.security.SecurityContextcode see a hrefhttpcxf.apache.orgdocsjaxrsandjaxws.htmlJAXRSandJAXWSDealingwithcontexts relnofollowApache CXF documentationa I get a codeNullPointerExceptioncode, because the codesecurityContext.getUserPrincipalcode is always codenullcode. p  precodePathmyresource public class MyResoure       Context     private org.apache.cxf.security.SecurityContext securityContext      Get     public String getUserName          return securityContext.getUserPrincipal.getName       codepre  pWith codeorg.apache.cxf.jaxrs.ext.MessageContextcode see a hrefhttpcxf.apache.orgdocsjaxrsandjaxws.htmlJAXRSandJAXWSDealingwithcontexts relnofollowApache CXF documentationa I get a codeNullPointerExceptioncode, because the codemessageContext.getSecurityContext.getUserPrincipalcode is always codenullcode. p  precodePathmyresource public class MyResoure       Context     private org.apache.cxf.jaxrs.ext.MessageContext messageContext      Get     public String getUserName          return messageContext.getSecurityContext.getUserPrincipal.getName       codepre  pWith codejavax.servlet.http.HttpServletRequestcode I get a codeNullPointerExceptioncode, because the codehttpServletRequest.getUserPrincipalcode is always codenullcode. p  precodePathmyresource public class MyResoure       Context     private javax.servlet.http.HttpServletRequest httpServletRequest      Get     public String getUserName          return httpServletRequest.getUserPrincipal.getName      codepre
Positive 11272 pI have the following request mapping that is used for the index page of my app upon logging in.  I have an argument resolver for my codePersoncode type which gives me me the currently logged in user.  While running in debug, I can inspect codecurrentUsercode and see the users authorities, but the resulting codeauthoritiescode collection is always empty when its added to the model.  So Im kind of scratching my head as to why.  Im using JPA to get the users information from the database.p  precodeRequestMappingvalue  , method  RequestMethod.GET public String indexModel model, Person currentUser      CollectionltStringgt authorities  currentUser.getAuthorities.stream.mapGrantedApplicationgetAuthority.collectCollectors.toList     model.addAttributeauthorities, authorities     return index  codepre
Positive 11272 pIm attempting to implement a microservices architecture using Spring Clouds Zuul, Eureka, and my own services. I have multiple services that have UIs and services and each can authenticate users using x509 security.  Now Im trying to place Zuul in front of those services.  Since Zuul cant forward client certs to the backend, I thought the next best thing would be to authenticate the user at the front door in Zuul, then use Spring Session to replicate their authenticated state across the backend services.  I have followed the tutorial a hrefhttpsspring.ioblog20150128theapigatewaypatternangularjsandspringsecuritypartiv relnofollowherea from Dave Syer and it almost works, but not on the first request. Here is my basic setupp  ul liZuul Proxy in its own application set to route to the backend services. Has Spring security enabled to do x509 auth. Successfully auths users.  Also has Spring Session with EnableRedisHttpSessionli liBackend service also has spring security enabled. I have tried both enablingdisabling x509 here but always requiring the user to be authenticated for specific endpoints.  Also uses Spring Session and EnableRedisHttpSession. li ul  pIf you clear all the sessions and start fresh and try to hit the proxy, then it sends the request to the backend using the zuul servers certificate.  The backend service then looks up the user based on that user cert and thinks the user is the server, not the user that was authenticated in the Zuul proxy.  If you just refresh the page, then you suddenly become the correct user on the back end the user authenticated in the Zuul proxy. The way Im checking is to print out the Principal user in the backend controller. So on first request, I see the server user, and on second request, I see the real user. If I disable x509 on the back end, on the first request, I get a 403, then on refresh, it lets me in. p  pIt seems like the session isnt replicated to the backend fast enough so when the user is authenticated in the frontend, it hasnt made it to the backend by the time Zuul forwards the request.  p  pIs there a way to guarantee the session is replicated on the first request i.e. session creation  Or am I missing a step to ensure this works correctly p  pHere are some of the important code snippetsp  pZuul Proxyp  precodeSpringBootApplication Controller EnableAutoConfiguration EnableZuulProxy EnableRedisHttpSession public class ZuulEdgeServer      public static void mainString[] args          new SpringApplicationBuilderZuulEdgeServer.class.webtrue.runargs       codepre  pZuul Config p  precodeinfo   component Zuul Server  endpoints   restart     enabled true   shutdown     enabled true   health     sensitive false  zuul   routes     service1   logging   level     ROOT INFO     org.springframework.web DEBUG     net.acesinc DEBUG  security.sessions ALWAYS server   port 8443   ssl       keystore classpathdevlocalhost.jks       keystorepassword thepassword       keyStoreType JKS       keyAlias localhost       clientAuth want       truststore classpathdevlocalhost.jks  ribbon     IsSecure true codepre  pBackend Servicep  precodeSpringBootApplication EnableAutoConfigurationexclude   DataSourceAutoConfiguration.class, ThymeleafAutoConfiguration.class, org.springframework.boot.autoconfigure.security.SecurityAutoConfiguration.class  EnableEurekaClient EnableRedisHttpSession public class Application       public static void mainString[] args          SpringApplication.runApplication.class, args       codepre  pBackend Service Configp  precodespring.jmx.defaultdomain spring.application.name  server   port 8444   ssl       keystore classpathdevlocalhost.jks       keystorepassword thepassword       keyStoreType JKS       keyAlias localhost       clientAuth want       truststore classpathdevlocalhost.jks  Change the base url of all REST endpoints to be under rest spring.data.rest.baseuri rest  security.sessions NEVER  logging   level     ROOT INFO     org.springframework.web INFO     org.springframework.security DEBUG     net.acesinc DEBUG  eureka   instance      nonSecurePortEnabled false     securePortEnabled true     securePort server.port     homePageUrl httpseureka.instance.hostnameserver.port     secureVirtualHostName spring.application.name codepre  pOne of the Backend Controllersp  precodeController public class SecureContent1Controller      private static final Logger log  LoggerFactory.getLoggerSecureContent1Controller.class      RequestMappingvalue  secure1, method  RequestMethod.GET     PreAuthorizeisAuthenticated     public ResponseBody String getHomepageModelMap model, Principal p          log.debugSecure Content for user [   p.getName   ]         model.addAttributepageName, secure1         return You are [   p.getName   ] and here is your secure content secure1       codepre
Positive 11272 pIn a web application using Spring 4.1  Spring Security 4.0 I would like to prevent a session expired redirect for authentication requests even if the current session has in fact expired.p  pThe current behavior is thisp  ul liUser opens application login page in web browser and then leaves the page open without logging in until the current session has expired, or more likely returns to the application after logging out which returns the login form and a period of inactivity. Either way the current session has expired but the browser is showing the login form.li liUser then enters credentials and clicks Loginli liUser is redirected to invalid session url configured using the namespace with codeinvalidsessionurlcodeli ul  pClearly for the user this is surprising  you were looking at the login page, entered valid credentials, but then got a session timeout notice instead of getting logged in.p  pWhat I would like to happen is that the authentication request is processed in the normal way when the user submits the login form, regardless of whether or not the current codeHttpSessioncode is valid with a new session created as necessary.p  pIt seems that a possible solution might be to inject a custom codeInvalidSessionStrategycode in place of the default codeSimpleRedirectInvalidSessionStrategycode used by the codeSessionManagementFiltercode so that authentication requests are not redirected. But I cannot see a simple way to do this with the namespace configuration  which also makes me wonder if there is an alternative solution that might be a better option, or if there is a reason why this is not available using the namespace.p  pAm I missing somethingp  pThanks.p
Positive 11272 pI have spring application. I have read about XSS attach And I globally disabled by the answer here  a hrefhttpstackoverflow.comquestions2147958howdoipreventpeoplefromdoingxssinjavaHow do I prevent people from doing XSS in Javaap  pI put the contextparam in web.xmlp  pBut still I do able to do xss attack in URL by giving the script in URLp  pa hrefhttpslocalhostsampopviewProfileid3E3Cscript3Ealert28123293Cscript3E relnofollowhttpslocalhostsampopviewProfileid3E3Cscript3Ealert28123293Cscript3Eap  pHow to solve thisp
Positive 11272 pI am making an AuthenticationProvider  that will check the credentials of users via an API on an other system. This is all going fine, but I want to add an error message if my applications fails to connect with the API for whatever reason.p  pI have taken a look at a hrefhttpstackoverflow.comquestions6415092throwingcustomexceptionanddisplayerrormessagefromcustomauthenticationprthisa question, but when I throw an exception for example an AccountExpiredException, the application simply crashes when I try to login, and I get a blank jspringsecuritycheck page.p  pI have no clue what im doing wrong. This is my AuthenticationProvider.p  precodeTransactional class APIAuthorizationProviderService implements AuthenticationProvider       java.lang.Override     Authentication authenticateAuthentication authentication throws AuthenticationException           def user          if Environment.current  Environment.DEVELOPMENT ampamp authentication.principal                user  User.findByUsernameemployeesomething.com          else              try                  user  UserService.loginauthentication.principal, authentication.credentials                          catchException ex                  throw new AccountExpiredException                                if user              return null                   def userAuthorities  user.getAuthorities          CollectionltGrantedAuthoritygt authorities  userAuthorities.collect  new GrantedAuthorityImplit.authority           def token  new UsernamePasswordAuthenticationTokenuser.username, null, authorities          token.details  authentication.details          return token           Override     boolean supportsClasslt extends Objectgt aClass          return true        codepre  pWith this code, if it fails to connect, it simply will say that the user does not exist. If I uncomment the exception, it just crashes my application, instead of showing the Account expired message on the login page. This will be a custom exception if I get this to workp  pHow do I fix this I use Grails 3.0.6p
Negative 11272 pI am stuck with a weird problem. Ive never seen anything like that before and I cant find any similar cases to my problem. I am on Windows 7, PHP 5.5.x and Apache.p  pMy framework is serving javascript by itself e.g. with codereadfile...code . This approach allows me to translate and serve javascript files on the fly duh. For instance, if JS code contains smth like codevar msglttranslategtThis stringlttranslategtcode then, when its being served by the framework, codelttranslategtcode tags are translated with p  precodepregreplacecallbacklttranslategt.lttranslategti, callback, content codepre  pWhere codecallbackcode is the function that translates codecontentcode. p  pThe codecallbackcode can be boiled down to this simple code which still will cause JS to render improperlyp  precodecallback  functionmatches      return matches[1]  codepre  pAll in all it works well on Linux, but when I try running that on Windows, my Firefox refuses to interpret translated JS codep  pHas anyone had any similar problemsp  pIve also tried codepregreplacecode, codepregreplacecallbackcode and even codestrreplacecode just for fun. Any string replacement in JS code leads to errors on client side. Explicitly setting codecharsetutf8code in codeContentTypecode header doesnt help either. p
Negative 11272 pConsider the following HTML snippedp  precodeltinput typesubmit valueDelete selectedgtltinput typesubmit valuePrint selectedgt ltdiv classtablegt   ltdiv classrowgt     ltspan classcellgtltinput typecheckbox namechose value1gtltspangt     ltspan classcellgtltinput typetext namename valueJoegtltspangt     ltspan classcellgtltinput typetext nameage value23gtltspangt     ltspan classcellgtltinput typesubmit namesave valueSavegtltspangt     ltspan classcellgtltinput typesubmit namedelete valueDeletegtltspangt   ltdivgt   ltdiv classrowgt     ltspan classcellgtltinput typecheckbox namechose value2gtltspangt     ltspan classcellgtltinput typetext namename valueJackgtltspangt     ltspan classcellgtltinput typetext nameage value42gtltspangt     ltspan classcellgtltinput typesubmit namesave valueSavegtltspangt     ltspan classcellgtltinput typesubmit namedelete valueDeletegtltspangt   ltdivgt ltdivgt codepre  pThe result is the following documentp  pimg srchttpi.stack.imgur.comDvYib.png altenter image description herep  pI want to crate two forms in such a way that the upper buttons submit the ckeckboxes...p  pimg srchttpi.stack.imgur.comukCyB.png altenter image description herep  p...and the row buttons submit the inputs in the same linep  pimg srchttpi.stack.imgur.comqM94p.png altenter image description herep  pAlthough this example has only two lines, I would like to know how to do it to an arbitrary number of rows. Also, the solution strongshould not use JavaScriptstrong even because I know how to do it with JavaScript anyway. OTOH one can rearrange the position of elements and use CSS if not changing the visual result.p  pSo, is it possible to do itp  pstrongNotestrong I am using codeltdivgtcodes instead of codelttablegtcode so we need not to think about the correctness of using forms inside tables.p
Negative 11272 pIm using a codeWebAPI GETcode to return JSON for a Report.p  pThe codeGETcode method returns a simple codedb.Reports.ToListcodep  pThis is the dump of the data I retrievep  precode         Project              Location                  LocationId 7,                 Description New York             ,             Department                  DepartmentId 7,                 Description Engineering             ,             ProjectId 7,             Description Project3,             LocationId 7,             DepartmentId 7         ,         Person              Email emailgmail.com,             FirstName John,             LastName Doe,             IsActive true         ,         StatusCode              StatusId 8,             Description Accepted         ,         ReportId d4cddb3fea6a4b0a982019bd8ee43b3a,         Description Report 3,         RoundTrip 45.88,         IsBillable true,         StartDate 20130627T000000,         EndDate 20130627T143632.467,         TimeUpdated AAAAAAAAJxM     , ...   codepre  pThis is the related Report declarationp    precodepublic class Report      public Guid ReportId  get set      public string Description  get set      public double RoundTrip  get set      public bool IsBillable  get set       public DateTime StartDate  get set      public DateTime EndDate  get set       public virtual Project Project  get set       public byte[] TimeUpdated  get set       public virtual Person Person  get set       public virtual StatusCode StatusCode  get set   codepre  pIn this situation, Id really like to just have the Ids of the various objects contained in the codeReportcode class.  For example, Id really just like to seep  precode    Project 7,     Location 7,     Department 7,     Person emailgmail.com,     StatusCode 8,     ReportId d4cddb3fea6a4b0a982019bd8ee43b3a,     Description Report 3,     RoundTrip 45.88,     IsBillable true,     StartDate 20130627T000000,     EndDate 20130627T143632.467,     TimeUpdated AAAAAAAAJxM codepre  ol liIs there a relatively easy way to go about doing this, or would it be in my better interests to just further parse the result Im seeing alreadyli liWhy does EF by default create these objects within the JSON rather than just the foreign keysli ol
Negative 11272 pSay I have a frameset with a frame where Google is loaded. I want to prevent Google from navigating anywhere when the user click on a link or a button. Is this possiblep
Negative 11272 pI have a codeFragmentcode but if it is important it can be an codeActivitycode too with 8 codeEditTextcode. The entries should be stored but separated. So at the end there should be 8 different lists with the associated entries. The entries are only codeIntegerscode.p  pWhat is the best way to store these entries in 8 different listsp
Negative 11272 pI have a horizontal menu that is fixed to the top of the page and built by the following listp  precodeltdiv idmenugt   ltul idnavgt     ltligtlta hrefgtHomeltagtltligt     ltligtlta hrefgtblogltagtltligt     ltligtlta hrefgtmore infoltagtltligt     ltligtlta hrefgtcontactltagtltligt   ltulgt ltdivgt codepre  pCurrently there is an empty space to the far left of the home menu link.  How could I go about having an image of their logo show up in this location after the user scrolls down the page 150px  p  pI imagine this is a combo of javascript and CSS which is fine, I just need a roadmap of how to achieve the result.  Thanks.p
Negative 11272 pThis may be dumb or obvious, but I am learning to make sty files and I have been modifying some code from the beamerposter project. Anyway, I have thisp  precodedefpostercolumn1 begincolumn1textwidth       beginbeamercolorbox[center,wdtextwidth]postercolumn         beginminipage[T].95textwidth             parbox[t][columnheight]textwidth   defendpostercolumn          endminipage       endbeamercolorbox     endcolumn  codepre  pObviously the parbox command is commented out, but I want it to start there and end in the end block. In effect, I want this p  precodedefpostercolumn1 begincolumn1textwidth       beginbeamercolorbox[center,wdtextwidth]postercolumn         beginminipage[T].95textwidth             parbox[t][columnheight]textwidth   defendpostercolumn                   endminipage       endbeamercolorbox     endcolumn  codepre  pBut naturally, this doesnt work because the compiler gets confused and thinks the endpostercolumn section is closing. Is there some obvious way to get around thatp  pThank you.p
Negative 11272 pI did test this code, but it cause SIGABRT error. p  precodeNSArray array  [NSKeyedUnarchiver unarchiveObjectWithDatadata] codepre  pNSData is plist data with xml format. This code works fine.p  precode[urlData writeToFile[self docPath] atomicallyYES] array  [[NSMutableArray alloc] initWithContentsOfFile[self docPath]] codepre  pHow can I change NSData to NSArray without file conversionp
Negative 11272 pi have created a website which has a fullscreen google map background where there is a groundoverlay. On every dektop and android browser the ground overlay image seems to show fine, but on iphone, ipad safari when i debug i see that image has been requested and downloaded status 200 etc, but on preview it shows the blue question mark of death dunno whats it called. Why is it sop  pBtw due to images huge resolution and size 4038x2738, 2.8MB i preload it with a div on loading as background size, after laoding it i delete the div.p
Negative 11272 pA really simple question but I just cant seem to get it working.p  pThere is only one codePropertycode included below but there could be more than one within codePropertiescode. How can I iterate through this hash and display just the codeNamecode of each codePropertycodep  precodeGetPropertiesResponsegtPropertiesgtPropertygtBreakfastgtIN, CountrygtGB, CurrencygtGBP, Idgt1834, NamegtHotel Name codepre  pIve tried this in my viewp  precodelt json[GetPropertiesResponse][Properties][Property].each do property gt   lt property[Name] gt lt end gt codepre  pIm getting this errorp  pstrongno implicit conversion of String into Integerstrongp
