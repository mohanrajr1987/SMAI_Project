<p>This is my first time trying to use NSUndoManager and i'm not sure where I should be putting it/what i'm missing. I'm making an application that has a map view with a draw button and undo button. I have the draw button enable the user to draw a polyline and every time their finger leaves the screen it connects another line to the line they just drew. I want the undo button to get rid of the last line that they drew. </p>  <p>some of what I have so far...</p>  <pre><code>- (void)viewDidLoad { [super viewDidLoad]; ... ... undoManager = [[NSUndoManager alloc]init]; }  - (IBAction)oopsButton:(id)sender {  [undoManager undo];  } - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event  - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{ .... .... [[undoManager prepareWithInvocationTarget:self]touchesEnded:(touches) withEvent:event]; [undoManager setActionName:NSLocalizedString(@"Route Changed", @"route undo")]; }  - (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id &lt;MKOverlay&gt;)overlay  ... ... </code></pre>  <p>right now, when I click undo, it undoes one line but that's all. I need it to keep undoing for as many times as the user clicks. Thanks for any help on this, i've been looking all over google and stack and haven't found anything that helps yet.</p>