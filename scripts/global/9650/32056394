<p>My udp class is not receiving the updated value from the stream. Device sends data continuously and when any alarm activated it add the code in stream and sends the updated value but my class is not receiving the updated value unless I restart the program.</p>  <p>here is my udp listener class. </p>  <pre><code>  public class    {         public static int PORT_NUMBER { get; set; }         public string IpAddress { get; set; }         private readonly UdpClient udp;         public event Action&lt;object, EventArgs&gt; msgChanged;         IAsyncResult ar_ = null;          public UDPListener(string ipaddr, int port)         {             IpAddress = ipaddr;             PORT_NUMBER = port;             udp = new UdpClient(PORT_NUMBER);             Start();         }          public void Start()         {             StartListening();         }          public void Stop()         {             try             {                 udp.Close();             }             catch { /* not necessary */ }         }          private void StartListening()         {             ar_ = udp.BeginReceive(Receive, new object());         }          private void Receive(IAsyncResult ar)         {             try             {                 Thread.Sleep(150);                 IPEndPoint ip = new IPEndPoint(IPAddress.Parse(IpAddress), PORT_NUMBER);                 byte[] bytes = udp.EndReceive(ar, ref ip);                 string message = Encoding.ASCII.GetString(bytes);                  //raise event..                 if (message.StartsWith("S"))                     if (msgChanged != null)                         msgChanged(message, EventArgs.Empty);             }             catch (Exception ex)             {                 Debug.WriteLine("Error in UDPListner..." + ex.Message);             }             finally             {                 StartListening();             }         }     } </code></pre>  <p>Now what is happening when the program starts it will receive data "S0000.." but when alarm raises data changes to "S8000..etc" but this class continuously receiving the same "S000.." data unless I restart the class. </p>  <p>When I run the udp listener in while loop its works perfectly fine, it receives the updated stream and changes when alarm goes off. </p>  <p>here is the code for while loop udp.</p>  <pre><code> while (!StopRunning)  {      Thread.Sleep(150);      udp = new UdpClient(PORT_NUMBER, AddressFamily.InterNetwork);      var ep = default(IPEndPoint);      var data = udp.Receive(ref ep);      udp.Close();      string msg = Encoding.ASCII.GetString(data);      if (msgChanged != null)          msgChanged(msg, EventArgs.Empty);  } </code></pre>  <p>But I cannot make use of while loop because I have to fit this program in window service. </p>