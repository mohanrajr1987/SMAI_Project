<p>Every time i try to build an android app, that uses ndk to run native code, i get the following error:</p>  <pre><code>Error:Gradle: Execution failed for task ':sampleNDK:ndkBuild'. &gt; Process 'command 'C:\NDK\android-ndk-r10e/ndk-build.cmd'' finished with non-zero exit value 2 </code></pre>  <p>I use Intellij with a grandle projekt. I think the error appears in this function in the build.gradle file:</p>  <pre><code>task ndkBuild(type: Exec) {     def ndkDir = plugins.getPlugin('com.android.application').sdkHandler.getNdkFolder()      if(org.gradle.internal.os.OperatingSystem.current().windows){         commandLine "$ndkDir/ndk-build.cmd", 'NDK_PROJECT_PATH=src/main'         //does not work too         //commandLine "$ndkDir\\ndk-build.cmd", 'NDK_PROJECT_PATH=src/main'     }else{         commandLine "$ndkDir/ndk-build", 'NDK_PROJECT_PATH=src/main'     } } </code></pre>  <p>In fact that i'm using windows, i think the error appears in the if case.</p>  <p>Does anyone know what went wrong or what i can try to avoid the failure?</p>