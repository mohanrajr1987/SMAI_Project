<p>I have an xml formatter which extends BufferedMediaTypeFormatter  and serializes any object that is a return type of an api controller action. However The xml reader on the other end needs all the single quotes replaced. How do I write the formatter to do this? I could replace the actual content of the objects but I think this should be the jobs of the serializer. </p>  <p>This is the serializer:</p>  <pre><code>public sealed class OmittedNamespaceXmlFormatter : BufferedMediaTypeFormatter     {         public OmittedNamespaceXmlFormatter()         {             SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/xml"));             SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/xml"));         }          public override bool CanWriteType(Type type)         {             return true;         }          public override bool CanReadType(Type type)         {             return true;         }          public override void WriteToStream(Type type, object value, Stream writeStream, HttpContent content)         {             var settings = new XmlWriterSettings {OmitXmlDeclaration = true};               var writer = XmlWriter.Create(writeStream, settings);              var serializer = new XmlSerializer(value.GetType());              var nameSpaces = new XmlSerializerNamespaces();              nameSpaces.Add(string.Empty, string.Empty);              serializer.Serialize(writer, value, nameSpaces);         }          public override object ReadFromStream(Type type, Stream readStream, HttpContent content, IFormatterLogger formatterLogger)         {             return Deserialize(content.ToString().Replace("'", "''"), type);         }          private object Deserialize(string input, Type toType)         {             var serializer = new XmlSerializer(toType);              using (var obj = new StringReader(input)) return serializer.Deserialize(obj);         }      } </code></pre>  <p>There doesn't seem to be a way of hijacking the xml string before it is returned so as to replace characters because WriteToStream methods return type is void.</p>