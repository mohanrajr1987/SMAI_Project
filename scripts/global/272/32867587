<p>I'm forming an HTML document through an XSLT stylesheet. In that document is a table contain some rainfall data, Min temperatures and Maximum temperatures and solar radiation for each day.</p>  <p>The problem I have is that when I attempt to retrieve the highest minimum temperature and highlight its cell it crashes the browser each time I load the file. This is what I have so far: weather.xsl</p>  <pre><code>    &lt;?xml version="1.0" encoding="UTF-8"?&gt;     &lt;!--     Document   : weather.xsl     Created on : September 30, 2015, 5:37 PM     Author     : rory     Description:         Purpose of transformation follows.     --&gt;  &lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;     &lt;xsl:output method="html"/&gt;      &lt;xsl:variable name="year" select="2015"/&gt;     &lt;xsl:variable name="x" select="//measurement[@year=$year]"/&gt;     &lt;xsl:variable name="monthsOfYear" select="$x[@day=1]/month"/&gt;     &lt;xsl:variable name="daysOfMonth" select="$x[@month=1]/day"/&gt;     &lt;xsl:variable name="highestRainfall" select="$x/rainfall[.!=''][not( . &amp;lt; $x/rainfall)]"/&gt;     &lt;xsl:variable name="highestMinTemp" select="//temperature[@type='minimum' and .!=''][not( . &amp;lt; //temperature[@type='minimum'])]" /&gt;      &lt;!-- TODO customize transformation rules           syntax recommendation http://www.w3.org/TR/xslt      --&gt;     &lt;xsl:template match="weather"&gt;         &lt;html&gt;             &lt;head&gt;                 &lt;title&gt;Formatted Weather Outputs (Question 6)&lt;/title&gt;                  &lt;style&gt;                     .odd{                         background: lightgreen;                     }                     .even{                         background: violet;                     }                     .negative{                         color: red;                     }                     .highest{                         background: gold;                     }                 &lt;/style&gt;             &lt;/head&gt;             &lt;body&gt;                 &lt;table border="1" style="text-align:center;border-collapse:collapse;"&gt;                     &lt;tr&gt;                         &lt;th&gt;Date (DD/MM/YYYY)&lt;/th&gt;                         &lt;th&gt;Min Temp (&lt;sup&gt;o&lt;/sup&gt;C)&lt;/th&gt;                         &lt;th&gt;Max Temp (&lt;sup&gt;o&lt;/sup&gt;C)&lt;/th&gt;                         &lt;th&gt;Solar Radiation (kwh)&lt;/th&gt;                         &lt;th&gt;Rainfall (mm)&lt;/th&gt;                     &lt;/tr&gt;                      &lt;!-- Only display dates for 2015 --&gt;                         &lt;xsl:for-each select="measurement[@year='2015']"&gt;                             &lt;tr&gt;                                 &lt;xsl:attribute name="class"&gt;                                     &lt;xsl:choose&gt;                                         &lt;xsl:when test="(@month mod 2 != 0)"&gt;odd&lt;/xsl:when&gt;                                         &lt;xsl:otherwise&gt;even&lt;/xsl:otherwise&gt;                                     &lt;/xsl:choose&gt;                                 &lt;/xsl:attribute&gt;                                  &lt;td&gt;                                     &lt;xsl:value-of select="concat(@day, '/', @month, '/', @year)" /&gt;                                 &lt;/td&gt;                                 &lt;td&gt;                                     &lt;xsl:attribute name="class"&gt;                                         &lt;xsl:choose&gt;                                             &lt;xsl:when test="temperature[@type='minimum'] &amp;lt; 0"&gt;negative&lt;/xsl:when&gt;                                         &lt;/xsl:choose&gt;                                     &lt;/xsl:attribute&gt;                                     &lt;xsl:variable name="miniTemp" select="temperature[@type='minimum']" /&gt;                                     &lt;xsl:if test=" $miniTemp = $highestMinTemp"&gt;                                         &lt;xsl:attribute name="style"&gt;background-color:gold&lt;/xsl:attribute&gt;                                     &lt;/xsl:if&gt;                                     &lt;xsl:value-of select="temperature[@type='minimum']" /&gt;                                 &lt;/td&gt;                                 &lt;td&gt;                                         &lt;xsl:value-of select="temperature[@type='maximum']" /&gt;                                                                    &lt;/td&gt;                                 &lt;td&gt;                                     &lt;xsl:value-of select="solar"/&gt;                                 &lt;/td&gt;                                 &lt;td&gt;                                     &lt;xsl:if test=" rainfall = $highestRainfall"&gt;                                         &lt;xsl:attribute name="style"&gt;background-color:gold&lt;/xsl:attribute&gt;                                     &lt;/xsl:if&gt;                                     &lt;xsl:value-of select="rainfall" /&gt;                                 &lt;/td&gt;                             &lt;/tr&gt;                         &lt;/xsl:for-each&gt;                 &lt;/table&gt;             &lt;/body&gt;         &lt;/html&gt;     &lt;/xsl:template&gt;  &lt;/xsl:stylesheet&gt; </code></pre>  <p>It's specifically crashing at the section that looks as follows:</p>  <pre><code>&lt;xsl:variable name="miniTemp" select="temperature[@type='minimum']" /&gt;     &lt;xsl:if test=" $miniTemp = $highestMinTemp"&gt;        &lt;xsl:attribute name="style"&gt;background-color:gold&lt;/xsl:attribute&gt;     &lt;/xsl:if&gt; </code></pre>  <p>If anyone could offer some help or advice I'd very much appreciate it.</p>