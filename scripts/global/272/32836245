<p>I want to use 'variable' with condition and apply a template.</p>  <pre><code>&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;document&gt;     &lt;body&gt;         &lt;aaa right="abc" /&gt;         &lt;bbb right="zzz" /&gt;     &lt;/body&gt;     &lt;body&gt;         &lt;aaa left="def" /&gt;     &lt;/body&gt; &lt;/document&gt; </code></pre>  <p>I show a XSL(version="1.0") sample below.</p>  <pre><code>&lt;xsl:template match="body"&gt;     &lt;xsl:variable name="leftA" select="body/aaa/@left" /&gt;     &lt;xsl:variable name="leftB" select="body/bbb/@left" /&gt;     &lt;xsl:variable name="left"&gt;         &lt;xsl:if test="not($leftA)"&gt;             &lt;xsl:value-of select="$leftB"/&gt;         &lt;/xsl:if&gt;         &lt;xsl:value-of select="$leftA"/&gt;     &lt;/xsl:variable&gt;     &lt;xsl:if test="$left"&gt;         &lt;xsl:apply-templates select="$left"&gt;     &lt;/xsl:if&gt; &lt;/xsl:template&gt;  &lt;xsl:template match="@left"&gt;     code here &lt;/xsl:template&gt; </code></pre>  <p>When both <code>$leftA</code> and <code>$leftB</code> don't exist in XML, I have a error. Doesn't my XSL make sense? How can I avoid errors? The error is <code>Expression must evaluate to a node-set</code>.</p>