<p>I already saw variants of my problem under  <a href="http://stackoverflow.com/questions/15194718/how-to-merge-two-xml-files-with-xslt">how-to-merge-two-xml-files-with-xslt</a> or <a href="http://stackoverflow.com/questions/12423701/how-can-i-merge-these-two-xml-files-using-xslt">how-can-i-merge-these-two-xml-files-using-xslt</a> , but these examples do not handle the text-output and also not handle a static refernece to'default.xml'.</p>  <p>I am trying to generate a C headerfile beeing generated from a defaults.xml that gets amended by an target.xml.</p>  <p>I am using xsltproc as xslt processor and would like to be able to do  <code>xslproc merg.xsl target1.xml &gt; target1.h</code>.</p>  <p>Meaning to have one defaults.xml file and different target.xml files</p>  <p>example defaults.xml:</p>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;  &lt;defaults&gt; &lt;ConfigParam name="F_SAMPLE_STRING"&gt;   &lt;value&gt;{1,0,0}&lt;/value&gt; &lt;/ConfigParam&gt;  &lt;ConfigParam name="F_SAMPLE_INT"&gt;   &lt;value&gt;40&lt;/value&gt; &lt;/ConfigParam&gt;  &lt;ConfigParam name="F_SAMPLE_X"&gt;   &lt;value&gt;TRUE_DEF&lt;/value&gt; &lt;/ConfigParam&gt;  &lt;/defaults&gt;</code></pre> </div> </div>  and a sample target1.xml</p>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;Override&gt; 		&lt;ConfigParam name="F_SAMPLE_STRING"&gt; 		  &lt;value&gt;"hallo"&lt;/value&gt; 		&lt;/ConfigParam&gt;  		&lt;ConfigParam name="F_SAMPLE_Y"&gt; 		  &lt;value&gt;TRUE&lt;/value&gt; 		&lt;/ConfigParam&gt; &lt;/Override&gt;</code></pre> </div> </div> </p>  <p>My own starting xslt looks like this, but does lack the merging/amendment part</p>  <blockquote>   <p></p> </blockquote>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;?xml version="1.0"?&gt;  &lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;  &lt;xsl:output method="text"/&gt;  &lt;xsl:param name="fileName" select=" 'defaults.xml' " /&gt; &lt;xsl:param name="defaults" select="document($fileName)" /&gt; &lt;xsl:variable name="defaultParams" select="$defaults//ConfigParam" /&gt;     &lt;xsl:template match="@* | node() "&gt;     &lt;xsl:copy&gt;       &lt;xsl:apply-templates select="@* | node()"/&gt;     &lt;/xsl:copy&gt;   &lt;/xsl:template&gt;         &lt;xsl:template match="ConfigParam"&gt;   #define &lt;xsl:value-of select="@name"/&gt;&lt;xsl:text&gt; &lt;/xsl:text&gt;&lt;xsl:value-of select="value"/&gt;    &lt;xsl:text&gt;&amp;#xd;&amp;#xa;&lt;/xsl:text&gt;    &lt;/xsl:template&gt;  &lt;/xsl:stylesheet&gt;</code></pre> </div> </div> </p>  <p>The other examples I saw use a static target.xml or use both files (target/defaults) from static locations. They also do not output text but xml. I am new to xslt and can not come up with a good merging identity pattern. Please help.</p>