<p>I've got a Dockerfile for some lua and torch related tasks and I'm trying to install some rocks using luarocks.</p>  <pre><code>FROM ubuntu:14.04 RUN rm /bin/sh &amp;&amp; ln -s /bin/bash /bin/sh  RUN apt-get update -y RUN apt-get install -y curl git  RUN curl -s https://raw.githubusercontent.com/torch/ezinstall/master/install-deps | bash RUN git clone https://github.com/torch/distro.git ~/torch --recursive RUN cd ~/torch; ./install.sh  RUN source ~/.bashrc  RUN luarocks install nngraph RUN luarocks install optim RUN luarocks install nn  RUN luarocks install cltorch RUN luarocks install clnn </code></pre>  <p><code>docker build</code> runs fine up until the first luarocks call: <code>RUN luarocks install nngraph</code> at which point it stops and throws the error:</p>  <pre><code>/bin/sh: luarocks: command not found </code></pre>  <p>If I comment out the luarocks lines, the build runs fine. Using that image, I can create a container and using bash, run luarocks as expected.</p>  <p>Of course, I don't particularly want to have to do this every time I start up the container, so I'm wondering if there's anything I can do to make this work. I have a feeling that this problem has something to do with the line <code>RUN rm /bin/sh &amp;&amp; ln -s /bin/bash /bin/sh</code> but I need that to be able to run the line <code>RUN source ~/.bashrc</code>.</p>  <p>Thanks.</p>