<p>Im using hapi 6.5.1 and trying to send csv file to client, on client Im using Angular. but the following code does not work.</p>  <pre><code>function sendCsvFile(data,reply) {    var filePath = __dirname + '/reports.csv';   var file = fs.openSync(filePath,'w');    fs.writeFile(filePath, data,function(err) {      if(err) {       reply('Cannot parse csv data');       return;     }      fs.readFile(filePath, function(error, content) {        if(err) {         reply('Cannot get csv file');         return;       }        reply.file(filePath)          .header('Content-Type', 'text/csv')          .header("Content-Disposition", "attachment; filename=" + 'reports.csv');        });    })  } </code></pre>  <p>What Im doing wrong</p>