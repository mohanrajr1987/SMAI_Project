<p>i'm downloading a remote mp3 file, saving it in my /tmp directory and renaming it. after that i use my previous PHP download headers which work fine for all other files but get failed for this file at first attempt of user click. browser sends 1kb file downloaded. On a second attempt it works fine for the remote copied file too. i'm unable to determine what's logic behind it. i have tried <code>sleep()</code> of 5 seconds between coping and downloading but it didn't work. this is how i'm doing.</p>  <pre><code>if (!copy($remotefilename,$tmp_dir.$newName)) { // works fine         die('copy failed !');     }  $filename = $tmp_dir.$newName; rename($filename,$tmp_dir.$newName.'.mp3'); // works fine </code></pre>  <p>onward i am downloading this file with my old working headers</p>  <pre><code>header("Pragma: public"); header("Expires: 0"); header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); header("Cache-Control: private",false); // required for certain browsers  header("Content-Type: audio/mpeg");  header("Content-Disposition: attachment; filename=\"".basename($filename)."\";" ); header("Content-Transfer-Encoding: binary"); header("Content-Length: ".filesize($filename)); readfile("$filename"); exit(); </code></pre>  <p>this sends me 1kb file with correct file name and extension at first attempt of click. for second attempt <em>(clicking again on download link)</em> gives complete file with everything OK. i don't know where i am doing wrong or is there any other way to do this specific task. it should be downloaded correctly on first attempt. please advise.</p>  <p>note: all process starts when user clicks on <code>download</code> link. keep to remembered that the file is being copied and renamed successfully before downloaded.</p>