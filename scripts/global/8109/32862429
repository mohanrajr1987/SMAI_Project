<p>I am trying to create a csv file upon a button click. The problem i have is that the file wont download, it just echos out the content. </p>  <p>This is my code </p>  <pre><code>class csv_writer {  public $dataArray; public $filename; public $csvHeader;   public function create_csv() { /** *  * Creates the CSV and make it ready for download */      $fp = fopen('php://output', 'w');     fprintf($fp, chr(0xEF).chr(0xBB).chr(0xBF) );      fputcsv($fp, $this-&gt;csvHeader, ';',' ');      foreach ( $this-&gt;dataArray as $ferow ) {          fputcsv($fp, $ferow,';');      }      header('Content-Encoding: UTF-8');     header('Content-type: text/csv; charset=UTF-8');     header('Content-Disposition: attachment; filename="'.$this-&gt;filename.'.csv"');      fclose($fp);} }  </code></pre>  <p>This is how i call the class: </p>  <pre><code>$csv = new csv_writer(); $csv-&gt;dataArray = array( 'value1', 'value2' ); $csv-&gt;filename  = 'test'; $csv-&gt;csvHeader = array( 'value1', 'value2' );  $csv-&gt;create_csv(); </code></pre>  <p>I have tried every other exmaple here on stack, but with no luck! Hopefully there is a bright mind out there that can help me out! </p>