<p>I am using the following nginx configuration that supports requests to a legacy PHP application (that lives at <code>legacy.app.local</code>), but I'm also attempting to <code>proxy_pass</code> requests on to a new PHP application (that lives at <code>newapp.dev</code>).</p>  <pre><code>upstream newapp {   server newapp.dev; }  server {    listen 80;   server_name legacy.app.local;   root /path/to/app;    location = /favicon.ico { access_log off; log_not_found off; }   location = /robots.txt  { access_log off; log_not_found off; }    location ~ /legacy-app/.*\.css$ {     return 204;   }    location ~ /legacy-app/.*\.js$ {     return 204;   }    location @post_action {     rewrite ^ /legacy-app$uri;   }    location /legacy-app {     internal;     proxy_pass http://newapp$uri;     proxy_set_header Host $http_host;     proxy_set_header X-Real-IP $remote_addr;     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    }    location / {    index index.php;    try_files $uri $uri/ /index.php?$query_string;     }    location ~ \.php$ {     fastcgi_split_path_info ^(.+\.php)(/.+)$;     fastcgi_pass unix:/var/run/php5-fpm.sock;     fastcgi_index index.php;     include fastcgi_params;     fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;     fastcgi_intercept_errors off;     fastcgi_buffer_size 16k;     fastcgi_buffers 4 16k;      post_action @post_action;   }    location ~ /\.ht {     deny all;   } } </code></pre>  <p>I want all GET/POST requests to be forwarded to <code>newapp.dev/legacy-app/</code>. Why doesn't this configuration work?</p>