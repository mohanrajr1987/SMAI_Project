<p>I am in the process of adding client/server UDP support to <a href="http://www.thekogans.net/?page_id=63" rel="nofollow">thekogans stream</a> library and have run into a problem on Windows. Here is what I am doing;</p>  <ul> <li>server udp socket is bound to 0.0.0.0:8854.</li> <li>server udp socket has IP_PKTINFO = true.</li> <li>server udp socket has SO_REUSEADDR = true.</li> <li>server udp socket starts an overlapped WSARecvMsg operation.</li> <li>client binds to 0.0.0.0:0 and connects to 127.0.0.1:8854.</li> <li>client sends a message using WSASend.</li> <li><p>server socket receives the message and creates a new UDP socket with the following attributes:</p>  <ul> <li>SO_REUSEADDR = true</li> <li>bind to address returned by IP_PKTINFO (127.0.0.1:8854).</li> <li>connect to whatever address was returned by WSARecvMsg.</li> </ul></li> <li><p>client and the new server UDP socket exchange a bunch of messages (using WSASend and WSARecv).</p></li> </ul>  <p>Here is the behavior I am seeing:</p>  <ul> <li>the first connection between client and server works flawlessly.</li> <li>I then have the client exit and restart.</li> <li>all other packets from the client are dropped.</li> <li>if I set a timeout on the new server UDP socket (127.0.0.1:8854) and it times out and is closed, then the client can connect again. In other words, the scheme seems to work but only one client at a time. If the server has a concrete (not wildcard) socket created for the same port, no other client can send it messages.</li> </ul>  <p>Some more information that may be helpful: The server is async and uses IOCP. This code (using epoll and kqueue) works perfectly on Linux and OS X. I feel like I am missing some flag somewhere that winsock needs set but I can't seem to find it. I have tried googling various search terms but have hit a wall.</p>  <p>Any and all help would be greatly appreciated. thank you.</p>