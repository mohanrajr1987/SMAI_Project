<p><em>Preface: We are working hard to upgrade our apps Ruby and Rails versions, but need to work with what we're on at the moment.</em></p>  <p>We have functionality to export data to CSV in our RoR app.</p>  <p>We recently upgraded to Ruby 1.8.7, Rails 3.1, and the performance of this CSV output slowed incredibly.  We're talking about over a minute for ~2000 records, which seems a bit ridiculous.</p>  <p><strong>Also, when a request for this is processing, it basically brings down the server for other requests to this app and others.</strong></p>  <p>I have:</p>  <ul> <li>Upgraded from CSV to the FasterCSV gem (no difference or even slower!)</li> <li>Made sure that we are eager-loading everything possible in the AR query</li> <li>Verified that it is not query time, but the actual call to FasterCSV to generate the CSV from the AR collection, that is taking vast majority of response time</li> </ul>  <p>I'm pretty sure that getting to Ruby 1.9.x and higher Rails versions will allow for better performance, but really need to be able to achieve acceptable response times (&lt;30 seconds, at least) now.</p>  <p>Any help/guidance much appreciated.</p>