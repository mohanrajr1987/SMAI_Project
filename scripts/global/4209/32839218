<p>I'm having a form inside a bootstrap modal window, in which I upload some files.</p>  <p>This is my script</p>  <pre><code>&lt;?php  /**  * Handle the file uploading for the article  */ public function upload_ajax() {     $this-&gt;output-&gt;enable_profiler(false);      // check if the article has been created     if (!$this-&gt;input-&gt;post('post_id')) {         // do something here ..     } else {         // set upload configs         $dir = FCPATH . '/posts';         $config = array(             'upload_path' =&gt; $dir,             'allowed_types' =&gt; 'gif|jpg|png',             'max_width' =&gt; '1024',             'max_height' =&gt; '768',         );         $this-&gt;load-&gt;library('upload', $config);          // try to upload the file         if (!$this-&gt;upload-&gt;do_upload('userfile')) {             $response = array(                 'status' =&gt; '400',                 'message' =&gt; $this-&gt;upload-&gt;display_errors(),             );         } else {             $data = $this-&gt;upload-&gt;data();             $response = array(                 'status' =&gt; '200',                 'message' =&gt; '&lt;p&gt;The image uploaded successfully&lt;/p&gt;',             );         }     }      $this-&gt;output-&gt;set_content_type('application/json', 'utf-8')         -&gt;set_output(json_encode($response, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE | JSON_UNESCAPED_SLASHES))-&gt;_display();     exit(); } </code></pre>  <p>the javascript</p>  <pre><code>$('#btn-upload').on('click', function (event) {   event.preventDefault();    $.ajax({     url : url, // the value from the form action attribute     type : 'post',     data : {       'post_id' : $('[name="postID"]').val(),       'userfile' : $('[name="userfile"]').val(),       'name' : $('[name="userfile"]').attr('name'),     },     dataType : 'json',     success : function(response) {       $('#upload-results').removeClass('alert alert-success alert-danger').html('');        if (response.status == 200) {         $('.upload-form').hide();         $('#upload-results').addClass('alert alert-success').html(response.message);       }        if (response.status == 400) {         $('.upload-form').show();         $('#upload-results').addClass('alert alert-danger').html(response.message);       }     },   }); }); </code></pre>  <p>and the view</p>  <pre><code>&lt;div class="modal-body"&gt;     &lt;div id="upload-results"&gt;&lt;/div&gt;      &lt;?php echo form_open_multipart('posts/upload_ajax', array('class' =&gt; 'form-horizontal upload-form')); ?&gt;      &lt;input type="hidden" name="postID"/&gt;      &lt;div class="form-group"&gt;         &lt;label class="col-sm-3 control-label"&gt;Image Upload&lt;/label&gt;         &lt;div class="col-sm-5"&gt;             &lt;div data-provides="fileinput" class="fileinput fileinput-new"&gt;                 &lt;input type="hidden"&gt;                  &lt;div data-trigger="fileinput" style="width: 200px; height: 150px;" class="fileinput-new thumbnail"&gt;                     &lt;img src="&lt;?php echo base_url('img/default.jpg'); ?&gt;"&gt;                 &lt;/div&gt;                 &lt;div style="max-width: 200px; max-height: 150px; line-height: 6px;" class="fileinput-preview fileinput-exists thumbnail"&gt;&lt;/div&gt;                 &lt;div&gt;                      &lt;span class="btn btn-white btn-file"&gt;                          &lt;span class="fileinput-new"&gt;Select image&lt;/span&gt;                          &lt;span class="fileinput-exists"&gt;Change&lt;/span&gt;                          &lt;input type="file" accept="image/*" name="userfile"/&gt;                      &lt;/span&gt;                     &lt;a data-dismiss="fileinput" class="btn btn-orange fileinput-exists" href="#"&gt;Remove&lt;/a&gt;                 &lt;/div&gt;             &lt;/div&gt;         &lt;/div&gt;     &lt;/div&gt;     &lt;?php echo form_close(); ?&gt; &lt;/div&gt;&lt;!-- /.modal-body --&gt; </code></pre>  <p>The problem is that even if I have selected an image, I always get the validation error <code>"You did not select a file to upload"</code> that comes form the Upload library. However on firebug I can see the 3 variables I'm sending with the ajax request</p>  <pre><code>'post_id' : $('[name="postID"]').val(), // shows e.g. 12 'userfile' : $('[name="userfile"]').val(), // shows e.g. my-image.jpg 'name' : $('[name="userfile"]').attr('name'), // shows userfile </code></pre>  <p>I have also tried this</p>  <pre><code>$userfile = $this-&gt;input-&gt;post('name'); if (!$this-&gt;upload-&gt;do_upload($userfile)) </code></pre>  <p>but no luck. How can I make this work properly ?</p>