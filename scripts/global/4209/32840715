<p>Hi Guys I am having an issue with a Filemaker database website that I have. I have a form that allows users to enter some details and submit them to a filemaker database (At this point a record id is created). On the next page the users details are shown and the RecordID is echoed on the page, the following page allows the user to upload a file to the server, this all works but I want to be able to rename the file on upload to the same as the record id so that we can link file uploads to records in the database.</p>  <p>So currently I have three pages, an addRecord page which allows the user to enter their details, a confirmation page which displays the users details and has a link to the upload page, and finally an upload page which allows the user to upload an image. All of the code is working currently but I can’t seem to work out how to get the image uploaded with the name of the RecordID that was previously created.</p>  <p>Here is the form that I have to submit the user data:</p>  <pre><code>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"&gt; &lt;?php     require_once 'fmview.php';     require_once 'FileMaker.php';     require_once 'error.php';      $cgi = new CGI();     $cgi-&gt;storeFile();      $databaseName = ‘database’;     $layoutName = ‘layout’;      $userName = ‘*********’;     $passWord = ‘*********’;      $fm = &amp; new FileMaker();     $fm-&gt;setProperty('database', $databaseName);     $fm-&gt;setProperty('username', $userName);     $fm-&gt;setProperty('password', $passWord);      ExitOnError($fm);     $layout = $fm-&gt;getLayout($layoutName);     ExitOnError($layout);      // formats for dates and times     $displayDateFormat = '%d/%m/%Y';     $displayTimeFormat = '%H:%M:%S';     $displayDateTimeFormat = '%d/%m/%Y %H:%M:%S';     $submitDateOrder = 'mdy';      class EmptyRecord {         function getRelatedSet($relationName) {             return array(new EmptyRecord());         }          function getField($field, $repetition = 0) {         }          function getRecordId() {         }     }      $record = new EmptyRecord(); ?&gt; &lt;html&gt;     &lt;head&gt;         &lt;meta http-equiv="content-type" content="text/html; charset=utf-8"&gt;         &lt;title&gt;             Add Record         &lt;/title&gt;         &lt;link rel="stylesheet" type="text/css" media="screen" href="agentis.css"&gt;     &lt;/head&gt;     &lt;body&gt;         &lt;div id="header"&gt;                 Database         &lt;/div&gt;         &lt;div id="content"&gt;             &lt;?php include_once 'navigation.php'; ?&gt;             &lt;table cellpadding="0" cellspacing="0" class="contentbg"&gt;                 &lt;tr&gt;                     &lt;td class="contentmidrecords"&gt;                         &lt;div id="contenttitlebg"&gt;                             &lt;h1&gt;                                 Add Record                             &lt;/h1&gt;                         &lt;/div&gt;                         &lt;/table&gt;                         &lt;div class="scrolladd"&gt;                             &lt;table cellpadding="1" cellspacing="0" class="recwidth"&gt;                                 &lt;tr&gt;                                     &lt;td valign="top"&gt;                                         &lt;form method="post" action="confirmation.php"&gt;                                             &lt;div&gt;                                                 &lt;input type="hidden" name="-db" value="&lt;?php echo $databaseName ?&gt;"&gt; &lt;input type="hidden" name="-lay" value=                                                 "&lt;?php echo $layoutName ?&gt;"&gt; &lt;input type="hidden" name="-action" value="new"&gt;                                             &lt;/div&gt;                                             &lt;table cellpadding="1" cellspacing="6" class="record"&gt;                                                 &lt;!-- Display record field values --&gt;                                                 &lt;tr class="field"&gt;                                                     &lt;td class="field_name"&gt;                                                         Name                                                     &lt;/td&gt;                                                     &lt;td class="field_data"&gt;                                                         &lt;?php $fieldValue =          $record-&gt;getField('Name', 0) ; ?&gt;&lt;input class="fieldinput" type="text" size="30" name=                                                         "&lt;?php echo getFieldFormName('Name', 0, $record, true, 'EDITTEXT', 'text');?&gt;" value="&lt;?php echo $fieldValue;?&gt;"&gt;                                                      &lt;/td&gt;                                                 &lt;/tr&gt;                                                 &lt;tr class="field"&gt;                                                     &lt;td class="field_name"&gt;                                                         Email                                                     &lt;/td&gt;                                                     &lt;td class="field_data"&gt;                                                         &lt;?php $fieldValue =          $record-&gt;getField('Email', 0) ; ?&gt;&lt;input class="fieldinput" type="text" size="30" name=                                                         "&lt;?php echo getFieldFormName('Email', 0, $record, true, 'EDITTEXT', 'text');?&gt;" value="&lt;?php echo $fieldValue;?&gt;"&gt;                                                      &lt;/td&gt;                                                 &lt;/tr&gt;                                                 &lt;tr class="field"&gt;                                                     &lt;td class="field_name"&gt;                                                         Record ID                                                     &lt;/td&gt;                                                     &lt;td class="field_data"&gt;                                                         &lt;?php $fieldValue =          $record-&gt;getField('Record ID', 0) ; ?&gt;&lt;?php echo nl2br( $record-&gt;getField('Record ID', 0) )?&gt;                                                     &lt;/td&gt;                                                 &lt;/tr&gt;                                                 &lt;tr class="field"&gt;                                                     &lt;td class="field_name"&gt;                                                         Upload                                                     &lt;/td&gt;                                                     &lt;td class="field_data"&gt;                                                     &lt;/td&gt;                                                 &lt;/tr&gt;                                                 &lt;!--Display record form controls--&gt;                                                 &lt;tr class="field"&gt;                                                     &lt;td class="field_name"&gt;                                                         &amp;nbsp;                                                     &lt;/td&gt;                                                     &lt;td class="field_data"&gt;                                                         &lt;input type="submit" class="buttons" name="-new" value="Save Record"&gt; &lt;input type="reset" class="buttons" name="Reset"                                                         value="Reset"&gt; &lt;input type="button" class="buttons" onclick="window.location='home.php'" name="Cancel" value="Cancel"&gt;                                                      &lt;/td&gt;                                                 &lt;/tr&gt;                                             &lt;/table&gt;                                         &lt;/form&gt;                                     &lt;/td&gt;                                 &lt;/tr&gt;                             &lt;/table&gt;                         &lt;/div&gt;                     &lt;/td&gt;             &lt;/table&gt;         &lt;/div&gt;     &lt;/body&gt; &lt;/html&gt; </code></pre>  <p>Here is the confirmation page:</p>  <pre><code>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"&gt; &lt;?php     require_once 'fmview.php';     require_once 'FileMaker.php';     require_once 'error.php';      $cgi = new CGI();     $cgi-&gt;storeFile();      $databaseName = ‘database’;     $layoutName = ‘layout’;      $userName = ‘*******’;     $passWord = ‘*******’;      $fm = &amp; new FileMaker();     $fm-&gt;setProperty('database', $databaseName);     $fm-&gt;setProperty('username', $userName);     $fm-&gt;setProperty('password', $passWord);      ExitOnError($fm);     $layout = $fm-&gt;getLayout($layoutName);     ExitOnError($layout);      // formats for dates and times     $displayDateFormat = '%d/%m/%Y';     $displayTimeFormat = '%H:%M:%S';     $displayDateTimeFormat = '%d/%m/%Y %H:%M:%S';     $submitDateOrder = 'mdy';      // create the new add command     $newrecordrequest = $fm-&gt;newAddCommand($layoutName);     ExitOnError($newrecordrequest);      // get the submitted record data     $recorddata = $cgi-&gt;get('recorddata');     if (isset ($recorddata)) {          //  submit the data to the db         $result = submitRecordData($recorddata, $newrecordrequest, $cgi, $layout-&gt;listFields());          //  clear the stored record data         $cgi-&gt;clear('recorddata');         ExitOnError($result);         if ($result-&gt;getFetchCount() &gt; 0) {             $records = $result-&gt;getRecords();             $record = $records[0];         }     }     ExitOnError($record); ?&gt; &lt;html&gt;     &lt;head&gt;         &lt;meta http-equiv="content-type" content="text/html; charset=utf-8"&gt;         &lt;link rel="stylesheet" type="text/css" media="screen" href="agentis.css"&gt;         &lt;title&gt;             Confirmation         &lt;/title&gt;     &lt;/head&gt;     &lt;body&gt;         &lt;div id="header"&gt;                 Database         &lt;/div&gt;         &lt;div id="content"&gt;             &lt;!--Navigation Menu--&gt;             &lt;?php include_once 'navigation.php' ?&gt;             &lt;table cellpadding="0" cellspacing="0" class="contentbg"&gt;                 &lt;tr&gt;                     &lt;td class="contentmidrecords"&gt;                         &lt;div id="contenttitlebg"&gt;                             &lt;h1&gt;                                 Confirmation                             &lt;/h1&gt;                         &lt;/div&gt;                         &lt;table class="message" cellpadding="2" cellspacing="2"&gt;                         &lt;/table&gt;                         &lt;div class="scrolladd"&gt;                         &lt;form action="upload.php" method="post" enctype="multipart/form-data"&gt;                             &lt;table cellpadding="1" cellspacing="0" class="recwidth"&gt;                                 &lt;tr&gt;                                     &lt;td valign="top"&gt;                                         &lt;table cellpadding="1" cellspacing="6" class="record"&gt;                                             &lt;!-- Display record field values --&gt;                                             &lt;tr class="field"&gt;                                                 &lt;td class="field_name"&gt;                                                     Name                                                 &lt;/td&gt;                                                 &lt;td class="field_data"&gt;                                                     &lt;?php echo nl2br(storeFieldNames('Name', 0, $record, true, 'EDITTEXT', 'text'))?&gt;                                                 &lt;/td&gt;                                             &lt;/tr&gt;                                             &lt;tr class="field"&gt;                                                 &lt;td class="field_name"&gt;                                                     Email                                                 &lt;/td&gt;                                                 &lt;td class="field_data"&gt;                                                     &lt;?php echo nl2br(storeFieldNames('Email', 0, $record, true, 'EDITTEXT', 'text'))?&gt;                                                 &lt;/td&gt;                                             &lt;/tr&gt;                                             &lt;tr class="field"&gt;                                                 &lt;td class="field_name"&gt;                                                     Record ID                                                 &lt;/td&gt;                                                 &lt;td class="field_data"&gt;                                                     &lt;?php echo nl2br(storeFieldNames('Record ID', 0, $record, false, 'EDITTEXT', 'number'))?&gt;                                                 &lt;/td&gt;                                             &lt;/tr&gt;                                             &lt;tr class="field"&gt;                                                 &lt;td class="field_name"&gt;                                                 Upload                                                  &lt;/td&gt;                                                 &lt;td class="field_data"&gt;      &lt;!--  Upload image: &lt;input name="new_image" type="file" &gt; --&gt;       &lt;input type="submit" name="upload" value="Upload Image Here" &gt;     &lt;/form&gt;             &lt;/table&gt;         &lt;/div&gt;     &lt;/body&gt; &lt;/html&gt; </code></pre>  <p>Here is the File upload page:</p>  <pre><code>&lt;!DOCTYPE html&gt; &lt;html&gt; &lt;body&gt;      &lt;form action="&lt;?php $_SERVER['PHP_SELF'] ?&gt;" method="post" enctype="multipart/form-data"&gt;         Select image to upload:         &lt;input type="file" name="fileToUpload" id="fileToUpload" class="upload_file"&gt;         &lt;input type="submit" value="Upload Image" name="submit"&gt;     &lt;/form&gt;     &lt;?php      // Check if image file is a actual image or fake image     if(isset($_POST["submit"]))      {          $target_dir = "uploads/";         $target_file = $target_dir . '_'. $_FILES["fileToUpload"]["name"];         $uploadOk = 1;         $imageFileType = pathinfo($target_file,PATHINFO_EXTENSION);          $check = getimagesize($_FILES["fileToUpload"]["tmp_name"]);         if($check !== false)          {             echo "File is an image - " . $check["mime"] . ". ";             echo '&lt;a href="'.$target_file.'"&gt;View your uploaded file here&lt;/a&gt;';             $uploadOk = 1;         }          else          {             echo "File is not an image.";             $uploadOk = 0;         }          // Check if file already exists         if (file_exists($target_file))          {             echo "Sorry, file already exists.";             $uploadOk = 0;         }         // Check file size         if ($_FILES["fileToUpload"]["size"] &gt; 500000)          {             echo "Sorry, your file is too large.";             $uploadOk = 0;         }         // Allow certain file formats         if($imageFileType != "jpg" &amp;&amp; $imageFileType != "png" &amp;&amp; $imageFileType != "jpeg"&amp;&amp;         $imageFileType != "gif" )          {             echo "Sorry, only JPG, JPEG, PNG &amp; GIF files are allowed.";             $uploadOk = 0;         }         // Check if $uploadOk is set to 0 by an error         if ($uploadOk == 0)          {             echo "Sorry, your file was not uploaded.";         // if everything is ok, try to upload file         }          else          {             if (move_uploaded_file($_FILES["fileToUpload"]["tmp_name"], $target_file))              {                 echo " The file ". basename( $_FILES["fileToUpload"]["name"]). " has been uploaded.";             }              else              {                 echo "Sorry, there was an error uploading your file.";             }         }     }     ?&gt; &lt;/body&gt; &lt;/html&gt; </code></pre>  <p>Any ideas would be much appreciated.</p>  <p>Just to clarify, I am not having issues with renaming files on upload in general only how I would go about inputting a paramater here from a previous page, specifically the Record ID generated from Filemaker</p>  <p>Thanks</p>