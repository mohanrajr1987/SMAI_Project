<p>I've added a custom fee to my checkout page with the following code:</p>  <pre><code>add_action( 'woocommerce_cart_calculate_fees','woocommerce_custom_surcharge' ); function woocommerce_custom_surcharge() {     global $woocommerce;      if ( is_admin() &amp;&amp; ! defined( 'DOING_AJAX' ) )             return;      $percentage = 0.03;     $surcharge = ( $woocommerce-&gt;cart-&gt;cart_contents_total + $woocommerce-&gt;cart-&gt;shipping_total + $woocommerce-&gt;cart-&gt;tax_total ) * $percentage;     $woocommerce-&gt;cart-&gt;add_fee( 'My Fee', $surcharge, false, '' );  } </code></pre>  <p>Everything works as expected except adding in the tax.  I thought adding </p>  <pre><code>$woocommerce-&gt;cart-&gt;tax_total </code></pre>  <p>would do the trick, but that value is returning 0.</p>  <p>Is there some way to calculate tax before this fee is calculated?</p>