<p>i have an EMF model where some objects contain IDs, and others don't. The id attribute is configured like this:</p>  <p><a href="http://i.stack.imgur.com/Nhcz8.png" rel="nofollow"><img src="http://i.stack.imgur.com/Nhcz8.png" alt="enter image description here"></a></p>  <p>I use the java Diagnostician to check if any of the OCL Constraints are violated:</p>  <pre><code>protected Diagnostic validateModel(EObject modelRoot) {     return Diagnostician.INSTANCE.validate(modelRoot); } </code></pre>  <p>Which works just fine in most cases. But as soon as there are duplicate Ids the Validator throws a ClassCastException, where he tries to cast one of the two objects to the type of the other. What can i do to aviod this? Would an OCL constraint that checks for duplicate Ids help somehow?</p>