<p>In a Rails 3 application I am using <a href="https://github.com/rack/rack-contrib/blob/master/lib/rack/contrib/locale.rb" rel="nofollow">Rack::Locale</a> middleware to automatic discover the language from http request. I have configured only two language for the application: </p>  <pre><code>config.i18n.available_locales = [:en, :de] </code></pre>  <p>Now my problem is to set locale from <code>Rack::Locale</code> if the http request is from <code>:en</code> or <code>:de</code>, otherwise set the locale from the <code>i18n.default_locale</code></p>  <p>I have try to force this configuration in the <code>set_locale</code> method but it seems not work. Have you some experience with <code>Rack::Locale</code> middleware?</p>