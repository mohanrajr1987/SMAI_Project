<p>I'm pretty familiar with Racket, and many in the Scheme and Lisp family, but I have no idea what is up with this error, or what is causing it:</p>  <pre><code>network-biases: contract violation;  given value instantiates a different structure type with the same name   expected: network?   given: (network ...) &lt;-- I omitted this because its useless. </code></pre>  <p>Heres the function where the error is (I have a <a href="https://gist.github.com/christopherdumas/e9b3b1fe416c4dc54805" rel="nofollow">gist</a> of the rest):</p>  <pre><code>(define (update-mini-batch net mini-batch eta)   (define nabla-b (map (lambda (b)              (apply grid (shape b))) (network-biases net)))   (define nabla-w (map (lambda (w)              (apply grid (shape w))) (network-weights net)))    (define-values (nabla-b-new nabla-w-new)     (foldl (lambda (lst bw)        (define x (first lst))        (define y (second lst))        (define-values (nabla-b nabla-w) bw)        (define-values (delta-nabla-b delta-nabla-w) (backprop net x y))         (define nabla-b-new (+/ nabla-b delta-nabla-b))        (define nabla-w-new (+/ nabla-w delta-nabla-w))        (values nabla-b-new nabla-w-new)) (values nabla-b nabla-w) mini-batch))    (struct-copy network net            [biases (map (lambda (b nb)                   (- b (* nb (/ eta (length mini-batch)))))                 (network-biases net) nabla-b-new)]            [weights (map (lambda (w nw)                    (- w (* nw (/ eta (length mini-batch)))))                  (network-weights net) nabla-w-new)])) </code></pre>  <p>I couldn't get an MCVE that actually threw an error, so I don't have one to give.</p>  <p>The distilled basics of what I'm trying to do in the above function is this:</p>  <ul> <li>Calculate new values for a structure's properties, and create a new structure with those new properties.</li> </ul>  <p>- Thanks!!</p>