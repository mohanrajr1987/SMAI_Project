<p>I am curious about how a file compression program writes the compressed file size or the compressed checksum of the file in the file header (i.e. at the beginning in the compressed file). It would be easy if the file is small so the file can be compressed in memory and then header calculated and written followed by the file data. But if the file is very large say a few GB then how will it prepend the file header in the beginning of the compressed file since the compressed file size will only become available after the whole file has been processed?</p>  <p>Does it copy the file compressed data to a new file after writing the header in the new file?</p>