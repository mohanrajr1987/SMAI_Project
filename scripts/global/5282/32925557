<p>I have a string like below and the part of the string which is within double quotes is a URL</p>  <pre><code>sample.company.com 1.12.13.34 - user329 06/Jan/2015:00:28:42 -0500 "GET /cognos10/portal/cgi-bin/cognosisapi.dll?b_action=cognosViewer&amp;ui.action=run&amp;ui.object=/content/folder[@name='MRDW']/folder[@name='Release']/folder[@name='Demand']/folder[@name='Analysis']/report[@name='DAT3']&amp;cv.toolbar=false&amp;cv.header=false&amp;run.prompt=false&amp;p_security=1&amp;p_RptS=DAT3&amp;run.outputFormat=XLWA&amp;p_ropt=xls&amp;p_Prop=BOMJW&amp;p_AVP=&amp;p_MyC=&amp;p_PubC=&amp;p_fBrand=&amp;p_fGblReg=&amp;p_fHtlType=&amp;p_fCorN=&amp;p_fPCtry=&amp;p_fMT=&amp;p_fGblDiv=&amp;p_TFName=&amp;p_PorM=&amp;p_AsOfDate=&amp;p_CDS1=20130108&amp;p_CDE1=20130131&amp;p_BDS=2013-01-08&amp;p_BDE=2013-01-31&amp;p_NetGross=Net&amp;p_Currency=Local&amp;p_RNS=1&amp;p_REV=1&amp;p_ADR=0&amp;p_ADmnd=0&amp;p_TD=0&amp;p_ARN=0&amp;p_ARV=0&amp;p_dBKD=0&amp;p_dSD=SD&amp;p_fDOW=&amp;p_fWC=&amp;p_dWC=0&amp;p_CWED=0&amp;p_WE1=6&amp;p_WE2=7&amp;p_fAST=&amp;p_dAST=0&amp;p_Seg=Rtp&amp;p_dSeg=1&amp;p_MktCat=100&amp;p_PP=Phys&amp;p_fSeg=100&amp;p_fSeg=200&amp;p_fSeg=300&amp;p_fSeg=400&amp;p_fSeg=500&amp;p_fSeg=600&amp;p_fSeg=700&amp;p_fSeg=800&amp;p_fSeg=900&amp;p_fSeg=1000&amp;p_fSeg=1100&amp;p_fSeg=1200&amp;p_fSeg=1300&amp;p_fSeg=1400&amp;p_fTRtp=&amp;p_dTRtp=0&amp;p_fRtC=&amp;p_dRtC=0&amp;p_dMC=0&amp;p_dON=0&amp;p_dQN=0&amp;p_fLOA=&amp;p_dLOA=0&amp;p_fTLOA=&amp;p_dTLOA=0&amp;p_CT1=4&amp;p_CT2=11&amp;p_CT3=29&amp;p_fNO=&amp;p_dNO=0&amp;p_fTNO=&amp;p_dTNO=0&amp;p_fCA=&amp;p_dCA=0&amp;p_dCD=0&amp;p_fCT=&amp;p_dCT=0&amp;p_fCS=&amp;p_dCS=0&amp;p_fCP=&amp;p_dCP=0&amp;p_fBST=&amp;p_dBST=0&amp;p_dBO=0&amp;p_fIT=&amp;p_dIT=0&amp;p_fRC=&amp;p_dRC=0&amp;p_dRP=0&amp;p_fRL=&amp;p_dRL=0&amp;p_fADmR=&amp;p_dADmR=0&amp;p_dMarRt=0&amp;p_fMarRtFrm=0&amp;p_fMarRtTo=999999999&amp;p_dHtlType=0&amp;p_dProp=0&amp;p_dBrand=0&amp;p_dGblReg=0&amp;p_dGblDiv=0&amp;p_dPCtry=0&amp;p_dAVP=0&amp;p_dPubC=0&amp;p_dCorN=0&amp;p_dMT=0&amp;p_dRpn=1&amp;p_EID=newuser329 HTTP/1.1" 200 8037 </code></pre>  <p>Now from this string I want to extract the data like below</p>  <pre><code>sample.company.com~1.12.13.34~user329~06/Jan/2015:00:28:42~DAT3~newuser329~&lt;the actual full URL&gt; </code></pre>  <p>now <code>DAT3</code> is there within URL after <code>/report[@name='</code> and <code>newuser329</code> is there in the URL after <code>&amp;p_EID=</code></p>  <p>Can this be extracted using awk/sed or any other way in unix.</p>  <p>I have file where multiple lines are there like below</p>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-html lang-html prettyprint-override"><code>sample.company.com 4.130.26.19 - topazmo1 07/Jan/2015:00:00:45 -0500 "GET /mrdw/MRDWWebApp/mrdw/trackDynamicReports.do?other=https://sample.company.com/cognos10/portal/cgi-bin/cognosisapi.dll?b_action=cognosViewer&amp;ui.action=run&amp;ui.object=%2fcontent%2ffolder[@name='MRDW']/folder[@name='Release']/folder[@name='Channel']/folder[@name='Intermediary']/folder[@name='Print Version']/report[@name='Property Details']&amp;run.prompt=false&amp;p_security=1&amp;p_ReportType=SP&amp;p_DateParameter=1P201412&amp;p_GIComp=All&amp;p_ReportContent=GISummary&amp;p_Property=NYCMQ&amp;cv.toolbar=false&amp;cv.header=false&amp;reportName=ITM14&amp;reportFormat=COG&amp;aggFlag=N&amp;functionalArea=itm HTTP/1.1" 200 20 sample.company.com 12.10.16.1 - abcdefo1 07/Jan/2015:00:00:45 -0500 "GET /cognos10/portal/cgi-bin/cognosisapi.dll?b_action=cognosViewer&amp;ui.action=run&amp;ui.object=/content/folder[@name='MRDW']/folder[@name='Release']/folder[@name='Channel']/folder[@name='Intermediary']/folder[@name='Print Version']/report[@name='Property Details']&amp;run.prompt=false&amp;p_security=1&amp;p_ReportType=SP&amp;p_DateParameter=1P201412&amp;p_GIComp=All&amp;p_ReportContent=GISummary&amp;p_Property=NYCMQ&amp;cv.toolbar=false&amp;cv.header=false HTTP/1.1" 200 6297 sample.company.com 1.12.13.34 - user329 06/Jan/2015:00:28:42 -0500 "GET /cognos10/portal/cgi-bin/cognosisapi.dll?b_action=cognosViewer&amp;ui.action=run&amp;ui.object=/content/folder[@name='MRDW']/folder[@name='Release']/folder[@name='Demand']/folder[@name='Analysis']/report[@name='DAT3']&amp;cv.toolbar=false&amp;cv.header=false&amp;run.prompt=false&amp;p_security=1&amp;p_RptS=DAT3&amp;run.outputFormat=XLWA&amp;p_ropt=xls&amp;p_Prop=BOMJW&amp;p_AVP=&amp;p_MyC=&amp;p_PubC=&amp;p_fBrand=&amp;p_fGblReg=&amp;p_fHtlType=&amp;p_fCorN=&amp;p_fPCtry=&amp;p_fMT=&amp;p_fGblDiv=&amp;p_TFName=&amp;p_PorM=&amp;p_AsOfDate=&amp;p_CDS1=20130108&amp;p_CDE1=20130131&amp;p_BDS=2013-01-08&amp;p_BDE=2013-01-31&amp;p_NetGross=Net&amp;p_Currency=Local&amp;p_RNS=1&amp;p_REV=1&amp;p_ADR=0&amp;p_ADmnd=0&amp;p_TD=0&amp;p_ARN=0&amp;p_ARV=0&amp;p_dBKD=0&amp;p_dSD=SD&amp;p_fDOW=&amp;p_fWC=&amp;p_dWC=0&amp;p_CWED=0&amp;p_WE1=6&amp;p_WE2=7&amp;p_fAST=&amp;p_dAST=0&amp;p_Seg=Rtp&amp;p_dSeg=1&amp;p_MktCat=100&amp;p_PP=Phys&amp;p_fSeg=100&amp;p_fSeg=200&amp;p_fSeg=300&amp;p_fSeg=400&amp;p_fSeg=500&amp;p_fSeg=600&amp;p_fSeg=700&amp;p_fSeg=800&amp;p_fSeg=900&amp;p_fSeg=1000&amp;p_fSeg=1100&amp;p_fSeg=1200&amp;p_fSeg=1300&amp;p_fSeg=1400&amp;p_fTRtp=&amp;p_dTRtp=0&amp;p_fRtC=&amp;p_dRtC=0&amp;p_dMC=0&amp;p_dON=0&amp;p_dQN=0&amp;p_fLOA=&amp;p_dLOA=0&amp;p_fTLOA=&amp;p_dTLOA=0&amp;p_CT1=4&amp;p_CT2=11&amp;p_CT3=29&amp;p_fNO=&amp;p_dNO=0&amp;p_fTNO=&amp;p_dTNO=0&amp;p_fCA=&amp;p_dCA=0&amp;p_dCD=0&amp;p_fCT=&amp;p_dCT=0&amp;p_fCS=&amp;p_dCS=0&amp;p_fCP=&amp;p_dCP=0&amp;p_fBST=&amp;p_dBST=0&amp;p_dBO=0&amp;p_fIT=&amp;p_dIT=0&amp;p_fRC=&amp;p_dRC=0&amp;p_dRP=0&amp;p_fRL=&amp;p_dRL=0&amp;p_fADmR=&amp;p_dADmR=0&amp;p_dMarRt=0&amp;p_fMarRtFrm=0&amp;p_fMarRtTo=999999999&amp;p_dHtlType=0&amp;p_dProp=0&amp;p_dBrand=0&amp;p_dGblReg=0&amp;p_dGblDiv=0&amp;p_dPCtry=0&amp;p_dAVP=0&amp;p_dPubC=0&amp;p_dCorN=0&amp;p_dMT=0&amp;p_dRpn=1&amp;p_EID=newuser329 HTTP/1.1" 200 8037</code></pre> </div> </div> </p>  <p>The output I am looking like below (as for the first two lines &amp;p_EID tag is not there so it's given empty string as output)</p>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-html lang-html prettyprint-override"><code>sample.company.com~4.130.26.19~topazmo1~07/Jan/2015:00:00:45~Property Details~~GET /mrdw/MRDWWebApp/mrdw/trackDynamicReports.do?other=https://sample.company.com/cognos10/portal/cgi-bin/cognosisapi.dll?b_action=cognosViewer&amp;ui.action=run&amp;ui.object=%2fcontent%2ffolder[@name='MRDW']/folder[@name='Release']/folder[@name='Channel']/folder[@name='Intermediary']/folder[@name='Print Version']/report[@name='Property Details']&amp;run.prompt=false&amp;p_security=1&amp;p_ReportType=SP&amp;p_DateParameter=1P201412&amp;p_GIComp=All&amp;p_ReportContent=GISummary&amp;p_Property=NYCMQ&amp;cv.toolbar=false&amp;cv.header=false&amp;reportName=ITM14&amp;reportFormat=COG&amp;aggFlag=N&amp;functionalArea=itm HTTP/1.1 sample.company.com~12.10.16.1~abcdefo1~07/Jan/2015:00:00:45~Property Details~~GET /cognos10/portal/cgi-bin/cognosisapi.dll?b_action=cognosViewer&amp;ui.action=run&amp;ui.object=/content/folder[@name='MRDW']/folder[@name='Release']/folder[@name='Channel']/folder[@name='Intermediary']/folder[@name='Print Version']/report[@name='Property Details']&amp;run.prompt=false&amp;p_security=1&amp;p_ReportType=SP&amp;p_DateParameter=1P201412&amp;p_GIComp=All&amp;p_ReportContent=GISummary&amp;p_Property=NYCMQ&amp;cv.toolbar=false&amp;cv.header=false HTTP/1.1 sample.company.com~1.12.13.34~user329~06/Jan/2015:00:28:42~DAT3~newuser329~GET /cognos10/portal/cgi-bin/cognosisapi.dll?b_action=cognosViewer&amp;ui.action=run&amp;ui.object=/content/folder[@name='MRDW']/folder[@name='Release']/folder[@name='Demand']/folder[@name='Analysis']/report[@name='DAT3']&amp;cv.toolbar=false&amp;cv.header=false&amp;run.prompt=false&amp;p_security=1&amp;p_RptS=DAT3&amp;run.outputFormat=XLWA&amp;p_ropt=xls&amp;p_Prop=BOMJW&amp;p_AVP=&amp;p_MyC=&amp;p_PubC=&amp;p_fBrand=&amp;p_fGblReg=&amp;p_fHtlType=&amp;p_fCorN=&amp;p_fPCtry=&amp;p_fMT=&amp;p_fGblDiv=&amp;p_TFName=&amp;p_PorM=&amp;p_AsOfDate=&amp;p_CDS1=20130108&amp;p_CDE1=20130131&amp;p_BDS=2013-01-08&amp;p_BDE=2013-01-31&amp;p_NetGross=Net&amp;p_Currency=Local&amp;p_RNS=1&amp;p_REV=1&amp;p_ADR=0&amp;p_ADmnd=0&amp;p_TD=0&amp;p_ARN=0&amp;p_ARV=0&amp;p_dBKD=0&amp;p_dSD=SD&amp;p_fDOW=&amp;p_fWC=&amp;p_dWC=0&amp;p_CWED=0&amp;p_WE1=6&amp;p_WE2=7&amp;p_fAST=&amp;p_dAST=0&amp;p_Seg=Rtp&amp;p_dSeg=1&amp;p_MktCat=100&amp;p_PP=Phys&amp;p_fSeg=100&amp;p_fSeg=200&amp;p_fSeg=300&amp;p_fSeg=400&amp;p_fSeg=500&amp;p_fSeg=600&amp;p_fSeg=700&amp;p_fSeg=800&amp;p_fSeg=900&amp;p_fSeg=1000&amp;p_fSeg=1100&amp;p_fSeg=1200&amp;p_fSeg=1300&amp;p_fSeg=1400&amp;p_fTRtp=&amp;p_dTRtp=0&amp;p_fRtC=&amp;p_dRtC=0&amp;p_dMC=0&amp;p_dON=0&amp;p_dQN=0&amp;p_fLOA=&amp;p_dLOA=0&amp;p_fTLOA=&amp;p_dTLOA=0&amp;p_CT1=4&amp;p_CT2=11&amp;p_CT3=29&amp;p_fNO=&amp;p_dNO=0&amp;p_fTNO=&amp;p_dTNO=0&amp;p_fCA=&amp;p_dCA=0&amp;p_dCD=0&amp;p_fCT=&amp;p_dCT=0&amp;p_fCS=&amp;p_dCS=0&amp;p_fCP=&amp;p_dCP=0&amp;p_fBST=&amp;p_dBST=0&amp;p_dBO=0&amp;p_fIT=&amp;p_dIT=0&amp;p_fRC=&amp;p_dRC=0&amp;p_dRP=0&amp;p_fRL=&amp;p_dRL=0&amp;p_fADmR=&amp;p_dADmR=0&amp;p_dMarRt=0&amp;p_fMarRtFrm=0&amp;p_fMarRtTo=999999999&amp;p_dHtlType=0&amp;p_dProp=0&amp;p_dBrand=0&amp;p_dGblReg=0&amp;p_dGblDiv=0&amp;p_dPCtry=0&amp;p_dAVP=0&amp;p_dPubC=0&amp;p_dCorN=0&amp;p_dMT=0&amp;p_dRpn=1&amp;p_EID=newuser329 HTTP/1.1</code></pre> </div> </div> </p>