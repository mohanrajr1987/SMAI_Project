<p>I'm trying to grep blocks from a database with pattern.<br /> After that I wanna grep from every block again with some pattern.<br /> But I need only one match for every pattern of every block. <br /> <br /> The file look so:</p>  <pre><code>inetnum:        *.*.*.* - *.*.*.* netname:        Ch-123 descr:          companyname descr:          address 1 descr:          address 2 descr:          address 3 country:        FR admin-c:        DUMY tech-c:         DUMY status:         DUMY mnt-by:         mnt changed:        nothing@nothing.net created:        1970-01-01T00:00:00Z last-modified:  1970-01-01T00:00:00Z source:         RIPE remarks:        **************************** remarks:        **************************** remarks:        **************************** remarks:        **************************** remarks:        **************************** remarks:        ****************************  % Tags relating to '*.*.*.* - *.*.*.*' % RIPE-REGISTRY-RESOURCE  inetnum:        *.*.*.* - *.*.*.* netname:        Ch-123 descr:          companyname descr:          address 1 descr:          address 2 descr:          address 3 country:        FR admin-c:        DUMY tech-c:         DUMY status:         DUMY mnt-by:         mnt changed:        nothing@nothing.net created:        1970-01-01T00:00:00Z last-modified:  1970-01-01T00:00:00Z source:         RIPE remarks:        **************************** remarks:        **************************** remarks:        **************************** remarks:        **************************** remarks:        **************************** remarks:        ****************************  % Tags relating to '*.*.*.* - *.*.*.*' % RIPE-REGISTRY-RESOURCE </code></pre>  <p>So I have to get each block where "country: CH" is. After that I need for example of each block only ONE Result, like only ONE 'descr', ONE 'netname', even there are more, I need the first one for the companyname.</p>  <p>Requirement:</p>  <ol> <li>Get blocks of the file, which have "country:        CH"</li> <li>Then grep/awk/sed whatever only one of this "inetnum,netname,descr"</li> </ol>  <p>Output should look like so of each block, where "country: CH" is.</p>  <pre><code>*.*.*.* - *.*.*.* Ch-123 companyname </code></pre>  <p>And NOT:</p>  <p>Input:</p>  <pre><code>grep -E "inetnum:        (.*)\n|netname:        (.*)\|descr:          (.*)\n" file </code></pre>  <p>Output:</p>  <pre><code>*.*.*.* - *.*.*.* Ch-123 companyname address 1 address 2 address 3 </code></pre>  <p>I get every time only that. I'm trying it with regular expression, but never used it before.</p>  <p>I hope someone can help me.</p>  <p>AND: Why does : <code>sed -n '/inetnum/!b;:a;/% Tags relating to/!{$!{N;ba}};{/country:        ch/p}' file</code> never end?</p>