<p>I using ng-js-tree <a href="https://github.com/ezraroi/ngJsTree" rel="nofollow">https://github.com/ezraroi/ngJsTree</a> I loading tree from json and trying to collapse all nodes using to ways(state.opened and close_all):</p>  <pre><code>    $http.get('resources/json/mkb10.json')     .then(function(res){         $scope.cond.treeData = res.data;         if (data !== undefined){              for (var i = 0; i &lt; $scope.cond.treeData.length; i++){                 $scope.cond.treeData[i].state = {};                 for (var j = 0; j &lt; data.cond.length; j++)                     if ($scope.cond.treeData[i].id == data.cond[j]){                         $scope.cond.treeData[i].state = {selected: true};                     }                 $scope.cond.treeData[i].state.opened = false;             }         }         $scope.treeInstance.jstree(true).close_all();         $scope.treeConfig.version++;         $scope.treeInstance.jstree(true).close_all();     }); </code></pre>  <p>my result is:  <a href="http://i.stack.imgur.com/tJYTu.png" rel="nofollow"><img src="http://i.stack.imgur.com/tJYTu.png" alt="enter image description here"></a></p>  <p>But both of them no needed result. How know, how collapse all nodes? Thanks!</p>