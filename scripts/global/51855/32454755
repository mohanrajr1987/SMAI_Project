<p>i got two models in Rails (using Mongoid Gem) with a has many relationship.</p>  <pre><code>class Branch  ...  has_many :users end  class User  ...  field :option  belongs_to :branch end </code></pre>  <p>Now I want all Branches that have the Users with the option 1,2 or 3</p>  <p>So afaik the query should look like</p>  <pre><code>Branch.all.where(:user.option.in =&gt; [1,2,3]) </code></pre>  <p>But this doesn't work :/</p>  <p>The log output is</p>  <pre><code>NoMethodError (undefined method `option' for :user:Symbol) </code></pre>