<p>My Devise login recently broke. It no longer sets a "current_user".  It seems to complete the sign_in, but when it gets to the " after_sign_in_path_for(resource)" , where I have current_user.first_name,  it throws this error:</p>  <pre><code>NoMethodError in Users::Registrations#new undefined method `email' for nil:NilClass </code></pre>  <p>There is nothing special about this Devise, except that I've changed the after_sign_in_path_for(resource) in the application (but that was done BEFORE devise broke).  If I try to restrict access based on authentication to the after_sign_in_path_for(resource), then it sends me in circles back to the signup.</p>  <p>application_controller.rb</p>  <pre><code>class ApplicationController &lt; ActionController::Base   # Prevent CSRF attacks by raising an exception.   # For APIs, you may want to use :null_session instead.   protect_from_forgery with: :exception    def after_sign_in_path_for(resource)     my_custom_path   end </code></pre>  <p>I have tried:</p>  <ol> <li>restarting server, browser &amp; computer</li> <li>reinstalling devise</li> </ol>  <p>I am using</p>  <ol> <li>Rails 4</li> <li>MongoDB Mongoid </li> <li>Thin Server</li> </ol>