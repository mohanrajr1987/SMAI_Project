<p>I'm using mongoid_taggable (1.1.1) with mongoid (4.0.0).</p>  <p>I know that this gem implements the methods tags and tags_with_weight which retrieve the tags of a model (Doc, for example).</p>  <p>But if I'm trying to get the tags of a subset of all Docs (using ransack, for example), <strong>it stills displays the list of tags of all Docs</strong> (not only of that subset).</p>  <p>How can I retrieve <strong>only the tags of that subset</strong>?</p>  <p>My code:</p>  <pre class="lang-ruby prettyprint-override"><code>@q = Doc.search(params[:q]) @docs = @q.result  if params[:author]   @docs = @docs.from_author(params[:author]) end  if params[:tag]   @docs = @docs.tagged_with(params[:tag]) end  @tags = @docs.tags_with_weight </code></pre>