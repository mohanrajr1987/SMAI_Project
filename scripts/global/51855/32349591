<p>I have a Rails application which was using Mongoid 4.0.2. I upgraded Mongoid to version 5.0.0 and start getting this error </p>  <pre><code>....gems/2.2.0/gems/less-rails-2.7.0/lib/less/rails/railtie.rb:19:in `block in &lt;class:Railtie&gt;': undefined method `register_preprocessor' for nil:NilClass (NoMethodError) </code></pre>  <p>How to fix this issue or is any manual how to upgrade Mongoid to version 5.0.0 ?</p>  <p>Gemfile</p>  <pre><code> source 'https://rubygems.org'   # Bundle edge Rails instead: gem 'rails', github: 'rails/rails' gem 'rails', '4.2.0.beta4' # Use SCSS for stylesheets gem 'sass-rails', '~&gt; 5.0.0.beta1' # Use Uglifier as compressor for JavaScript assets gem 'uglifier', '&gt;= 1.3.0' # Use CoffeeScript for .coffee assets and views gem 'coffee-rails', '~&gt; 4.1.0' # See https://github.com/sstephenson/execjs#readme for more supported runtimes # gem 'therubyracer', platforms: :ruby  # Use jQuery as the JavaScript library gem 'jquery-rails', '~&gt; 4.0.0.beta2' # Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks gem 'turbolinks' # Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder gem 'jbuilder', '~&gt; 2.0' # bundle exec rake doc:rails generates the API under doc/api. gem 'sdoc', '~&gt; 0.4.0', group: :doc  #new gems #database gem 'mongoid', '~&gt; 5.0.0.beta' gem "mongoid-paperclip", :require =&gt; "mongoid_paperclip" gem 'bson_ext' #stile gem "therubyracer" gem "less-rails" #Sprockets (what Rails 3.1 uses for its asset pipeline) supports LESS gem "twitter-bootstrap-rails" gem 'bootstrap_form' gem 'bootstrap-sass', '~&gt; 3.3.4' gem 'bootswatch-rails' gem 'simple_form' gem 'mongo' gem "figaro" gem 'sidekiq' gem 'sidekiq-status' gem 'rubyzip' #gem 'sidekiq_status' #gem 'sidekiq-status' gem 'sinatra', require: false gem 'slim' gem 'capistrano', '~&gt; 3.1.0'  # rails specific capistrano funcitons gem 'capistrano-rails', '~&gt; 1.1.0' gem 'capistrano-rails-console'  # integrate bundler with capistrano gem 'capistrano-bundler'  # if you are using RBENV gem 'capistrano-rbenv', "~&gt; 2.0" gem 'capistrano-sidekiq', github: 'seuros/capistrano-sidekiq'  gem 'capistrano-passenger' gem 'utf8-cleaner' gem "devise" gem 'rollbar', '~&gt; 1.5.3'   #gem 'bson', '~&gt; 3.0' # Use ActiveModel has_secure_password # gem 'bcrypt', '~&gt; 3.1.7'  # Use Unicorn as the app server # gem 'unicorn'  # Use Capistrano for deployment # gem 'capistrano-rails', group: :development  group :development, :test do   gem 'thin'   # Call 'byebug' anywhere in the code to stop execution and get a debugger console   gem 'byebug'    # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views   gem 'web-console', '~&gt; 2.0.0.beta4'    # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring   gem 'spring'    #new gems   gem "rspec-rails"   gem 'pry-rails'   gem 'pry-rescue'   # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views   gem 'better_errors'   #gem 'mongoid-rspec', '~&gt; 2.1.0'   end </code></pre>