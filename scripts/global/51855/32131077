<p>I was writing some tests and I ran into something I'm trying to understand.</p>  <p>What is the difference underneath when calling:</p>  <pre><code>.update_attributes(:group_ids, [group1.id, group2.id]) </code></pre>  <p>vs</p>  <pre><code>.update_attributes(:groups, [group1, group2]) </code></pre>  <p>These 2 models in question:</p>  <p>group.rb</p>  <pre><code>class Group   include Mongoid::Document   has_and_belongs_to_many :users, class_name: "Users", inverse_of: :groups end </code></pre>  <p>user.rb</p>  <pre><code>class User   include Mongoid::Document   has_and_belongs_to_many :groups, class_name: "Group", inverse_of: :users end </code></pre>  <p>test code in question:</p>  <pre><code>g1 = create(:group) u1 = create(:user, groups: [g1]) g1.update_attribute(:users, [u1]) # at this point all the associations look good u1.update_attribute(:group_ids, [g1.id]) # associations looks good on both sides when i do u1.reload and g1.reload u1.update_attribute(:groups, [g1]) # g1.reload, this is when g1.users is empty and u1 still has the association </code></pre>  <p>Hope I made sense, thanks</p>