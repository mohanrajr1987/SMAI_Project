<p>I'm trying to achieve a certain directory structure with my IIS hosted web apis. The requirements are as follows:</p>  <ol> <li>All applications should include "/vas/" in their URL, e.g:</li> </ol>  <blockquote>   <p><a href="http://example.com/vas/webapi1" rel="nofollow">http://example.com/vas/webapi1</a></p>      <p><a href="http://example.com/vas/webapi2" rel="nofollow">http://example.com/vas/webapi2</a></p> </blockquote>  <ol start="2"> <li>On the /vas/ root itself there should also be a web api, which is hit only when there is <em>no valid sub application</em>, e.g this request should be routed to a controller in the "base" web api application:</li> </ol>  <blockquote>   <p><a href="http://example.com/vas/controller/action/id=123" rel="nofollow">http://example.com/vas/controller/action/id=123</a></p> </blockquote>  <p>But this request, given that there is a web api called "webapi1" should be routed as normal:</p>  <blockquote>   <p><a href="http://example.com/vas/webapi1/controller/action/id=321" rel="nofollow">http://example.com/vas/webapi1/controller/action/id=321</a></p> </blockquote>  <p>So the challenge is to have a rule where all incoming requests starting with /vas/ but that <em>does not point to a valid application or web api</em> should be routed to the web api running on the base url.</p>  <p>I have installed the URL Rewrite module for IIS 7.5 and tried different approaches, but my URL Rewrite reg ex'es don't do as I want. Having all requests routed to the "base" application is no problem, but when I add a condition it seems like all routing stops working. I have successfully used rewriting previously for simpler tasks, but never with a structure like this. I am not sure if the best approach is to have the root application running as "/vas" in IIS and then create nested sub applications below or if it's better to have a simple virtual directory with a completely different name and just use some sort of rewrite / re-routing. </p>  <p>I was hoping to get this working on the local IIS instead of asking the network administrators to handle it in the load balancer. </p>