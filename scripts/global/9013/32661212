<p>I read about scoping in 'Advanced R' and still didn't figure this out.</p>  <p>I defined two functions.</p>  <p>in file <code>'f1.R'</code>:</p>  <pre><code>f1 = function(x, y) {          x = x + 1         y = y + 1         z = 1          fsum(x, y)         } </code></pre>  <p>in file <code>'fsum.R'</code>:</p>  <pre><code>fsum = function(x, y){          x + y + z } </code></pre>  <p>Now it doesn't work because <code>fsum</code> can't find <code>z</code>, due to scope issue</p>  <pre><code>&gt; source('f1.R') &gt; source('fsum.R') &gt; f1(1,1) Error in fsum(x, y) : object 'z' not found &gt; environment(f1) &lt;environment: R_GlobalEnv&gt; &gt; environment(fsum) &lt;environment: R_GlobalEnv&gt; </code></pre>  <p>How can I make fsum to look up for needed variables in local environment? I did some test, and</p>  <hr>  <p>Solution 1: explicitly pass the variable as argument in file <code>'f1.R'</code>:</p>  <pre><code>f1 = function(x, y) {          x = x + 1         y = y + 1         z = 1          fsum(x, y, z)         } </code></pre>  <p>in file <code>'fsum.R'</code>:</p>  <pre><code>fsum = function(x, y, z){          x + y + z } </code></pre>  <p>Now it works:</p>  <pre><code>&gt; source('f1.R') &gt; source('fsum.R') &gt; f1(1,1) [1] 5 </code></pre>  <p>But what if there are lots of variables needed in <code>fsum</code> and I don't want to explicitly write them down? Thanks for help. Any recommendation of readings is appreciated.</p>  <p>PS: I read something about making variables global using <code>&lt;&lt;</code>. This is not what I'm looking for. I'd like variables to be local.</p>  <hr>  <p>Solution 2: If a function is defined in another function, then its environment is the local, and it can access the variables. </p>  <p>In this case I don't want to define <code>fsum</code> inside <code>f1</code> anyway because I want to use <code>fsum</code> anywhere)</p>  <p>in file <code>'f1.R'</code>:</p>  <pre><code>f1 = function(x, y) {          x = x + 1         y = y + 1         z = 1          source('fsum.R', local=T)          fsum(x, y)       } </code></pre>  <p>in file <code>'fsum.R'</code>:</p>  <pre><code>fsum = function(x, y){          x + y + z } </code></pre>  <p>And it works:</p>  <pre><code>&gt; source('f1.R') &gt; f1(1,1) [1] 5 </code></pre>