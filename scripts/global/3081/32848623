<p>In our project we have <code>rake</code> task, that creates mailer templates in database.  While running all <code>specs</code>, some of them are failing saying that the db record for some mailers don't exist. Any ideas on what could be the reason for this and how to fix it?</p>  <p>Here the example of the task to create Mailer template.</p>  <pre><code>desc "Creates mailer templates" task create_mailers: :environment do    MailerTemplate.delete_all    I18n.available_locales.each do |locale|     MailerTemplate.create(locale: locale, mailer: "info#action", content: %{&lt;p&gt;Content&lt;/p&gt;})   end end </code></pre>  <p>This is my database_cleaner.rb file</p>  <pre><code>RSpec.configure do |config|   config.before(:suite) do     DatabaseCleaner.clean_with(:deletion)     Rake::Task["create_mailers"].invoke   end    config.around(:each) do |example|     DatabaseCleaner.strategy = example.metadata[:js] ? :deletion: :transaction     DatabaseCleaner.cleaning do       example.run     end   end    config.after(:each) do     Capybara.reset_sessions!     DatabaseCleaner.clean   end end </code></pre>