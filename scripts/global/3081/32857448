<p>Trying to build a controller spec using rspec on a rails controller I have named "API::ZipsController".</p>  <p>The controller accepts a parameter called "zip_code" and returns an active record model and 200 status.</p>  <p>However, when I run rspec the test fails with <code>NoMethodError:</code> <code>undefined method 'where' for Zip:Module</code>. I believe this is because 'where' is an instance method, not a class method so I will need to stub/mock it? Unfortunately I have not had any luck in resolving the problem as of yet.</p>  <p>zips_controller_spec.rb:</p>  <pre><code>describe API::ZipsController do require 'spec_helper' it "returns 200 status with zones data" do         get 'show', zip_code: "V9A1B2"         response.should be_success   end end </code></pre>  <p>api/zips_controller.rb - (working):</p>  <pre><code>class API::ZipsController &lt; ApplicationController   def show     zip = Zip.where(zip_code: params[:zip_code].upcase.slice(0..2))     render json: zip, status: 200   end end </code></pre>  <p>zip.rb (model):</p>  <pre><code>class Zip &lt; ActiveRecord::Base def as_json(options) super(:only =&gt; [:zip_code]) end end </code></pre>