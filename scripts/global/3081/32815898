<p>In the controller, it doesn't assign any variable to view. But in Rspec test the variable always assigned.</p>  <p>orders#index</p>  <pre><code># GET /orders # GET /orders.json def index   respond_to do |format|     format.html { render :app }     # format.json { @orders = Order.all.order('created_at desc'); puts 'run'}   end end </code></pre>  <p>orders_spec.rb</p>  <pre><code>describe "GET #index" do   it "assigns all orders as @orders" do     order = Order.place_order valid_attributes     puts order     # get :index, format: :json     # expect(assigns(:orders)).to eq([order])     get :index, format: 'html'     expect(assigns(:orders)).to eq(nil)   end end </code></pre>  <p>result:</p>  <pre><code>Failures:  1) OrdersController GET #index assigns all orders as @orders    Failure/Error: expect(assigns(:orders)).to eq(nil)       expected: nil           got: #&lt;ActiveRecord::Relation [#&lt;Order id: 1, user_id: 1, price: #&lt;BigDecimal:7f9e57da2f30,'0.999E3',9(27)&gt;, created_at: "2015-09-28 04:44:10", updated_at: "2015-09-28 04:44:10", uid: "150928120001"&gt;]&gt;       (compared using ==)    # ./spec/controllers/orders_controller_spec.rb:54:in `block (3 levels) in &lt;top (required)&gt;' </code></pre>