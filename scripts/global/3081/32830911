<p>I'm testing some code that calls the aws-sdk (v2). Many of the methods do pagination by setting a <code>is_truncated</code> attribute in the returned value. You then use other values in the return (often <code>marker</code>) and pass it into the next invocation. So, the usage will often look something like:</p>  <pre><code>values = [] rv = client.do_thing values.concat rv.things while rv.is_truncated     rv = client.do_thing(next_marker: rv.marker)     values.concat rv.things end </code></pre>  <p>My question is this - I want to <code>instance_double</code> the AWS client. But, I can't find a way of saying "Expect the first call to have no parameters and return <code>this</code>. Then, the second call will have <code>these</code> parameters and return <code>that</code>." I know I can set the return values of both calls by putting both expected <code>rv</code>'s in the same <code>and_returns()</code> call. But, I want to test that the <code>marker</code> from the first <code>rv</code> is passed as the <code>next_marker</code> in the next call. </p>  <p>How would I do this?</p>