<p>i want to get list of all children, but i have a problem here is my code,but result is not correct. when i add a group by owner_id in second query some childs apear in result but some other childs not returned.</p>  <pre><code>$ALLDATA = array();         $Cond = '';         if($OWNER)             $Cond = ' AND owner_id = '.$OWNER;          $Tree = $this-&gt;fetchAll(array('parent_id = ?' =&gt; $user_id));          $statement = $this-&gt;adapter-&gt;query("                 SELECT GROUP_CONCAT(id) as allids FROM users                         WHERE parent_id = $user_id AND isdeleted = 0 AND id &lt;&gt; $user_id   " . $Cond);          $Tree = $statement-&gt;execute();          if($Tree)          {              $IDS = false;              foreach ($Tree as $key =&gt; $value) {                 if(isset($value['allids']))                 {                    $IDS = $ALLDATA[] =  $value['allids'];                 }              }          }          if($IDS)          {              do              {                 $statement = $this-&gt;adapter-&gt;query("                         SELECT GROUP_CONCAT(id) as allids FROM users                                 WHERE parent_id IN (".$IDS.")");                 $results = $statement-&gt;execute();                 if($results)                 {                     $IDS = false;                     foreach ($results as $key =&gt; $value) {                         if(isset($value['allids']))                         {                             $IDS = $ALLDATA[] =   $value['allids'];                             var_dump($IDS);                         }                     }                 } else                     $IDS = false;              }while($IDS);              die;          }          return $ALLDATA; </code></pre>