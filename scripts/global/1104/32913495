<p>I am running a Selenium Test.All the tests are running fine but when I am trying to send the completion mail It is giving error.The code is running fine when I am locally running through VS2015 but returning error when I am running from TeamCity.</p>  <p>I am using C# and Chromedriver as a technology stack.</p>  <p>The code is returning below error.</p>  <p><strong>Diplomat.Enav.Web.Selenium.Tests.dll: Diplomat.Enav.Web.Selenium.Tests.GlobalFixture  TearDown method failed. One or more errors occurred.    at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)    at System.Threading.Tasks.Task.Wait(Int32 millisecondsTimeout, CancellationToken cancellationToken)    at System.Threading.Tasks.Task.Wait(Int32 millisecondsTimeout)    at Diplomat.Enav.Web.Selenium.Tests.Common.Mailer.SendResults(List`1 states, Boolean waitForCompletion) in d:\TeamCity\buildAgent\work\a367a3eda4cbbd88\Diplomat.Enav.Web\Diplomat.Enav.Web.Selenium.Tests\Common\Mailer.cs:line 59    at Diplomat.Enav.Web.Selenium.Tests.Common.SeleniumStatus.SendCompletionEmail() in d:\TeamCity\buildAgent\work\a367a3eda4cbbd88\Diplomat.Enav.Web\Diplomat.Enav.Web.Selenium.Tests\Common\SeleniumStatus.cs:line 182    at Diplomat.Enav.Web.Selenium.Tests.GlobalFixture.RunAfterAnyTests() in d:\TeamCity\buildAgent\work\a367a3eda4cbbd88\Diplomat.Enav.Web\Diplomat.Enav.Web.Selenium.Tests\Common\GlobalFixture.cs:line 39</strong></p>  <p>The code which is giving this error is </p>  <p>Task sendMailTask = smtp.SendMailAsync(message);</p>  <pre><code>        if (waitForCompletion)               sendMailTask.Wait(5000); </code></pre>  <p>When it is executing "sendMailTask.Wait(5000)" it is returning error.</p>