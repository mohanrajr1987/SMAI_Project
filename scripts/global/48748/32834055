<p>How can I change the following code so that a user that signs in with facebook gets to skip the confirmation with devise confirmable?  I tried adding <code>user.skip_confirmation!</code> under the line <code>user.email...</code> but this did not work.</p>  <p>user.rb:</p>  <pre><code># Finds or creates user based on omniauth hash from given provider   def self.from_omniauth(auth)     where(provider: auth.provider, uid: auth.uid).first_or_create do |user|       user.provider = auth.provider       user.uid = auth.uid       user.first_name = auth.info.first_name       user.last_name = auth.info.last_name       user.email = auth.info.email     end   end    # Overrides class method 'new_with_session' to persist and validate attributes   def self.new_with_session(params, session)     if session["devise.user_attributes"]       new(session["devise.user_attributes"], without_protection: true) do |user|         user.attributes = params         user.valid?       end     else       super     end   end </code></pre>  <p>omniauth_callbacks_controller.rb</p>  <pre><code>class Users::OmniauthCallbacksController &lt; Devise::OmniauthCallbacksController    def all     user = User.from_omniauth(request.env["omniauth.auth"])     if user.persisted?       flash.notice = "Signed in!"       sign_in_and_redirect user     else         session["devise.user_attributes"] = user.attributes       redirect_to new_user_registration_url     end   end   alias_method :facebook, :all end </code></pre>