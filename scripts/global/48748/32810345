<p>In migrating a rails application from 3.2 to 4.1, I am hitting some issues with user creation.  As there is a need to distinguish the current_user form a local_user.  The controller create action</p>  <pre><code>def create   @local_user = User.new(user_params)    respond_to do |format|     if @local_user.save       if params[:user][:avatar].present?         format.html { render :crop }       else         format.html { redirect_to(admin_user_path(@local_user), :notice =&gt; 'User was successfully created.') }       end     else       format.html { render :action =&gt; "new" }     end </code></pre>  <p>Generates a console error: <code>Unpermitted parameters: name, surname, pen_name[...]</code>, yet the User controller defines them:</p>  <pre><code>def user_params   params.require(:user).permit(:name, :surname,  :pen_name, [...]) end </code></pre>  <p>The form call is:  </p>  <pre><code>&lt;%= form_for(resource, :as =&gt; resource_name, :url =&gt; registration_path(resource_name), :method =&gt; :post, :validate =&gt; true) do |f| %&gt; </code></pre>  <p>This is necessarily a devise issue for a user can be created with the scaffolding for the User class with the exact same variables. There is some logic that devise is going through which does not pull all the controller logic ; what am I missing?</p>