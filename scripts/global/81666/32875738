<p>I am facing a strange issue with Google cloud messaging for iOS. The app is crashing few seconds after calling </p>  <p><code>[[GGLContext sharedInstance] configureWithError:&amp;configureError];</code></p>  <p>This happens only when Xcode installs a new app with <code>Google/CloudMessaging</code> SDK when the older version of the app downloaded from the app store is already installed. </p>  <p>However if I run it on a fresh install, everything works smoothly. </p>  <p>What could be the reason for the crash? And how to solve it?</p>  <pre><code>// From Google GCM Sample app // https://github.com/googlesamples/google-services/blob/master/ios/gcm/GcmExample/AppDelegate.m - (void)configureGCM {     NSLog(@"Start ConfigureGCM");     NSError* configureError;     [[GGLContext sharedInstance] configureWithError:&amp;configureError];     NSAssert(!configureError, @"Error configuring Google services: %@", configureError);     _gcmSenderID = [[[GGLContext sharedInstance] configuration] gcmSenderID];     NSLog(@"gcmSenderID : %@, ConfigureError: %@", _gcmSenderID, configureError);     GCMConfig *gcmConfig = [GCMConfig defaultConfig];     gcmConfig.receiverDelegate = self;     [[GCMService sharedInstance] startWithConfig:gcmConfig];      __weak typeof(self) weakSelf = self;      _gcmRegistrationHandler = ^(NSString *registrationToken, NSError *error){         if (registrationToken != nil) {             NSLog(@"GCM Registration Token: %@", registrationToken);             if(![weakSelf.user hasSyncedGCMToken]) {                 [weakSelf.user syncGCMTokenWithServer:registrationToken];             }         } else {             NSLog(@"Registration to GCM failed with error: %@", error.localizedDescription);         }     };     NSLog(@"End ConfigureGCM"); } </code></pre>  <p>Here are the logs:</p>  <pre><code>] Start ConfigureGCM ] Successfully configured [CloudMessaging]. ] Failed to configure []. ] Subspecs not present, so not configured [Analytics, AdMob, SignIn, AppInvite, Maps]. ] Subspecs expected to be present [CloudMessaging, Measurement]. ] &lt;GMR/INFO&gt; App measurement v.1100000 started ] &lt;GMR/ERROR&gt; Exception on worker queue: data parameter is nil ] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'data parameter is nil'  *** First throw call stack: (0x30cb3e83 0x3b0106c7 0x30cb3dc5 0x315f127f 0x122b73 0x1222ad 0x123bcb 0x129d9f 0x3b4f50c3 0x3b4f9e7b 0x3b4f6f93 0x3b4fa745 0x3b4fa9c5 0x3b624dff 0x3b624cc4) libc++abi.dylib: terminating with uncaught exception of type NSException </code></pre>  <p>Here is the screenshot of the stacktrace <a href="http://i.stack.imgur.com/LlaRD.png" rel="nofollow"><img src="http://i.stack.imgur.com/LlaRD.png" alt="enter image description here"></a></p>  <p><a href="http://i.stack.imgur.com/WYEnj.png" rel="nofollow"><img src="http://i.stack.imgur.com/WYEnj.png" alt="enter image description here"></a></p>  <h1>Update</h1>  <p>This issue does not seem to be happening on iOS8 or above. For me , crash was on iPhone 5 with iOS 7.0.4</p>