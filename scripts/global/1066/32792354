<p>We have the following blue=green deployment design. Idea is for us to </p>  <ul> <li>deploy the latest code into inactive cluster</li> <li>smoke test</li> <li>switch VIP to make the current one inactive</li> </ul>  <p>and we created the pipelines accordingly in go.cd. However, the issue we have is that we want to deploy the latest code to the cluster that has newly transitioned to inactive state. <strong>How do we make sure that this one doesn't again become active?</strong> OR <strong>How are others doing blue-green deployments? Google search results in solutions geared towards AWS. We don't use AWS or public cloud.</strong></p>  <p><strong>EDIT 1</strong></p>  <p><em>Infrastructural constraints</em>: We have hardware available only for two clusters</p>  <p><em>What stops you from running the batch jobs in the live cluster?</em>: Live cluster is serving production queries and batch load will take up the machine resources, and might make the online system non-responsive</p>  <p><a href="http://i.stack.imgur.com/oWRX8.png" rel="nofollow"><img src="http://i.stack.imgur.com/oWRX8.png" alt="enter image description here"></a></p>