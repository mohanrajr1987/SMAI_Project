<p>I've got a ListView with a DataTemplate like this, using MVVM pattern</p>  <pre><code>&lt;ListView ItemsSource="{Binding Source}"           IsItemClickEnabled="True"           commands:ItemsClickCommand.Command="{Binding ItemClickedCommand}"&gt;           &lt;ListView.ItemTemplate&gt;                &lt;DataTemplate&gt;                    &lt;StackPanel&gt;                        &lt;TextBlock Text="{Binding A}" /&gt;                        &lt;Button Content="{Binding B}" /&gt;                    &lt;/StackPanel&gt;                &lt;/DataTemplate&gt;           &lt;/ListView.ItemTemplate&gt; &lt;/ListView&gt; </code></pre>  <p>ItemsClickCommand is defined in this way</p>  <pre><code>public static class ItemsClickCommand {     public static readonly DependencyProperty CommandProperty = DependencyProperty.RegisterAttached("Command", typeof(BindableCommand), typeof(ItemsClickCommand), new PropertyMetadata(null, OnCommandPropertyChanged));     public static void SetCommand(DependencyObject d, BindableCommand value)     {         d.SetValue(CommandProperty, value);     }     public static BindableCommand GetCommand(DependencyObject d)     {         return (BindableCommand)d.GetValue(CommandProperty);     }     private static void OnCommandPropertyChanged(DependencyObject d,         DependencyPropertyChangedEventArgs e)     {         var control = d as ListViewBase;         if (control != null)             control.ItemClick += OnItemClick;     }     private static void OnItemClick(object sender, ItemClickEventArgs e)     {         var control = sender as ListViewBase;         var command = GetCommand(control);         if (command != null &amp;&amp; command.CanExecute(e.OriginalSource))             command.ExecuteWithMoreParameters(e.OriginalSource, e.ClickedItem);     } } </code></pre>  <p>What I'm asking is how can I know if user tap on the TextBlock or Button. I tried to handle ItemClickCommand event in this way in ViewModel to search controls in VisualTree (is this the best solution?), but the cast to DependencyObject doesn't work (returns always null)</p>  <pre><code>public void ItemClicked(object originalSource, object clickedItem)     {         var source = originalSourceas DependencyObject;         if (source == null)             return;                 } </code></pre>