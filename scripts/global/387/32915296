<p>I'm running this command in my script, and it's deleting all but 5 of each file, but it's not keeping the last 5 files based on date:</p>  <pre><code>ls -rv | awk -F_ '++n[$1]&gt;5' | xargs rm </code></pre>  <p>**underscore is the delimiter between the prefix (hostname) and the filenames.</p>  <p>I've tried some other stuff too, but it didn't seem to do the trick.</p>  <p>I'm running this to delete all but the last n files in a folder and it works correctly:</p>  <pre><code>rm -f $(ls -1t -I "*.sh" | tail -n +21) </code></pre>  <p>This applies to everything though.</p>  <p>I have another folder full of backups from various devices that all have hostname prefixes.  The format is: hostname_config.backup-timestamp.</p>