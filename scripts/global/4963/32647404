<p>Some mysterious things are happening to my WPF app. I changed main window and after closing it app doesn't shut down. Here's my App.xaml:</p>  <pre><code>    &lt;Application          xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"          xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"          xmlns:local="clr-namespace:LogAnalysis" x:Class="LogAnalysis.App"          StartupUri="ChartWindow.xaml" ShutdownMode="OnMainWindowClose"&gt;         &lt;Application.MainWindow&gt;             &lt;local:ChartWindow/&gt;         &lt;/Application.MainWindow&gt;     &lt;/Application&gt; </code></pre>  <p>I tried to figure out why process is still alive after closing and wrote this:</p>  <pre><code>    foreach (var window in Application.Current.Windows)     {         MessageBox.Show((window as Window).Title);     } </code></pre>  <p>Two message boxes with the same message were shown. So, it seem like there are two instances of main window are running in the one instance of app.</p>  <p>I can't use solution with this:</p>  <pre><code>    protected override void OnClosed(EventArgs e)     {         base.OnClosed(e);         Application.Current.Shutdown();     } </code></pre>  <p>because <code>Window.Closing</code> event is triggered twice because of the second instance of the window (and it corrupts user settings).</p>