<p>I want to delete the main executable plus all dependency dlls after start of a c# executable. I can delete the files (via IRP_MJ_SET_INFORMATION from kernelmode) but the application crashes likely due to paged out memory and can not fetch it from disk:</p>  <pre><code>System.InvalidProgramException: Common Language Runtime detected an invalid program. </code></pre>  <p>I am currently looking at VirtualLock to lock all pages. Is there an easier way of doing this?</p>