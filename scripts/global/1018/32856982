<p>I'm programming in a NodeMCU using LuaLoader. I'm trying to read the ADC of the Node and send it to a PHP file in my public domain.</p>  <p>With the next code I get the adc and the Node's IP and send it through GET.</p>  <pre><code>x = adc.read(0); ip = wifi.sta.getip();  conn=net.createConnection(net.TCP, 0)  conn:on("receive", function(conn, payload) print(payload) end)  conn:connect(80,'example.com')  conn:send("GET /data.php?mdata="..x.."&amp;ip="..ip.." HTTP/1.1\r\n")  conn:send("Host: robcc.esy.es\r\n")  conn:send("Connection: keep-alive\r\nAccept: */*\r\n")  conn:send("User-Agent: Mozilla/4.0 (compatible; esp8266 Lua; Windows NT 5.1)\r\n") conn:send("\r\n") print ("Done") </code></pre>  <p>The code works correctly. If I paste this in my LuaLoader it will return:</p>  <pre><code> HTTP/1.1 200 OK  Date: Wed, 30 Sep 2015 02:47:51 GMT  Server: Apache  X-Powered-By: PHP/5.5.26  Content-Length: 0  Keep-Alive: timeout=2, max=100  Connection: Keep-Alive  Content-Type: text/html   Done </code></pre>  <p>However, I want to repeat the code inside an alarm and send the data each minute, but it doesnt work.</p>  <pre><code>tmr.alarm(0, 60000, 1, function()     x = adc.read(0);     ip = wifi.sta.getip();      conn=net.createConnection(net.TCP, 0)      conn:on("receive", function(conn, payload) print(payload) end)      conn:connect(80,'robcc.esy.es')      conn:send("GET /data.php?mdata="..x.."&amp;ip="..ip.." HTTP/1.1\r\n")      conn:send("Host: robcc.esy.es\r\n")      conn:send("Connection: keep-alive\r\nAccept: */*\r\n")      conn:send("User-Agent: Mozilla/4.0 (compatible; esp8266 Lua; Windows NT 5.1)\r\n")     conn:send("\r\n")     print ("Done")  end ) </code></pre>  <p>The output is only...</p>  <pre><code> Done </code></pre>  <p>...without the payload. It is not sending the data. </p>  <p>I tried putting the code in a function, in another file and calling it to the alarm with <strong>dotfile</strong> but it does not work. I tried giving it more time to send the data extending the alarm 2 minutes but nothing.</p>