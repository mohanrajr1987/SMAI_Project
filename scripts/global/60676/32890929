<p>I building application in Symfony 2.<br> I have to filter users basing on data passed in form.<br> I wrote something like this in my controller:</p>  <pre><code>$em = $this-&gt;getDoctrine()-&gt;getManager(); $qb = $em-&gt;createQueryBuilder(); $qb-&gt;addSelect('user'); $qb-&gt;from('Application\Sonata\UserBundle\Entity\User', 'user');  if(($filter['freelancer'])){     $qb-&gt;setParameters(array('freelancer' =&gt; $filter['freelancer']))     -&gt;andWhere('user.firstname = :freelancer'); } if(($filter['category'])){     $qb-&gt;innerJoin('Flexihub\MainBundle\Entity\Category', 'category', 'WITH', 'user.category = category.id')     -&gt;setParameters(array('category' =&gt; $filter['category']))     -&gt;andWhere('user.category = :category'); } $query = $qb-&gt;getQuery(); $result = $query-&gt;getResult(); dump($result); </code></pre>  <p>Im stuck with error when im trying to pass both parameters. <pre><code> Invalid parameter number: number of bound variables does not match number of tokens </pre></code></p>  <p>What am I doing wrong? Is there better solution to solve my problem?</p>