<p>I'm running in troubles when attempting to run Gtk+ from a Qt application.</p>  <p>To clarify the context, I wrote (together with Jan Wielemaker) some Qt stuff  for a portable <a href="https://github.com/SWI-Prolog/packages-swipl-win" rel="nofollow">SWI-Prolog console</a>.</p>  <p>It turned out to be a bit complicated, mainly because SWI-Prolog has its own thread management, and I had the requirement that was possible to instantiate multiple consoles, that <em>could</em> run their own thread... of course, the GUI had to be syncronized. Maybe I didn't took the better path to implementation, that - now I speculate - could be using virtual tty (forkpty and friends)...</p>  <p>Recently, an interesting pack has been released, <a href="http://www.swi-prolog.org/pack/list?p=plgi" rel="nofollow">PLGI</a>, that enables building GObject based application.</p>  <p>It works great when started from swipl executable, but crashes when running from swipl-win.</p>  <p>Minimal example (requires PLGI, clearly, that in turn requires at least SWI-Prolog ver. 7.3, so perform the pack installation with <code>?- pack_install(plgi).</code> )</p>  <pre><code>#include &lt;QApplication&gt; #include &lt;SWI-cpp.h&gt; #include "mainwindow.h" #include &lt;QTimer&gt;  int main(int argc, char *argv[]) {     QApplication a(argc, argv);     PlEngine e(argc, argv);      QTimer::singleShot(5000, []() {         printf("inside\n");         int rc = PlCall("consult('/home/carlo/lib/swipl/pack/plgi/examples/00-simple-example')");         printf("result %d\n", rc);     });     printf("after\n");      MainWindow w;     w.show();      return a.exec(); } </code></pre>  <p>And the process output:</p>  <pre><code>Welcome to SWI-Prolog (Multi-threaded, 64 bits, Version 7.3.6-17-g243e698-DIRTY) Copyright (c) 1990-2015 University of Amsterdam, VU Amsterdam SWI-Prolog comes with ABSOLUTELY NO WARRANTY. This is free software, and you are welcome to redistribute it under certain conditions. Please visit http://www.swi-prolog.org for details.  For help, use ?- help(Topic). or ?- apropos(Word).   (use_plgi:2644): GLib-GObject-WARNING **: cannot register existing type 'GdkDisplayManager'  (use_plgi:2644): GLib-CRITICAL **: g_once_init_leave: assertion 'result != 0' failed  (use_plgi:2644): GLib-GObject-CRITICAL **: g_object_new: assertion 'G_TYPE_IS_OBJECT (object_type)' failed </code></pre>  <p>Of course, a Qt console application works:</p>  <pre><code>#include &lt;QCoreApplication&gt; #include &lt;SWI-cpp.h&gt; #include &lt;QTimer&gt;  int main(int argc, char *argv[]) {     QCoreApplication a(argc, argv);     PlEngine e(argc, argv);      printf("before\n");     QTimer::singleShot(1000, []() {         printf("inside\n");         int rc = PlCall("consult('/home/carlo/lib/swipl/pack/plgi/examples/00-simple-example')");         printf("result %d\n", rc);     });     printf("after\n");      return a.exec(); } </code></pre>  <p>From what I read about the error</p>  <pre><code>(use_plgi:2644): GLib-GObject-WARNING **: cannot register existing type 'GdkDisplayManager' </code></pre>  <p>seems that the <em>message queue</em> cannot work, I've been unable to track down the problem. Any hint available ?</p>