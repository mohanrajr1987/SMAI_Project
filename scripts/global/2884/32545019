<p>When deploying an EJB jar using the compatability=v2 flag, and that jar contains another JAR which has a class that uses Java 8 lambda expressions, the deployment fails and I get the following errors in the log:</p>  <p>use annotations (@Stateless)</p>  <pre><code>Failed to scan for annotations: 52264 Archive type of (path to EJB JAR) was not recognized. </code></pre>  <p>Checked also change the order of the files, leaving the class that has lambda lastly the deployment works correctly.</p>  <p>I use netbeans IDE in the last version</p>  <p>glassfish too is up to date</p>  <p>I'm out of ideas for this.</p>