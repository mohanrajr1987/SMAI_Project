<p>I am trying to send a message from background.js to content.js.  <code>addListener</code> in content.js is not working.</p>  <p><strong>background.js</strong></p>  <pre><code>chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab)  {      console.log(tab.url);     if(changeInfo.status=="complete"){         chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {             if(tabs.length!=0){                 chrome.tabs.sendMessage(tabs[0].id, {message: "sendurl"}, function(response) {                     console.log(response.url);                 });             }         });         console.log("load complete");     } }); </code></pre>  <p><strong>content.js</strong></p>  <pre><code>chrome.runtime.onMessage.addListener(   function(request, sender, sendResponse) {     if( request.message === "sendurl" ) {       var firstHref = $("a[href^='http']").eq(0).attr("href");        console.log(firstHref);       sendResponse({url: firstHref});     }   } ); </code></pre>  <p><strong>manifest.json</strong></p>  <pre><code>   "background": {     "scripts": ["background.js"]   },   "content_scripts": [     {       "matches": ["https://*/","http://*/"],       "js": ["jquery-2.1.4.js","enc-base64-min.js","hmac-sha256.js","content.js"]      }   ], </code></pre>  <p>After some tme, it gives error: <code>TypeError: Cannot read property 'url' of undefined</code></p>