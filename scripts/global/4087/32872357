<p>I want to make a new pass which processes loop information, and I want this pass into the <code>SelectionDAGISel</code> class. </p>  <p>But I got so many errors. Who do you know correct method for using <code>MachineLoopInfo</code> in <code>SelectionDAGISel</code> class? </p>  <p>This source code is what I wrote.</p>  <pre><code>void SelectionDAGISel::getAnalysisUsage(AnalysisUsage &amp;AU) const {      AU.addRequired&lt;AliasAnalysis&gt;();      AU.addPreserved&lt;AliasAnalysis&gt;();      AU.addRequired&lt;GCModuleInfo&gt;();      AU.addPreserved&lt;GCModuleInfo&gt;();      AU.addRequired&lt;MachineLoopInfo&gt;();           ....  }  bool SelectionDAGISel::runOnMachineFunction(MachineFunction &amp;mf) {      ...      MachineLoopInfo *MLI = &amp;getAnalysis&lt;MachineLoopInfo&gt;();      ... } </code></pre>  <p>and these are the errors what I got.</p>  <pre><code>lli: /home/hochan/Desktop/Task/CGRA/LLVM/llvm/include/llvm/ADT/ilist.h:391: NodeTy&amp; llvm::iplist&lt;NodeTy, Traits&gt;::front() [with NodeTy = llvm::MachineBasicBlock; Traits = llvm::ilist_traits&lt;llvm::MachineBasicBlock&gt;; llvm::iplist&lt;NodeTy, Traits&gt;::reference = llvm::MachineBasicBlock&amp;]: Assertion `!empty() &amp;&amp; "Called front() on empty list!"' failed. #0 0x1477b9a llvm::sys::PrintStackTrace(llvm::raw_ostream&amp;) /home/hochan/Desktop/Task/CGRA/LLVM/llvm/lib/Support/Unix/Signals.inc:405:0 #1 0x1477eaf PrintStackTraceSignalHandler(void*) /home/hochan/Desktop/Task/CGRA/LLVM/llvm/lib/Support/Unix/Signals.inc:463:0 #2 0x1476744 llvm::sys::RunSignalHandlers() /home/hochan/Desktop/Task/CGRA/LLVM/llvm/lib/Support/Signals.cpp:34:0 #3 0x1476b84 SignalHandler(int) /home/hochan/Desktop/Task/CGRA/LLVM/llvm/lib/Support/Unix/Signals.inc:211:0 #4 0x7fbcc390c050 __restore_rt (/lib64/libpthread.so.0+0x10050) #5 0x7fbcc2b66e77 gsignal (/lib64/libc.so.6+0x34e77) #6 0x7fbcc2b6827a abort (/lib64/libc.so.6+0x3627a) #7 0x7fbcc2b60016 (/lib64/libc.so.6+0x2e016) #8 0x7fbcc2b600c2 (/lib64/libc.so.6+0x2e0c2) #9 0xcae367 llvm::iplist&lt;llvm::MachineBasicBlock, llvm::ilist_traits&lt;llvm::MachineBasicBlock&gt; &gt;::front() /home/hochan/Desktop/Task/CGRA/LLVM/llvm/include/llvm/ADT/ilist.h:392:0 #10 0xcada46 llvm::MachineFunction::front() /home/hochan/Desktop/Task/CGRA/LLVM/llvm/include/llvm/CodeGen/MachineFunction.h:355:0 #11 0xccf196 llvm::GraphTraits&lt;llvm::MachineFunction*&gt;::getEntryNode(llvm::MachineFunction*) /home/hochan/Desktop/Task/CGRA/LLVM/llvm/include/llvm/CodeGen/MachineFunction.h:515:0 #12 0xcd182a void llvm::DominatorTreeBase&lt;llvm::MachineBasicBlock&gt;::recalculate&lt;llvm::MachineFunction&gt;(llvm::MachineFunction&amp;) /home/hochan/Desktop/Task/CGRA/LLVM/llvm/include/llvm/Support/GenericDomTree.h:724:0 #13 0xcceb68 llvm::MachineDominatorTree::runOnMachineFunction(llvm::MachineFunction&amp;) /home/hochan/Desktop/Task/CGRA/LLVM/llvm/lib/CodeGen/MachineDominators.cpp:43:0 #14 0xcea92d llvm::MachineFunctionPass::runOnFunction(llvm::Function&amp;) /home/hochan/Desktop/Task/CGRA/LLVM/llvm/lib/CodeGen/MachineFunctionPass.cpp:41:0 #15 0x107c45a llvm::FPPassManager::runOnFunction(llvm::Function&amp;) /home/hochan/Desktop/Task/CGRA/LLVM/llvm/lib/IR/LegacyPassManager.cpp:1527:0 #16 0x107c5ed llvm::FPPassManager::runOnModule(llvm::Module&amp;) /home/hochan/Desktop/Task/CGRA/LLVM/llvm/lib/IR/LegacyPassManager.cpp:1549:0 #17 0x107c943 (anonymous namespace)::MPPassManager::runOnModule(llvm::Module&amp;) /home/hochan/Desktop/Task/CGRA/LLVM/llvm/lib/IR/LegacyPassManager.cpp:1605:0 #18 0x107d021 llvm::legacy::PassManagerImpl::run(llvm::Module&amp;) /home/hochan/Desktop/Task/CGRA/LLVM/llvm/lib/IR/LegacyPassManager.cpp:1708:0 #19 0x107d25b llvm::legacy::PassManager::run(llvm::Module&amp;) /home/hochan/Desktop/Task/CGRA/LLVM/llvm/lib/IR/LegacyPassManager.cpp:1740:0 #20 0x117f5d1 llvm::MCJIT::emitObject(llvm::Module*) /home/hochan/Desktop/Task/CGRA/LLVM/llvm/lib/ExecutionEngine/MCJIT/MCJIT.cpp:164:0 #21 0x117f8e9 llvm::MCJIT::generateCodeForModule(llvm::Module*) /home/hochan/Desktop/Task/CGRA/LLVM/llvm/lib/ExecutionEngine/MCJIT/MCJIT.cpp:203:0 #22 0x117fd21 llvm::MCJIT::finalizeObject() /home/hochan/Desktop/Task/CGRA/LLVM/llvm/lib/ExecutionEngine/MCJIT/MCJIT.cpp:250:0 #23 0xb98bcb main /home/hochan/Desktop/Task/CGRA/LLVM/llvm/tools/lli/lli.cpp:597:0 #24 0x7fbcc2b53aa5 __libc_start_main (/lib64/libc.so.6+0x21aa5) #25 0xb97399 _start (/usr/local/bin/lli+0xb97399) Stack dump: 0.  Program arguments: lli test_loop.bc  1.  Running pass 'Function Pass Manager' on module 'test_loop.bc'. 2.  Running pass 'MachineDominator Tree Construction' on function '@test' Stopped </code></pre>