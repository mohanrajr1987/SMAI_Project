<p>i have predefined times stored in an array. i wrote a for loop to go threw an array and take snapshots from canvas and append them to a div  via onclick event. The problem is that i can only get the last snapshot unless i put an alert between snapshots. I tried using a seeked listener ,setting a timeout and I tried putting the snapshot function in a while loop waiting on a variable to change but i can only get the last timestamp in the array to take a snapshot unless there is an alert or confirm in the loop. </p>  <p><a href="http://codepen.io/anon/pen/gaMbxp" rel="nofollow">Codepin Example</a></p>  <p>HTML </p>  <pre><code>    &lt;div id="DesiredvideoPlayer" &gt;      &lt;br&gt;  &lt;video muted controls  id="videoPlayer" style="float: left;"&gt;          &lt;source id='currentVID' src="http://html5multimedia.com/code/ch9/media/elephants-dream-medium.mp4" &gt; &lt;/video&gt; &lt;br&gt;     &lt;div id="PreCHPscroll"&gt;Array snaps     &lt;/div&gt;      &lt;div id="snapshotscroll"&gt;Manual Snaps     &lt;/div&gt;     &lt;div&gt;&lt;input type="checkbox" id="Alerts"&gt;: alert between snapshots&lt;/div&gt;     &lt;/div&gt; &lt;button id="snap" onclick="PreCHps()"&gt;Snapshots from array&lt;/button&gt; &lt;button id="snap" onclick="snap()"&gt;Take Snapshot&lt;/button&gt; </code></pre>  <p>CSS</p>  <pre><code>video, canvas {     /border:1px solid #000; } #DesiredvideoPlayer{     background-color:grey;     /width: 100%;     /height:auto;     /height:100%;     /display: block;;     /display: inline-block; } #PreCHPscroll {     outline: 1px solid steelblue;     width: auto;     height:120px;     overflow-x: auto;     overflow-y: hidden;     white-space: nowrap;     /font-size: 0px; } #snapshotscroll {     outline: 1px solid steelblue;     width: auto;     height:120px;     overflow-x: auto;     overflow-y: hidden;     white-space: nowrap; } .snapshots {     width: 200px;     height: 100px;     border: 1px solid white;     display: inline-block; } </code></pre>  <p>JAVACRIPT</p>  <pre><code>var CHPcategory_ALL_ = [5,63,264,348,479,512,551,600]; function PreCHps() {     scrollDIV = 'PreCHPscroll';      if(document.getElementById("videoPlayer").readyState &gt;= 4) {         document.getElementById("videoPlayer").addEventListener("seeked", ready2snap );      for (i = 0; i &lt; CHPcategory_ALL_.length; i++) { //!!!!!!! toggle alert       if (document.getElementById("Alerts").checked == true){     alert("snapshot#" + snapcount);     } //!!!!!!! toggle alert          setTimeout(next(), 1500);     }         setTimeout(chpThumbsMade, 1500);      } } function next(){ document.getElementById("videoPlayer").currentTime= CHPcategory_ALL_[i]; } function chpThumbsMade(){     scrollDIV = 'snapshotscroll'; document.getElementById("videoPlayer").removeEventListener("seeked", ready2snap ); } function ready2snap(){     scrollDIV = 'PreCHPscroll';     snap();  } /********* snap shot script ********/ var w = 200, h = 100, snapcount = 0, scrollDIV = 'snapshotscroll'; function snap() {      snapcount = snapcount+1;         var snapnum = "snapshot#" + snapcount;     //alert(snapnum);     // make new div     var newsnap = document.createElement('div');     newsnap.id =  (snapnum);     newsnap.className = 'snapshots';     //var scrollDIV = scrollDIV ;     document.getElementById(scrollDIV).appendChild(newsnap);       var crrntTsec = document.getElementById('videoPlayer').currentTime;     var clckFnct = 'document.getElementById("videoPlayer").currentTime=' + crrntTsec;      document.getElementById(snapnum).setAttribute('onclick', clckFnct);      var cv = document.createElement("canvas");     cv.width = w;     cv.height = h;           // Get timestamp     var Tsec = Math.floor(document.getElementById('videoPlayer').currentTime);           // convert to time stamp     var hour = Math.floor(Tsec / 3600);     var min = Math.floor(Tsec / 60);     var secs = (Tsec - (min * 60));      hour = (hour &gt;= 10) ? hour : "0" + hour;     min = (min &gt;= 10) ? min : "0" + min;     secs = (secs &gt;= 10) ? secs : "0" + secs;     var Tstamp = hour+ ":" +min+ ":" +secs ;       document.getElementById(snapnum).appendChild(cv);     var cx = cv.getContext('2d');     cx.fillRect(0, 0, w, h);       // Grab the image from the video     cx.drawImage(document.getElementById('videoPlayer'), 0, 0, w, h);          cx.font = "12pt Calibri";           cx.strokeStyle="#40FF00";         cx.strokeText(Tstamp, 5, 95);         cx.strokeText(Tstamp, 6, 96);         cx.strokeText(Tstamp, 6, 97);         cx.strokeText(Tstamp, 7, 95);    cx.fillStyle = "#000000";    cx.fillText(Tstamp, 6, 96);       document.getElementById(scrollDIV).scrollLeft +=  5000;  }        </code></pre>  <p><a href="http://codepen.io/anon/pen/gaMbxp" rel="nofollow">Codepen example</a></p>