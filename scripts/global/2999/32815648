<p>I want to write the controller of a view together in a view template.</p>  <p>However, script with a view template is not executed.</p>  <p>I adopted Paolo Moretti's approach in <a href="http://stackoverflow.com/questions/12197880/angularjs-how-to-make-angular-load-script-inside-ng-include#">AngularJS: How to make angular load script inside ng-include?</a> to execute the js in a view template.</p>  <pre><code>app.directive('script', function (){     return {         restrict: 'E',         scope: false,         link: function (scope, elem, attr) {             if (attr.type === 'text/javascript-lazy') {                 var code = elem.text();                 var f = new Function(code);                 f();             }         }     }; }); </code></pre>  <p>The normal script works fine: e.g. alert('abc');</p>  <p>But when I declare a controller in the view template, it does not work. The view template uses the controller defined within.</p>  <pre><code>&lt;script type="text/javascript-lazy"&gt;   alert("app="+app);   app.controller('serviceCtrl',function($scope,$routeParams){     $scope.services=['ser1','serv2','serv3'];     $scope.theService=$scope.services[$routeParams.id];     }); &lt;/script&gt;  &lt;div id="servicesbox" ng-controller="serviceCtrl"&gt;     &lt;div id="serviceheader"&gt;&lt;span class="h1"&gt;Services&lt;/span&gt;&lt;/div&gt;     &lt;p&gt;{{theService}}&lt;/p&gt; &lt;/div&gt; </code></pre>  <p>When load the above template in the view, it first alerts me "app=[object Object]" which mean "app" is NOT undefined. I then get an error in the console:</p>  <blockquote>   <p>"Error: [ng:areq]   <a href="http://errors.angularjs.org/1.3.14/ng/areq?p0=serviceCtrl&amp;p1=not%20a" rel="nofollow">http://errors.angularjs.org/1.3.14/ng/areq?p0=serviceCtrl&amp;p1=not%20a</a><br>   1.#QNAN0unction%2C%20got%20undefined</p> </blockquote>  <p>When I move the controller definition to the main js file loaded by the website, the controller works fine. And the value of <em>theService</em> is displayed.</p>  <p>So what is the problem?</p>