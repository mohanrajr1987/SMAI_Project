<p>I have a table Students and a second able Books. I'm trying to get a list of students along with the number of books they own.</p>  <pre><code>"SELECT      StudentID,      FullName,     book_count.ct FROM      students LEFT JOIN (     SELECT         StudentID,         COUNT(DISTINCT id) AS ct     FROM         books     GROUP BY         StudentID     ) AS book_count ON      book_count.StudentID = students.StudentID ORDER BY     students.FullName ASC LIMIT 0, 30; </code></pre>  <p>This query takes about 6 seconds to run and it will grow slower and slower as more books are added. Looking at the query profile >90% of the time is spend "copying to temp table". The problem is that my sub-select query that gets the count of books searches and total the entire books table regardless of how many students I might look up, 30 in my case. How do I improve performance on this? Thank you.</p>