<p>I want to fill the value of product_id. If article_code is not in the table, it executes the insert, but if record exists I don't know how to select the id of that record and assign to product_id.</p>  <p>The table "core_product" looks like that:</p>  <ul> <li>id </li> <li>article_code</li> </ul>  <p>Here the code (inside of  a function):</p>  <pre><code>DECLARE     product_id int; BEGIN     INSERT INTO core_product(article_code)          SELECT NEW.article_code         WHERE NOT EXISTS (             SELECT id INTO product_id             FROM core_product             WHERE article_code = NEW.article_code         )         RETURNING id INTO product_id; END </code></pre>