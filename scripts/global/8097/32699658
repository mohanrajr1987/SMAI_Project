<p>I have a series of reports that I'd like to display as available for download - based on the source information being uploaded to the system.  Each report may exist for multiple reporting periods and may require one or multiple source files to be uploaded before being available.</p>  <p>My tables look like this:</p>  <ul> <li>Report - stores the report type (ReportID) and Description</li> <li>ReportDependency - stores the report type (ReportID) and the dependencies to generate that report (may be one or multiple) (SourceTypeID)</li> <li>SourceType - stores the different types of source files that might be uploaded to the system.</li> <li>Source - stores the source data files that have been uploaded (SourceTypeID, ReportingPeriodID, and UploadDateTime)</li> <li>Reporting Period - stores the various reporting periods.</li> </ul>  <p><a href="http://i.stack.imgur.com/VpsQ9.jpg" rel="nofollow"><img src="http://i.stack.imgur.com/VpsQ9.jpg" alt="TablesChart"></a></p>  <p>Based on the sources available (uploaded to the system), I want to show what reports can be generated/downloaded.</p>  <p>I have come up with this, but it's not correct:</p>  <pre><code>SELECT RD.ReportID, RP.ReportingPeriodID, COUNT(S.UploadDateTime) AS          DependenciesUploaded FROM ReportDependency RD     INNER JOIN Source S ON RD.SourceTypeID = S.SourceTypeID     INNER JOIN ReportingPeriod RP ON S.ReportingPeriodID = RP.ReportingPeriodID GROUP BY      RP.ReportingPeriodID, RD.ReportID HAVING     COUNT(S.UploadDateTime) = (SELECT COUNT(SourceTypeID) FROM ReportDependency WHERE ReportID = RD.ReportID) </code></pre>  <p>If my data looks like this:</p>  <p><a href="http://i.stack.imgur.com/NPPyG.jpg" rel="nofollow"><img src="http://i.stack.imgur.com/NPPyG.jpg" alt="enter image description here"></a></p>  <p>I should get:</p>  <ul> <li>Report 1 for ReportingPeriod 1 is available </li> <li>Report 2 not available yet </li> <li>Report 3 for ReportingPeriod 2 is available</li> </ul>  <p>Thanks for any help you can provide.</p>  <p>Russell</p>