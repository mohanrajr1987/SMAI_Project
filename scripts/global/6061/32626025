<p>I am working on a enterprise aplication, contains 6 subprojects. I am migrating it from glassfish 2 to glassfish 3.1.2.2. I am using Icefaces 1.8.</p>  <p>I made Icefaces 1.8.2a (which should work on glassfish 3.1.2.2) like I read somewhere on stackowerflow.</p>  <p>I am stacked on this. FacesContext.getCurrentInstance() returns null when it is called in common-classes subproject. What confused me even more is thet when it is called in other subproject (b2b-webengine) it is not null. Both procejts are packed as jars.</p>  <p>glassfish-web.xml (in web subproject):</p>  <pre><code>&lt;!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd"&gt; &lt;glassfish-web-app error-url=""&gt;   &lt;class-loader delegate="false"/&gt;   &lt;jsp-config&gt;     &lt;property name="keepgenerated" value="true"&gt;       &lt;description&gt;Keep a copy of the generated servlet class' java code.&lt;/description&gt;     &lt;/property&gt;       &lt;/jsp-config&gt;   &lt;property name="useBundledJsf" value="true"/&gt; &lt;/glassfish-web-app&gt; </code></pre>  <p>web.xml contains:</p>  <pre><code>&lt;servlet&gt;     &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;     &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;     &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet&gt;     &lt;servlet-name&gt;Persistent Faces Servlet&lt;/servlet-name&gt;     &lt;servlet-class&gt;com.icesoft.faces.webapp.xmlhttp.PersistentFacesServlet&lt;/servlet-class&gt;     &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt;     &lt;servlet-mapping&gt;     &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;     &lt;url-pattern&gt;*.jsf&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;servlet-mapping&gt;     &lt;servlet-name&gt;Persistent Faces Servlet&lt;/servlet-name&gt;     &lt;url-pattern&gt;/xmlhttp/*&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;servlet-mapping&gt;     &lt;servlet-name&gt;Persistent Faces Servlet&lt;/servlet-name&gt;     &lt;url-pattern&gt;*.iface&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; </code></pre>  <p>pom.xml (main project):</p>  <pre><code>    &lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;     &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;     &lt;groupId&gt;rs.navigator&lt;/groupId&gt;     &lt;artifactId&gt;b2b&lt;/artifactId&gt;     &lt;packaging&gt;pom&lt;/packaging&gt;     &lt;version&gt;2.5.31&lt;/version&gt;     &lt;name&gt;B2B Navigator u J2EE 5 implementaciji&lt;/name&gt;     &lt;url&gt;http://maven.apache.org&lt;/url&gt;     &lt;modules&gt;         &lt;module&gt;b2b-ear&lt;/module&gt;         &lt;module&gt;common-classes&lt;/module&gt;         &lt;module&gt;b2b-ejb&lt;/module&gt;         &lt;module&gt;b2b-webapplication&lt;/module&gt;                 &lt;module&gt;b2b-webengine&lt;/module&gt;     &lt;/modules&gt;     &lt;properties&gt;         &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;         &lt;project.build.resourcesEncoding&gt;UTF-8&lt;/project.build.resourcesEncoding&gt;         &lt;project.compiler.source&gt;1.7&lt;/project.compiler.source&gt;         &lt;project.compiler.target&gt;1.7&lt;/project.compiler.target&gt;         &lt;project.ejb.version&gt;3.1&lt;/project.ejb.version&gt;         &lt;project.ear.version&gt;6&lt;/project.ear.version&gt;         &lt;project.version&gt;2.5.31&lt;/project.version&gt;     &lt;/properties&gt;     &lt;distributionManagement&gt;         &lt;repository&gt;             &lt;id&gt;navigator&lt;/id&gt;             &lt;name&gt;Navigator d.o.o.&lt;/name&gt;             &lt;url&gt;http://192.168.0.51:8081/nexus/content/repositories/navigator&lt;/url&gt;         &lt;/repository&gt;     &lt;/distributionManagement&gt;     &lt;build&gt;         &lt;pluginManagement&gt;             &lt;plugins&gt;                 &lt;plugin&gt;                     &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;                     &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;                     &lt;version&gt;2.0.2&lt;/version&gt;                     &lt;configuration&gt;                         &lt;source&gt;${project.compiler.source}&lt;/source&gt;                         &lt;target&gt;${project.compiler.target}&lt;/target&gt;                         &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;                     &lt;/configuration&gt;                 &lt;/plugin&gt;                 &lt;plugin&gt;                     &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;                     &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;                     &lt;version&gt;2.2&lt;/version&gt;                     &lt;configuration&gt;                         &lt;encoding&gt;${project.build.resourcesEncoding}&lt;/encoding&gt;                     &lt;/configuration&gt;                 &lt;/plugin&gt;                 &lt;plugin&gt;                     &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;                     &lt;artifactId&gt;maven-ejb-plugin&lt;/artifactId&gt;                     &lt;version&gt;2.1&lt;/version&gt;                     &lt;configuration&gt;                         &lt;ejbVersion&gt;${project.ejb.version}&lt;/ejbVersion&gt;                         &lt;generateClient&gt;true&lt;/generateClient&gt;                     &lt;/configuration&gt;                 &lt;/plugin&gt;                 &lt;plugin&gt;                     &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;                     &lt;artifactId&gt;maven-ear-plugin&lt;/artifactId&gt;                     &lt;version&gt;2.4.1&lt;/version&gt;                     &lt;configuration&gt;                         &lt;version&gt;${project.ear.version}&lt;/version&gt;                         &lt;defaultLibBundleDir&gt;lib&lt;/defaultLibBundleDir&gt;                              &lt;initializeInOrder&gt;true&lt;/initializeInOrder&gt;                         &lt;modules&gt;                             &lt;jarModule&gt;                                 &lt;groupId&gt;rs.navigator.common&lt;/groupId&gt;                                 &lt;artifactId&gt;common-classes&lt;/artifactId&gt;                                 &lt;bundleFileName&gt;common-classes.jar&lt;/bundleFileName&gt;                             &lt;/jarModule&gt;                             &lt;ejbModule&gt;                                 &lt;groupId&gt;rs.navigator.b2b&lt;/groupId&gt;                                 &lt;artifactId&gt;b2b-ejb&lt;/artifactId&gt;                                 &lt;bundleFileName&gt;b2b-ejb.jar&lt;/bundleFileName&gt;                                                                 &lt;bundleDir&gt;lib&lt;/bundleDir&gt;                             &lt;/ejbModule&gt;                             &lt;webModule&gt;                                 &lt;groupId&gt;rs.navigator.b2b&lt;/groupId&gt;                                 &lt;artifactId&gt;b2b-webapplication&lt;/artifactId&gt;                                 &lt;bundleFileName&gt;b2b-webapplication.war&lt;/bundleFileName&gt;                             &lt;/webModule&gt;                             &lt;jarModule&gt;                                 &lt;groupId&gt;rs.navigator.b2b&lt;/groupId&gt;                                 &lt;artifactId&gt;b2b-webengine&lt;/artifactId&gt;                                 &lt;bundleFileName&gt;b2b-webengine.jar&lt;/bundleFileName&gt;                             &lt;/jarModule&gt;                             &lt;/modules&gt;                     &lt;/configuration&gt;                 &lt;/plugin&gt;                 &lt;plugin&gt;                     &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;                     &lt;artifactId&gt;properties-maven-plugin&lt;/artifactId&gt;                     &lt;version&gt;1.0-alpha-2&lt;/version&gt;                     &lt;executions&gt;                         &lt;execution&gt;                             &lt;phase&gt;generate-resources&lt;/phase&gt;                             &lt;goals&gt;                                 &lt;goal&gt;write-project-properties&lt;/goal&gt;                             &lt;/goals&gt;                             &lt;configuration&gt;                                 &lt;outputFile&gt;${project.build.outputDirectory}/META-INF/version.properties&lt;/outputFile&gt;                             &lt;/configuration&gt;                         &lt;/execution&gt;                     &lt;/executions&gt;                 &lt;/plugin&gt;             &lt;/plugins&gt;         &lt;/pluginManagement&gt;         &lt;plugins&gt;             &lt;plugin&gt;                 &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;                 &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;                 &lt;version&gt;2.3.2&lt;/version&gt;                 &lt;configuration&gt;                     &lt;source&gt;1.7&lt;/source&gt;                     &lt;target&gt;1.7&lt;/target&gt;                 &lt;/configuration&gt;             &lt;/plugin&gt;         &lt;/plugins&gt;     &lt;/build&gt;     &lt;pluginRepositories&gt;         &lt;pluginRepository&gt;             &lt;id&gt;rs.navigator.maven&lt;/id&gt;             &lt;name&gt;Navigator Nexus&lt;/name&gt;             &lt;url&gt;http://192.168.0.51:8081/nexus/content/groups/public&lt;/url&gt;         &lt;/pluginRepository&gt;     &lt;/pluginRepositories&gt;     &lt;repositories&gt;         &lt;repository&gt;             &lt;id&gt;rs.navigator.maven&lt;/id&gt;             &lt;name&gt;Navigator Nexus&lt;/name&gt;             &lt;url&gt;http://192.168.0.51:8081/nexus/content/groups/public&lt;/url&gt;         &lt;/repository&gt;     &lt;/repositories&gt;     &lt;dependencyManagement&gt;         &lt;dependencies&gt;             &lt;dependency&gt;                 &lt;groupId&gt;rs.navigator.bn&lt;/groupId&gt;                 &lt;artifactId&gt;BN-Enterprise-ejb&lt;/artifactId&gt;                 &lt;version&gt;0.9.0&lt;/version&gt;                 &lt;type&gt;ejb-client&lt;/type&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;rs.navigator.sso&lt;/groupId&gt;                 &lt;artifactId&gt;URNavigator-ejb&lt;/artifactId&gt;                 &lt;version&gt;2.0&lt;/version&gt;                 &lt;type&gt;ejb-client&lt;/type&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;rs.navigator.bn.collab.ws&lt;/groupId&gt;                 &lt;artifactId&gt;ConnectorService&lt;/artifactId&gt;                 &lt;version&gt;1.0&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;rs.navigator.bn.util&lt;/groupId&gt;                 &lt;artifactId&gt;web-rma-util&lt;/artifactId&gt;                 &lt;version&gt;1.0&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;rs.navigator.bn.sync&lt;/groupId&gt;                 &lt;artifactId&gt;BN-Sync-ejb&lt;/artifactId&gt;                 &lt;version&gt;2.4.0&lt;/version&gt;                 &lt;type&gt;ejb-client&lt;/type&gt;             &lt;/dependency&gt;              &lt;dependency&gt;                 &lt;groupId&gt;junit&lt;/groupId&gt;                 &lt;artifactId&gt;junit&lt;/artifactId&gt;                 &lt;version&gt;3.8.1&lt;/version&gt;                 &lt;scope&gt;test&lt;/scope&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;javax&lt;/groupId&gt;                 &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;                 &lt;version&gt;6.0&lt;/version&gt;                 &lt;scope&gt;provided&lt;/scope&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;javax.servlet&lt;/groupId&gt;                 &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;                 &lt;version&gt;3.0-alpha-1&lt;/version&gt;                 &lt;scope&gt;provided&lt;/scope&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;javax.servlet&lt;/groupId&gt;                 &lt;artifactId&gt;jstl&lt;/artifactId&gt;                 &lt;version&gt;1.0&lt;/version&gt;                 &lt;scope&gt;provided&lt;/scope&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;javax.el&lt;/groupId&gt;                 &lt;artifactId&gt;el-api&lt;/artifactId&gt;                 &lt;version&gt;1.0&lt;/version&gt;                 &lt;scope&gt;provided&lt;/scope&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;org.icefaces.custom&lt;/groupId&gt;                 &lt;artifactId&gt;icefaces-facelets&lt;/artifactId&gt;                 &lt;version&gt;1.8.2a&lt;/version&gt;             &lt;/dependency&gt;                         &lt;dependency&gt;                 &lt;groupId&gt;org.icefaces.custom&lt;/groupId&gt;                 &lt;artifactId&gt;icefaces-comps&lt;/artifactId&gt;                 &lt;version&gt;1.8.2a&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;org.icefaces.custom&lt;/groupId&gt;                 &lt;artifactId&gt;icefaces&lt;/artifactId&gt;                 &lt;version&gt;1.8.2a&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;org.icefaces.custom&lt;/groupId&gt;                 &lt;artifactId&gt;backport-util-concurrent&lt;/artifactId&gt;                 &lt;version&gt;1.0&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;                 &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;                 &lt;version&gt;1.2.2&lt;/version&gt;             &lt;/dependency&gt;                         &lt;dependency&gt;                 &lt;groupId&gt;commons-codec&lt;/groupId&gt;                 &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;                 &lt;version&gt;1.4&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;commons-io&lt;/groupId&gt;                 &lt;artifactId&gt;commons-io&lt;/artifactId&gt;                 &lt;version&gt;1.4&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;commons-collections&lt;/groupId&gt;                 &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;                 &lt;version&gt;3.2.1&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;                 &lt;artifactId&gt;commons-compress&lt;/artifactId&gt;                 &lt;version&gt;1.1&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;                 &lt;artifactId&gt;httpclient&lt;/artifactId&gt;                 &lt;version&gt;4.0.1&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;                 &lt;artifactId&gt;httpcore&lt;/artifactId&gt;                 &lt;version&gt;4.0.1&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;                 &lt;artifactId&gt;poi&lt;/artifactId&gt;                 &lt;version&gt;3.6&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;commons-lang&lt;/groupId&gt;                 &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;                 &lt;version&gt;2.6&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;                 &lt;artifactId&gt;jasperreports&lt;/artifactId&gt;                 &lt;version&gt;3.7.5&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;org.gatein.captcha&lt;/groupId&gt;                 &lt;artifactId&gt;simplecaptcha&lt;/artifactId&gt;                 &lt;version&gt;1.1.1-GA-Patch01&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt;                 &lt;artifactId&gt;quartz&lt;/artifactId&gt;                 &lt;version&gt;1.8.4&lt;/version&gt;             &lt;/dependency&gt;             &lt;dependency&gt;                 &lt;groupId&gt;javax.transaction&lt;/groupId&gt;                 &lt;artifactId&gt;jta&lt;/artifactId&gt;                 &lt;version&gt;1.1&lt;/version&gt;                 &lt;scope&gt;provided&lt;/scope&gt;             &lt;/dependency&gt;             &lt;!--dependency&gt;                 &lt;groupId&gt;neka_grupa&lt;/groupId&gt;                 &lt;artifactId&gt;SizeOf&lt;/artifactId&gt;                 &lt;version&gt;1.0&lt;/version&gt;                                     &lt;/dependency--&gt;             &lt;dependency&gt;                 &lt;groupId&gt;javax.faces&lt;/groupId&gt;                 &lt;artifactId&gt;jsf-api&lt;/artifactId&gt;                 &lt;version&gt;1.2_13&lt;/version&gt;                 &lt;!--scope&gt;provided&lt;/scope--&gt;             &lt;/dependency&gt;              &lt;dependency&gt;                 &lt;groupId&gt;javax.faces&lt;/groupId&gt;                 &lt;artifactId&gt;jsf-impl&lt;/artifactId&gt;                 &lt;version&gt;1.2_13&lt;/version&gt;             &lt;/dependency&gt;                      &lt;/dependencies&gt;     &lt;/dependencyManagement&gt; &lt;/project&gt; </code></pre>  <p>pom.xml in common-classes:</p>  <pre><code>&lt;project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;     &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;     &lt;parent&gt;         &lt;artifactId&gt;b2b&lt;/artifactId&gt;         &lt;groupId&gt;rs.navigator&lt;/groupId&gt;         &lt;version&gt;2.5.31&lt;/version&gt;     &lt;/parent&gt;     &lt;groupId&gt;rs.navigator.common&lt;/groupId&gt;     &lt;artifactId&gt;common-classes&lt;/artifactId&gt;     &lt;version&gt;2.5.31&lt;/version&gt;     &lt;url&gt;http://maven.apache.org&lt;/url&gt;     &lt;dependencies&gt;                 &lt;dependency&gt;             &lt;groupId&gt;junit&lt;/groupId&gt;             &lt;artifactId&gt;junit&lt;/artifactId&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;             &lt;artifactId&gt;jasperreports&lt;/artifactId&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;commons-io&lt;/groupId&gt;             &lt;artifactId&gt;commons-io&lt;/artifactId&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;org.icefaces.custom&lt;/groupId&gt;             &lt;artifactId&gt;icefaces&lt;/artifactId&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;javax.faces&lt;/groupId&gt;             &lt;artifactId&gt;jsf-api&lt;/artifactId&gt;         &lt;/dependency&gt;          &lt;dependency&gt;             &lt;groupId&gt;javax.faces&lt;/groupId&gt;             &lt;artifactId&gt;jsf-impl&lt;/artifactId&gt;         &lt;/dependency&gt;                    &lt;dependency&gt;             &lt;groupId&gt;javax&lt;/groupId&gt;             &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;                     &lt;/dependency&gt;                    &lt;/dependencies&gt;     &lt;build&gt;         &lt;finalName&gt;common-classes&lt;/finalName&gt;     &lt;/build&gt; &lt;/project&gt; </code></pre>  <p>pom.xml in b2b-webengine:</p>  <pre><code>&lt;project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;     &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;     &lt;parent&gt;         &lt;artifactId&gt;b2b&lt;/artifactId&gt;         &lt;groupId&gt;rs.navigator&lt;/groupId&gt;         &lt;version&gt;2.5.31&lt;/version&gt;     &lt;/parent&gt;     &lt;groupId&gt;rs.navigator.b2b&lt;/groupId&gt;     &lt;artifactId&gt;b2b-webengine&lt;/artifactId&gt;     &lt;version&gt;2.5.31&lt;/version&gt;     &lt;name&gt;B2B Navigator java deo&lt;/name&gt;     &lt;url&gt;http://maven.apache.org&lt;/url&gt;     &lt;packaging&gt;jar&lt;/packaging&gt;     &lt;dependencies&gt;         &lt;!-- Biblioteke B2B projekta --&gt;         &lt;dependency&gt;             &lt;groupId&gt;rs.navigator.common&lt;/groupId&gt;             &lt;artifactId&gt;common-classes&lt;/artifactId&gt;             &lt;version&gt;${project.version}&lt;/version&gt;             &lt;scope&gt;provided&lt;/scope&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;rs.navigator.b2b&lt;/groupId&gt;             &lt;artifactId&gt;b2b-ejb&lt;/artifactId&gt;             &lt;version&gt;${project.version}&lt;/version&gt;             &lt;type&gt;ejb&lt;/type&gt;             &lt;scope&gt;provided&lt;/scope&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;rs.navigator.sso&lt;/groupId&gt;             &lt;artifactId&gt;URNavigator-ejb&lt;/artifactId&gt;             &lt;type&gt;ejb-client&lt;/type&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;javax&lt;/groupId&gt;             &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;org.icefaces.custom&lt;/groupId&gt;             &lt;artifactId&gt;icefaces-facelets&lt;/artifactId&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;org.icefaces.custom&lt;/groupId&gt;             &lt;artifactId&gt;icefaces-comps&lt;/artifactId&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;org.icefaces.custom&lt;/groupId&gt;             &lt;artifactId&gt;icefaces&lt;/artifactId&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;org.icefaces.custom&lt;/groupId&gt;             &lt;artifactId&gt;backport-util-concurrent&lt;/artifactId&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;             &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;javax.faces&lt;/groupId&gt;             &lt;artifactId&gt;jsf-api&lt;/artifactId&gt;         &lt;/dependency&gt;          &lt;dependency&gt;             &lt;groupId&gt;javax.faces&lt;/groupId&gt;             &lt;artifactId&gt;jsf-impl&lt;/artifactId&gt;         &lt;/dependency&gt;                    &lt;dependency&gt;             &lt;groupId&gt;junit&lt;/groupId&gt;             &lt;artifactId&gt;junit&lt;/artifactId&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;commons-io&lt;/groupId&gt;             &lt;artifactId&gt;commons-io&lt;/artifactId&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;commons-collections&lt;/groupId&gt;             &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;             &lt;artifactId&gt;httpcore&lt;/artifactId&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;             &lt;artifactId&gt;httpclient&lt;/artifactId&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;org.gatein.captcha&lt;/groupId&gt;             &lt;artifactId&gt;simplecaptcha&lt;/artifactId&gt;         &lt;/dependency&gt;             &lt;/dependencies&gt;     &lt;build&gt;         &lt;finalName&gt;b2b-webengine&lt;/finalName&gt;     &lt;/build&gt; &lt;/project&gt; </code></pre>  <p>I think its some kind of dependency conflict, because there is FacesContext in both javaee-api and in jsf-api, but I tried everything, and it didnt help. </p>  <p>I will put java and iface code if it is needed.</p>  <p>EDIT:</p>  <p>Here is a example of iface page:</p>  <pre><code>&lt;html xmlns="http://www.w3.org/1999/xhtml"       xmlns:ice="http://www.icesoft.com/icefaces/component"&gt;     &lt;ice:outputDeclaration doctypeRoot="HTML"                            doctypePublic="-//W3C//DTD XHTML 1.0 Strict//EN"                            doctypeSystem="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" /&gt;     &lt;head&gt;     &lt;/head&gt;     &lt;body class="body"&gt;         &lt;div id="pageBody"&gt;             &lt;ice:outputText value="${sessionBean.testGmbculocal}"/&gt;             &lt;ice:outputText value="${sessionBean.testGmbcu}"/&gt;         &lt;/div&gt;     &lt;/body&gt; &lt;/html&gt; </code></pre>  <p>In bean mapped as sessionBean I have this (this bean is in b2b-webengine project):</p>  <pre><code>    public String getTestGmbculocal() {             System.out.println(" --- getTestGmbculocal() : " + Thread.currentThread().getId());             ZonesControllerBean zcb = rs.navigator.b2b.common.CommonUtils.getManagedBean("zonesController");             String s = zcb.getTestGmb();             return s;         }          public String getTestGmbcu() {             System.out.println(" --- getTestGmbcu() : " + Thread.currentThread().getId());             ZonesControllerBean zcb = getManagedBean("zonesController");             String s = zcb.getTestGmb();             return s;         }              private static &lt;T&gt; T getManagedBean(String beanName) { System.out.println(" --- getManagedBean() in webengine project : " + Thread.currentThread().getId());             FacesContext context = FacesContext.getCurrentInstance();             T retVal = null;             retVal = (T) context.getApplication().evaluateExpressionGet(context, "#{" + beanName + "}", Object.class);             return retVal;         } </code></pre>  <p>where method rs.navigator.b2b.common.CommonUtils.getManagedBean is in other project, named common-classes. The method is looking the same as the one in sessionBean.</p>  <p>ZonesController is in b2b-webengine project also, contains:</p>  <pre><code>public String getTestGmb(){         System.out.println(" --- zonesController.getTestGmb() : " + Thread.currentThread().getId());         return "TEST GMB SUCCESFFUL!";     } </code></pre>  <p>${sessionBean.testGmbcu} gives me a expected result, but  ${sessionBean.testGmbculocal} throws a NullPointerException, because FacesContext.getCurrentInstance() is null.</p>  <p>log:</p>  <pre><code>Info:  --- getTestGmbcu() : 181 Info:  --- getManagedBean() in webengine project: 181 Info:  --- zonesZontroler.getTestGmb() : 181 Info:  --- getTestGmbculocal() : 181 Info:  --- getManagedBean() in common-classes project: 181 Info:  --- context = null </code></pre>