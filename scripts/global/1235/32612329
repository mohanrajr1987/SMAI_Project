<p>I want use the same class <code>CTestDialog</code> for a modal dialog</p>  <pre><code>CTestDialog dlg; dlg.DoModal(); </code></pre>  <p>and for a modeless Dialog</p>  <pre><code>m_pDlg = new CTestDialog; m_pDlg-&gt;Create(CTestDialog::IDD,this); m_pDlg-&gt;ShowWindow(SW_SHOW); </code></pre>  <p>The problem I have is at PostNcDestroy(..) it crashes if it is constructed as modal Dialog:</p>  <pre><code>void CTestDialog::PostNcDestroy()  {      CDialog::PostNcDestroy();   delete this;                 // &lt;= need for modeless, but Crash! if constructed as modal Dialog } </code></pre>  <p>How can I determine, in a straightforward way, if the class was constructed as modeless or modal dialog?</p>