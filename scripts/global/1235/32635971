<p>I am calling this functions from a DLL context,</p>  <pre><code>void CmodguiApp::ReportStatusBarImageCount() {  CMainFrame *frm = nullptr; auto app = AfxGetApp(); if (nullptr != app) {      frm = (CMainFrame*)app-&gt;GetMainWnd(); }  assert(frm);  frm-&gt;setStatusBarImageCount(L"Text");  } </code></pre>  <p>Everything is OK. <code>frm</code> is NOT a nullptr.</p>  <p>Then, inside <code>setStatusBarImageCount</code>, which is described below, the software causes an assertion error</p>  <p>What could be wrong?</p>  <pre><code>void CMainFrame::setStatusBarImageCount(const wchar_t *str) {       m_wndStatusBar.SetPaneText(m_wndStatusBar.CommandToIndex(ID_STATUSBAR_IMAGECOUNT), str);  } </code></pre>  <p>This app has MFC dynamically linked. Please let me stress that the <code>setStatusBarImageCount</code> function is called from within a DLL, and not from the main MFC app.</p>  <p><img src="http://i.stack.imgur.com/Zq8Vi.jpg" alt="assertion error"></p>