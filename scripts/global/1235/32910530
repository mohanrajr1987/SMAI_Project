<p>I have a modal dialog with a button, that button's <code>OnClicked()</code> opens another modal dialog.</p>  <p>Now, if I click that button with a mouse, everything works fine. But if I do it with a key press, after the second dialog closes (more precisely, after <code>OnClicked()</code> method with the <code>DoModal()</code> call returns), there is an assert in wincore.cpp - apparently, <code>AfxInternalPreTranslateMessage()</code> tries to process some <code>WM_KEYDOWN</code> message, tries to get message recipient's TopLevelParent and that handle fails the <code>CWnd::AssertValid()</code> check here:</p>  <pre><code>// should be a normal window ASSERT(::IsWindow(m_hWnd)); </code></pre>  <p>What could be causing this behavior?</p>