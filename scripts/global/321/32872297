<p>I been getting this error, and tried to use valgrind to debug my program without much success. </p>  <pre><code>myProg: malloc.c:2372: sysmalloc: Assertion `(old_top == (((mbinptr) (((char *) &amp;((av)-&gt;bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) &amp;&amp; old_size == 0) || ((unsigned long) (old_size) &gt;= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 *(sizeof(size_t))) - 1)) &amp; ~((2 *(sizeof(size_t))) - 1))) &amp;&amp; ((old_top)-&gt;size &amp; 0x1) &amp;&amp; ((unsigned long) old_end &amp; pagemask) == 0)' failed. </code></pre>  <p>So I have the following code</p>  <pre><code>struct nStruct {     int key;     void* data; };  typedef struct nStruct* Node; </code></pre>  <p>Then in my <code>foo</code> function, I do this:</p>  <pre><code>void foo() {     Node n = malloc(sizeof(*n));     n-&gt;key = 1;     //omitted  } </code></pre>  <p>In GDB, I set breakpoint right at the line <code>Node n = malloc(sizeof(*n));</code> and before it gets executed, I got this:</p>  <pre><code>(gdb) p n $23 = (Node) 0x408f50 &lt;HashMap_containsKey+51&gt; </code></pre>  <p>Does this seem to contribute to the problem? It's worth noting that <code>HashMap_containsKey</code> is a function that I defined somewhere else.</p>