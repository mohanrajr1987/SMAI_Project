<p>I'm trying to load a custom library in order to use it in Apache2. I did a module.c file that include headers for external .c files that I wrote. I read that I have to use apxs to compile it and <code>sudo apxs -i -a -c -I /usr/include/ImageMagick/ -I ~/..../libwurfl-master/ -n iiw_module iiw_module.c </code> I assume that you know <code>ImageMagick</code> (I use <code>MagickWand</code> to be precise). <code>libwurfl</code> is a git project for parsing <code>wurfl.xml</code> file, I configured and installed it.</p>  <p>apxs doesn't return any error (or it seems at least), but when I try to do a <code>sudo service apache2 restart</code> I receive this: </p>  <pre><code>Output of config test was: apache2: Syntax error on line 140 of /etc/apache2/apache2.conf: Syntax error      on line 1 of /etc/apache2/mods-enabled/iiw_module.load: Cannot load   /usr/lib/apache2/modules/iiw_module.so into server:   /usr/lib/apache2/modules/iiw_module.so: undefined symbol: wurfl_interrogation Action 'configtest' failed. The Apache error log may have more information. </code></pre>  <p><code>wurfl_interrogation</code> is a function inside the <code>parsing.c</code> file. <code>module.c</code> has <code>#include "parsing.h"</code> and the same <code>parsing.c</code> has <code>#include "parsing.h"</code> </p>  <p>Where is the problem? Thank you very much in advance!</p>  <p>EDIT1: I have resolved the first issue, but now I have another one:</p>  <pre><code>undefined symbol: MagickSetImageCompressionQuality </code></pre>  <p><code>MagickSetImageCompressionQuality</code> is a function of the MagickWand library. How can I load the entire library in Apache?</p>