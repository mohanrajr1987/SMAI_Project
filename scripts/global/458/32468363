<p>I'm trying to test that a model can have many values but not duplicate values.</p>  <p>I have the following models: school, tag, school_tag. A school can have many tags, and a tag can belong to many schools. An example tag, 'Art', 'Science', 'Math', etc.</p>  <pre><code>class School   has_many :school_tags, dependent: :destroy   has_many :tags, through: :school_tags end  class Tag   has_many :school_tags, dependent: :destroy   has_many :schools, through: :school_tags end  class SchoolTag &lt; ActiveRecord::Base   belongs_to :tag, foreign_key: 'tag_id'   belongs_to :school, foreign_key: 'school_id'    validates_uniqueness_of :tag_id, scope: :school_id, message: 'has already been assigned to this school' end </code></pre>  <p>My current test is below. It adds some valid tags first, but then tries to add a tag that's already been added to that collection. </p>  <pre><code>before(:each) do   @school = FactoryGirl.create(:school)   @tag1 = FactoryGirl.create(:tag) #creates "Test1"   @tag2 = FactoryGirl.create(:tag) #creates "Test2" end  it 'can have multiple tags but not duplicates' do     @school.tags &lt;&lt; @tag1     @school.tags &lt;&lt; @tag2     expect(@school.save).to be(true) #works     expect(@school.tags.count).to eq(2) #works      #FAILS     expect(@school.tags &lt;&lt; @tag1).to raise_error(ActiveRecord::RecordInvalid)     expect(@school.tags.count).to eq(2) end </code></pre>  <p>The part where it fails is here:</p>  <pre><code>expect(@school.tags &lt;&lt; @tag1).to raise_error(ActiveRecord::RecordInvalid) </code></pre>  <p>This is the error I get back:</p>  <pre><code>Failure/Error: expect(@school.tags &lt;&lt; @tag1).to raise_error(ActiveRecord::RecordInvalid)      ActiveRecord::RecordInvalid:        Validation failed: Schooltype has already been assigned </code></pre>  <p>Does it have anything to do with using <code>&lt;&lt;</code>? How would I go about testing this?</p>  <p><strong>ANSWER:</strong>  Aside from the selected answer below, here is a reference to another question explaining why this happens</p>  <p><a href="http://stackoverflow.com/questions/21567838/when-to-use-curly-braces-vs-parenthesis-in-expect-rspec-method">When to use curly braces vs parenthesis in expect Rspec method?</a></p>