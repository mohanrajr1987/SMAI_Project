<p>I have a mongoose validator called when a User record is saved, to ensure the email is unique. This "unique" check is actually handled by a mongoose validator plugin.</p>  <p>When <code>User.save</code> is called, it works fine - but when <code>User.findOneAndUpdate</code> is called with <code>{ runValidators: true }</code>, the validator fails because <code>this</code> is undefined:</p>  <pre><code>function (value, respond) {     var model = this.model(this.constructor.modelName); } </code></pre>  <p>I'm guessing that mongoose invokes the validator differently - in such a way that <code>this</code> changes. </p>  <p>Is there a better/safer way to determine/reference the current model? I'm not seeing any consistent properties on <code>this</code> that would work.</p>