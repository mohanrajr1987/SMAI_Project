<p>I'm trying to port my app to vc2008 coded in old vs6.0. My idea is to keep the source code intact, so I need to know the "new" flags to pass to the compiler. My problem are the strings, this is my sample code:</p>  <pre><code>#include &lt;windows.h&gt; #include &lt;commctrl.h&gt; #include &lt;Strsafe.h&gt; // ... StringCbPrintf (szMessage, sizeof(szMessage) * sizeof(TCHAR), TEXT("Aplication: %s\nVersion: %s"), PACKAGE, PACKAGE_VERSION); MessageBox (NULL, szMessage, TEXT("Test message"), MB_OK|MB_ICONASTERISK); </code></pre>  <p>I get weird symbols and characters that aren't the expected ones, but with this:</p>  <pre><code>StringCbPrintf (szMessage, sizeof(szMessage) * sizeof(TCHAR), TEXT("Aplicacion: %S\nVersion: %S"), PACKAGE, PACKAGE_VERSION); MessageBox (NULL, szMessage, TEXT("Mensaje de prueba"), MB_OK|MB_ICONASTERISK); </code></pre>  <p>in upper case the formatters show the correct string ones. I'm running this commandline to compile the code:</p>  <pre><code>cl.exe /nologo /Ox /c /D_UNICODE /DUNICODE </code></pre>  <p>Do I need to pass more flags, so the code can be compilable in both ansi and unicode?</p>