<p>I expected this to function to behave similar, but with visual studio 2008 and optimizer on the results are different. With the debugger or with visual studio 2013 they behave absolutely equal. Why not for visual studio 2008?</p>  <pre><code>void _mm_reduce_msk32_to_msk8(__m128i &amp;mmMsk, __m128i const&amp;mm1, __m128i const&amp; mm2, __m128i const&amp; mm3, __m128i const&amp; mm4)     {         __m128i tmp1, tmp2;         const int shuffle16 = 0xAA;//(1 &lt;&lt; 1) | (1 &lt;&lt; 3) | (1 &lt;&lt; 5) | (1 &lt;&lt; 7); // 010101010         tmp1 = _mm_blend_epi16(mm1, mm2, shuffle16);         tmp2 = _mm_blend_epi16(mm3, mm4, shuffle16);          tmp1 = _mm_blendv_epi8(tmp1, tmp2, _mm_setr_epi8(0, (char)(0xff), 0, (char)(0xff), 0, (char)(0xff), 0, (char)(0xff), 0, (char)(0xff), 0, (char)(0xff), 0, (char)(0xff), 0, (char)(0xff)));         mmMsk = _mm_shuffle_epi8(tmp1, _mm_setr_epi8(0, 4, 8, 12, 2, 6, 10, 14, 1, 5, 9, 13, 3, 7, 11, 15));     }  void _mm_reduce_msk32_to_msk8(__m128i &amp;mmMsk, __m128i const&amp;mm1, __m128i const&amp; mm2, __m128i const&amp; mm3, __m128i const&amp; mm4)     {                 mmMsk.m128i_u8[0] = mm1.m128_u8[0];                 mmMsk.m128i_u8[1] = mm1.m128_u8[4];                 mmMsk.m128i_u8[2] = mm1.m128_u8[8];                 mmMsk.m128i_u8[3] = mm1.m128_u8[12];                 mmMsk.m128i_u8[4] = mm2.m128_u8[0];                 mmMsk.m128i_u8[5] = mm2.m128_u8[4];                 //...                  mmMsk.m128i_u8[14] = mm4.m128_u8[8];                 mmMsk.m128i_u8[15] = mm4.m128_u8[12];     } </code></pre>