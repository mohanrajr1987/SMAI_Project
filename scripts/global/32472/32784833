<p>I have seen questions like this, but they seem to not help me.</p>  <p>I am playing with a test web application.</p>  <p><a href="http://i.stack.imgur.com/Dvi2Q.png" rel="nofollow"><img src="http://i.stack.imgur.com/Dvi2Q.png" alt="enter image description here"></a></p>  <p>I added this into my RStp.wixproj, I had a hard time, but it works, it generates the Frags.wxs:</p>  <pre><code>&lt;Target Name="BeforeBuild"&gt;     &lt;Exec Command=" &amp;quot;$(WiX)bin\heat.exe&amp;quot; project &amp;quot;..\WebR\WebR.csproj&amp;quot; -cg Portals.Vendor -gg -pog Binaries -pog Content –configuration &amp;quot;release&amp;quot; -platform &amp;quot;AnyCPU&amp;quot; –out &amp;quot;Frags.wxs&amp;quot; " /&gt;     &lt;ItemGroup&gt;       &lt;Compile Include="Frags.wxs" /&gt;     &lt;/ItemGroup&gt;   &lt;/Target&gt; </code></pre>  <p>My Frags.wxs looks like this:</p>  <pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt; &lt;Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"&gt;     &lt;Fragment&gt;         &lt;DirectoryRef Id="WebR.Binaries" /&gt;     &lt;/Fragment&gt;     &lt;Fragment&gt;         &lt;ComponentGroup Id="WebR.Binaries"&gt;             &lt;ComponentRef Id="cmp7AE3B693619BAD570BB795DC740F74CA" /&gt;         &lt;/ComponentGroup&gt;     &lt;/Fragment&gt;     &lt;Fragment&gt;         &lt;DirectoryRef Id="WebR.Content"&gt;             &lt;Directory Id="dirBB5AA78A6132241A7A39F7899E66D36C" Name="Fold" /&gt;         &lt;/DirectoryRef&gt;     &lt;/Fragment&gt;     &lt;Fragment&gt;         &lt;ComponentGroup Id="WebR.Content"&gt;             &lt;ComponentRef Id="cmp434BA57B5F42786DB41F7D30B9C8A2AA" /&gt;             &lt;ComponentRef Id="cmp827A8854133966F2160835E612413FA7" /&gt;             &lt;ComponentRef Id="cmpF279DD78D3B3BE5386C8535E2A85FC5F" /&gt;         &lt;/ComponentGroup&gt;     &lt;/Fragment&gt;     &lt;Fragment&gt;         &lt;ComponentGroup Id="Portals.Vendor"&gt;             &lt;Component Id="cmp7AE3B693619BAD570BB795DC740F74CA" Directory="WebR.Binaries" Guid="{9F6BEFC1-6226-4C1D-A1B0-1C7D6355DB60}"&gt;                 &lt;File Id="filB23D27862A7D96131D5E2F7C7CCCAA8B" Source="$(var.WebR.TargetDir)\WebR.dll" /&gt;             &lt;/Component&gt;             &lt;Component Id="cmp434BA57B5F42786DB41F7D30B9C8A2AA" Directory="WebR.Content" Guid="{F0733DE8-9B04-4F65-ABA3-954B71E6CC00}"&gt;                 &lt;File Id="fil85B5BB89317EA74AFB68409ADF6BA4C7" Source="$(var.WebR.ProjectDir)\Default.aspx" /&gt;             &lt;/Component&gt;             &lt;Component Id="cmp827A8854133966F2160835E612413FA7" Directory="WebR.Content" Guid="{ADF5B995-9002-469F-BA2F-9A88621DAF13}"&gt;                 &lt;File Id="filFD9C307A451419BA8B1308C1786045D2" Source="$(var.WebR.ProjectDir)\Web.config" /&gt;             &lt;/Component&gt;             &lt;Component Id="cmpF279DD78D3B3BE5386C8535E2A85FC5F" Directory="dirBB5AA78A6132241A7A39F7899E66D36C" Guid="{8BFCFDD6-E995-482D-9AA3-4EE8926E9CB0}"&gt;                 &lt;File Id="filB2AF43969CEF48A8A2E362F2D8E5DD20" Source="$(var.WebR.ProjectDir)\Fold\F2.aspx" /&gt;             &lt;/Component&gt;         &lt;/ComponentGroup&gt;     &lt;/Fragment&gt; &lt;/Wix&gt; </code></pre>  <p>I have not yet made any changes to the Product.wxs:</p>  <pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"&gt;     &lt;Product Id="*" Name="RStp" Language="1033" Version="1.0.0.0" Manufacturer="Prive" UpgradeCode="cfbe56e5-e27a-42c3-af88-262956974943"&gt;         &lt;Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" /&gt;          &lt;MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." /&gt;         &lt;MediaTemplate /&gt;          &lt;Feature Id="ProductFeature" Title="RStp" Level="1"&gt;             &lt;ComponentGroupRef Id="ProductComponents" /&gt;         &lt;/Feature&gt;     &lt;/Product&gt;      &lt;Fragment&gt;         &lt;Directory Id="TARGETDIR" Name="SourceDir"&gt;             &lt;Directory Id="ProgramFilesFolder"&gt;                 &lt;Directory Id="INSTALLFOLDER" Name="RStp" /&gt;             &lt;/Directory&gt;         &lt;/Directory&gt;     &lt;/Fragment&gt;      &lt;Fragment&gt;         &lt;ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER"&gt;             &lt;!-- TODO: Remove the comments around this Component element and the ComponentRef below in order to add resources to this installer. --&gt;             &lt;!-- &lt;Component Id="ProductComponent"&gt; --&gt;                 &lt;!-- TODO: Insert files, registry keys, and other resources here. --&gt;             &lt;!-- &lt;/Component&gt; --&gt;         &lt;/ComponentGroup&gt;     &lt;/Fragment&gt; &lt;/Wix&gt; </code></pre>  <ol> <li>What do I have to do to have the A.R.Facade inside the Frags.wxs ?</li> <li>How do I link the Frags.wxs into the Product.wxs?</li> <li>How do I fix the    Error   'Undefined preprocessor variable '$(var.WebR.TargetDir)' <strong>UPDATE</strong> Right Click on RStp, add reference, select Web prj - fixed</li> <li>Where do I have to add the Candle code (RStp.wixproj like for heat?) and what should that look like?</li> <li>If this would be on sourcesafe, should I include the Frags.wxs into the sources?</li> <li>I need to have a specific install path that looks like this: 'E:\Inetpub\wwwroot', how can I set this up?</li> </ol>  <p>Thanks</p>