<p>I have 2 tables:</p>  <pre><code>Table1:     id1 | id2 1   | a 2   | a 3   | a 4   | b 5   | b  Table2:     data | id1 ...  | 1 ...  | 2 ...  | 2 ...  | 3 ...  | 4 ...  | 5 </code></pre>  <p>At <code>Table1</code> I should have unique association of id1->id2, for some unknown reason it's not. I need to fix it and add unique constraint. I need to leave only one to one relation at <code>Table1</code> and update duplicated ids at <code>Table2</code> only with that id which is left at <code>Table1</code>. As the result I should have:</p>  <pre><code>Table1:     id1 | id2 1   | a 4   | b  Table2:     data | id1 ...  | 1 ...  | 1 ...  | 1 ...  | 1 ...  | 4 ...  | 4 </code></pre>  <p>I know how to find duplicated ids:</p>  <pre><code>SELECT id1 FROM Table1 GROUP BY id2 HAVING COUNT(id2) &gt; 1; </code></pre>  <p>But I'm a bit lost on how to do next update and removal.</p>  <p>Data types of id1 and id2 are <em>UUID</em>.</p>