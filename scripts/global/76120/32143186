<p>I have the following problem: I have to create a new associated row in my database. I have:</p>  <pre><code>companies table  references table </code></pre>  <p>Companies <code>has_many</code> References.</p>  <p>References <code>belongs_to</code> Company.</p>  <p>In my Company table i have the following attribute:</p>  <pre><code>id | city | email | ...| </code></pre>  <p>In my Reference table i have the following attribute:</p>  <pre><code>id | name | surname | company_id | ...| </code></pre>  <p>Company.rb model:</p>  <pre><code>belongs_to :references </code></pre>  <p>Reference.rb model:</p>  <pre><code>has_many :companies </code></pre>  <p>In Company controller:</p>  <pre><code>  def create      @company = Company.new(company_params)     @company.references.build(params[:company][:email_r])            respond_to do |format|         if @company.save         format.html { redirect_to companies_index_path, :notice =&gt; 'created'}         format.json { render :json =&gt; companies_index_path, :status =&gt; :created, :location =&gt; @company }       else         format.html { render :action =&gt; "new" }         format.json { render :json =&gt; @company.errors, :status =&gt; :unprocessable_entity }       end     end   end </code></pre>  <p>My error is:</p>  <pre><code>undefined method `build' for nil:NilClass </code></pre>