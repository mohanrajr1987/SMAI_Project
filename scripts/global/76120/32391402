<p>I'm having issues aligning multiple variables in a table. I want to match the year in each column and show data if present, if not show '0'. Ive attached an image of whats happening, column d's data should be in 2011.<a href="http://i.stack.imgur.com/gUKcH.png" rel="nofollow"><img src="http://i.stack.imgur.com/gUKcH.png" alt="enter image description here"></a></p>  <p>Table</p>  <pre><code>&lt;% @a.zip(@b, @c, @d) do |a, b, c, d| %&gt;     &lt;tr&gt;         &lt;td&gt;&lt;%= a.year %&gt;&lt;/td&gt;          &lt;td&gt;&lt;% if a.nil? %&gt;0&lt;% else %&gt;&lt;%= a.id %&gt;&lt;% end %&gt;&lt;/td&gt;         &lt;td&gt;&lt;% if a.nil? %&gt;0&lt;% else %&gt;&lt;%= "%.2f" % (a.avg/227) %&gt;&lt;% end %&gt;&lt;/td&gt;          &lt;td&gt;&lt;% if b.nil? %&gt;0&lt;% else %&gt;&lt;%= b.id %&gt;&lt;% end %&gt;&lt;/td&gt;         &lt;td&gt;&lt;% if b.nil? %&gt;0&lt;% else %&gt;&lt;%= "%.2f" % (b.avg/227) %&gt;&lt;% end %&gt;&lt;/td&gt;          &lt;td&gt;&lt;% if c.nil? %&gt;0&lt;% else %&gt;&lt;%= c.year %&gt; &lt;%= c.id %&gt;&lt;% end %&gt;&lt;/td&gt;         &lt;td&gt;&lt;% if c.nil? %&gt;0&lt;% else %&gt;&lt;%= "%.2f" % (c.avg/227) %&gt;&lt;% end %&gt;&lt;/td&gt;          &lt;td&gt;&lt;% if d.nil? %&gt;0&lt;% else %&gt;&lt;%= d.id %&gt;&lt;% end %&gt;&lt;/td&gt;         &lt;td&gt;&lt;% if d.nil? %&gt;0&lt;% else %&gt;&lt;%= "%.2f" % (d.avg/227) %&gt;&lt;% end %&gt;&lt;/td&gt;      &lt;/tr&gt;     &lt;% end %&gt; </code></pre>  <p>Controller</p>  <pre><code>  @a = Result.where(id: params[:id_select]).group('year').where('data &gt; 0').select('AVG(data) AS data, year as year, COUNT(id) AS id').order('year ASC')    @b = Result.where(id: params[:id_select]).group('results.year').where('data &gt; 0').select('AVG(data) AS data, year as year, COUNT(id) AS id').where('id = ?', '0').order('year ASC')    @c = Result.where(id: params[:id_select]).group('results.year').where('data &gt; 0').select('AVG(data) AS data, year as year, COUNT(id) AS id').where('id = ?', '1').order('year ASC')    @d = Result.where(id: params[:id_select]).group('results.year').where('data &gt; 0').select('AVG(data) AS data, year as year, COUNT(id) AS id').where('id = ?', '2').order('year ASC') </code></pre>