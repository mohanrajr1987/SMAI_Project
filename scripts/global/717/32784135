<p>I have two symmetrical correlation matrices, of which one represents a subset of the other. I want to merge both matrices into long format, to later use this for x,y plots. Here is a small example.</p>  <pre><code>library(reshape) library(ggplot2)  dist1 &lt;- matrix(runif(16),4,4) dist2 &lt;- matrix(runif(9),3,3) rownames(dist1) &lt;- colnames(dist1) &lt;- paste0("A",1:4) rownames(dist2) &lt;- colnames(dist2) &lt;- paste0("A",1:3)  m1 &lt;- melt(dist1) m2 &lt;- melt(dist2)  final &lt;- merge(m1,m2, by=c("X1","X2")) ggplot(final, aes(value.x,value.y)) + geom_point() </code></pre>  <p>This is all fine. <code>final</code> contains as much x1,x2 pairs as found in the smaller matrix <code>m2</code>. However in my real life example, things are looking differently:</p>  <pre><code>dim(m1) # the large matrix [1] 14845516     3 dim(m2) # the small matrix [1] 574564    3 dim(final) # the merged product [1] 286894    4   </code></pre>  <p>It is suspicious that <code>final</code>'s pairs represent slightly more than the half of the pairs in <code>m2</code> (and the difference is pretty close but not equal to the number of diagonal cells in <code>m2</code>), so maybe <code>merge()</code> did find only one triangle.But my assumption right now is that m2 is not a subset of m1 (although it should be). So, my questions are:</p>  <p>How can i check if all the pairs in m2[,1:2] appears also in m1[,1:2]?</p>  <p>Is there a better option to create a merged dataframe from m1 and m2 that contains every X1,X2-pair that is included in both matrices? Optimally, only unique pairs, e.g. from A1,A2 and A2, A1, only one pair gets selected.</p>  <p>Thank you.</p>