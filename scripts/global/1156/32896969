<p>I am doing some work wih structs and for some reason i get a segmentation fault when i try to run my program. If I remove the printf line in printfunction the program finishes without problems, but the point is to print out what is stored in list->line.</p>  <p>The addLine function adds a new struct-object, puts it at the end of the list and points it to the first struct-object.</p>  <p>the printFunction is supposed to print out all the lines in the list.</p>  <p>struct:</p>  <pre><code>typedef struct listoflines list;  struct listoflines {     list* next;      char* line; }; </code></pre>  <p>addLine function:</p>  <pre><code>void addLine(list* firstline, char* linep) {     list* newline = malloc(sizeof(list));     newline-&gt;next = firstline;      newline-&gt;line = malloc((sizeof(char) * strlen(linep) + 1));     strcpy(newline-&gt;line, linep);      list* currentline = firstline;      while(currentline-&gt;next){         if(currentline-&gt;next == firstline){             currentline-&gt;next = newline;             return;         }         else {             currentline = currentline-&gt;next;         }     }     currentline-&gt;next = newline; } </code></pre>  <p>printFunction function:</p>  <pre><code>void printFunction(list* firstline){     list* currentline = firstline;      while(currentline-&gt;next != firstline){         printf("%s\n", currentline-&gt;line);         currentline = currentline-&gt;next;     } } </code></pre>  <p>The addLine function has been run 4 times and the printFunction is given a pointer to the same "firstline" as the addline function. Any help is very much appriciated. At this point I dont know what could be wrong.</p>