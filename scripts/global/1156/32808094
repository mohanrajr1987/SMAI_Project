<p>EDIT â€“ Here's a revised question. Also, note that the previous version of this question got 3 down-votes for not being concrete enough before I could even edit the question. Please don't assume this is a bad question from the down-votes. Those are outdated.</p>  <p>Question: Why do I need to hit enter twice to get the current directory to change? I notice that if I change the location of the printf statement in the loop, the behavior changes. I don't understand why that is.</p>  <p>Working code for you guys below. It compiles on a Ubuntu system. It works fairly minimally. Most of it is usage from man-pages.</p>  <pre><code>#define _GNU_SOURCE // http://man7.org/linux/man-pages/man3/getline.3.html #include &lt;stdio.h&gt; #include &lt;unistd.h&gt; // http://man7.org/linux/man-pages/man3/getcwd.3.html int main() {     char *line = NULL;     size_t linecap = 0;     ssize_t linelen;     while ((linelen = getline(&amp;line, &amp;linecap, stdin)) &gt; 0) {         char * buf = NULL;         size_t size = 1000;         char * s = getcwd(buf, size);         printf("%s# ", s);         *(line+linelen-1) = '\0';         chdir(&amp;line[3]);     }     return 0; } </code></pre>  <p>I don't get the output to the program, which I show below (first, I need to hit enter once to get the prompt -- that's okay and intended for this example).</p>  <pre><code>/path/to/dir# cd .. /path/to/dir#  /path/to# </code></pre>  <p>To me, this is essentially the same question as before, but it compiles and it's more concrete for you guys.</p>