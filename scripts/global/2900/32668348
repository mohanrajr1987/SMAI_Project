<p>I am trying to crytp using <code>gpg2</code> the mails sent by <code>Nagios3</code>. For that, I have create this custom command on <code>/etc/nagios3/commands.cfg</code> :</p>  <pre><code>/usr/bin/printf "%b" "***** Nagios *****\n\nNotification Type: $NOTIFICATIONTYPE$\n\nService: $SERVICEDESC$\nHost: $HOSTALIAS$\nAddress: $HOSTADDRESS$\nState: $SERVICESTATE$\n\nDate/Time: $LONGDATETIME$\n\nAdditional Info:\n\n$SERVICEOUTPUT$\n" | /usr/bin/gpg2 --armor --encrypt --recipient toto@titi.com | /usr/bin/mail -s "** $NOTIFICATIONTYPE$ Service Alert: $HOSTALIAS$/$SERVICEDESC$ is $SERVICESTATE$ **" $CONTACTEMAIL$     } </code></pre>  <p>Some points:</p>  <ol> <li><p>The e-mail is sent but it is "empty":</p>  <blockquote>   <p>Sep 19 14:35:25 tutu nagios3: Finished daemonizing... (New PID=4313)<br>   Sep 19 14:36:15 tutu nagios3: SERVICE ALERT:<br>   tete_vm;HTTP;OK;HARD;4;HTTP OK: HTTP/1.1 200 OK - 347 bytes in 0.441<br>   second response time Sep 19 14:36:15 tutu nagios3: SERVICE<br>   NOTIFICATION: tata;tete_vm;HTTP;OK;notify-service-by-email;HTTP OK:<br>   HTTP/1.1 200 OK - 347 bytes in 0.441 second response time</p> </blockquote></li> <li><p>The command:</p>  <pre><code>/usr/bin/gpg2 --armor --encrypt --recipient toto@titi.com | /usr/bin/mail -s "** $NOTIFICATIONTYPE$ Service Alert: $HOSTALIAS$/$SERVICEDESC$ is $SERVICESTATE$ **" $CONTACTEMAIL$&lt;/code&gt; </code></pre>  <p>works very well on command line</p></li> <li><p>I have tested this command:</p>  <pre><code>/usr/bin/printf "%b" "***** Nagios *****\n\nNotification Type: $NOTIFICATIONTYPE$\n\nService: $SERVICEDESC$\nHost: $HOSTALIAS$\nAddress: $HOSTADDRESS$\nState: $SERVICESTATE$\n\nDate/Time: $LONGDATETIME$\n\nAdditional Info:\n\n$SERVICEOUTPUT$\n" | /usr/bin/gpg2 --armor --encrypt --recipient toto@titi.com &gt;&gt; /tmp/toto.txt </code></pre></li> </ol>  <p>The file <code>/tmp/toto.txt</code> is created but "empty".</p>  <p>So, it seems to be a problem using <code>/usr/bin/gpg2</code> on this file, but I cannot find why!</p>