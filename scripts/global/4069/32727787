<p>I am running RabbitMQ, with the rabbitmq_amqp1_0 plugin enabled.  <code>rabbitmq-plugins list</code> includes this output:</p>  <pre><code>[E*] rabbitmq_amqp1_0                  3.5.4 </code></pre>  <p>I am attempting to send messages to it using QPID JMS (qpid-amqp-1-0-client-jms from Maven Central).  </p>  <p>This code should create and send a message.</p>  <pre><code>    try(InputStream propertiesStream = getClass().getResourceAsStream("hello.properties"))     {         Properties properties = new Properties();         // Read the hello.properties JNDI properties file and use contents to create the InitialContext.         properties.load(propertiesStream);         Context context = new InitialContext(properties);         // Alternatively, JNDI information can be supplied by setting the "java.naming.factory.initial"         // system property to value "org.apache.qpid.amqp_1_0.jms.jndi.PropertiesFileInitialContextFactory"         // and setting the "java.naming.provider.url" system property as a URL to a properties file.          ConnectionFactory connectionFactory = (ConnectionFactory) context.lookup("localhost");         Connection connection = connectionFactory.createConnection();          Session producersession = connection.createSession(false,                                                            Session.AUTO_ACKNOWLEDGE);          connection.start();          String queueName = "readJms";         Queue queue = (Queue) context.lookup(queueName);          System.out.println("Creating producer");         // Next line throws         MessageProducer messageProducer = producersession.createProducer(queue);          TextMessage message = producersession.createTextMessage("Hello world!");          messageProducer.send(message);          connection.close();         context.close();     } </code></pre>  <p>If I attempt to create a <code>MessageConsumer</code> instead, by calling <code>consumerSession.createConsumer(queue)</code>, that works, and I am able to receive messages if send them some other way, such as through the RabbitMQ management plugin.</p>  <p>Instead, <code>createProducer</code> throws this exception:</p>  <pre><code>javax.jms.JMSException: Session is closed while creating link, target: readJms at org.apache.qpid.amqp_1_0.jms.impl.MessageProducerImpl.&lt;init&gt;(MessageProducerImpl.java:98) at org.apache.qpid.amqp_1_0.jms.impl.SessionImpl.createProducer(SessionImpl.java:390) at org.apache.qpid.amqp_1_0.jms.impl.SessionImpl.createProducer(SessionImpl.java:59) at org.apache.qpid.amqp_1_0.jms.example.Hello.prodOnly(Hello.java:137) at org.apache.qpid.amqp_1_0.jms.example.Hello.main(Hello.java:102) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:497) at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:297) at java.lang.Thread.run(Thread.java:745) Caused by: org.apache.qpid.amqp_1_0.client.Sender$SenderCreationException: Session is closed while creating link, target: readJms at org.apache.qpid.amqp_1_0.client.Sender.&lt;init&gt;(Sender.java:187) at org.apache.qpid.amqp_1_0.client.Sender.&lt;init&gt;(Sender.java:119) at org.apache.qpid.amqp_1_0.client.Sender.&lt;init&gt;(Sender.java:112) at org.apache.qpid.amqp_1_0.client.Sender.&lt;init&gt;(Sender.java:98) at org.apache.qpid.amqp_1_0.client.Sender.&lt;init&gt;(Sender.java:84) at org.apache.qpid.amqp_1_0.client.Sender.&lt;init&gt;(Sender.java:78) at org.apache.qpid.amqp_1_0.client.Session$1.&lt;init&gt;(Session.java:90) at org.apache.qpid.amqp_1_0.client.Session.createSender(Session.java:89) at org.apache.qpid.amqp_1_0.jms.impl.MessageProducerImpl.&lt;init&gt;(MessageProducerImpl.java:86) ... 10 more </code></pre>  <p>Looking at the visualizer in the RabbitMQ management UI, I see that the queue is created.  </p>  <p><code>rabbit@localhost.log</code> contains this error.</p>  <pre><code>=INFO REPORT==== 22-Sep-2015::18:06:08 === accepting AMQP connection &lt;0.23591.16&gt; (127.0.0.1:59388 -&gt; 127.0.0.1:5672)  =ERROR REPORT==== 22-Sep-2015::18:06:08 === ** Generic server &lt;0.23597.16&gt; terminating ** Last message in was {'$gen_cast',                         {frame,                          {'v1_0.attach',                           {utf8,                            &lt;&lt;"readJms&lt;-3872c1b6-6555-4da6-8db5-9abf9f25af53"&gt;&gt;},                           {uint,0},                           false,                           {ubyte,0},                           {ubyte,0},                           {'v1_0.source',                            {utf8,&lt;&lt;"3872c1b6-6555-4da6-8db5-9abf9f25af53"&gt;&gt;},                            undefined,undefined,undefined,undefined,undefined,                            undefined,undefined,                            {'v1_0.accepted'},                            {list,                             [{symbol,&lt;&lt;"amqp:accepted:list"&gt;&gt;},                              {symbol,&lt;&lt;"amqp:rejected:list"&gt;&gt;}]},                            undefined},                           {'v1_0.target',                            {utf8,&lt;&lt;"readJms"&gt;&gt;},                            undefined,undefined,undefined,undefined,undefined,                            undefined},                           undefined,undefined,                           {uint,0},                           undefined,undefined,undefined,undefined},                          &lt;0.23591.16&gt;}} ** When Server state == {state,&lt;0.23600.16&gt;,&lt;0.23606.16&gt;,65528,&lt;0.23591.16&gt;,                             &lt;0.23596.16&gt;,                             {[],[]},                             {session,0,2048,2048,0,65535,65535,0,65535,65535,                                 0,0,                                 {0,nil},                                 {0,nil}}} ** Reason for termination ==  ** {function_clause,        [{rabbit_amqp1_0_link_util,'-outcomes/1-lc$^0/1-0-',             [{list,                  [{symbol,&lt;&lt;"amqp:accepted:list"&gt;&gt;},                   {symbol,&lt;&lt;"amqp:rejected:list"&gt;&gt;}]}],             [{file,"rabbitmq-amqp1.0/src/rabbit_amqp1_0_link_util.erl"},              {line,49}]},         {rabbit_amqp1_0_link_util,outcomes,1,             [{file,"rabbitmq-amqp1.0/src/rabbit_amqp1_0_link_util.erl"},              {line,49}]},         {rabbit_amqp1_0_incoming_link,attach,3,             [{file,"rabbitmq-amqp1.0/src/rabbit_amqp1_0_incoming_link.erl"},              {line,54}]},         {rabbit_amqp1_0_session_process,with_disposable_channel,2,             [{file,"rabbitmq-amqp1.0/src/rabbit_amqp1_0_session_process.erl"},              {line,377}]},         {rabbit_amqp1_0_session_process,handle_control,2,             [{file,"rabbitmq-amqp1.0/src/rabbit_amqp1_0_session_process.erl"},              {line,183}]},         {rabbit_amqp1_0_session_process,handle_cast,2,             [{file,"rabbitmq-amqp1.0/src/rabbit_amqp1_0_session_process.erl"},              {line,134}]},         {gen_server2,handle_msg,2,[{file,"src/gen_server2.erl"},{line,1035}]},         {proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}  =ERROR REPORT==== 22-Sep-2015::18:06:11 === closing AMQP connection &lt;0.23591.16&gt; (127.0.0.1:59388 -&gt; 127.0.0.1:5672): {handshake_error,running,&lt;0.23597.16&gt;,     {{symbol,&lt;&lt;"amqp:internal-error"&gt;&gt;},      "Session error: ~p~n~p~n",      [function_clause,       [{rabbit_amqp1_0_link_util,'-outcomes/1-lc$^0/1-0-',            [{list,                 [{symbol,&lt;&lt;"amqp:accepted:list"&gt;&gt;},                  {symbol,&lt;&lt;"amqp:rejected:list"&gt;&gt;}]}],            [{file,"rabbitmq-amqp1.0/src/rabbit_amqp1_0_link_util.erl"},             {line,49}]},        {rabbit_amqp1_0_link_util,outcomes,1,            [{file,"rabbitmq-amqp1.0/src/rabbit_amqp1_0_link_util.erl"},             {line,49}]},        {rabbit_amqp1_0_incoming_link,attach,3,            [{file,"rabbitmq-amqp1.0/src/rabbit_amqp1_0_incoming_link.erl"},             {line,54}]},        {rabbit_amqp1_0_session_process,with_disposable_channel,2,            [{file,"rabbitmq-amqp1.0/src/rabbit_amqp1_0_session_process.erl"},             {line,377}]},        {rabbit_amqp1_0_session_process,handle_control,2,            [{file,"rabbitmq-amqp1.0/src/rabbit_amqp1_0_session_process.erl"},             {line,183}]},        {rabbit_amqp1_0_session_process,handle_cast,2,            [{file,"rabbitmq-amqp1.0/src/rabbit_amqp1_0_session_process.erl"},             {line,134}]},        {gen_server2,handle_msg,2,[{file,"src/gen_server2.erl"},{line,1035}]},        {proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]]}} </code></pre>  <p>Any idea why this is not working?</p>