<p>I have the following NHibernate mapping:</p>  <pre><code>&lt;class name="Person" proxy="Person" table="Person_"&gt;  &lt;id name="OID" column="OID_" type="Guid"&gt;   &lt;generator class="guid.comb"/&gt; &lt;/id&gt;  &lt;version name="Version" column="Version_"/&gt;  &lt;set name="Properties" lazy="true" inverse="true" cascade="all-delete-orphan"&gt;   &lt;key column="PersonOID_"/&gt;   &lt;one-to-many class="Property"/&gt; &lt;/set&gt;  &lt;/class&gt; </code></pre>  <p>And the following C# code:</p>  <pre><code>public class Property {     public Person Owner; }  public class Person {     private Iesi.Collections.Generic.ISet&lt;Property&gt; _properties;      public void AddProperty(Property property)     {         property.Owner = this;         _properties.Add(property);     }      public void RemoveProperty(Property property)     {         property.Owner = null;         _properties.Remove(property);     } }  ...  public void TransferProperty(Property p, Person fromPerson, Person toPerson) {     //fromPerson.RemoveProperty(p);     toPerson.AddProperty(p); } </code></pre>  <p>A call to TransferProperty results in the entity version for toPerson getting incremented, but no change to the entity version for fromPerson.</p>  <p>This is causing me a problem when multiple users call TransferProperty at the same time -- because fromPerson version doesn't change, there is no PersistenceException thrown when two users try to transfer property from the same person at the same time.</p>  <p>Any thoughts on the best way to modify this code so that calling TransferProperty will <strong>increment the entity versions for both toPerson and fromPerson</strong>???</p>  <p>Thanks in advance! Peter</p>  <p>P.S. I commented out the RemoveProperty call in TransferProperty, because it was resulting in "ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations)".  And doing that would delete the property rather than transfer it.</p>