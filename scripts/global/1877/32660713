<p>I try to use Apache Karaf with a Gelf Appender to connect to Log4J, but I just get ClassNotFoundException.</p>  <p>I followed the instructions from <a href="http://karaf.apache.org/manual/latest-2.3.x/users-guide/logging-system.html" rel="nofollow">Karaf Docs</a> section "Using your own appenders":</p>  <p>I added a folder <code>system/org/graylog2/gelfj/1.1.12/</code> and copied <code>gelfj-1.1.12.jar</code>from Maven repo into the folder. I added this line to <code>etc/startup.properties</code>:</p>  <pre><code>org/graylog2/gelfj/1.1.12/org.graylog2.gelfj-1.1.12.jar=7 org/ops4j/pax/logging/pax-logging-api/1.7.0/pax-logging-api-1.7.0.jar=8 </code></pre>  <p><em>(Second line was already there, I followed the instruction "add the new fragment bundle to the list before the pax-logging-service bundle".)</em></p>  <p>I also added to file <code>etc/org.ops4j.pax.logging.cfg</code></p>  <pre><code># Root logger log4j.rootLogger=INFO,out,graylog2,osgi:* ... log4j.appender.graylog2=org.graylog2.log.GelfAppender log4j.appender.graylog2.graylogHost=foo.bar.de log4j.appender.graylog2.facility=myall log4j.appender.graylog2.Threshold=INFO </code></pre>  <p>If I start karaf I just get this exception:</p>  <pre><code>/opt/apache-karaf-2.3.11/bin/karaf server karaf: JAVA_HOME not set; results may vary log4j:ERROR Could not instantiate class [org.graylog2.log.GelfAppender]. java.lang.ClassNotFoundException: org.graylog2.log.GelfAppender not found by org.ops4j.pax.logging.pax-logging-service [4]     at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1460)     at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:72)     at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1843)     at java.lang.ClassLoader.loadClass(ClassLoader.java:268)     at java.lang.Class.forName0(Native Method)     at java.lang.Class.forName(Class.java:191)     at org.apache.log4j.helpers.Loader.loadClass(Loader.java:198)     at org.apache.log4j.helpers.OptionConverter.instantiateByClassName(OptionConverter.java:326)     at org.apache.log4j.helpers.OptionConverter.instantiateByKey(OptionConverter.java:123)     at org.apache.log4j.PaxLoggingConfigurator.parseAppender(PaxLoggingConfigurator.java:97)     at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:735)     at org.apache.log4j.PropertyConfigurator.parseCatsAndRenderers(PropertyConfigurator.java:639)     at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:504)     at org.apache.log4j.PaxLoggingConfigurator.doConfigure(PaxLoggingConfigurator.java:72)     at org.ops4j.pax.logging.service.internal.PaxLoggingServiceImpl.updated(PaxLoggingServiceImpl.java:214)     at org.ops4j.pax.logging.service.internal.PaxLoggingServiceImpl$1ManagedPaxLoggingService.updated(PaxLoggingServiceImpl.java:362)     at org.apache.felix.cm.impl.helper.ManagedServiceTracker.updateService(ManagedServiceTracker.java:148)     at org.apache.felix.cm.impl.helper.ManagedServiceTracker.provideConfiguration(ManagedServiceTracker.java:81)     at org.apache.felix.cm.impl.ConfigurationManager$ManagedServiceUpdate.provide(ConfigurationManager.java:1436)     at org.apache.felix.cm.impl.ConfigurationManager$ManagedServiceUpdate.run(ConfigurationManager.java:1392)     at org.apache.felix.cm.impl.UpdateThread.run(UpdateThread.java:103)     at java.lang.Thread.run(Thread.java:701) log4j:ERROR Could not instantiate appender named "graylog2". </code></pre>  <p>I also tried this <a href="http://camelandjava.blogspot.de/2012/05/karaf-and-graylog2-log4j-appenders-in.html" rel="nofollow">instructions</a> with the same result.</p>  <p>Thanks for help.</p>