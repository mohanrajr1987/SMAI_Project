<p>The 'Greenpages app' is a sample web application available in Eclipse Virgo site that provides a example of using OSGI and Spring DM together and can be deployed in Virgo container. See: <a href="http://www.eclipse.org/virgo/samples/" rel="nofollow">http://www.eclipse.org/virgo/samples/</a> . I was able to run the app with no errors. But as soon as I try to implement the <em>org.springframework.osgi.context.event.OsgiBundleApplicationContextListener</em> interface, everything goes wrong, and I start getting this error: </p>  <blockquote>   <p>java.lang.IllegalArgumentException: required property 'bundleContext'   has not been set</p> </blockquote>  <p>OsgiBundleApplicationContextListener interface provides a way to listening BundleContext events. See: <a href="http://docs.spring.io/osgi/docs/current/api/org/springframework/osgi/context/event/OsgiBundleApplicationContextListener.html" rel="nofollow">http://docs.spring.io/osgi/docs/current/api/org/springframework/osgi/context/event/OsgiBundleApplicationContextListener.html</a></p>  <p>My code:</p>  <p>public class ApplicationContextObserver implements      OsgiBundleApplicationContextListener {     private transient int countRefreshed = 0;     private transient int countClosed = 0;</p>  <pre><code>public void onOsgiApplicationEvent(OsgiBundleApplicationContextEvent evt) {     if(evt instanceof             OsgiBundleContextRefreshedEvent) {         countRefreshed++;     } else if(evt instanceof             OsgiBundleContextClosedEvent) {         countClosed++;     } } public int getCountRefreshed() {     return countRefreshed; } public int getCountClosed() {     return countClosed; } </code></pre>  <p>}</p>  <p>And the declared beans:</p>  <pre><code>&lt;bean id="ApplicationContextObserver" class="greenpages.ApplicationContextObserver" /&gt; &lt;osgi:service ref="ApplicationContextObserver" interface="org.springframework.osgi.context.event.OsgiBundleApplicationContextListener" /&gt;       </code></pre>  <p>To get things worst, sometimes this error does not appear at all, but the listener do not get called when I deploy another bundle in the container.</p>  <p>What is going wrong (if possible, can you attach a running example using Virgo Container, SpringDM and this listener)?</p>