<p>I've written an Android app that displays images in a <code>ListView</code> and these images are obtained from an app server. To get each image, I have to get an <code>InputStream</code> from a <code>URLConnection</code>, and then pass that stream to the setBackground method:</p>  <pre><code>view.setBackgroundDrawable(     new BitmapDrawable(         getResources(),          BitmapFactory.decodeStream(connection.getInputStream())     ) ); </code></pre>  <p>This throws an OutOfMemoryException for large images, so I went to the Android <a href="http://developer.android.com/training/displaying-bitmaps/load-bitmap.html" rel="nofollow">wiki</a> on the subject, and they gave an example for a method to calculate the inSampleSize for the bitmap before creating a <code>BitmapDrawable</code> from it. In that method, they say that the image resource must be decoded twice, but that isn't possible because the input stream that is the server's response can only be read once. How do I determine how much to downsample the image? Thanks.  </p>