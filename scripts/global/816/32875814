<p>I have an entity called <code>event</code> that needs to be sorted by <code>updated_at</code> field and/or other fields in the search. Below is what I have in the controller:</p>  <pre><code>@events = Event.all #other search params are ommitted here @events = @events.sort_by_col(params[:sort], params[:order]).group(:'event.id') </code></pre>  <p>However, this returns the following error when I try to use the <code>updated_at</code> field for sorting the search results:</p>  <pre><code>PG::UndefinedFunction: ERROR:  function lower(timestamp without time zone) does not exist LINE 1: ...texts.name = 'soccer') GROUP BY event.id  ORDER BY LOWER(event...                                                              ^ HINT:  No function matches the given name and argument types. You might need to add explicit type casts. </code></pre>  <p>How can I do the ordering by date in the search queries? Thank you</p>  <p><strong>Edit</strong>: the sort_by_col function:</p>  <pre><code>scope :sort_by_col, -&gt; (column, order) {     if column == 'id'       order("#{column} #{order}")     else       order("LOWER(events.#{column}) #{order}")     end   } end </code></pre>  <p>after change the first if condition in sort_by_col, it works now!</p>  <pre><code>if column == 'id' || column == 'updated_at' </code></pre>