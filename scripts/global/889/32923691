<p>I want to change label background color within a function, I tried this code but nothing changed after calling <code>changecolor</code> function</p>  <pre><code>HWND hWndLabel;  LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam) {     switch (message)     {     case WM_CREATE:         hWndLabel = CreateWindowEx(WS_EX_TRANSPARENT,             L"STATIC", L"", WS_CHILD | WS_VISIBLE | SS_LEFT | WS_SYSMENU,             75, 75, 70, 70, hWnd, (HMENU)labelId, hInst, NULL);         break;      case WM_DESTROY:         PostQuitMessage(0);         break;      case WM_COMMAND:  // all events are handled here         break;     default:         return DefWindowProc(hWnd, message, wParam, lParam);         break;     }     return 0; }  DWORD WINAPI changecolor(){     HDC hdc = GetDC(hWndLabel); // get context     SetBkColor(hdc, RGB(0, 0, 230)); // Code Copied from the above answer by cpx.     return 0; } </code></pre>  <p>I read that Static controls send their parent a <code>WM_CTLCOLORSTATIC</code> message just before they paint themselves. code is implemented within <code>CALLBACK</code> function, but where this code is called (changing color)?, how can I call <code>SetTextColor</code> within a function</p>  <p>code example : </p>  <pre><code>case WM_CTLCOLORSTATIC:   if (the_button_was_clicked) {     HDC hdc = reinterpret_cast&lt;HDC&gt;(wParam);     SetTextColor(hdc, COLORREF(0xFF, 0x00, 0x00));   }   return ::GetSysColorBrush(COLOR_WINDOW);  // example color, adjust for your circumstance </code></pre>