<p>I'm very new to Latex, and I'm trying my way on creating a graph with a figure caption. </p>  <p>Now when I try to add <code>fig.cap</code> in the chunk heading (second chunk) I get the error</p>  <blockquote>   <p>Latex error: Not in outer par mode</p> </blockquote>  <p>My code</p>  <pre><code>&lt;&lt;echo = FALSE&gt;&gt;=  source("analysis.R")  repoData &lt;- readRDS("data/repoData.rds")    a4width&lt;- 8.3   a4height&lt;- 11.7 @ \begin{figure}[h] &lt;&lt;echo = FALSE, fig.width= a4width, fig.height=0.35*a4height&gt;&gt;= G2(repoData) @ \end{figure}   ## ---- G2 ---- G2 &lt;- function(df) {   # For inflation graph     plot &lt;- ggplot(df, aes(x = Month, y = Percent)) +      geom_line(colour = "firebrick") +     xlab("") +     ylab("Repo rate") +     theme_classic() +      theme(axis.title.y = element_text(vjust = 1))    return(plot)  } </code></pre>  <p>Why does this happen and how can this be resolved?</p>