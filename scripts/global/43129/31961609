<p>I am getting the following error from Entity Framework v4: </p>  <p>Properties referred by the Principal Role Unit must be exactly identical to the key of the EntityType dbSamplingModel.Unit referred to by the Principal Role in the relationship constraint for Relationship dbSamplingModel.UnitSource. Make sure all the key properties are specified in the Principal Role.  </p>  <p>Here is the relevant part of my edmx. As far as I can see my Unit is keyed by CitiCode and that's what I am using in the Relationship as a key.</p>  <pre><code>&lt;EntityType Name="Unit"&gt;   &lt;Key&gt;     &lt;PropertyRef Name="CitiCode" /&gt;   &lt;/Key&gt;   &lt;Property Name="CitiCode" Type="String" Nullable="false" MaxLength="15" FixedLength="false" Unicode="false" /&gt;   &lt;Property Name="SedolCode" Type="String" Nullable="false" MaxLength="15" FixedLength="false" Unicode="false" /&gt;   &lt;Property Name="ISINCode" Type="String" Nullable="false" MaxLength="15" FixedLength="false" Unicode="false" /&gt;   &lt;Property Name="MexCode" Type="String" Nullable="false" MaxLength="15" FixedLength="false" Unicode="false" /&gt;   &lt;NavigationProperty Name="Sources" Relationship="dbSamplingModel.UnitSource" FromRole="Unit" ToRole="Source" /&gt; &lt;/EntityType&gt; &lt;Association Name="UnitSource"&gt;   &lt;End Type="dbSamplingModel.Unit" Role="Unit" Multiplicity="1" /&gt;   &lt;End Type="dbSamplingModel.Source" Role="Source" Multiplicity="*" /&gt;   &lt;ReferentialConstraint&gt;     &lt;Principal Role="Unit"&gt;       &lt;PropertyRef Name="CitiCode" /&gt;     &lt;/Principal&gt;     &lt;Dependent Role="Source"&gt;       &lt;PropertyRef Name="CitiCode" /&gt;     &lt;/Dependent&gt;   &lt;/ReferentialConstraint&gt; &lt;/Association&gt; </code></pre>