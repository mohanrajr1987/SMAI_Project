<p>I'm trying to get <code>ejabberd</code> to allow for in-channel registration only from a specific IP, using <code>mod_register</code>'s <code>ip_access</code> clause.</p>  <p>To do this, I added this line to the <code>mod_register</code> block in my <code>ejabberd.cfg</code>:</p>  <pre><code>{ip_access, [{allow, "the.allowed.ip.address"}]} </code></pre>  <p>... And restarted <code>ejabberd</code> via <code>ejabberdctl restart</code>. The server came back online with no warnings or errors logged in <code>/var/log/ejabberd/ejabberd.log</code>.</p>  <p>Unfortunately, with this line of code, I could still perform in-channel registration from a non-whitelisted IP using Adium as a client. I decided to amend the line above by adding:</p>  <pre><code>{ip_access, [{allow, "the.allowed.ip.address"}, {deny, all}]} </code></pre>  <p>... Running the risk of causing all registrations to throw a 403 "Unauthorized" status. Strangely, now, when I try to register from <em>any</em> IP, including the whitelisted one, I get a 503 "Service unavailable" status message.</p>  <p>How can I get <code>ejabberd</code> to allow in-channel registration from a specific IP, and that IP alone?</p>