<p>The logical expressions does not work as expected while full text search in SQLite database.  Tested on XAMPP-PORTABLE 1.8.3 [PHP: 5.5.6].</p>  <h1>Example data</h1>  <p>There is table <code>clubs</code> with columns</p>  <ul> <li><code>name</code> for the football club</li> <li><code>city</code> for the city</li> <li><code>nations</code> for the abbreviations of players' nationalities</li> </ul>  <p>What is important, the cities with be used for OR statements (example, London or Liverpool). The nationalities will be used for AND statements. </p>  <p>The PHP script that creates such table</p>  <pre><code>&lt;?php $db = new  PDO('sqlite:mydb.sqlite3'); $sql = "CREATE VIRTUAL TABLE clubs USING fts4 " .        "(name, city, nations)"; $db-&gt;exec($sql);  $sql = "DELETE FROM clubs"; $db-&gt;exec($sql);  $teams = array(   array(     "name" =&gt; "FC Chelsea",      "city" =&gt; "London",     "nations" =&gt; "ENG BEL BIH FRA SEN ESP GHA SRB NIG COL"    ),   array(     "name" =&gt; "FC Arsenal",      "city" =&gt; "London",     "nations" =&gt; "ENG COL CZE FRA GER BRA ESP WAL CHI CRC"    ),   array(     "name" =&gt; "Tottenham Hotspur",      "city" =&gt; "London",     "nations" =&gt; "ENG FRA NED BEL ARG AUT WAL ALG DEN CAM KOR"    ),   array(     "name" =&gt; "West Ham United",      "city" =&gt; "London",     "nations" =&gt; "ENG ESP IRL SUI NZL WAL ITA CAN SCO CAM SEN FRA ARG ECU"    ),   array(     "name" =&gt; "Manchester City",      "city" =&gt; "Manchester",     "nations" =&gt; "ENG ARG BEL FRA SRB BRA CIV ESP NIG"    ),   array(     "name" =&gt; "Manchester United",      "city" =&gt; "Manchester",     "nations" =&gt; "ENG ESP ARG NED ITA ECU FRA BEL GER BRA"    ),   array(     "name" =&gt; "FC Everton",      "city" =&gt; "Liverpool",     "nations" =&gt; "ENG ESP USA ARG CRC IRL BIH RSA BEL SCO URU"    ),   array(     "name" =&gt; "FC Liverpool",      "city" =&gt; "Liverpool",     "nations" =&gt; "ENG BRA HUN FRA CRO ESP SVK CIV GER WAL POR BEL"    ), );  for($i=0; $i&lt;count($teams); $i++) {   $sql = "INSERT INTO clubs VALUES (?, ?, ?)";   $stmt = $db-&gt;prepare($sql);   $stmt-&gt;execute(     array(       $teams[$i]["name"], $teams[$i]["city"], $teams[$i]["nations"]     )        ); } </code></pre>  <h1>Examples of logical expressions</h1>  <p>The following function wil be used for the display of the results</p>  <pre><code>function doQuery($db, $sql, $desc) {   $arr = array();   $q = $db-&gt;query($sql);   $rows = $q-&gt;fetchAll(PDO::FETCH_ASSOC);   echo "&lt;tt&gt;" . $sql . "&lt;/tt&gt;&lt;br/&gt;";   echo "&lt;b&gt; " . $desc . " (" . count($rows) . "&lt;/b&gt;): " ;   foreach($rows as $row) {     $arr[] = $row['name'];   }   $results = implode(", ", $arr);   echo $results . "&lt;br/&gt;";   } </code></pre>  <p>In the following examples the results will be displayed with <em>italic</em> to distinguish them from the other text.</p>  <h2>One logical expression statement</h2>  <p>1.1. Search clubs with Spanish players</p>  <pre><code>$sql = &lt;&lt;&lt;SQL SELECT * FROM clubs WHERE clubs MATCH ('nations:ESP') SQL; doQuery($db, $sql, "ESP"); </code></pre>  <p>There are found all teams except Tottenham</p>  <p><em>ESP (7): FC Chelsea, FC Arsenal, West Ham United, Manchester City, Manchester United, FC Everton, FC Liverpool</em></p>  <p>1.2. Search clubs with Argentine players</p>  <pre><code>$sql = &lt;&lt;&lt;SQL SELECT * FROM clubs WHERE clubs MATCH ('nations:ARG') SQL; doQuery($db, $sql, "ARG"); </code></pre>  <p>Results are also correct.</p>  <p><em>ARG (5): Tottenham Hotspur, West Ham United, Manchester City, Manchester United, FC Everton</em></p>  <h2>Two logical expressions statement</h2>  <p>2.1. Search clubs from London <em>OR</em> Liverpool</p>  <pre><code>$sql = &lt;&lt;&lt;SQL SELECT * FROM clubs WHERE clubs MATCH ('city:London OR city:Liverpool') SQL; doQuery($db, $sql, "London or Liverpool"); </code></pre>  <p>No problem.</p>  <p><em>London or Liverpool (6): FC Chelsea, FC Arsenal, Tottenham Hotspur, West Ham United, FC Everton, FC Liverpool</em></p>  <p>2.2. Search clubs with Spanish players <em>AND</em> Argentine players</p>  <pre><code>$sql = &lt;&lt;&lt;SQL SELECT * FROM clubs WHERE clubs MATCH ('nations:ARG nations:ESP') SQL; doQuery($db, $sql, "ARG ESP"); </code></pre>  <p>Implicit AND operator works fine.</p>  <p><em>ARG ESP (4): West Ham United, Manchester City, Manchester United, FC Everton</em></p>  <p>but when go for explicit AND</p>  <p>2.3. Search clubs with Spanish players <em>AND</em> Argentine players (explicit)</p>  <pre><code>$sql = &lt;&lt;&lt;SQL SELECT * FROM clubs WHERE clubs MATCH ('nations:ARG AND nations:ESP') SQL; doQuery($db, $sql, "ARG and ESP"); </code></pre>  <p>No club is found.</p>  <p><em>ARG and ESP (0):</em></p>  <p>The explicit AND does not seem to work. </p>  <h2>Three logical expressions statement</h2>  <p>Now the results are unexpected</p>  <p>3.1. Search clubs from London OR clubs from Liverpool with Argentine players</p>  <pre><code>$sql = &lt;&lt;&lt;SQL SELECT * FROM clubs WHERE clubs MATCH ('city:London OR city:Liverpool nations:ARG') SQL; doQuery($db, $sql, "London or Liverpool and ARG"); </code></pre>  <p>We would have expected all London teams selected, but instead we get only those with Argentine players</p>  <p><em>London or Liverpool and ARG (3): Tottenham Hotspur, West Ham United, FC Everton</em></p>  <p>The same result is obtained for query</p>  <pre><code>SELECT * FROM clubs WHERE clubs MATCH ('city:Liverpool OR city:London nations:ARG') </code></pre>  <p>It looks like OR is executed before AND: <strong>(city:Liverpool OR city:London) AND nations:ARG</strong>.  But what happens when the brackets are really used around OR-statement. </p>  <p>3.2. Search clubs (from London OR clubs from Liverpool) with Argentine players (brackets)</p>  <pre><code>$sql = &lt;&lt;&lt;SQL SELECT * FROM clubs WHERE clubs MATCH ('(city:Liverpool OR city:London) nations:ARG') SQL; doQuery($db, $sql, "(London or Liverpool) and ARG"); </code></pre>  <p>No club is found.</p>  <p><em>(London or Liverpool) and ARG (0):</em></p>  <p>What if the sequence of logical expressions changes</p>  <p>3.3 Search clubs from Liverpool with Argentine players or clubs from London.</p>  <pre><code>$sql = &lt;&lt;&lt;SQL SELECT * FROM clubs WHERE clubs MATCH ('city:Liverpool nations:ARG OR city:London') SQL; doQuery($db, $sql, "Liverpool and ARG or London"); </code></pre>  <p>Only team from Liverpool with Argentine players is found.</p>  <p><em>Liverpool and ARG or London (1): FC Everton</em></p>  <p>3.4. Same search with switched <code>nations:ARG</code> and <code>city:Liverpool</code>.</p>  <pre><code>$sql = &lt;&lt;&lt;SQL SELECT * FROM clubs WHERE clubs MATCH ('nations:ARG city:Liverpool OR city:London') SQL; doQuery($db, $sql, "ARG and Liverpool or London"); </code></pre>  <p>The same result as in the 3.1. example.</p>  <p><em>ARG and Liverpool or London (3): Tottenham Hotspur, West Ham United, FC Everton</em></p>  <h1>Question</h1>  <p>I got no clue how logical expressions are interpreted. Can anybody explain?</p>