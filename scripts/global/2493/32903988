<p>I'm testing out a text search query on two separate database servers, both running Postgres 9.4.4.</p>  <p>The row in question has the same data, and I get the same underlying <code>tsvector</code> on both servers:</p>  <pre><code>SELECT   user_id,   TO_TSVECTOR('english', REGEXP_REPLACE(first_name, '[^a-zA-Z0-9]', ' ', 'g')) ||   TO_TSVECTOR('english', REGEXP_REPLACE(last_name, '[^a-zA-Z0-9]', ' ', 'g')) ||   TO_TSVECTOR('english', REGEXP_REPLACE(username, '[^a-zA-Z0-9]', ' ', 'g')) FROM users_v1 where user_id = 123;  -- On server A: -- user_id    | to_tsvector -- -----------+---------------------- -- 123        | 'georg':1 'hickman':2 -- (1 row)  -- On server B: -- user_id    | to_tsvector -- -----------+---------------------- -- 123        | 'georg':1 'hickman':2 -- (1 row) </code></pre>  <p>However I get a different rank when using this vector to run a query:</p>  <pre><code>SELECT username,  TS_RANK_CD(    TO_TSVECTOR('english', REGEXP_REPLACE(first_name, '[^a-zA-Z0-9]', ' ', 'g')) ||    TO_TSVECTOR('english', REGEXP_REPLACE(last_name, '[^a-zA-Z0-9]', ' ', 'g')) ||    TO_TSVECTOR('english', REGEXP_REPLACE(username, '[^a-zA-Z0-9]', ' ', 'g'))  , PLAINTO_TSQUERY('george')) FROM users WHERE user_id = 123;  -- On server A: -- user_id    | ts_rank_cd -- -----------+---------------------- -- 123        | 0.2 -- (1 row)  -- On server B: -- user_id    | ts_rank_cd -- -----------+---------------------- -- 123        | 0.0 -- (1 row) </code></pre>  <p>Is the vector the only input to the rank function, or are there any server settings/anything else that affect the behaviour of <code>ts_rank_cd</code>? Is all the information stored in the vector displayed in the console output, or is there some hidden difference in it which I'm not seeing? If not what could be causing the discrepancy?</p>