<p>I'm trying to set up session clustering using <a href="http://wiki.eclipse.org/Jetty/Feature/Session_Clustering_Using_a_Database" rel="nofollow">this</a> </p>  <p>My jetty.xml:</p>  <pre><code>.... &lt;Set name="sessionIdManager"&gt;     &lt;New id="jdbcIdMgr" class="org.eclipse.jetty.server.session.JDBCSessionIdManager"&gt;         &lt;Arg&gt;             &lt;Ref id="Server"/&gt;         &lt;/Arg&gt;         &lt;Set name="workerName"&gt;&lt;Property name="jetty.jdbcSession.workerName" default="node1"/&gt;&lt;/Set&gt;         &lt;Set name="scavengeInterval"&gt;&lt;Property name="jetty.jdbcSession.scavenge" default="1800"/&gt;&lt;/Set&gt;          &lt;Call name="setDriverInfo"&gt;             &lt;Arg&gt;&lt;Property name="jetty.jdbcSession.driverClass"                            default="com.mysql.jdbc.jdbc2.optional.MysqlDataSource"/&gt;&lt;/Arg&gt;             &lt;Arg&gt;&lt;Property name="jetty.jdbcSession.connectionURL"                            default="jdbc:mysql://${datasource.dbServerName}:${datasource.dbServerPort}/${datasource.dbName}"/&gt;&lt;/Arg&gt;         &lt;/Call&gt;     &lt;/New&gt; &lt;/Set&gt; ..... </code></pre>  <p>My jetty-web.xml :</p>  <pre><code>&lt;Get name="Server"&gt;         &lt;Get id="jdbcIdMgr" name="sessionIdManager"/&gt;     &lt;/Get&gt;      &lt;Set name="sessionHandler"&gt;         &lt;New class="org.eclipse.jetty.server.session.SessionHandler"&gt;             &lt;Arg&gt;                 &lt;New id="jdbcmgr" class="org.eclipse.jetty.server.session.JDBCSessionManager"&gt;                     &lt;Set name="idManager"&gt;                         &lt;Ref id="jdbcIdMgr"/&gt;                     &lt;/Set&gt;                 &lt;/New&gt;             &lt;/Arg&gt;         &lt;/New&gt;     &lt;/Set&gt; </code></pre>  <p>The problem is that I'm getting NPE during server startup, because Server instance is not set to my WebAppContext instance so I can't get my sessionIdManager using :</p>  <pre><code>&lt;Get name="Server"&gt;     &lt;Get id="jdbcIdMgr" name="sessionIdManager"/&gt; &lt;/Get&gt; </code></pre>  <p>I looked at jetty-maven plugin sources and found that at first it configures my WebAppContext instance and then in calls setServer:</p>  <pre><code>    //set up the webapp and any context provided     this.server.configureHandlers();     configureWebApplication();     this.server.addWebApplication(webApp); </code></pre>  <p>How can I properly set up my session clustering stuff?</p>