<p>In my company, there are different customer locations "city-01-r-01" and "city-02-r-01" and so on. So if the location is unreachable, the monitoring software generates a timestamp with the status "UNKNOWN" or "CRITICAL". When the location is reachable again, the status is shown as "OK". I need to calculate the time for how much duration the location was unreachable.</p>  <p>The monitoring software generates this single file (in .txt format) for all the customer locations in the following format:</p>  <ul> <li>2015-08-02 07:18:30;city-01-r-01;UNKNOWN</li> <li>2015-08-02 07:33:25;city-01-r-01;OK</li> <li>2015-08-03 12:56:50;city-02-r-01;CRITICAL</li> <li>2015-08-03 13:02:49;city-02-r-01;OK</li> </ul>  <p>I need to extract the above information and calculate the unreachability for every location from the .txt file.</p>  <p>My output should be another .txt file in the following format: (script can either be in bash or perl or any other scripting language)</p>  <ul> <li>city-01-r-01 was unreachable for ___ (minutes) ____ (seconds) on ____(date)</li> <li>city-02-r-01 was unreachable for ___ (minutes) ____ (seconds) on ____(date)</li> </ul>  <p>I googled a bit today and got the idea that I need to use IFS (for reading line by line) and a while/do loop to achieve this. But, I'm not sure how to achieve the results.</p>