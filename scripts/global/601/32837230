<p>I have some crons running every minute which fetch data from an API and then populate/update my db records.</p>  <p>For both I am using INSERT and ON DUPLICATE KEY UPDATE.</p>  <p>One cron can run for around 3-5 minutes, so i may have 5 instance of cron running in 1 minute.</p>  <p>I am using a field which is set to either 1 or 0 to lock the records so they are only used by one instance of the cron.</p>  <p>All cron has the following phases:</p>  <ul> <li>Select some records, ordered by date updated where not locked, and lock them </li> <li>get updated data from api </li> <li>bulk insert with ON DUPLICATE KEY UPDATE </li> <li>unlock the records</li> </ul>  <p>The problem is that in most of the instance i am getting "<strong>1213 Deadlock found when trying to get lock</strong>"</p>  <p>What is the best way to update my records without getting deadlocks?</p>  <p>I was thinking about creating a new table where i would insert all the bulk insert queries then process them at a later time, but i think this will still give me deadlocks because when all the crons try to insert in the new table.</p>  <p>I am really out of ideas on this. Any help would be appreciated :) Thanks</p>