<p>I'm trying to download a zipped file from Amazon Datafeed url and then decompress it.</p>  <p>This is my code:</p>  <pre><code>    open('public/files/amazon_ce.xml', 'w') do |local_file|       open('https://assoc-datafeeds-eu.amazon.com/datafeed/it_amazon_ce.xml.gz', :http_basic_authentication=&gt;[USERNAME, PASSWORD]) do |remote_file|         local_file.write(Zlib::GzipReader.new(remote_file).read)       end     end </code></pre>  <p>If I try with another file everything is ok, but not with this Amazon file: the error is:</p>  <pre><code>OpenURI::HTTPError: 500 Internal Server Error </code></pre>  <p>I logged the request when I download the same file using the browser...</p>  <pre><code>GET /datafeed/getFeed?filename=it_amazon_ce.xml.gz HTTP/1.1 Host: assoc-datafeeds-eu.amazon.com:443 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8 Accept-Encoding: gzip, deflate, sdch Accept-Language: it-IT,it;q=0.8,en-US;q=0.6,en;q=0.4 Cookie: xxxxx Referer: https://assoc-datafeeds-eu.amazon.com/datafeed/listFeeds?format=text/html Upgrade-Insecure-Requests: 1 User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.101 Safari/537.36  HTTP/1.1 302 Moved Temporarily Cache-Control: no-cache Content-Length: 0 Date: Wed, 30 Sep 2015 21:24:22 GMT Expires: Thu, 01 Jan 1970 00:00:00 UTC Location: http://prod-deamazon.outputs.datafeeds.s3.amazonaws.com/it_amazon_dvd.xml.gz?Signature=xxxx&amp;AWSAccessKeyId=xxxx&amp;Expires=xxxx Pragma: No-cache Server: Apache-Coyote/1.1 </code></pre>  <p>Any idea?</p>