<p>I am going through the stream-adventure workshopper from NodeSchool. I was to write a program which piped the process.stdin stream to a stream which was created using through2 module and then pipe that to process.stdout. The stream created using through2 module will convert the input stream characters to uppercase and pipe it to process.stdout. Below is my source code:</p>  <pre><code>var through = require('through2'); var write = function(buffer,encoding,next){         var data = buffer.toString();         this.push(data.toUpperCase() + '\n');         next(); } var end = function (done){         done(); } var stream = through(write,end); process.stdin.pipe(stream).pipe(process.stdout); </code></pre>  <p>The problem is that after every 8th chunk of word sent into the stream, an extra newline is printed. Below are 3 test outputs from the verification the workshopper did:    </p>  <p>Test 1:</p>  <pre><code>TAP version 13 # (anonymous) ok 1 stream-adventure verify YOURFILE.js not ok 2 should be equal   ---     operator: equal     expected:       'METALKIND\nKORVEN\nOSIRIAN\nTHE ERGON\nTYTHONIAN\nLAND OF FICTION BEINGS\nSIRIAN\nKRAAL\nTHE FLOOD\nJADONDAN\n'     actual:       'METALKIND\nKORVEN\nOSIRIAN\nTHE ERGON\nTYTHONIAN\nLAND OF FICTION BEINGS\nSIRIAN\nKRAAL\n\nTHE FLOOD\n\nJADONDAN\n\n'   ... ok 3 successful exit code  1..3 # tests 3 # pass  2 # fail  1  ######################################### ###   YOUR SOLUTION IS NOT CORRECT!   ### ######################################### </code></pre>  <p>Test 2:</p>  <pre><code>TAP version 13 # (anonymous) ok 1 stream-adventure verify YOURFILE.js not ok 2 should be equal   ---     operator: equal     expected:       'THE BEAST\nANDROZANI TREE\nGAZTAK\nRAXACORICOFALLAPATORIAN\nMAYFLY\nSTIGORAX\nTHE TRICKSTER\nMEGARA\nMENTOR\nHAND OF OMEGA\n'     actual:       'THE BEAST\nANDROZANI TREE\nGAZTAK\nRAXACORICOFALLAPATORIAN\nMAYFLY\nSTIGORAX\nTHE TRICKSTER\nMEGARA\nMENTOR\n\nHAND OF OMEGA\n\n'   ... ok 3 successful exit code  1..3 # tests 3 # pass  2 # fail  1  ######################################### ###   YOUR SOLUTION IS NOT CORRECT!   ### ######################################### </code></pre>  <p>Test 3:</p>  <pre><code>TAP version 13 # (anonymous) ok 1 stream-adventure verify YOURFILE.js not ok 2 should be equal   ---     operator: equal     expected:       'QETESH\nPELUSHI\nLURMAN\nEVE\nATRAXI\nFLESHKIND\nDALEK\nGEE-JEE FLY\nHEADLESS MONK\nTHE DESTROYER\n'     actual:       'QETESH\nPELUSHI\nLURMAN\nEVE\nATRAXI\nFLESHKIND\nDALEK\nGEE-JEE FLY\n\nHEADLESS MONK\n\nTHE DESTROYER\n\n'   ... ok 3 successful exit code  1..3 # tests 3 # pass  2 # fail  1  ######################################### ###   YOUR SOLUTION IS NOT CORRECT!   ### ######################################### </code></pre>  <p>What is the cause of the mysterious extra newline and how do I fix it?</p>