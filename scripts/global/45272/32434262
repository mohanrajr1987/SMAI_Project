<p>I'm using this event to save some data in localStorage when the user unload the page:</p>  <pre><code>$window.onbeforeunload = function(){             saveSomeDataInLocalStorage();             if($scope.message){                 return "You haven't sent your message yet. Do you want to leave without sending?";             }             else                 return null;         }; </code></pre>  <p>When enters to <code>if($scope.message)</code> condition, returns the confirm message and the data is saved well in localStorage (<code>saveSomeDataInLocalStorage</code>function). <strong>All correct</strong>...</p>  <p>But... If enter to <code>else</code> condition, the data via <code>saveSomeDataInLocalStorage</code>is not saved.</p>  <p>I don't undestand the way of <code>onbeforeunload</code> event maybe...</p>  <p>I need to save some data in both cases, returning the confirmation or not. </p>  <h3>Is there any way to do this?</h3>  <p><em>Thank you a lot!</em></p>