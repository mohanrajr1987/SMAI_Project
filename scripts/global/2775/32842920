<p>What is the right way to configure services for different environments?</p>  <p>For example I want to add FakeService to services collection for DEV configuration and RealService for Release configuration.</p>  <pre><code>public void ConfigureServices(IServiceCollection services) {     /* Need to check environment */     services.AddSingleton&lt;IService, FakeService&gt;();     .... } </code></pre>