<p>I have an HttpServlet running on Google App Engine. My doGet() method looks like this:</p>  <pre><code>public class IpServlet extends HttpServlet {   @Override   public void doGet(HttpServletRequest req, HttpServletResponse resp)   throws IOException {     String ra = req.getRemoteAddr();     resp.setContentType("text/plain");     resp.setCharacterEncoding("UTF-8");     resp.getWriter().write(ra);   } } </code></pre>  <p>I would like for this getRemoteAddr to always return an IPv4 address. The following answer appears to indicate that this is configurable:</p>  <p><a href="http://stackoverflow.com/questions/11018182/httpservletrequest-getremoteaddr-in-tomcat-returns-ipv6-formatted-ip-address">HttpServletRequest.getRemoteAddr() in Tomcat returns IPv6 formatted IP address</a></p>  <p>Can I somehow add this parameter -Djava.net.preferIPv4Stack=true to my Google App Engine startup commandline? In appengine-web.xml or web.xml perhaps?</p>  <p><strong>Edit:</strong></p>  <p>After some more looking around, I added the following to system-properties in appengine-web.xml:</p>  <pre><code>&lt;property name="java.net.preferIPv4Stack" value="true"/&gt; </code></pre>  <p>But this doesn't appear to work as expected.</p>