<p>I'm calling <code>.NET webservice</code> using <code>AsyncTask</code>. My code works fine if I use "strictmode". But I don't want it. I searched for the error's solution. I found a similar post <a href="http://stackoverflow.com/questions/8172338/async-task-an-error-occured-while-executing-doinbackground">here</a>. As per this post, I must use <code>onProgressUpdate</code> instead of doing all the background work in <code>doInBackground</code>. But I'm unable to understand which part should I include in the <code>doInBackground</code> and which in <code>onProgressUpdate</code>. It would be really helpful. </p>  <p>LOGCAT:</p>  <pre><code>09-24 16:28:27.497: E/AndroidRuntime(32086): FATAL EXCEPTION: AsyncTask #4 09-24 16:28:27.497: E/AndroidRuntime(32086): Process: com.example.awebservice, PID: 32086 09-24 16:28:27.497: E/AndroidRuntime(32086): java.lang.RuntimeException: An error occured while executing doInBackground() 09-24 16:28:27.497: E/AndroidRuntime(32086):    at android.os.AsyncTask$3.done(AsyncTask.java:300) 09-24 16:28:27.497: E/AndroidRuntime(32086):    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:355) 09-24 16:28:27.497: E/AndroidRuntime(32086):    at java.util.concurrent.FutureTask.setException(FutureTask.java:222) 09-24 16:28:27.497: E/AndroidRuntime(32086):    at java.util.concurrent.FutureTask.run(FutureTask.java:242) 09-24 16:28:27.497: E/AndroidRuntime(32086):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:231) 09-24 16:28:27.497: E/AndroidRuntime(32086):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112) 09-24 16:28:27.497: E/AndroidRuntime(32086):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587) 09-24 16:28:27.497: E/AndroidRuntime(32086):    at java.lang.Thread.run(Thread.java:841) 09-24 16:28:27.497: E/AndroidRuntime(32086): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() 09-24 16:28:27.497: E/AndroidRuntime(32086):    at android.os.Handler.&lt;init&gt;(Handler.java:208) 09-24 16:28:27.497: E/AndroidRuntime(32086):    at android.os.Handler.&lt;init&gt;(Handler.java:122) 09-24 16:28:27.497: E/AndroidRuntime(32086):    at android.widget.Toast$TN.&lt;init&gt;(Toast.java:341) 09-24 16:28:27.497: E/AndroidRuntime(32086):    at android.widget.Toast.&lt;init&gt;(Toast.java:96) 09-24 16:28:27.497: E/AndroidRuntime(32086):    at android.widget.Toast.makeText(Toast.java:245) 09-24 16:28:27.497: E/AndroidRuntime(32086):    at com.example.awebservice.MainActivity$AsyncCallWS.doInBackground(MainActivity.java:117) 09-24 16:28:27.497: E/AndroidRuntime(32086):    at com.example.awebservice.MainActivity$AsyncCallWS.doInBackground(MainActivity.java:1) 09-24 16:28:27.497: E/AndroidRuntime(32086):    at android.os.AsyncTask$2.call(AsyncTask.java:288) 09-24 16:28:27.497: E/AndroidRuntime(32086):    at java.util.concurrent.FutureTask.run(FutureTask.java:237) 09-24 16:28:27.497: E/AndroidRuntime(32086):    ... 4 more </code></pre>  <p>Code</p>  <pre><code>public class MainActivity extends Activity{     private static final String OPERATION_NAME = "VS";      private static final String WSDL_TARGET_NAMESPACE = "http://cgi.xyz.com/store";      private static final String SOAP_ADDRESS = "http://cgi.xyz.com/VSC.asmx";      private static final String SOAP_ACTION = "http://cgi.xyz.com/store/VS";      TextView tvData1;     EditText edata;     Button button;    // String value;     ProgressBar pg;     String value;      @Override     public void onCreate(Bundle savedInstanceState) {         super.onCreate(savedInstanceState);         setContentView(R.layout.activity_main);           edata =(EditText)findViewById(R.id.editText1);                pg = (ProgressBar) findViewById(R.id.progressBar1);          tvData1 = (TextView)findViewById(R.id.textView1);          value=edata.getText().toString();                  button=(Button)findViewById(R.id.button1);          button.setOnClickListener(new OnClickListener() {              @SuppressLint("NewApi")             public void onClick(View v) {                  AsyncCallWS task = new AsyncCallWS();                 task.execute();             }         });    } //oncreate      private class AsyncCallWS extends AsyncTask&lt;String, Void, String&gt; {          @Override         protected void onPreExecute() {              //if you want, start progress dialog here             pg = (ProgressBar) findViewById(R.id.progressBar1);             pg.setVisibility(View.VISIBLE);         }          @Override         protected String doInBackground(String... value) {             // TODO Auto-generated method stub              String webResponse = "";               SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE, OPERATION_NAME);              PropertyInfo propertyInfo = new PropertyInfo();              propertyInfo.type = PropertyInfo.STRING_CLASS;              propertyInfo.name = "StoreCode";                  Toast.makeText(getApplicationContext(), value, Toast.LENGTH_SHORT).show();               request.addProperty(propertyInfo, value);                       SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(                      SoapEnvelope.VER11);                      envelope.dotNet = true;                       envelope.setOutputSoapObject(request);                       HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);                       try  {                                          httpTransport.call(SOAP_ACTION, envelope);                                          Object response = envelope.getResponse();                           Toast.makeText(getApplicationContext(), response.toString(), Toast.LENGTH_LONG).show();                       JSONArray jsonArray = new JSONArray(response.toString());                       JSONObject jsonObject = (JSONObject) jsonArray.get(0);                       webResponse = jsonObject.getString("JsonOutput");                      //tvData1.setText(output.toString());                       }  catch (Exception e)   {                                    //tvData1.setText(e.toString());                          Toast.makeText(getApplicationContext(),"Cannot access the web service"+e.toString(), Toast.LENGTH_LONG).show();                      }                return webResponse;         }           @Override          protected void onProgressUpdate(Void... values) {           }          @Override         protected void onPostExecute(String result) {                 //if you started progress dialog dismiss it here                 pg = (ProgressBar) findViewById(R.id.progressBar1);                 pg.setVisibility(View.INVISIBLE);                 tvData1.setText(result);                 Toast.makeText(getApplicationContext(),"Completed...", Toast.LENGTH_LONG).show();              }      }  } //activity </code></pre>