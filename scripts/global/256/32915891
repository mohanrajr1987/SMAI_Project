<p>I'm getting an odd error:</p>  <pre><code>{ __cid: '__cid9',   method: 'insert',   options: undefined,   bindings:     [ 500,      'Dinner',      '10/02/2015 7:57 PM',      '09/29/2015 8:00 PM',      'Grand Plaza',      1 ],   sql: 'insert into "expense" ("amount", "description", "due_date", "payment_date", "vendor_id") values ($1, $2, $3, $4, select "vendor_id" from "vendor" where "name" = $5 limit $6)',   returning: undefined } error: syntax error at or near "select" at [object Object].Connection.parseE (/.../node_modules/pg/lib/connection.js:534:11)   at [object Object].Connection.parseMessage (/.../node_modules/pg/lib/connection.js:361:17)   at Socket.&lt;anonymous&gt; (/.../node_modules/pg/lib/connection.js:105:22)   at Socket.emit (events.js:107:17)   at readableAddChunk (_stream_readable.js:163:16)   at Socket.Readable.push (_stream_readable.js:126:10)   at TCP.onread (net.js:538:20) </code></pre>  <p>I have run the raw SQL with those value cut and paste and it works just fine.</p>  <p>This is the code thats generating the error:</p>  <pre><code>Promise.each subbudget.expenses, (expense) -&gt;     vendor.get(expense.vendor).then (vendor_id) -&gt;         knex('expense').insert(             due_date: expense.dueDate             vendor_id: (knex.first("vendor_id").from("vendor").where({name: vendor_id}))             amount: expense.amount             description: expense.description             payment_date: expense.paidDate         ) </code></pre>  <p>Edit (Partial Solution): The issue seems to be parentheses missing around the SELECT statement. Knex offers .wrap(), which only works on raw, and .as(), which only works on nested statements; for some reason this does not qualify as a nested statement, so I can't get parentheses around it.  Any ideas?</p>