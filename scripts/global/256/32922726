<p>We have recently migrated to postgres 9.4 from mysql and were getting some really poor performance. All cpu cores just end up on 100% whenever our celery cluster starts working. Coming from MySQL before this, the cpus never really went more than ~20%.</p>  <p>I'm not sure where to start but I did this as a quick test. This may not matter too much but I thought it would be a test for connections speed. So I atleast know i am loosing a lot of time just from the connect before I even get into query performance.</p>  <pre><code># Postgres $ time for i in `seq 1 100`; do sudo -u postgres psql db -c "select 1" &gt; /dev/null; done  real    0m5.498s user    0m3.317s sys     0m0.660s  # MySQL $ time for i in `seq 1 100`; do mysql -uroot -ppass db -e 'select 1;' &gt; /dev/null; done  real    0m0.664s user    0m0.153s sys     0m0.310s </code></pre>  <p>Postgres config looks like this</p>  <pre><code>data_directory = '/data/pg_data' hba_file = '/etc/postgresql/9.4/main/pg_hba.conf' ident_file = '/etc/postgresql/9.4/main/pg_ident.conf' external_pid_file = '/var/run/postgresql/9.4-main.pid'  listen_addresses = '192.168.172.34, localhost' port = 5432 max_connections = 200 unix_socket_directories = '/var/run/postgresql' ssl = true ssl_cert_file = '/etc/ssl/certs/ssl-cert-snakeoil.pem' ssl_key_file = '/etc/ssl/private/ssl-cert-snakeoil.key'  shared_buffers = 1GB work_mem = 5242kB maintenance_work_mem = 256MB dynamic_shared_memory_type = posix  wal_buffers = 16MB                      # min 32kB, -1 sets based on shared_buffers checkpoint_segments = 32                # in logfile segments, min 1, 16MB each checkpoint_completion_target = 0.7      # checkpoint target duration, 0.0 - 1.0  effective_cache_size = 3GB default_statistics_target = 100  log_line_prefix = '%t [%p-%l] %q%u@%d ' log_timezone = 'UTC' stats_temp_directory = '/var/run/postgresql/9.4-main.pg_stat_tmp'  datestyle = 'iso, mdy' #intervalstyle = 'postgres' timezone = 'UTC' #timezone_abbreviations = 'Default' #extra_float_digits = 0 #client_encoding = sql_ascii  lc_messages = 'en_US.UTF-8' lc_monetary = 'en_US.UTF-8' lc_numeric = 'en_US.UTF-8' lc_time = 'en_US.UTF-8'  default_text_search_config = 'pg_catalog.english' </code></pre>