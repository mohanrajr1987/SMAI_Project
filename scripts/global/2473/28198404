<p>I'm trying to execute query like this</p>  <pre><code>$conn = Doctrine_Manager::connection()-&gt;getDbh();         $query = "SET @sql = NULL;                     SELECT                       GROUP_CONCAT(DISTINCT                         CONCAT(                           'GROUP_CONCAT(IF(DATE(punch_in_user_time) = ', QUOTE(DATE(punch_in_user_time)), ', TIME(punch_in_user_time), NULL)) AS ', QUOTE(DATE(punch_in_user_time)),                           ',GROUP_CONCAT(IF(DATE(punch_out_user_time) = ', QUOTE(DATE(punch_in_user_time)), ', TIME(punch_out_user_time), NULL)) AS ', QUOTE(DATE(punch_in_user_time))                         ) ORDER BY punch_in_user_time                       ) INTO @sql                     FROM ohrm_attendance_record                     where DATE(punch_in_user_time) between QUOTE(" . $fromDate .") and QUOTE(" . $toDate . ")                     ORDER BY punch_in_user_time ;                      SET @@group_concat_max_len = 10000;                     SET @sql = CONCAT('select emp_number, ', @sql,                      ' from hs_hr_employee e LEFT JOIN ohrm_attendance_record a ON a.employee_id = e.emp_number group by emp_number                      where true ');                      PREPARE stmt FROM @sql;                     EXECUTE stmt;                     DEALLOCATE PREPARE stmt;";          $statement = $conn-&gt;query($query);         return $statement-&gt;fetchAll(PDO::FETCH_ASSOC); </code></pre>  <p>but get error like this</p>  <pre><code>01/28/15 18:08:41,494 [3268] ERROR filter.ExceptionCatcherFilter - Uncaught Exception: exception 'PDOException' with message 'SQLSTATE[HY000]: General error' in C:\xampp\htdocs\orangehrm\symfony\plugins\orangehrmAttendancePlugin\lib\dao\AttendanceDao.php:553 </code></pre>  <p>The query works perfectly on MySQL, what's wrong with my code?</p>  <p>Please help!</p>