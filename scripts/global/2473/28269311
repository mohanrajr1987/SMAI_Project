<p>I have a filling form that's work fine.Until recently a user complained of duplicate values being saved in database.Table Lts is related to table2 Koleks in a one to many relationship</p>  <p>action</p>  <pre><code>public function executeKolect(sfWebRequest $r){   $areaId = //code;   $this-&gt;lts = Doctrine_Core::getTable('Lts')-&gt;getPaid($areaId, $this-&gt;selectedLot);  if($r-&gt;isMethod('post')) {  //code  } foreach($this-&gt;lts as $l) {             $amount = $r-&gt;getParameter('amount_received_'.$l['id']);             $dateOfPayment = $r-&gt;getParameter('date_of_payment_'.$l['id'], date('Y-m-d'));             $startPayment = $l['date_start_of_payment'];//date_of_payment should not less than date_start_of_payment             $collectionsTable = Doctrine_Core::getTable('Koleks')-&gt;getDateCreate($l['id'],$dateOfPayment); //here i want to make a method to check if the date_of_payment value that i want to insert does not exist yet in the Koleks table related to Lts table  $koleksTable = Doctrine_Core::getTable('Koleks')-&gt;getDateCreate($l['id'],$dateOfPayment); if ($koleksTable &gt;0) {                  $this-&gt;fieldErrors['date_of_payment_'.$l['id']] = 'exist';               } else {    //code ..proceed </code></pre>  <p>}      }</p>  <p>now in doctrine table</p>  <pre><code>public function getDateCreate($loanId,$datePayment) {     $q = $this-&gt;createQuery('k')                 //-&gt;select('k.date_created')               //  -&gt;from('Koleks k')                 -&gt;innerJoin('k.Lts l')                 -&gt;where('k.l_id=?',$loanId)                 -&gt;andWhere('k.date_created=?',$datePayment);                //return $q-&gt;count();                 $dateCreate = $q-&gt;count();                if ($dateCreate == 1) {                    $res = $q-&gt;fetchAll();                    return $res;                }                else {                 return $dateCreate;                } } </code></pre>  <p>I want to return an error if a same 'date_created' value is already exist in a Koleks table</p>  <p>But this code will not work..</p>  <p>In my previous project,Using mysqli, I can easily 'avoid' duplicates by using this code</p>  <p>//Action</p>  <pre><code>$collectionsTable=$link-&gt;getdateCreated($date,$id)  if $collectionsTable &gt; 0 { echo "cant proceed" } else { //code to proceed } </code></pre>  <p>//in myclass.php</p>  <pre><code>$date = _POST// function getDateCreate($date) {     $query  = $this-&gt;link-&gt;query("SELECT date_created FROM Koleks WHERE date_created = '$date'");     $rowcount = $query-&gt;rowCount();      if($rowcount == 1)      {         $result = $query-&gt;fetchAll();        return $result;     }     else      {        return $rowcount;     } } </code></pre>