<p>I've created authentication middleware for a lumen project. The authentication uses an external API, but unless I'm mistaken, that's not the issue here. The middleware correctly redirects me to the login page if I'm not authenticated, and correctly logs me in and saves it in the session when I put in good credentials. But it won't display the internal homepage as long as I'm using the middleware. The "handle" method in App\Http\Middleware\Authenticate.php seems to have no Response in $next($request) to return and I'm not sure why.</p>  <p>If my UserProvider implementation or AuthController is needed, let me know.</p>  <p><strong>Error Message:</strong></p>  <pre><code>ReflectionException in Container.php line 554: Function () does not exist  in Container.php line 554 at ReflectionFunction-&gt;__construct('') in Container.php line 554 at Container-&gt;getCallReflector(null) in Container.php line 531 at Container-&gt;getMethodDependencies(null, array()) in Container.php line 500 at Container-&gt;call(null, array()) in Application.php line 1286 at Application-&gt;callActionOnArrayBasedRoute(array(true, array('middleware' =&gt; 'bankerAuth'), array())) in Application.php line 1255 at Application-&gt;Laravel\Lumen\{closure}(object(Request)) at call_user_func(object(Closure), object(Request)) in Pipeline.php line 139 at Pipeline-&gt;Illuminate\Pipeline\{closure}(object(Request)) in Authenticate.php line 44 at Authenticate-&gt;handle(object(Request), object(Closure)) at call_user_func_array(array(object(Authenticate), 'handle'), array(object(Request), object(Closure))) in Pipeline.php line 124 at Pipeline-&gt;Illuminate\Pipeline\{closure}(object(Request)) at call_user_func(object(Closure), object(Request)) in Pipeline.php line 103 at Pipeline-&gt;then(object(Closure)) in Application.php line 1411 at Application-&gt;sendThroughPipeline(array('App\Http\Middleware\Authenticate'), object(Closure)) in Application.php line 1256 at Application-&gt;handleFoundRoute(array(true, array('middleware' =&gt; 'bankerAuth'), array())) in Application.php line 1179 at Application-&gt;Laravel\Lumen\{closure}(object(Request)) at call_user_func(object(Closure), object(Request)) in Pipeline.php line 139 at Pipeline-&gt;Illuminate\Pipeline\{closure}(object(Request)) in ShareErrorsFromSession.php line 54 at ShareErrorsFromSession-&gt;handle(object(Request), object(Closure)) at call_user_func_array(array(object(ShareErrorsFromSession), 'handle'), array(object(Request), object(Closure))) in Pipeline.php line 124 at Pipeline-&gt;Illuminate\Pipeline\{closure}(object(Request)) in StartSession.php line 62 at StartSession-&gt;handle(object(Request), object(Closure)) at call_user_func_array(array(object(StartSession), 'handle'), array(object(Request), object(Closure))) in Pipeline.php line 124 at Pipeline-&gt;Illuminate\Pipeline\{closure}(object(Request)) in AddQueuedCookiesToResponse.php line 37 at AddQueuedCookiesToResponse-&gt;handle(object(Request), object(Closure)) at call_user_func_array(array(object(AddQueuedCookiesToResponse), 'handle'), array(object(Request), object(Closure))) in Pipeline.php line 124 at Pipeline-&gt;Illuminate\Pipeline\{closure}(object(Request)) in EncryptCookies.php line 59 at EncryptCookies-&gt;handle(object(Request), object(Closure)) at call_user_func_array(array(object(EncryptCookies), 'handle'), array(object(Request), object(Closure))) in Pipeline.php line 124 at Pipeline-&gt;Illuminate\Pipeline\{closure}(object(Request)) at call_user_func(object(Closure), object(Request)) in Pipeline.php line 103 at Pipeline-&gt;then(object(Closure)) in Application.php line 1411 at Application-&gt;sendThroughPipeline(array('Illuminate\Cookie\Middleware\EncryptCookies', 'Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse', 'Illuminate\Session\Middleware\StartSession', 'Illuminate\View\Middleware\ShareErrorsFromSession'), object(Closure)) in Application.php line 1185 at Application-&gt;dispatch(null) in Application.php line 1125 at Application-&gt;run() in index.php line 28 </code></pre>  <p><strong>Relevant code:</strong></p>  <p><strong>.env</strong></p>  <pre><code>CACHE_DRIVER=file SESSION_DRIVER=file QUEUE_DRIVER=database AUTH_DRIVER=bankerAuth </code></pre>  <p><strong>app.php</strong></p>  <pre><code>$app-&gt;middleware([     Illuminate\Cookie\Middleware\EncryptCookies::class,     Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse::class,     Illuminate\Session\Middleware\StartSession::class,     Illuminate\View\Middleware\ShareErrorsFromSession::class, ]);  $app-&gt;routeMiddleware([     'bankerAuth' =&gt; \App\Http\Middleware\Authenticate::class, //    'guest' =&gt; \App\Http\Middleware\RedirectIfAuthenticated::class ]);  $app['auth']-&gt;extend('bankerAuth', function() {     return new App\Banker\BankerUserProvider; }); </code></pre>  <p><strong>routes.php</strong></p>  <pre><code>$app-&gt;get('/', ['middleware' =&gt; 'bankerAuth'], function () use ($app) {     return 'Home page'; });   $app-&gt;get('/login', function () {      return view('login'); });   $app-&gt;post('/login', ['uses' =&gt; 'AuthController@postLogin'], function() {  }); </code></pre>  <p><strong>App\Http\Middleware\Authenticate.php</strong></p>  <pre><code>&lt;?php   namespace App\Http\Middleware;   use Closure; use Illuminate\Contracts\Auth\Guard;  class Authenticate {     /**      * The Guard implementation.      *      * @var Guard      */     protected $auth;      /**      * Create a new filter instance.      *      * @param  Guard  $auth      * @return void      */     public function __construct(Guard $auth)     {         $this-&gt;auth = $auth;     }      /**      * Handle an incoming request.      *      * @param  \Illuminate\Http\Request  $request      * @param  \Closure  $next      * @return mixed      */     public function handle($request, Closure $next)     {         if ($this-&gt;auth-&gt;guest()) {             session()-&gt;flash('url.intended', app('url')-&gt;full());             return redirect()-&gt;to('/login', 302);         }          return $next($request);     } } </code></pre>