<p>I've got a strange problem in <code>dplyr</code> (probably a bug?), but run into an even more strange problem when debugging.</p>  <p>The dplyr-part of code does <a href="https://github.com/hadley/dplyr/issues/1404" rel="nofollow">already have an issue now</a>, but please help me figure out why <code>identical()</code> doesn't detect differences?</p>  <p>The code (copied from the issue i created on dplyr's github) show the issue with swedish letters (å,ä,ö,Å,Ä,Ö), and as a result of that an example when <code>base::identical(x,y)</code> returns <code>TRUE</code> even when dataframe x and y are different.</p>  <pre><code># Script to show how dplyr::select() breakes dplyr::group_by() with swedish names library(dplyr)  # Create data frame, column 1's name contains ä (specific swedish letters are åäöÅÄÖ) my_df &lt;- data.frame(användarnamn = letters[1:4], my_numvalues = 1:4,                  my_text = c("stop","break","my","code"),                 extra_col = LETTERS[1:4])  # use dplyr::select() to subset columns, then dplyr::group_by # group_by fails on swedish column names if the df is subsetted with filter. # If not subsetted or subsetted with [,1:3], everything works  my_df %&gt;% select(1:3) %&gt;% group_by(my_numvalues)   # This works my_df %&gt;% select(1:3) %&gt;% group_by(användarnamn)   # This fails my_df[,1:3] %&gt;% group_by(användarnamn)             # This works my_df %&gt;% group_by(användarnamn)                   # This works  # Same thing, but step by step my_df_selected &lt;- select(my_df, 1:3) group_by(my_df_selected, användarnamn)             # This fails group_by(my_df_selected, my_numvalues)             # This works  # and by %&gt;%  my_df_selected %&gt;% group_by(användarnamn)          # This fails my_df_selected %&gt;% group_by(my_numvalues)          # This works  # The names of the orignal df and the filtered is identical identical(names(my_df)[1:3],names(my_df_selected)) # The function base::make.names() doesn't change the name, it's already valid identical(names(my_df_selected), make.names(names(my_df_selected)))  # copy to a new df to rename my_df_selected_renamed &lt;- my_df_selected # rename the df with it's own old names passing make.names() names(my_df_selected_renamed) &lt;- make.names(names(my_df_selected_renamed))  # The orignal subsetted and the renamed df is identical # according to base::identical() identical(my_df_selected, my_df_selected_renamed)  # Here's the strange thing, it works now! Why??? I REALLY don't understand! my_df_selected_renamed %&gt;% group_by(användarnamn)  # This works now!  &gt; sessionInfo() R version 3.2.2 (2015-08-14) Platform: x86_64-w64-mingw32/x64 (64-bit) Running under: Windows 8 x64 (build 9200)  locale: [1] LC_COLLATE=Swedish_Sweden.1252  LC_CTYPE=Swedish_Sweden.1252    [3] LC_MONETARY=Swedish_Sweden.1252 LC_NUMERIC=C                    [5] LC_TIME=Swedish_Sweden.1252      attached base packages: [1] stats     graphics  grDevices utils     datasets  methods   base       other attached packages: [1] dplyr_0.4.3  loaded via a namespace (and not attached): [1] lazyeval_0.1.10 magrittr_1.5    R6_2.1.1        assertthat_0.1        parallel_3.2.2  [6] DBI_0.3.1       tools_3.2.2     Rcpp_0.12.1   </code></pre>