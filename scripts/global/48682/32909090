<p>I wrote this function to work on parse's CloudCode, it supposed to do the following</p>  <ol> <li><p>Query for artist that need to be update - works fine</p></li> <li><p>For each artist make a Parse.Cloud.httpRequest to retrieve  JSON of upcoming gigs - works fine</p></li> <li><p>Parse and save each JSON object - Seems to be parsing fine - but its not saving anything to the backend even tho it is returning successful </p></li> </ol>  <p><strong>The Problem</strong> - the function returns successful when I run it on could code but none of the objects or classes get saved to the backend </p>  <p><strong>Global's and main function</strong> <div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-js lang-js prettyprint-override"><code>var Venue = Parse.Object.extend("Venue"); var Event = Parse.Object.extend("Event"); var ArtistObject = Parse.Object.extend("Artist"); var _ = require('underscore');   Parse.Cloud.job("updateUpcomingGigs", function(response)  { Parse.Cloud.useMasterKey();          getArtistThatNeedToBeUpdated().then(function(results){         var firstprommises = [];                     _.each(results,function(artist) {                        firstprommises.push(                                        getJSONForArtist(artist).then(function(JSON){                       return parseAndSaveUpcomingEventsAndVenues(JSON,artist);                      })                    );                        });//end of loop for each artist                   return Parse.Promise.when(firstprommises);          }).then(function(){         console.log('finished');       response.success('Artist and venues Updated');    }),function(error) {         response.error(error);   };//error promise    });</code></pre> </div> </div> </p>  <p><strong>GetArtistThatNeedToBeUpdated</strong></p>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-js lang-js prettyprint-override"><code>function getArtistThatNeedToBeUpdated() {     var d = new Date();     //var lastWeeksDate = new Date(d.getFullYear(), d.getMonth(), d.getDate() - 7);     var lastWeeksDate = new Date(d.getTime());     //var ArtistObject = Parse.Object.extend("Artist");     //var artistObject = new ArtistObject;     var query = new Parse.Query(ArtistObject);     query.lessThan( "updatedAt", lastWeeksDate );     console.log('get artist');     return query.find(); }</code></pre> </div> </div> </p>  <p><strong>getJSONForArtist</strong></p>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-js lang-js prettyprint-override"><code>function getJSONForArtist(artist){         var encodedArtistName =  escape(artist.get("artistName"));     return  Parse.Cloud.httpRequest({               url: "http://url goes here"              }).then(function(httpResponse) {                 //var JSON = JSON.parse(httpResponse.text);                 var JSON = httpResponse.data;                 //var resultes = JSON;                 return JSON;             }); }</code></pre> </div> </div> </p>  <p><strong>parseAndSaveUpcomingEventsAndVenues - I think the problem lies in here somewhere</strong></p>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-js lang-js prettyprint-override"><code>function parseAndSaveUpcomingEventsAndVenues(JSONObj,artist){          var prommises = [];     _.each(JSONObj,function(obj){            if (obj){     prommises.push(function(){                              var event = new Event();                    var currentVenue = new Venue();                    var venue = obj.venue;//simple object                    var artistArray = obj.artists[0];//digging down to top artist                                           var d = new Date(obj.datetime);                     var monthIndex = d.getMonth();                      return event.saveAsync(null,{                        "artistName":artistArray.name,                        "title":obj.title,                        "formatted_datetime":obj.formatted_datetime,                        "formatted_location":obj.formatted_location,                        "monthIndex":monthIndex                                                       }).then(function(){                              var upcomingGigsRelation = artist.relation("upcomingGigsRelation");                              upcomingGigsRelation.add(event);                              return artist.saveAsync()                             .then(function(){                             return currentVenue.saveAsync(null,{                                 "venue": venue.name,                                 "city": venue.city,                                 "country":venue.county,                                 "region": venue.region,                                 "latitude": venue.latitude,                                 "longitude":venue.longitude                                    }).then(function(){                              var upcomingGigsRelation = currentVenue.relation("upcomingGigsRelation");                              upcomingGigsRelation.add(event);                             return currentVenue.saveAsync();                              });                             });                          });                        });//end of promise function                      }else{                         console.log('No JSON found');                             return;                      }                   });//end of loop                  return Parse.Promise.when(prommises).then(function(){         console.log('done parsing object');      }),function(error) {         response.error(error);   };                  };</code></pre> </div> </div> </p>  <p>Would really appreciate any help, I logged out the information in the parse and save function and all the objects seem to be coming through just fine, I know at the moment there is a lack of defensive code in here but I really don think thats the issue.  </p>  <p>Thanks - James </p>