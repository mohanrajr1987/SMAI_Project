<p>I have a filesystem with deeply nested directories. Inside the bottom level directory for any node in the tree is a directory whose name is the <code>guid</code> of a record in a database. This folder contains the binary file(s) (pdf, jpg, etc) that are attached to that record.</p>  <p>Two Example paths:</p>  <pre><code>/g/camm/MOUNT/raid_fs0/FOO/042014/27/123.456.789/04.20.30--27.04.2014--RJ123.pdf /g/camm/MOUNT/raid_fs1/FOO/052014/22/321.654.987/04.20.30--27.04.2014--RJ123.pdf </code></pre>  <p>In the above example, <code>123.456.789</code> and <code>321.654.987</code> are <code>guid</code>s</p>  <p>I want to build an index of the complete filesystem so that I can create a lookup table in my database to easily map the <code>guid</code> of the record to the absolute path(s) of its attached file(s). </p>  <p>I can easily generate a straight list of files with:</p>  <pre><code>find /g/camm/MOUNT -type f &gt; /g/camm/MOUNT/files.index </code></pre>  <p>but I want to parse the output of each file path into a CSV file which looks like:</p>  <pre><code>GUID    ABSOLUTEPATH    FILENAME 123.456.789 /g/camm/MOUNT/raid_fs0/FOO/042014/27/123.456.789/04.20.30--27.04.2014--RJ123.pdf    04.20.30--27.04.2014--RJ123.pdf 321.654.987 /g/camm/MOUNT/raid_fs1/FOO/052014/22/321.654.987/04.20.30--27.04.2014--RJ123.pdf    04.20.30--27.04.2014--RJ123.pdf </code></pre>  <p>I think I need to pipe the output of my find command into <code>xargs</code> and again into <code>awk</code> to process each line of the output into the desired format for the CSV output... but I can't make it work... </p>