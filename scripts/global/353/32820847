<p>I have been trying to create a star topology using MPI_Comm_split but I seem to have and issue when I try to establish the links withing all processes. The processes are allo expected to link to p0 of MPI_COMM_WORLD . Problem is I get a crash in the line  </p>  <pre><code>error=MPI_Intercomm_create(  MPI_COMM_WORLD, 0, NEW_COMM, 0 ,create_tag, &amp;INTERCOMM ); </code></pre>  <p>The error is :  <code>MPI_ERR_COMM: invalid communicator</code> .</p>  <p>I have and idea of the cause though I don't know how to fix it . It seems this is due to a call by process zero which doesn't belong to the new communicator(NEW_COMM) . I have tried to put an if statement to stop execution of this line if process = 0, but this again fails since its a collective call. </p>  <p>Any suggestions would be appreciated .</p>  <pre><code>#include &lt;iostream&gt; #include "mpi.h"  using namespace std;   int main(){   MPI_Comm NEW_COMM , INTERCOMM;  MPI_Init(NULL,NULL);  int world_rank , world_size,new_size, error;    error = MPI_Comm_rank(MPI_COMM_WORLD, &amp;world_rank);  error = MPI_Comm_size(MPI_COMM_WORLD,&amp;world_size);   int color = MPI_UNDEFINED;  if ( world_rank &gt; 0 )      color = world_rank ;   error = MPI_Comm_split(MPI_COMM_WORLD, color , world_rank, &amp;NEW_COMM);   int new_rank;  if ( world_rank &gt; 0 ) {       error = MPI_Comm_rank( NEW_COMM , &amp;new_rank);       error = MPI_Comm_size(NEW_COMM, &amp;new_size);   }   int create_tag = 99;    error=MPI_Intercomm_create(  MPI_COMM_WORLD, 0, NEW_COMM, 0 ,create_tag, &amp;INTERCOMM );   if ( world_rank &gt; 0 )     cout&lt;&lt;" My Rank in WORLD  = "&lt;&lt; world_rank &lt;&lt;"  New rank = "&lt;&lt;new_rank &lt;&lt; " size of NEWCOMM = "&lt;&lt;new_size  &lt;&lt;endl;  else     cout&lt;&lt;" Am centre "&lt;&lt;endl;      MPI_Finalize();     return 0;   } </code></pre>