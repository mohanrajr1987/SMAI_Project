<p>I'm trying to run the same simulation with different parameters a lot of times on a cluster. Doing that I want to run one simulation on one core. I have 24 cores available, and need to run about 70 simulations.  The parameters are specified by the path, top layer folder and second layer and in each leaf there is a specific run script which takes these parameters and run the simulation.</p>  <p>The script I need help with, should therefore just find all leaves and then run each script located there. This should be done such that I at (almost) all time have 23 leaf scripts running on each available core.</p>  <p>I have already made my own, which can be seen here:</p>  <pre><code>#jump to working directory if [ -z "$SLURM_SUBMIT_DIR" ]; then     echo "Running from cmd in $PWD" else      cd "$SLURM_SUBMIT_DIR"     echo "Nodes: $SLURM_NODELIST"     echo "Running from queue in $PWD" fi  find * -mindepth 2  -name run.sh | xargs -n 1 -P 24 bash </code></pre>  <p>however piping to xargs, correctly start the first 23 simulations, but once they finish, it does not start a new one. How can I correct this? </p>