<p><strong>I am in process of migration to  robolectric 3.0</strong></p>  <p><strong>Problem Statement--</strong></p>  <p>I have a class AppUtility, which is instantiated inside MyActivity, so to check its methods are invoked, I need to mock it inside my test before setting up the MyActivity.</p>  <p>Here is my code:</p>  <pre><code>@Mock private AppUtility mockAppUtility;  @Before public void setUp() {     initMocks(this);     myActivity= Robolectric.setupActivity(MyActivity.class);     equalsButton = (Button) myActivity.findViewById(R.id.equals_sign);     shadowActivity = Shadows.shadowOf(myActivity); } </code></pre>  <p>Here is the test method:--</p>  <pre><code>  @Test         public void shouldCallStartAlarm() {             for (int i = 0; i &lt; 4; i++) {                 equalsButton.performClick();             }             verify(mockAppUtility).startAlarm();         } </code></pre>  <p>Bu I get the following error msg:-- which show mock is not linked to the activity, how can I bind it to activity?? </p>  <pre><code>Actually, there were zero interactions with this mock. </code></pre>  <p>But the mock object is not associated with the test. With earlier version of Robolectric  I  use to associate the mock object on activity creation, by overriding it as below</p>  <pre><code> myActivity = new MyActivity() {                 @Override                 AppUtility getUtil() {                     return mockAppUtility;                 }             };             myActivity.onCreate(new Bundle()); </code></pre>  <p>and it use to work fine, with Robolectric 3.0 , how can I bind the mock object  before starting the activity. </p>  <p>Following @nenick your second option:This is how it looks</p>  <pre><code>    @Mock     private AppUtility appUtility;     @InjectMocks     private MyActivity myActivity;     @Before     public void setUp() {         ActivityController&lt;MyActivity&gt; activityController = Robolectric.buildActivity(MyActivity.class); //      myActivity= Robolectric.setupActivity(MyActivity.class);         myActivity=activityController.get();         initMocks(this);         activityController.setup();         equalsButton = (Button) myActivity.findViewById(R.id.equals_sign); //      shadowActivity = Shadows.shadowOf(calculatorActivity);     } </code></pre>  <p>but I get fllowing exception:-</p>  <pre><code>java.lang.IllegalArgumentException: attempted to invoke public final android.app.Application org.robolectric.shadows.ShadowActivity.getApplication() on instance of class org.com.android.AppUtility$$EnhancerByMockitoWithCGLIB$$77c74666, but AppUtility$$EnhancerByMockitoWithCGLIB$$77c74666 doesn't extend ShadowActivity </code></pre>  <blockquote>   <p>it breaks at step--activityController.setup();</p> </blockquote>