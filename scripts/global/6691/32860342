<p>I would like to create some changeable boundary module. Ideally the result would look like any other module but the behaviour could be set at compile time or in the configuration files. I think I am looking for something like define in erlang</p>  <p>Say I have a SystemClock module and a DummyClock tuple module. Ideally the Clock module would be one or other of the two modules above chosen in the config file.</p>  <p>In <code>config/test.ex</code></p>  <pre><code>define(Clock, {DummyClock, 12345678}) </code></pre>  <p>Later</p>  <pre><code>Clock.now # =&gt; 12345678 </code></pre>  <p>In <code>config/prod.ex</code></p>  <pre><code>define(Clock, SystemClock) </code></pre>  <p>Later</p>  <pre><code>Clock.now # =&gt; 32145687 </code></pre>