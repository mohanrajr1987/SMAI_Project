<p>i am creating a user login page. as user Enter his/her email-id and click ok button . control goes to database.jsp class where it check that use is authenticate user or not if user is valid use than only otp generate and send to the same email id which is Enter by the user. after that user enter otp number.but i want to check otp enter by the user is valid or not.so for that i m using validation function on click submit button .  i m saving the otp generate in database.jsp inside the session object but the problem is that session is not refreshing because of the ajax so i m not able to compare the value which is Enter by user and otp save inside the session .  if any body have the solution  then send me please .i m struggling from last 3 day for this validation.<code>enter code here</code></p>  <pre><code>            &lt;!DOCTYPE html&gt;                &lt;%@page import="com.pack1.Otp"%&gt;             &lt;%@page import="javax.sound.midi.SysexMessage"%&gt;               &lt;%@page import="org.omg.CORBA.Request"%&gt;               &lt;html&gt;          &lt;head&gt;        &lt;title&gt;index.jsp&lt;/title&gt;           &lt;style type="text/css"&gt;          input       {         margin-left:20px;         width:100%;        -moz-border-radius: 15px;         border-radius: 5px;         padding:5px;        }       #header {            color: black;             background-color: navajowhite; text-align : center;            padding: 10px;           width: 100%;       text-align: center;            }            .section {             text-align: center;           padding: 25px;          border: 5px solid navy;      margin: 25px;          }          #footer {       }                    .table {                 border: 1px solid black;              color: black;             background-color: gray;           }          table,th,td {             border: 1px solid black;                     }                      &lt;/style&gt;                    &lt;script                    src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"&gt;                        &lt;/script&gt;               &lt;script&gt;                   var request;                      var val_otp;             function sendOtp()              {                        var v=document.vinform.empemail.value;                 var url="database.jsp?val1="+v;                     if(window.XMLHttpRequest){                         request=new XMLHttpRequest();                              }                              else if(window.ActiveXObject){                               request=new ActiveXObject("Microsoft.XMLHTTP");                                     }                                   try                                   {                                 request.onreadystatechange=getInfo;                                   request.open("GET",url,true);                                  request.send();                                       }                                        catch(e)                                        {                                        alert("Unable to connect to server");                                          }                                              }                              function getInfo(){                             if(request.readyState==4){                           var val=request.responseText;                           alert(val);                      document.getElementById('amit').innerHTML=val;                        }                          }             //------------------------------------------------------------------       -validation                                    function------------------------------------------------             function validation(sessionotp)                  {                &lt;%--  alert(&lt;%=session.getAttribute("OTP")%&gt;); --%&gt;                     alert("this is the otp :"+sessionotp);                  var myForm=document.forms[0];                 var empName=myForm.empname;                     if(empName.value==null||empName.value.length==0)                    {                     alert("Please Enter the EmpName...");                     empName.focus();                     return false;                              }                          var empEmail=myForm.empemail;                     if(empEmail.value.length==0||empEmail.value==null)                        {                           alert("Please Enter EmpEmail.......");                          empEmail.focus();                        return false;                             }         var Otp=myForm.otp;     //var otpvalue=Otp.value;     if(Otp.value==null||Otp.value.length==0)         {         alert("please Enter the OTP number");         Otp.focus();         return false;         }     alert(val_otp);     if("Enter currect Otp"==val_otp)         {         alert("Enter currect otp");         Otp.focus();         return false;         }       //---------------------------------------------------end of the code--      -----------------------------------------------------------------------------------                  var otp1 = document.forms[0].otp.value;//retrive the value                      Enter by the user inside the otp field filled by the user            alert("otp from the cookis is "+otp1);             var url = "otpValidation.jsp?val1=" + otp1;             var request;            request.open("GET", url, true);             request.send(null);             alert(request);             if (window.XMLHttpRequest) {             request = new XMLHttpRequest();             } else if (window.ActiveXObject) {               request = new ActiveXObject("Microsoft.XMLHTTP");              }              try {                 request.onreadystatechange = function() {                    alert(request.readyState);                     if (request.readyState == 4) {                      var resp = parseInt(request.responseText);                     alert(resp);                      switch (resp) {                      case 0:                      alert("success");                        document.getElementById('myform').submit();                             break;                       case 1:                          alert("plase Enter currect otp number");                             break;                       default:                         alert("wrong");                          return false;                      }                   }              }               return false;               // always return false initially                  alert("inside the try block");               } catch (e) {                     alert("Unable to connect to server");                }                     } </code></pre>  <p>//-------------------------------------------------------validation() function ends here----------------------------------------------------------</p>  <p>//------------------------------------------------------getInfo() function starting-----------------------------------------------------------------    </p>  <p>//------------------------------------------------------getInfo() function ends here------------------------------------------------------------------</p>  <pre><code>                 &lt;/script&gt;                       &lt;/head&gt;                      &lt;body&gt;              &lt;%@include file="header.jsp" %&gt;                &lt;div class="section"&gt;             &lt;form action="leaveApply.jsp"name='vinform' id='myform'&gt;                   &lt;table style="border-color: white"&gt;                   &lt;tr&gt;                         &lt;th style="border-color: white"&gt;                             &lt;label&gt;Employee Name*&lt;/label&gt;                             &lt;/th&gt;                       &lt;td style="border-color: white"&gt;                          &lt;input type="text" name="empname" id="empname"&gt;                         &lt;/td&gt;                       &lt;/tr&gt;                         &lt;tr&gt;                             &lt;th style="border-color: white"&gt;                                 &lt;label&gt;Employee Email*&lt;/label&gt;                              &lt;/th&gt;                           &lt;td style="border-color: white"&gt;                     &lt;input type="text" name="empemail"       id="empemail"&gt;&lt;button type="button" onclick="sendOtp()" name="sendemail"&gt;Ok&lt;/button&gt;                 &lt;/td&gt;                    &lt;/tr&gt;                    &lt;tr&gt;                       &lt;th style="border-color: white"&gt;                         &lt;label&gt;OTP Number*&lt;/label&gt;                   &lt;/th&gt;                        &lt;td style="border-color: white"&gt;                             &lt;input type="text" name="otp" id="otp"&gt;                        &lt;/td&gt;                     &lt;/tr&gt;                   &lt;/table&gt;                    &lt;input type="submit" value="submit" style="width:  10%;bottom margin: 2px;left margin: 0px" onclick="return validation('&lt;%=application.getAttribute("newotp") %&gt;')"&gt;            &lt;/form&gt;         &lt;span id="amit" style="color: green"&gt;&lt;/span&gt;            &lt;/div&gt;        &lt;/body&gt; </code></pre>  <p></p>  <pre><code>                 database.jsp file                  &lt;%-- &lt;%@page import="org.json.JSONObject"%&gt; --%&gt;                     &lt;%@page import="com.pack1.Otp"%&gt;                    &lt;%@page import="com.sun.mail.iap.Response"%&gt;                   &lt;%@page import="com.pack1.EmpDetail"%&gt;                    &lt;%@page import="java.net.CookieStore"%&gt;                   &lt;%@page import="javax.mail.MessagingException"%&gt;                 &lt;%@page import="javax.mail.Transport"%&gt;                  &lt;%@page import="javax.mail.internet.InternetAddress"%&gt;                   &lt;%@page import="javax.mail.internet.MimeMessage"%&gt;                    &lt;%@page import="javax.mail.Message"%&gt;                     &lt;%@page import="javax.mail.PasswordAuthentication"%&gt;                      &lt;%-- &lt;%@page import="javax.mail.Session"%&gt; --%&gt;                      &lt;%@page import="java.util.Properties"%&gt;                     &lt;%@page import="com.pack1.OTPGeneration"%&gt;                   &lt;%@page import="java.util.List"%&gt;                  &lt;%@page import="com.pack1.LeaveTransaction"%&gt;                  &lt;%@page import="org.hibernate.Criteria"%&gt;                   &lt;%@page import="org.hibernate.cfg.Configuration"%&gt;                 &lt;%@page import="org.hibernate.SessionFactory"%&gt;                 &lt;%@page import="org.hibernate.Session"%&gt;                 &lt;%@page import="com.pack1.SessionFactory_Util"%&gt;                &lt;%@ page language="java" contentType="text/html; charset=ISO-8859-1"            pageEncoding="ISO-8859-1"%&gt;             &lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"          "http://www.w3.org/TR/html4/loose.dtd"&gt;                   &lt;html&gt;                         &lt;head&gt;                           &lt;meta http-equiv="Content-Type"                    content="text/html; charset=ISO-8859-1"&gt;               &lt;title&gt;database.jsp&lt;/title&gt;            &lt;/head&gt;             &lt;body&gt;            &lt;%             String otp;                String empemail;                  boolean flag = true;                  String email = request.getParameter("val1");               session.setAttribute("Email_Id_Enter_By_User",email);              //out.println(email);               SessionFactory sf = SessionFactory_Util.getSessionFactory();     Session s1 = sf.openSession();     Criteria ctr = s1.createCriteria(EmpDetail.class);     List&lt;EmpDetail&gt; list = ctr.list();     for (EmpDetail obj : list) {         empemail = obj.getEmailId();         if (empemail != null &amp;&amp; empemail.length() != 0 &amp;&amp; email != null                 &amp;&amp; email.length() != 0) {             if (empemail.equalsIgnoreCase(email)) {                 flag = false;                 out.println(email + "&lt;br&gt;");                 otp = OTPGeneration.generatePassword();                  System.out.println("new otp is :"+otp);                 session.removeAttribute("OTP");                 session.setAttribute("OTP", otp);       //store the generated otp value inside the session object.                 new Otp().setOtp(otp);                 application.setAttribute("newotp",otp);                 System.out.println(application.getAttribute("newotp"));             /*  System.out.println("get otp is :"+new Otp().getOtp()); */                 System.out.println("otp from the session object :"+session.getAttribute("OTP"));                  Cookie ck=new Cookie("Otp",otp);        //sending the otp value through the cookies                 response.addCookie(ck);               /*  application.setAttribute("otpnumber", otp); */                  out.println("Generated OTP is sent to your mail id  :"                         + email + "  " + otp);//already method implemented inside the OTPGeneration class                  // Recipient's email ID needs to be mentioned.                 String to = email;//change accordingly                  // Sender's email ID needs to be mentioned                 String from = "selectpsingh@gmail.com";//change accordingly                 final String username = "dksingh9006@gmail.com";//change accordingly                 final String password = "urmiladevi";//change accordingly                  // Assuming you are sending email through relay.jangosmtp.net                 String host = "smtp.gmail.com";                  Properties props = new Properties();                 props.put("mail.smtp.auth", "true");                 props.put("mail.smtp.starttls.enable", "true");                 props.put("mail.smtp.host", host);                 props.put("mail.smtp.port", "587");                  // Get the Session object.                 javax.mail.Session session1 = javax.mail.Session                         .getInstance(props,                                 new javax.mail.Authenticator() {                                     protected PasswordAuthentication getPasswordAuthentication() {                                         return new PasswordAuthentication(                                                 username, password);                                     }                                 });                  try {                     // Create a default MimeMessage object.                     Message message = new MimeMessage(session1);                      // Set From: header field of the header.                     message.setFrom(new InternetAddress(from));                      // Set To: header field of the header.                     message.setRecipients(Message.RecipientType.TO,                             InternetAddress.parse(to));                      // Set Subject: header field                     message.setSubject("Generated OTP ");                      // Now set the actual message                     message.setText("sending an OTP [ " + otp                             + " ] email using JavaMailAPI ");                      // Send message                     Transport.send(message);                     System.out.print(otp);                     /* JSONObject json = new JSONObject();                     json.put("otp",otp);                     System.out.print("1");                     System.out.print(json);                        out.print(json);                       out.flush(); */                          System.out.print(otp);                     /*   request.setAttribute("Otp",1);                       RequestDispatcher rd=request.getRequestDispatcher("index.jsp");                      rd.forward(request,response); */                     out.println("&lt;valid&gt;true&lt;/valid&gt;");                     break;                  } catch (MessagingException e) {                     throw new RuntimeException(e);                 }              }         }     }     if (flag) {          /*  request.setAttribute("Otp",1);           RequestDispatcher rd=request.getRequestDispatcher("index.jsp");          rd.forward(request,response); */         out.println("&lt;valid&gt;false&lt;/valid&gt;");         out.println("email id is not matched  &lt;br&gt;NO OTP Generated");     } %&gt; </code></pre>  <p> </p>