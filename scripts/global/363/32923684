<p>I'm working on an image upload form which will validate if the uploaded picture contain nudity with the help of <a href="https://github.com/pa7/nude.js" rel="nofollow">nudejs</a> script.<br> If the image doesn't contain nudity it will be uploaded.<br> The upload and check nudity function are working great, but the problem is that i didn't find a way to link these 2 methods since the return of the check nudity function "onImageClick()" come <code>'undefined'</code> so i can't check if its true or false in order to call the upload function via <code>$.ajax</code>.<br></p>  <p>This is the code:</p>  <pre><code>$(document).ready(function (e) {     $("#uploadimage").on('submit',(function(e) {         e.preventDefault();         //return onImageClick('previewing'); //previewing is the id of the image in my html file         //if(onImageClick('previewing')) return;         var rn = onImageClick('previewing');         console.log("rn: "+rn); //always get undefined          $("#message").empty();         $('#loading').show();          $.ajax({           url: "ajax_php_file.php",           type: "POST",                       data: new FormData(this),           contentType: false,                 cache: false,                       processData:false,                  success: function(data) {              $('#loading').hide();              $("#message").html(data);           }       }); }));  // Function to preview image after validation $(function() {     $("#file").change(function() {         $("#message").empty(); // To remove the previous error message         var file = this.files[0];         var imagefile = file.type;         var match = ["image/jpeg","image/png","image/jpg"];         if(!((imagefile==match[0]) || (imagefile==match[1]) || (imagefile==match[2]))) {            $('#previewing').attr('src','no-preview.png');            $("#message").html("&lt;p id='error'&gt;Please Select A valid Image File&lt;/p&gt;"+"&lt;h4&gt;Note&lt;/h4&gt;"+"&lt;span id='error_message'&gt;Only jpeg, jpg and png Images type allowed&lt;/span&gt;");            return false;         }         else         {             var reader = new FileReader();             reader.onload = imageIsLoaded;             reader.readAsDataURL(this.files[0]);          }      }); });  function imageIsLoaded(e) {     $("#file").css("color","green");     $('#image_preview').css("display", "block");     $('#previewing').attr('src', e.target.result);     $('#previewing').attr('width', '250px');     $('#previewing').attr('height', '230px'); }; //check nudity function function onImageClick(node) {     nude.load(node);     // Scan it     nude.scan(function(result){          console.log(result ? "Nudity found in " + node + "!" : "Not nude");                 console.log("returned value is:",result);                 return result;     }); } }); </code></pre>  <p><strong>EDIT: I edit the code based on @Amir answer where he mention an important point i didn't notice before.</strong> <br> Now i can fire the upload function when there is no nudity, but the image didn't uploaded even the success function in ajax call is fired:<br></p>  <pre><code>    success: function(data)        {     $('#loading').hide();     $("#message").html(data);     } </code></pre>  <p>This is the new code:</p>  <pre><code>$(document).ready(function (e) { $("#uploadimage").on('submit',(function(e) { e.preventDefault(); //call check nudity function onImageClick('previewing'); //check nudity function function onImageClick(node) {     nude.load(node);     // Scan it     nude.scan(function(result){          console.log(result ? "Nudity found in " + node + "!" : "Not nude");                 console.log("returned value is:",result);                 if(result){                     alert("conatain nudity!!");                 }       else{             $("#message").empty();             $('#loading').show();                 $.ajax({             url: "ajax_php_file.php",              type: "POST",                          data: new FormData(this),              contentType: false,                    cache: false,                          processData:false,                     success: function(data)                {             $('#loading').hide();             $("#message").html(data);             }                 });               }     }); };  }));  // Function to preview image after validation $(function() { $("#file").change(function() { $("#message").empty(); // To remove the previous error message var file = this.files[0]; var imagefile = file.type; var match= ["image/jpeg","image/png","image/jpg"]; if(!((imagefile==match[0]) || (imagefile==match[1]) || (imagefile==match[2]))) { $('#previewing').attr('src','no-preview.png'); $("#message").html("&lt;p id='error'&gt;Please Select A valid Image File&lt;/p&gt;"+"&lt;h4&gt;Note&lt;/h4&gt;"+"&lt;span id='error_message'&gt;Only jpeg, jpg and png Images type allowed&lt;/span&gt;"); return false; } else { var reader = new FileReader(); reader.onload = imageIsLoaded; reader.readAsDataURL(this.files[0]); } }); }); function imageIsLoaded(e) { $("#file").css("color","green"); $('#image_preview').css("display", "block"); $('#previewing').attr('src', e.target.result); $('#previewing').attr('width', '250px'); $('#previewing').attr('height', '230px'); };  }); </code></pre>