<p>I'm trying to play a sound in an android widget on a button click, this is my current code:</p>  <pre><code>@Override public void onReceive(Context context, Intent intent) {     Boolean hasToPlayMedia = false;     MediaPlayer mediaPlayer = new MediaPlayer();     if (intent.getAction().equals("somevalue")) {         mediaPlayer = MediaPlayer.create(context, R.raw.somevalue);         hasToPlayMedia = true;     // OTher conditionals here     }     if (hasToPlayMedia) {         mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);         mediaPlayer.start();         mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {             @Override             public void onCompletion(MediaPlayer mp) {                 mp.stop();                 mp.reset();                 mp.release();                 mp = null;             }         });     }     super.onReceive(context, intent); } </code></pre>  <p>However, in the console I read:</p>  <pre><code>E/MediaPlayer﹕ Should have subtitle controller already set W/MediaPlayer-JNI﹕ MediaPlayer finalized without being released </code></pre>  <p>and sometimes after a while clicking the button doesn't play the sound.</p>