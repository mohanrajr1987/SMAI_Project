<p>Am designing a database for bus reservation System and I cannot figure out how to Limit seats in some scenarios.  Suppose I have Bus Stops A-B-C-D-E which forms a route from A to E through C and D. The bus is having 10 seats. Now if 10 seats are booked from A-B the and another 10 for D-E, system should allow booking for B-C, B-D and C-D.I can't figure out how to make a design that will cater for all scenarios to avoid booking the route that is already full.</p>  <p>I plan to use PHP for development with MySQL. Here is the relevant part of database design (database itself is too big and I tried to make a simple demo)</p>  <p><a href="http://i.stack.imgur.com/38X2t.png" rel="nofollow"><img src="http://i.stack.imgur.com/38X2t.png" alt="Database"></a></p>