<p>We have 10 million users who can interact with 1.5 million products. </p>  <p>In dynamodb (NoSQL database), we have user friendship stored like this:</p>  <p>Friends Table</p>  <pre><code>user_id    |    friends 1          |    [2, 3, 4] 2          |    [1,5] 3          |    [1, 4] 4          |    [1, 3, 5] 5          |    [2, 4] </code></pre>  <p>In Amazon RDS (SQL database), we have the interactions:</p>  <p>Interactions Table</p>  <pre><code>row  |   user_id   |   product_id 1    |      1      |      1 2    |      1      |      2 3    |      3      |      3 4    |      4      |      3 </code></pre>  <p>By now, when users visit a product page, they can see their friends who have interacted with that product. This is easily calculated!</p>  <p>But what if we wanted to show their friends of friends too?</p>  <p>What is the best way to model the database to achieve this goal? We can completely change the database structure, do some data preprocessing, etc.</p>  <p>Thanks in advance.</p>