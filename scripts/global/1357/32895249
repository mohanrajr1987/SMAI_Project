<p>I'd like to parse this XML file:</p>  <pre><code>&lt;?xml version="1.0"?&gt; &lt;Gist xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../schema/Gist.xsd"&gt;     &lt;Name&gt;AboveOrEqualToThreshold&lt;/Name&gt;     &lt;Version&gt;1&lt;/Version&gt;     &lt;Tags&gt;         &lt;Tag&gt;Comparison&lt;/Tag&gt;     &lt;/Tags&gt;     &lt;Description&gt;Determines if a value is at or over a threshold or not.&lt;/Description&gt;     &lt;Configuration /&gt;     &lt;OutputType&gt;         &lt;ScalarType&gt;Boolean&lt;/ScalarType&gt;     &lt;/OutputType&gt;     &lt;PertinentData&gt;         &lt;Item&gt;             &lt;Name&gt;ValueMinusThreshold&lt;/Name&gt;         &lt;/Item&gt;         &lt;Item&gt;             &lt;Name&gt;ThresholdMinusValue&lt;/Name&gt;         &lt;/Item&gt;     &lt;/PertinentData&gt;     &lt;Scenarios&gt;         &lt;Scenario&gt;             &lt;ID&gt;THRESHOLD_DOES_NOT_APPLY&lt;/ID&gt;             &lt;Description&gt;The threshold does not apply.&lt;/Description&gt;         &lt;/Scenario&gt;         &lt;Scenario&gt;             &lt;ID&gt;ABOVE_THRESHOLD&lt;/ID&gt;             &lt;Description&gt;The value is above the threshold.&lt;/Description&gt;         &lt;/Scenario&gt;         &lt;Scenario&gt;             &lt;ID&gt;EQUAL_TO_THRESHOLD&lt;/ID&gt;             &lt;Description&gt;The value is equal to the threshold.&lt;/Description&gt;         &lt;/Scenario&gt;         &lt;Scenario&gt;             &lt;ID&gt;NOT_ABOVE_THRESHOLD&lt;/ID&gt;             &lt;Description&gt;The value is not above the threshold.&lt;/Description&gt;         &lt;/Scenario&gt;     &lt;/Scenarios&gt; &lt;/Gist&gt; </code></pre>  <p>To get me that value at this XPATH /Gist/Name, so for this file it would be a String: </p>  <ul> <li>AboveOrEqualToThreshold</li> </ul>  <p>and the scenarios for this file at this XPATH Gist/Scenarios/Scenario/ID/*, so for this file it would be a list of Strings:</p>  <ul> <li><p>THRESHOLD_DOES_NOT_APPLY</p></li> <li><p>ABOVE_THRESHOLD</p></li> <li><p>EQUAL_TO_THRESHOLD</p></li> <li><p>NOT_ABOVE_THRESHOLD</p></li> </ul>  <p>So the data structure for this would be:</p>  <pre><code>Map&lt;String,List&lt;String&gt;&gt; </code></pre>  <p>How can I accomplish this in Java, this seems pretty straight forward but I am unsuccess in my attempts to get this.</p>  <p>Any help or assistance would be much appreciated. </p>  <p>My implementation attempt:</p>  <pre><code>static Map&lt;Node, Node&gt; parseScenarioByGist(String filename) throws IOException, XPathException {      XPath xpath = XPathFactory.newInstance().newXPath();     Map&lt;Node, Node&gt; scenarioByGist = new LinkedHashMap&lt;Node, Node&gt;();      try (InputStream file = new BufferedInputStream(Files.newInputStream(Paths.get(filename)))) {          NodeList nodes = (NodeList) xpath.evaluate("//Gist", new InputSource(file), XPathConstants.NODESET);         int nodeCount = nodes.getLength();          for (int i = 0; i &lt; nodeCount; i++) {             Node node = nodes.item(i);               Node gist = (Node) xpath.evaluate("Gist/Name", node, XPathConstants.NODE);//String node.getAttributes().getNamedItem("name").getNodeValue();             Node scenario = (Node) xpath.evaluate("Gist/Scenarios/Scenario/ID/*", node, XPathConstants.NODE);              scenarioByGist.put(gist, scenario);         }     }      return scenarioByGist; } </code></pre>