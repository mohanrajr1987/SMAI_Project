<p>I am running a headless emulator like this (for a travis CI build):</p>  <pre><code>$ emulator -avd test -no-skin -no-audio -no-window  </code></pre>  <p>I can list devices:</p>  <pre><code>$ adb devices -l List of devices attached  emulator-5554          device product:sdk model:sdk device:generic </code></pre>  <p>However, when I try to list packages, I get the following error:  </p>  <pre><code>$ adb shell pm list packages Error: Could not access the Package Manager.  Is the system running? </code></pre>  <p>I can however run other shell commands, for example:</p>  <pre><code>$ adb shell netstat -nalt Proto Recv-Q Send-Q Local Address          Foreign Address        State   tcp       0      0 127.0.0.1:5037         0.0.0.0:*              LISTEN   tcp       0      0 0.0.0.0:5555           0.0.0.0:*              LISTEN   tcp       0      0 10.0.2.15:5555         10.0.2.2:48563         ESTABLISHED </code></pre>  <p><strong>Question:</strong> Why is <code>adb shell pm list packages</code> not working?</p>