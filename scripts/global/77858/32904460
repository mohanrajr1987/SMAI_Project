<p>Inspired by the <a href="http://jacobsalmela.com/block-millions-ads-network-wide-with-a-raspberry-pi-hole-2-0/" rel="nofollow">Pi-hole</a> I set up my own one.</p>  <p>What it does:</p>  <ol> <li>The Pi-hole is configured as a dedicated IP in my local net on a virtual adapter of Raspberry Pi.</li> <li>Get list of known spam / phishing / ad server names.</li> <li>Use dnsmasq as a local DNS to resolve these server names to a local IP (aka the Pi-hole)</li> <li>On the Pi-hole lighttpd serves empty html pages and pixel images instead of the phishing sites or ads</li> <li>All browsers in my net on desktops / smartphones / tablets alike get rid of a unwanted content</li> </ol>  <p>This approach has the benefit that it does not impact things like VirtualHosts on the same (original) target IP. It just blocks the hosts by name. The disadvantage is that it works only at home...</p>  <p>This setup works fine for 99% of the roughly 1,6 million sites but some sites use https or different ports such <code>8080</code> to server their content. As the empty content is just served on port <code>80</code> theses sites take forever until eg. Firefox gives up.</p>  <p>To make it work for all and all the time I would like to stop serving content to the requesting devices and get rid of lighttpd and add some simple iptables rules so that the connection to the Pi-hole fails fast.</p>  <p>How can I tell the requesting party to give up fast?</p>  <p>Any suggestions for a good approach?</p>