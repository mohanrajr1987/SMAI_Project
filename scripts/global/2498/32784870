<pre><code>################## SIMPLIFIED VERSION  ################## </code></pre>  <p>What I need:</p>  <pre><code>$('body').appendOrReplace('&lt;div id="foo"&gt;&lt;/div&gt;') </code></pre>  <p>The first time, the result is :</p>  <pre><code>&lt;body&gt;&lt;div id="foo"&gt;&lt;/div&gt;&lt;/body&gt; </code></pre>  <p>Now, if I re-run the same code, the result should not change!</p>  <p>If there is any child in the DOM to append like <code>$('body').appendOrReplace('&lt;div id="foo"&gt;&lt;p id="bar"&gt;&lt;/p&gt;&lt;/div&gt;')</code>, appendOrReplace must just take the id of first element.</p>  <p>The problem is : the argument is a string (not a dom), so I can't get easily the id, to test if already exist.</p>  <pre><code>################## MY USE CASE (EDIT)  ################## </code></pre>  <p>I use template JST (with Rails), so I have this code :</p>  <pre><code>$('#page').append(app.JST('path/to/template')); </code></pre>  <p>JST template can return a full page of html (a very long string of future HTML).</p>  <p>I need to ensure unicity of template. Each template begin by an element with an unique ID.</p>  <p>So I need a method jquery to append this full DOM if and only if the element not exist, or replace if already exist.</p>