<p>I am selecting from sql three values, hostname, place, message, assigning them to hashref and then in loop printing into file. Before I print it I have to clean the message as it contains in DB plenty of mess like html tags etc</p>  <pre><code>while (my $result = $sth_get_message-&gt;fetchrow_hashref) {     my $message = $result-&gt;{MESSAGE};     $message =~ s/&lt;[^&gt;]*&gt;//g;     $message =~ s/\n/ /g;     $message =~ s/&amp;nbsp;|&amp;quot;/ /g;     $message =~ s/\r//g;      my $message_out;     if (index($message, 'removed') != -1) {$message_out = $message;} else {$message_out= "";}      my $pc = $result-&gt;{PC};     my $place = $result-&gt;{PLACE};     print OUT "$pc|$message_out|$place\n"; </code></pre>  <p>}</p>  <p>the result is like this</p>  <pre><code>pc1||place pc2|message with word removed|place pc3||place pc3|message with word removed|place pc4||place pc4||place pc4|message with word removed|place </code></pre>  <p>some of them have more messages, but only one is relevant, so rest is cleaned but I have duplicates of pc's. What I want to get is to have unique pc list and if it has no message ok, show blank, if it has message with removed, show only this line</p>  <pre><code>pc1||place pc2|message with word removed|place pc3|message with word removed|place pc4|message with word removed|place </code></pre>  <p>as far as I understood perl hashes this should be possible if I put pc as a key and then work with values but I have no clue how</p>  <p>thanks for help</p>