<p>I wrote a perl script to match specific words in one file and find the lines contains them in a second file. But it doesn't match all relevant in first file and also not picking all of them in second file either. I think there must be some thing wrong in my code. Can you explain, please. Thanks.</p>  <pre><code>open my $file2, '&lt;', $f2; while (my $line_comp = &lt;$file2&gt;) { chomp $line_comp; $line_comp =~ m/(.*)(-from)(\s+)(\S*)(.*)(-scheme)(\s+)(\S*)(.*)(-to)(\s+)(\S*)(.*)/; my $fr = $4; my $sc = $8; my $t =  $12;  if (defined $fr &amp;&amp; defined $t){ open my $file3, '+&lt;', $f3; open my $file4, '+&gt;', $f4;  while (my $line_write = &lt;$file3&gt;) { if ($line_write =~ m/(.*)(-)(\s*)scheme(\s+)($sc)(.*?)(-)(\s*)from(\s+)($fr)(.*?)(-to)(\s+)($t)(.*?)/sm){ print "$line_write\n"; } else { print $file4 "$line_write";}                 } copy ("$f4", "$f3") or die "copy failed: $!"; </code></pre>