<p>i need to remove strings from a text file using command line on OSX.</p>  <p>the string will have some permanent features but have arbitrary digits.</p>  <p>i want to remove every variant of :-</p>  <pre><code>            [370.15 Kkey/s][total 2999999][Prob 0.0%][50% in 7.8h]     </code></pre>  <p>This string has varying values but i want to remove it leaving only the relevant information in the sections labled:-</p>  <pre><code> PAttern1 :  Code :  CodeHash :  Result : </code></pre>  <p>the following MOCK procedure needs to happen</p>  <pre><code> for each line{ if string contains [%d%d%d.%d%d Kkey/s][total %d%d%d%d%d%d%d][Prob %d.%d%][%d%d% in %d.%dh]  (where "%d" is decimal value){  delete string and line  } else if !contains {   move down 1 line. } { </code></pre>  <p>with the below text only the patterns and hashes should be saved to the text document</p>  <pre><code>            [370.15 Kkey/s][total 2999999][Prob 0.0%][50% in 7.8h]             [370.02 Kkey/s][total 3000368][Prob 0.0%][50% in 7.8h]             [323.02 Kkey/s][total 3001368][Prob 0.0%][50% in 7.8h]             [389.02 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [379.06 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [300.01 Kkey/s][total 3004368][Prob 0.0%][50% in 7.8h]             [379.02 Kkey/s][total 3005368][Prob 0.0%][50% in 7.8h]             [279.02 Kkey/s][total 3006368][Prob 0.0%][50% in 7.8h]             [179.02 Kkey/s][total 3007898][Prob 0.0%][50% in 7.8h]                PAttern1: i want to keep all the text after pattern and all the code until the next line of processing including hash             Code : aksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsd              CodeHash : e3287cb701f336a628885e66d17e38f2              Result : D0B6789D4E0ACF39A8C24B424C0060FFFF2DA857                [370.15 Kkey/s][total 2999999][Prob 0.0%][50% in 7.8h]             [370.02 Kkey/s][total 3000368][Prob 0.0%][50% in 7.8h]             [323.02 Kkey/s][total 3001368][Prob 0.0%][50% in 7.8h]             [389.02 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [379.06 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [300.01 Kkey/s][total 3004368][Prob 0.0%][50% in 7.8h]             [379.02 Kkey/s][total 3005368][Prob 0.0%][50% in 7.8h]             [279.02 Kkey/s][total 3006368][Prob 0.0%][50% in 7.8h]             [179.02 Kkey/s][total 3007898][Prob 0.0%][50% in 7.8h]             [370.15 Kkey/s][total 2999999][Prob 0.0%][50% in 7.8h]             [370.02 Kkey/s][total 3000368][Prob 0.0%][50% in 7.8h]             [323.02 Kkey/s][total 3001368][Prob 0.0%][50% in 7.8h]             [389.02 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [379.06 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [300.01 Kkey/s][total 3004368][Prob 0.0%][50% in 7.8h]             [379.02 Kkey/s][total 3005368][Prob 0.0%][50% in 7.8h]             [279.02 Kkey/s][total 3006368][Prob 0.0%][50% in 7.8h]             [179.02 Kkey/s][total 3007898][Prob 0.0%][50% in 7.8h]             [370.15 Kkey/s][total 2999999][Prob 0.0%][50% in 7.8h]             [370.02 Kkey/s][total 3000368][Prob 0.0%][50% in 7.8h]             [323.02 Kkey/s][total 3001368][Prob 0.0%][50% in 7.8h]             [389.02 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [379.06 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [300.01 Kkey/s][total 3004368][Prob 0.0%][50% in 7.8h]             [379.02 Kkey/s][total 3005368][Prob 0.0%][50% in 7.8h]             [279.02 Kkey/s][total 3006368][Prob 0.0%][50% in 7.8h]             [179.02 Kkey/s][total 3007898][Prob 0.0%][50% in 7.8h]             [370.15 Kkey/s][total 2999999][Prob 0.0%][50% in 7.8h]             [370.02 Kkey/s][total 3000368][Prob 0.0%][50% in 7.8h]             [323.02 Kkey/s][total 3001368][Prob 0.0%][50% in 7.8h]             [389.02 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [379.06 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [300.01 Kkey/s][total 3004368][Prob 0.0%][50% in 7.8h]             [379.02 Kkey/s][total 3005368][Prob 0.0%][50% in 7.8h]             [279.02 Kkey/s][total 3006368][Prob 0.0%][50% in 7.8h]             [179.02 Kkey/s][total 3007898][Prob 0.0%][50% in 7.8h]              PAttern2: i want to keep all the text after pattern and all the code until the next line of processing including hash             Code : qwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrq              CodeHash : 05bfabd43ff6c85a8fa2d3347d828c4b              Result : 165B6CA902E567959C9BB599FABEB3998B21E31F               [370.15 Kkey/s][total 2999999][Prob 0.0%][50% in 7.8h]             [370.02 Kkey/s][total 3000368][Prob 0.0%][50% in 7.8h]             [323.02 Kkey/s][total 3001368][Prob 0.0%][50% in 7.8h]             [389.02 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [379.06 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [300.01 Kkey/s][total 3004368][Prob 0.0%][50% in 7.8h]             [379.02 Kkey/s][total 3005368][Prob 0.0%][50% in 7.8h]             [279.02 Kkey/s][total 3006368][Prob 0.0%][50% in 7.8h]             [179.02 Kkey/s][total 3007898][Prob 0.0%][50% in 7.8h]             [370.15 Kkey/s][total 2999999][Prob 0.0%][50% in 7.8h]             [370.02 Kkey/s][total 3000368][Prob 0.0%][50% in 7.8h]             [323.02 Kkey/s][total 3001368][Prob 0.0%][50% in 7.8h]             [389.02 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [379.06 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [300.01 Kkey/s][total 3004368][Prob 0.0%][50% in 7.8h]             [379.02 Kkey/s][total 3005368][Prob 0.0%][50% in 7.8h]             [279.02 Kkey/s][total 3006368][Prob 0.0%][50% in 7.8h]             [179.02 Kkey/s][total 3007898][Prob 0.0%][50% in 7.8h]             [370.15 Kkey/s][total 2999999][Prob 0.0%][50% in 7.8h]             [370.02 Kkey/s][total 3000368][Prob 0.0%][50% in 7.8h]             [323.02 Kkey/s][total 3001368][Prob 0.0%][50% in 7.8h]             [389.02 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [379.06 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [300.01 Kkey/s][total 3004368][Prob 0.0%][50% in 7.8h]             [379.02 Kkey/s][total 3005368][Prob 0.0%][50% in 7.8h]             [279.02 Kkey/s][total 3006368][Prob 0.0%][50% in 7.8h]             [179.02 Kkey/s][total 3007898][Prob 0.0%][50% in 7.8h]             [370.15 Kkey/s][total 2999999][Prob 0.0%][50% in 7.8h]             [370.02 Kkey/s][total 3000368][Prob 0.0%][50% in 7.8h]             [323.02 Kkey/s][total 3001368][Prob 0.0%][50% in 7.8h]             [389.02 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [379.06 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [300.01 Kkey/s][total 3004368][Prob 0.0%][50% in 7.8h]             [379.02 Kkey/s][total 3005368][Prob 0.0%][50% in 7.8h]             [279.02 Kkey/s][total 3006368][Prob 0.0%][50% in 7.8h]             [179.02 Kkey/s][total 3007898][Prob 0.0%][50% in 7.8h]             [370.15 Kkey/s][total 2999999][Prob 0.0%][50% in 7.8h]             [370.02 Kkey/s][total 3000368][Prob 0.0%][50% in 7.8h]             [323.02 Kkey/s][total 3001368][Prob 0.0%][50% in 7.8h]             [389.02 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [379.06 Kkey/s][total 3003368][Prob 0.0%][50% in 7.8h]             [300.01 Kkey/s][total 3004368][Prob 0.0%][50% in 7.8h]             [379.02 Kkey/s][total 3005368][Prob 0.0%][50% in 7.8h]             [279.02 Kkey/s][total 3006368][Prob 0.0%][50% in 7.8h]             [179.02 Kkey/s][total 3007898][Prob 0.0%][50% in 7.8h] </code></pre>  <p>leaving the resulting text document to look like this:-</p>  <pre><code>            PAttern1 : i want to keep all the text after pattern and all the code until the next line of processing including hash             Code : aksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsdaksjhdakjsdhakshdkasdhkashkjahsd             CodeHash : e3287cb701f336a628885e66d17e38f2             Result : D0B6789D4E0ACF39A8C24B424C0060FFFF2DA857             PAttern2 : i want to keep all the text after pattern and all the code until the next line of processing including hash             Code : qwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrqgfqwfufiyfoqywfofqwytrq             CodeHash: 05bfabd43ff6c85a8fa2d3347d828c4b             Result : 165B6CA902E567959C9BB599FABEB3998B21E31F </code></pre>  <p>i have used sed to remove single characters like so:-</p>  <pre><code> sed -i '' 's/%/\ /g' file.txt   sed -i '' 's/\[/\ /g' file.txt  sed -i '' 's/]/\ /g' file.txt  sed -i '' 's/Kkey\/s/\ /g' file.txt </code></pre>  <p>while this works for the symbols i cant guess the numbers or sed out numbers incase they are within the the important strings and sed replaces it!</p>  <p>with the above routine in mind how would you approach this??</p>  <p>many thanks in advance for any help you can offer</p>