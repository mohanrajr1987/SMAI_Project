<p>I'm trying to count the number of instances of a value in a column and return it in another column. I've successfully done the calculation with a hard coded value but can't figure out how to get a variable from the main SELECT into the COUNT.</p>  <p>In the sample data at the bottom, CommissionRate shows the number of times the DealInstanceOID value in that row shows up in the DealInstanceOID column. My hard coded solution works for all of these values, but getting this to happen dynamically is mystifying me. The DealInstanceOID variable is out of the scope of the nested SELECT and I'm unsure of how to work around that.</p>  <p>I posted this question earlier and had some complaints about how my tables are joined - wasn't able to get any more feedback from those posters and I am reposting as they suggested.</p>  <pre><code>SELECT D.DealOID DD.DealInstanceOID , CommissionRate = (SELECT (DealInstanceOID COUNT(*) FROM dbo.DealDetail WHERE DealInstanceOID = 4530)) , Commission = CONVERT(MONEY,C.Commission,1)  FROM dbo.Book AS B WITH(NOLOCK) INNER JOIN Contract as C WITH(NOLOCK) ON B.BookOID = C.BookOID INNER JOIN Deal as D WITH(NOLOCK)ON C.ContractOID = D.ContractOID INNER JOIN DealInstance DI WITH(NOLOCK) ON DI.DealOID = D.DealOID INNER JOIN DealDetail AS DD WITH(NOLOCK)ON DD.DealInstanceOID = DI.DealInstanceOID  GROUP BY DD.DealInstanceOID , D.DealOID  , C.Commission , B.BookOID  ORDER BY DealOID ASC   DealOID |Commission |CommissionRate|Commission/Rate|DealInstanceOID 101     |  $1000    |       5      |     $200.00   |     4530 101     |  $1000    |       5      |     $200.00   |     4530 101     |  $1000    |       5      |     $200.00   |     4530 101     |  $1000    |       5      |     $200.00   |     4530 101     |  $1000    |       5      |     $200.00   |     4530 101     |  $5000    |       6      |     $833.33   |     4531 102     |  $5000    |       6      |     $833.33   |     4531 102     |  $5000    |       6      |     $833.33   |     4531 102     |  $5000    |       6      |     $833.33   |     4531 102     |  $5000    |       6      |     $833.33   |     4531 102     |  $5000    |       6      |     $833.33   |     4531 103     |  $6000    |       3      |     $2,000.00 |     4540 103     |  $6000    |       3      |     $2,000.00 |     4540 103     |  $6000    |       3      |     $2,000.00 |     4540 </code></pre>