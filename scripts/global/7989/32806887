<p>I have to modify a mySql custom query inside a Wordpress site. I will try to explain you my issue, simplifing the query to that is really needed to know.  </p>  <p>The table <em>cms_posts</em> (alias 'p') is INNER JOINED to the  <em>cms_term_relationship</em> table (alias 'term_rel').<br> I neet to find all <em>cms_posts</em> with a <em>term_rel.term_taxonomy</em> value included IN 211,210,10,9.<br> My current query is:</p>  <pre><code>SELECT SQL_CALC_FOUND_ROWS      p.id FROM cms_posts p      INNER JOIN cms_term_relationships term_rel          ON term_rel.object_id = p.id  WHERE     term_rel.term_taxonomy_id IN (211,210,10,9) GROUP BY p.id HAVING       COUNT(DISTINCT term_rel.term_taxonomy_id) = 4 LIMIT 0, 50 </code></pre>  <p>The <strong>COUNT(DISTINCT</strong> ensures that all the relationships i ask in the WHERE clause are striclty followed.  </p>  <p>It all works flawless.</p>  <p>But i need to modify the query!<br> I need to split the WHERE clause. I try to make an example.</p>  <p>I need to take all posts with term_taxonomy in 211 <strong>AND</strong> 210 but also in 10 <strong>OR</strong> 9.<br> I search for all these combinations of posts:<br> 211, 210, 10<br> 211, 210, 9<br> So i need that 211 and 210 <strong>are both needed</strong>, but only 1 occurrence of 10 <strong>OR</strong> 9 are needed too.  </p>  <p>Verbosely, i need that my posts are in X, Y, Z categories and at least in A, B or C categories. X, Y, Z categories are exlusive; A, B, C are inclusive.</p>  <p>The question is not so easy to be explained, and my horrible english don't help.<br> I hope that someone understand my english and even my issue :D</p>