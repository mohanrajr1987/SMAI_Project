<p>I need to get the value of a parameter in a javascript code and pass it on to a rails partial view but it won't let me do that. Here is what I have:</p>  <pre><code>&lt;div id="myCarousel" data-carousel-3d&gt;   &lt;% @users.each do |user| %&gt;     &lt;input type="image" src="/assets/&lt;%= user.location %&gt;"  data-toggle="modal" data-target="#modal-1" /&gt;                      &lt;% end %&gt;                                      &lt;/div&gt; &lt;script&gt;   $('#myCarousel').on('select', function (evt, index) {     var myHtml = "&lt;\%= escape_javascript (\"#{render :partial =&gt; 'share', :locals =&gt; { :user_location =&gt; ";                     myHtml = myHtml.concat(index);                     myHtml = myHtml.concat(".jpg }}");     $("#modal-test").append("&lt;%= escape_javascript(  myHtml  ).html_safe %&gt;");                     }); &lt;/script&gt; </code></pre>  <p>This code will give me and error message: </p>  <blockquote>   <p>undefined local variable or method `myHtml' for #&lt; :0x007fe1d472cd70></p> </blockquote>  <p>I tried to concat the whole string into myHtml and do an append(myHtml) but this way it will not render the erb code in the page. It shows as a string.</p>  <p>We have a carousel displaying images and the ultimate goal is when the user clicks on one of the images, we show a modal window with the image they clicked in there.</p>  <p>Any ideas?</p>