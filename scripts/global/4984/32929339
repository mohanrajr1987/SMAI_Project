<p>I want to create <code>Buyer</code> and <code>Seller</code> model that can be authenticated by <code>devise</code>.</p>  <h3>app/models/buyer.rb</h3>  <pre><code>class Buyer &lt; ActiveRecord::Base   has_one :user, as: :authable   accepts_nested_attributes_for :user end </code></pre>  <h3>app/controllers/buyers_controller.rb</h3>  <pre><code>class BuyersController &lt; ApplicationController   def new     @buyer = Buyer.new     @buyer.build_user   end   def create     @buyer = Buyer.new(buyer_params)     respond_to do |format|       if @buyer.save         format.html { redirect_to @buyer, notice: 'Buyer was successfully created.' }         format.json { render :show, status: :created, location: @buyer }       else         format.html { render :new }         format.json { render json: @buyer.errors, status: :unprocessable_entity }       end     end   end    def buyer_params       params.require(:buyer).permit(user_attributes: [:email, :password, :password_confirmation])     end end </code></pre>  <h3>app/views/buyers/new.html.erb</h3>  <pre><code>&lt;%= form_for(@buyer) do |f| %&gt;     &lt;%= f.fields_for @buyer.user do |user| %&gt;         &lt;%= user.email_field :email %&gt;     &lt;% end %&gt;     &lt;div class="actions"&gt;       &lt;%= f.submit %&gt;     &lt;/div&gt; &lt;% end %&gt; </code></pre>  <p>With these codes I can create a <code>Buyer</code> but the buyer doesn't have a user.</p>  <p>It seems I'm writing wrong way in <code>permit</code></p>  <pre><code>&gt;&gt; params =&gt; {"utf8"=&gt;"âœ“", "authenticity_token"=&gt;"xxx", "buyer"=&gt;{"user"=&gt;{"email"=&gt;"bar@example.com"}}, "commit"=&gt;"Create Buyer", "controller"=&gt;"buyers", "action"=&gt;"create"} &gt;&gt;  buyer_params =&gt; {} </code></pre>  <p>If I change <code>user_attributes</code> to <code>user</code>, I can get <code>email</code> parameter, but then I get a error: <code>User(#70323929049400) expected, got ActionController::Parameters(#70323888554040)</code>.</p>  <p>How can I fix this error?</p>