<p>I have a serialized field that I want to use in functional tests in Rails 4.</p>  <p>Fixtures are saving the hash as a string.</p>  <pre><code>Step.rb serialize :custom, ActiveRecord::Coders::NestedHstore  steps.yml one:   name: Simple example.   custom:     name:       prompt: What is your name? </code></pre>  <p>In <code>step.custom</code>, I want the hash <code>{name: {prompt: "What is your name?"}</code>. In testing, instead, I get a string along with the error:</p>  <pre><code>undefined method `keys' for "{\"prompt\"=&gt;\"What is your name?\"}":String </code></pre>  <p>This is causing my tests to fail of course, because my codebase is expecting a Hash. I tried <code>&lt;%= hash.to_yaml.inspect %&gt;</code> but that doesn't seem to work.</p>