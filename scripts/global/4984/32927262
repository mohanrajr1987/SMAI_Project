<p>I would like to create a model that looks like this:</p>  <pre><code># Table name: cities #  #  country_code :text #  created_at   :datetime         not null #  id           :integer          not null, primary key #  name         :string #  updated_at   :datetime         not null #  class City &lt; ActiveRecord::Base   validates :name, presence: true, uniqueness: {:scope =&gt; :country_code,      message: "A name and country already exists for this entry" }  end </code></pre>  <p>How can I create a <a href="http://guides.rubyonrails.org/active_record_migrations.html#creating-a-standalone-migration" rel="nofollow">standalone migration</a> to create this model?</p>  <p>I am able to make the <code>:name</code> across the whole table:</p>  <pre><code>rails g migration CreateCitites name:string:uniq country_code:text timezone:text </code></pre>  <p>I'm having issues with creating the <code>:name</code> uniqueness relative to a <code>:country_code</code>.</p>  <hr>  <p>Example:</p>  <blockquote>   <p>name: Sydney, country_code: Australia</p>      <p>name: Sydney, country_code: Germany</p> </blockquote>  <p>Should be allowed</p>  <blockquote>   <p>name: Sydney, country_code: Australia</p>      <p>name: Sydney, country_code: Australia</p> </blockquote>  <p>Should not be allowed</p>