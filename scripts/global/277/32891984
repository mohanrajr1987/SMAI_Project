<p>I would like to implement certain rules into relationship between my turtles and my patches. My Patches variables are: </p>  <ul> <li>n_min - if there is enough turtles, change pcolor to pink, change yellow turtles on patch to red </li> <li>n_max - if there is too many turtles, set pcolor to brown, let all turtles to avoid this patch </li> </ul>  <p>My turtles states are: yellow (move) -> red (stay) -> blue (infest) Patches states are:  green (n_min&lt; then number of yellow turtles on the patch) pink (number of red turtles is > n_min and &lt; n_max) brown (no turtles)</p>  <p>My problem <strong>is how can I avoid to have more then n_max turtles on one patch if they are all moving at the same time and thus are targeted to same patch?</strong> How can I include the condition that "if you see that there are some turtles of color red, just keep moving to find another patch? " Also, if my patch is already pink, and n_min != n_max to ask turtles to directly change its color to red?  </p>  <p>Thank you a lot !</p>  <p>my not working example:</p>  <pre><code>patches-own [   nmax   ; maximum nuber of turtles per patch, and change color   nmin   ; minimum number of turtles to change patch color   n.yellow  ; how many yellow beetles are one 1 patch? ]  to setup   clear-all   reset-ticks   setup-patches   setup-turtles end  to setup-patches   ask n-of n_patches patches [     set pcolor green     set nmin n_min      set nmax n_max   ] end  to setup-turtles   crt n_turtles [     set color yellow   ] end  to go   tick   ask turtles [     move-turtles   ]   ask patches [     infest.patch     ; set n.yellow count turtles-here with [color = yellow]   ] end  to move-turtles   if color = yellow ;and n.yellow &lt; nmin    [      move-to one-of patches with [pcolor = green] in-radius 30   ] end  to infest.patch   set n.yellow count turtles with [color = yellow]   if [n.yellow] of patch-here &gt;= [n_min] of patch-here [     set pcolor pink      ask n-of nmin turtles-here with [color = yellow] [       set color red     ]    ] end </code></pre>