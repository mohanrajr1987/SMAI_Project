<p>I got hit earlier this week with my first BadImageFormatException when trying to use the p4api.net.dll. Turns out my assumption that I could just use the 64-bit version of it and p4bridge.dll was incorrect!</p>  <p>In my investigation I noticed I had a warning:</p>  <p><code>warning MSB3270: There was a mismatch between the processor architecture of the project being built "MSIL" and the processor architecture of the reference "p4api.net, Version=2014.3.100.9144, Culture=neutral, PublicKeyToken=f6b9b9d036c873e1, processorArchitecture=AMD64", "AMD64"</code></p>  <p>I have learned that this means that the .dll I used is specified to use 64-bit, rather than being built with Any-CPU.</p>  <p>While we could change the project to be specifically x64, I have been asked to investigate if it's still possible to keep it as platform agnostic as possible.  I am still new to both p4api.net <em>and</em> having to deal with this sort of dependency, but my understanding is that if I can build p4api.net.dll as 'Any CPU' the warning would go away, and I would just need to do some magic to make sure the correct p4bridge.dll was used depending on the CurrentPlatform I defined in the project.</p>  <p>I downloaded and compiled the p4api.net source and tried specifying any CPU, but it didn't work. Now it says that the architecture is set for x86 and I still get a similar MSB3270 error - now for x86.  I don't get a warning like this with the p4api.net solution, however, so it doesn't <em>appear</em> to have any platform dependencies that I am aware of.  But if I use <code>CorFlags.exe</code> on p4api.net.dll it is definitely giving PE/32BIT flags that are platform specific.</p>  <p>So to my questions:</p>  <ul> <li>Does anyone know offhand if it's even possible to build p4api.net for Any CPU?</li> <li>Failing that, what would I have to do to examine what (if any) platform dependencies exist that would prevent me from building p4api.net.dll for Any CPU?</li> </ul>  <p>If the answers to the above are no I'll probably have new questions, but will cross that bridge when I get there! :)</p>  <p>Thanks in advance for any help/thoughts.</p>