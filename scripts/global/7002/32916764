<p>I use batch-file for copy database from server1 to server2.</p>  <pre><code>Step 1: call stored procedure for FLUSH TABLES table1,table2, ..., table1000 FOR EXPORT; Step 2: copy files .ibd and .cfg to temp directory and archive this Step 3: unlock tables; </code></pre>  <p>The problem is the first step - files .cfg are created and then removed, but unlock the tables is not called. Why? Files .cfg are created and immediately disappear, I do not have time to copy </p>  <p>.bat file command:</p>  <pre><code>mysql -u %db_user% -p%db_password% %db_name% --default-character-set=utf8 &lt; stored_proc_flush_tables.sql </code></pre>  <p>file stored_proc_flush_tables.sql:</p>  <pre><code>DROP PROCEDURE IF EXISTS  stored_proc_flush_tables; DELIMITER // CREATE PROCEDURE stored_proc_flush_tables (     ) BEGIN  DECLARE t_name BLOB; DECLARE tmp_query BLOB; DECLARE done_tables INT DEFAULT 0; DECLARE cursor_tables CURSOR FOR      SELECT table_name FROM information_schema.tables WHERE table_schema=DB_NAME; DECLARE CONTINUE HANDLER FOR NOT FOUND SET done_tables = 1;  SET @table_name = ''; SET @tmp_query = '';  OPEN cursor_tables;      tables_loop: LOOP         FETCH cursor_tables INTO t_name;         IF done_tables = 1 THEN             LEAVE tables_loop;         END IF;          SET @tmp_query = CONCAT_WS('', @tmp_query, ',', t_name);      END LOOP; CLOSE cursor_tables;  SET @tmp_query = TRIM(LEADING ',' FROM @tmp_query); SET @tmp_query = CONCAT_WS('', 'FLUSH TABLES', ' ', @tmp_query, ' ', 'FOR EXPORT'); PREPARE stmt FROM @tmp_query; EXECUTE stmt;  END // DELIMITER ;  call stored_proc_flush_tables(); </code></pre>  <p>Files .cfg are created and immediately disappear, I do not have time to copy them</p>