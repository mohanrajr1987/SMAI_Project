<p>I have a function that reads a text file containing integers and creates a two-channel OpenCV matrix from them. The content of the text file looks like this:</p>  <pre><code> 4    -5    2    3        1     0    1   -2        6     2    0   -1 -3     0   -5    6 </code></pre>  <p>My function is below:</p>  <pre><code>Mat ReadMatFromTxt(string filename, int rows, int cols) {     double m;     Mat M = Mat::zeros(rows/2, cols, CV_32FC2); //Matrix to store values      ifstream fileStream(filename.c_str());     int cnt = 0;//index starts from 0     while (fileStream &gt;&gt; m)     {         int temprow = cnt / cols;         int tempcol = cnt % cols;         if(cnt &lt; (rows*cols)/2) {             M.at&lt;Vec2f&gt;(temprow, tempcol)[0] = m;         } else {             M.at&lt;Vec2f&gt;(temprow - rows/2 , tempcol)[1] = m;         }         cnt++;     }      return M; } </code></pre>  <p>However, now I need to work with text files that contain not just one matrix but multiple matrices along with headers. I want to extract some information from the headers and want to save each matrix in a new <code>Mat</code>. The new text files look like this:</p>  <pre><code># pts=0 frame_index=1 pict_type=I output_type=arranged shape=30x20 origin=video  4    -5    2    3        1     0    1   -2        6     2    0   -1 -3     0   -5    6 # pts=1 frame_index=2 pict_type=P output_type=arranged shape=30x20 origin=video  8    -3    12    10          1     1    3   -1        0     4    2   -2 -3     0   -7    8 ... </code></pre>  <p>What would be the best way to save a new <code>Mat</code> starting each time after a header until a new header is encountered? In the above example, I would have two matrices, ideally saved along with the value of <code>frame_index</code> in their respective headers.</p>  <p>Since my original function only saved one matrix from text files containing a bunch of numbers, I was using the <code>&gt;&gt;</code> operator of <code>ifstream</code>. But now it seems unsuitable for the job. Should I instead use <code>getline</code> and do parsing to distinguish between the headers and numbers? </p>