<p>I am following the tutorial on <a href="https://developer.android.com/guide/topics/media/camera.html#capture-video" rel="nofollow">https://developer.android.com/guide/topics/media/camera.html#capture-video</a></p>  <p>As such I follow the below order when trying to start the camera:</p>  <ol> <li>Camera.open</li> <li>camera.unlock</li> <li>mediaRecorder.setCamera</li> <li>mediaRecorder.setAudioSource</li> <li>mediaRecorder.setVideoSource</li> <li>mediaRecorder.setProfile</li> <li>mediaRecorder.setOutputFile</li> <li>mediaRecorder.prepare</li> <li>mediaRecorder.start &lt;- this is where I get the IllegalStateException</li> </ol>  <p>I can figure out what could be going wrong since I'm following the guide, running 5.0.2</p>  <pre><code>private Camera mCamera; private MediaRecorder mMediaRecorder;  public CameraActivity() {     mCamera = getCameraInstance();     mMediaRecorder = new MediaRecorder(); }  public static Camera getCameraInstance(){     Camera c = null;     try {         c = Camera.open();     }     catch (Exception e) { ... }     return c; }  public void startRecording() {      mCamera.unlock();     mMediaRecorder.setCamera(mCamera);      mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);     mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);     mMediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_LOW));     mMediaRecorder.setOutputFile(getOutputMediaFile(MEDIA_TYPE_VIDEO).toString());      try {         mMediaRecorder.prepare();     }     catch (IOException e) { ... }     catch (IllegalStateException e) { ... }      try {         mMediaRecorder.start();     }     catch (Exception e) {         Log.d(TAG, "exception on mediaRecorder.start" + e.toString()); // This is the exception that gets thrown on .start     } } </code></pre>  <p>My manifest includes all necessary permissions</p>  <pre><code>&lt;uses-permission android:name="android.permission.CAMERA" /&gt; &lt;uses-permission android:name="android.permission.RECORD_AUDIO" /&gt; &lt;uses-permission android:name="android.permission.RECORD_VIDEO" /&gt; &lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/&gt;  &lt;uses-feature android:name="android.hardware.camera" /&gt; &lt;uses-feature android:name="android.hardware.microphone" /&gt; </code></pre>  <p>I have also tried manually setting format instead of using .setProfile, same results</p>  <pre><code>    mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);     mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);     mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT); </code></pre>  <p><strong>Update</strong></p>  <p>The file is indeed created, though it's unplayable of course, so I know it's working up to that point. The call to prepare does not throw an exception, and occurs before start. Same exception thrown on start()</p>