<p>I am using MongoDB and I would like to add tags to documents.</p>  <p>In my application I have few groups of users. I want to allow only users of the same group to share tags about a document with each other, I do not want people from other groups to see the tags.</p>  <p>I need to support adding tags, removing tags and finding tags (either any operator or all - meaning i need to mach all tags in a given list, or just one from a given list)</p>  <p>Currently I am doing it like this:</p>  <pre><code>{ _id: someID,   tags: ["A", "B", "C"]   tags_metadata: [ { "user"  : "userFoo",                      "group" : "groupA",                      "tag"   : "A"},                    { "user"  : "userBar",                      "group" : "groupB",                      "tag"   : "B"}                    { "user"  : "userFoo",                      "group" : "groupA",                      "tag"   : "C"}                   ]  } </code></pre>  <p>If i need to search for tags ["A", "B"] for userFoo in groupA what I would do is </p>  <pre><code>db.find({"tags" : {"$all" : ["A","B"]}) </code></pre>  <p>and then in the application I would go through the tags_meatadata on the cursor and make sure all of tags ("A", "B") are tagged by people from my group.</p>  <p>Is this a good way to go about doing this task?  Is there a better one I should consider  (Right now I'm only indexing tags, so i get the mongo query fairly quickly, and hoping the tags_metadata is not too big)</p>  <p>Thanks.</p>