<p><code>Spring JPA 4.2.1</code></p>  <p>Nested bean definition looks like below but gets <code>NoSuchBeanDefinitionException</code>:</p>  <p>"No qualifying bean of type [javax.persistence.EntityManagerFactory] is defined"</p>  <pre><code>&lt;bean id="tm" class="...JpaTransactionManager"&gt;     &lt;property name="entityManagerFactory"&gt;         &lt;bean class="...LocalContainerEntityManagerFactoryBean"&gt;             &lt;property name="dataSource"&gt;                 &lt;bean class="...BasicDataSource"                     p:driverClassName="..." p:url="..."&gt;                 &lt;/bean&gt;             &lt;/property&gt;         &lt;/bean&gt;     &lt;/property&gt; &lt;/bean&gt; </code></pre>  <p>Only the flat definition works below, why?</p>  <pre><code>&lt;bean id="tm" class="...JpaTransactionManager"&gt;     &lt;property name="entityManagerFactory" ref="emf" /&gt; &lt;/bean&gt; &lt;bean id="emf" class="...LocalContainerEntityManagerFactoryBean"&gt;     &lt;property name="dataSource" ref="ds" /&gt; &lt;/bean&gt; &lt;bean id="ds" class="...BasicDataSource"     p:driverClassName="..." p:url="..."&gt; &lt;/bean&gt; </code></pre>