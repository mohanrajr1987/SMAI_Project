<p>I've included the Google Analytics tracking in the layout of my site so each page can be tracked. </p>  <pre><code>&lt;script&gt;          (function (i, s, o, g, r, a, m) {             i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {                 (i[r].q = i[r].q || []).push(arguments)             }, i[r].l = 1 * new Date(); a = s.createElement(o),             m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)         })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');          ga('create', 'UA-XXXXX-YY', 'none');         ga('send', 'pageview');    &lt;/script&gt; </code></pre>  <p></p>  <p>And I want to include  the script for ecommerce tracking only in my last thank you page after a purchase has been made.</p>  <pre><code>             &lt;script&gt;                    ga('ecommerce:addTransaction', {                 'id': '&lt;%:order.DocumentNo%&gt;',                   // Transaction ID. Required.                 'revenue': '&lt;%:order.TotalOrderPriceWithVat%&gt;',  // Grand Total.                 'shipping': '&lt;%:order.TotalTransportPrice %&gt;',   // Shipping.                 'tax': '0'                                       // Tax.             });      &lt;             ga('ecommerce:addItem', {                 'id':   '&lt;%:order.DocumentNo %&gt;',                 // Transaction ID. Required.                 'name': '&lt;%:item.ProductDescription %&gt;' +' '+ '&lt;%:item.BrandName%&gt;',  // Product name. Required.                 'sku': '&lt;%:item.Item_Id %&gt;',                    //Item ID                  'category': '&lt;%:item.CustomData %&gt;',                          // Category or variation.                 'price': '&lt;%:item.OrderPriceWithVat %&gt;',       // Unit price.                 'quantity': '&lt;%:item.Quantity %&gt;'            // Quantity.             });      &lt;/script&gt; </code></pre>  <p>The problem is in the last page I get the error <strong>ga is undefined</strong></p>