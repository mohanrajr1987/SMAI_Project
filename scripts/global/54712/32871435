<p>I have a web application that employs the <code>bokeh</code> plotting engine. I have created an interactive plotting app based of of their "<a href="http://bokeh.pydata.org/en/latest/docs/server_gallery/stocks_server.html" rel="nofollow">Stocks Example</a>"</p>  <p>I have it running successfully on my development machine. On my application server, I am running everything from <code>supervisor</code> (<code>supervisorctl</code>).</p>  <p>I am using <code>redis</code> as the backend.</p>  <p>I am having a permissions issue based on who is "driving" the various applications. When I try to access the application on the server, my traceback shows a directory creation permission problem.</p>  <pre><code>Traceback (most recent call last):   ... flask / wsgi stuff ...   File "/home/webdev/mydevelopment/git/ers_data_app/env/lib/python2.7/site-packages/flask_login.py", line 755, in decorated_view     return func(*args, **kwargs)   File "/home/webdev/mydevelopment/git/ers_data_app/webapp/mod_performance/plotting_views.py", line 53, in data_viz     bs = make_bokeh_session()   File "/home/webdev/mydevelopment/git/ers_data_app/webapp/mod_performance/plotting_views.py", line 27, in make_bokeh_session     b_session.login(un, pw)   File "/home/webdev/mydevelopment/git/ers_data_app/env/lib/python2.7/site-packages/bokeh/session.py", line 244, in login     self.save()   File "/home/webdev/mydevelopment/git/ers_data_app/env/lib/python2.7/site-packages/bokeh/session.py", line 180, in save     data = self.load_dict()   File "/home/webdev/mydevelopment/git/ers_data_app/env/lib/python2.7/site-packages/bokeh/session.py", line 151, in load_dict     configfile = self.configfile   File "/home/webdev/mydevelopment/git/ers_data_app/env/lib/python2.7/site-packages/bokeh/session.py", line 148, in configfile     return join(self.configdir, "config.json")   File "/home/webdev/mydevelopment/git/ers_data_app/env/lib/python2.7/site-packages/bokeh/session.py", line 138, in configdir     makedirs(bokehdir)   File "/home/webdev/mydevelopment/git/ers_data_app/env/lib64/python2.7/os.py", line 157, in makedirs     mkdir(name, mode) OSError: [Errno 13] Permission denied: '/root/.bokeh' </code></pre>  <p>I placed a print statement in my <code>flask</code> view to show who the current user is (using <code>os.getegid()</code>)</p>  <pre><code>from bokeh.session import Session as bSession ... def make_bokeh_session():     print 'bokeh session group!!!!!!!! {}'.format(os.getegid())     print 'bokeh session user!!!!!!!! {}'.format(os.path.expanduser('~'))     un = current_user.username     pw = current_app.config['BOKEH_SESSION_PW']     b_session = bSession(root_url=bokeh_url, load_from_config=False)     try:         b_session.login(un, pw)     except RuntimeError as e:         b_session.register(un, pw)         b_session.login(un, pw)     output_server('ers_plots')     return b_session </code></pre>  <p>The print statement gives shows group id of <code>1000</code> (my <code>webdev</code> user who runs basically everything), although the <code>os.expanduser('~')</code> shows the user as root. </p>  <p>See below for the <code>supervisor</code> configuration snippets.</p>  <pre><code>[program:bokehservergo] directory = /home/webdev/mydevelopment/git/ers_data_app/webapp/mod_performance command = /home/webdev/mydevelopment/git/ers_data_app/env/bin/bokeh-server --script=plotting_app.py --backend=redis --no-start-redis -m user=webdev ... </code></pre>  <p>The webapp is run with the <code>uwsgi emperor</code></p>  <pre><code>[program:uwsgi_emperor_go] command = /usr/bin/uwsgi --emperor /etc/uwsgi/emperor.ini user=webdev ... </code></pre>  <p>And the redis runner</p>  <pre><code>[program:redisgo] command=/usr/bin/redis-server /etc/redis.conf user=webdev ... </code></pre>  <p>The relavent code from <code>bokeh/session.py</code> (<code>makedirs</code> is actually throwing the traceback)</p>  <pre><code>@property     def configdir(self):         """ filename where our config are stored. """         if self._configdir:             return self._configdir         bokehdir = join(expanduser("~"), ".bokeh")         if not exists(bokehdir):             makedirs(bokehdir)         return bokehdir </code></pre>  <p>How can I fix this permission issue so that <code>bokeh</code> may be deployed on a server? I tried adding the <code>user=webdev</code> to the various <code>supervisord</code> program blocks to no avail. I have since removed the <code>user=webdev</code> from the <code>supervisor.conf</code> config for <code>redis</code></p>