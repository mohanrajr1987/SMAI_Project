<p>I'm trying to unmarshall an array of variable length of a structure nested inside another structure as in the following code:</p>  <pre><code>[StructLayout(LayoutKind.Sequential, Pack = 1)] public struct CardInfoRequest  {     public ulong CardId;     public byte AppListLength;     [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.Struct)]     public CardApp[] AppList; } [Serializable()] [StructLayout(LayoutKind.Sequential, Pack = 1)] public struct CardApp {     public ulong CardAppId;     public byte SomeInformation; } </code></pre>  <p>And I am unmarshalling it by doing:</p>  <pre><code>        var lDataPointer = Marshal.AllocHGlobal(pSize);                     Marshal.Copy(pData, 0, lDataPointer, pSize);         var lResult = Marshal.PtrToStructure(lDataPointer, typeof(CardInfoRequest));         Marshal.FreeHGlobal(lDataPointer); </code></pre>  <p>Where pData is a byte array containing the marshalled structure and pSize is its size in runtime (18 when the array has one item, 27 when the array has two items and so forth...).</p>  <p>However, no matter the size in bytes of the stream, whenever I unmarshall it I am always getting AppList.Length == 1. </p>  <p>Can I unmarshall it correctly? Should I do it byte by byte? </p>  <p>Thanks in advance!</p>