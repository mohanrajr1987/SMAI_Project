<p>I have implemented my own <code>QAbstractListModel</code> which is based on an <code>std::vector</code>. I now want to display the contents of this model in a <code>QGraphicsScene</code>. For this I have implemented my own <code>QGraphicsItem</code> which stores a <code>QPersistentModelIndex</code> as a pointer to the data.</p>  <p>I have implemented the <code>removeRows</code> method as follows:</p>  <pre><code>bool VectorModel::removeRows(int row, int count, const QModelIndex&amp; parent) {     if (row + count &lt; _vector.size()) {         beginRemoveRows(QModelIndex(), row, row + count);         _vector.erase(_vector.begin() + row, _vector.begin() + row + count);         endRemoveRows();         return true;     }     return false; } </code></pre>  <p>Now since I erase some elements, the index of the following elements will change. Because of this the <code>QPersistentModelIndex</code> needs to be adjusted.</p>  <p>I have found the <code>changePersistentIndex()</code> method in <code>QAbstractItemModel</code> and I know that I can get all persistent indices with <code>persistentIndexList()</code>. However I don't know how to adjust the indices accordingly using this method. How can this be done?</p>  <p>Will changing these indices be enough to prevent <code>Invalid index</code> errors?</p>  <p><strong>Update</strong></p>  <p>I have changed the <code>removeRows()</code> with the enhancements of @Sebastian Lange, however it is still not working as expected and I receive <code>Invalid index</code> errors:</p>  <pre><code>bool LabelModel::removeRows(int row, int count, const QModelIndex&amp; parent) {     Q_UNUSED(parent)     if (row + count &lt; _vector.size()) {         beginRemoveRows(QModelIndex(), row, row + count);         _vector.erase(_vector.begin() + row, _vector.begin() + row + count);         endRemoveRows();          auto pil = persistentIndexList();         for(int i = 0; i &lt; pil.size(); ++i)         {             if (i &gt;= row + count) {                 changePersistentIndex(pil[i], pil[i-count]);             }         }         return true;     }     return false; } </code></pre>  <p>The emitted errors look like this (when removing the 7th element):</p>  <pre><code>QAbstractItemModel::endRemoveRows:  Invalid index ( 7 , 1 ) in model QAbstractListModel(0x101559320) QAbstractItemModel::endRemoveRows:  Invalid index ( 8 , 1 ) in model QAbstractListModel(0x101559320) QAbstractItemModel::endRemoveRows:  Invalid index ( 9 , 1 ) in model QAbstractListModel(0x101559320) QAbstractItemModel::endRemoveRows:  Invalid index ( 10 , 1 ) in model QAbstractListModel(0x101559320) QAbstractItemModel::endRemoveRows:  Invalid index ( 6 , 1 ) in model QAbstractListModel(0x101559320) </code></pre>