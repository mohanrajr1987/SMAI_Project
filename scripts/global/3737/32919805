<pre><code>arr = User.where("id&lt;10") arr.each do |u|     u.teacher_name = u.teacher.name     u.teacher_id = nil     u.teacher_type = nil     u.save! end </code></pre>  <p>When I am running this code from rails console I am getting the following error: <strong>"NoMethodError: undefined method <code>arel_table' for nil:NilClass NoMethodError: undefined method</code>arel_table' for nil:NilClass from /home/rajesh/.rvm/gems/ruby-2.2.0/gems/activerecord-4.2.1/lib/active_record/associations/association.rb:124:in `target_scope'"</strong> for </p>  <p>Can someone please help point out what is wrong with this code.</p>