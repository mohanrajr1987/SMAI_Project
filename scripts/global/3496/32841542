<p>I have an array. Given a number X (that must not be contained in the array), I want to search for both the next greater and next lower number of X within the array in a single loop. My code is:</p>  <pre><code>&lt;?php   $a = array(1, 8, 23, 25, 40,41,42,47, 52, 55, 66, 74,75, 76,77,78, 95, 102,103, 104, 105,106, 126, 128, 140, );   $v = 104;   sort($a);   $nearestGreater = null;   $nearestLower = null;   foreach ($a as $key =&gt; $val) {     if ( $v&lt;=$val) {       $nearestGreater = (isset($a[$key + 1])) ? $a[$key + 1]: $nearestGreater;       $nearestLower = (isset($a[$key - 1])) ? $a[$key - 1]: $nearestLower;       break;     }   }   var_dump($nearestLower);   echo "&lt;br/&gt;".$v."&lt;br/&gt;";   var_dump($nearestGreater);   unset($a); ?&gt;     </code></pre>