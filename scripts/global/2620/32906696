<p>Need help, next problem after execute "merge" or "bulkSaveOrUpdate" hibernate:</p>  <blockquote>   <p>ERROR: cannot perform INSERT RETURNING on relation "bet" Hint: You need an unconditional ON INSERT DO INSTEAD rule with a RETURNING clause.</p> </blockquote>  <p>But if I use function in Postges example:</p>  <pre><code>CREATE OR REPLACE FUNCTION fn_generation_bets(p_match_id bigint)   RETURNS void AS $BODY$ BEGIN INSERT INTO bet (week_id, competition_id, round_id, season_id, sport_id, person_id, outcome_id, outcome_value_id, status, rate)     SELECT       mt.game_week    AS week_id,       mt.competition_id    AS competition_id,       mt.round_id    AS round_id,       mt.season_id    AS season_id,       mt.sport_id    AS sport_id,       p.id     AS person_id,       ov.outcome_id     AS outcome_id,       ov.id    AS outcome_value_id,       'WAITING' AS status,       2   AS rate     FROM match mt, person p, outcome_value ov     WHERE       mt.id = p_match_id       AND       ov.admin_feed_status = 'PUBLISHED'       AND        ov.sport_id = mt.sport_id       AND        p.position_id = ov.position_id       AND       p.active = TRUE       AND       (p.team_id = mt.team_a_id OR p.team_id = mt.team_b_id); END;$BODY$   LANGUAGE plpgsql VOLATILE   COST 100; ALTER FUNCTION fn_generation_bets(bigint)   OWNER TO postgres; </code></pre>  <p>Not problem this good works.</p>  <p>Example rules emulation MySQL "ON DUPLICATE KEY UDPATE" for table "bet":</p>  <pre><code>   CREATE OR REPLACE RULE insert_ignore_bet AS         ON INSERT TO bet        WHERE (EXISTS ( SELECT 1                FROM bet               WHERE bet.week_id = new.week_id  AND bet.person_id = new.person_id  AND bet.outcome_id = new.outcome_id  AND bet.outcome_value_id = new.outcome_value_id  AND bet.sport_id = new.sport_id  AND bet.round_id = new.round_id  AND bet.season_id = new.season_id  AND bet.competition_id = new.competition_id)) DO INSTEAD NOTHING; </code></pre>  <p>I'm not understand why return exception. If you have had a similar case, I will be happy to helpful answers. Regards. </p>