<p>I'm currently working on a game in node using socket.io and drawing onto canvas. I'm noticing that when I click during the game, character movement slows to a crawl. I would ideally like to maintain the draw rate that the game begins at and determine what's causing these memory issues. I'm looking to find out how I can debug this in a deterministic way</p>  <p>For context: I'm updating x,y coordinates in the game loop according to which keys are active (dictated by keyup and keydown events). I'm sending player information to the server via sockets about ~60 times a second.</p>  <p>To get more specific, here's a recording of the page's memory timeline:</p>  <p><a href="http://i.stack.imgur.com/rInHu.png" rel="nofollow"><img src="http://i.stack.imgur.com/rInHu.png" alt="enter image description here"></a></p>  <p>The steep increase happens right around the time of the click event. The original jump (before the 6 extra listeners are added) is happening once the game starts. As you can see it's going a little wild on that click.</p>  <p>I have no handlers bound to the click event but the JS Heap grows rapidly and listeners seem to be added which confuses me. Here's a <a href="https://github.com/aidankmcl/space-raptor-pirates" rel="nofollow">link to my repo</a>, below is a chunk from <code>game.js</code> that has to do with keypresses and may be somehow involved:</p>  <pre><code>var sendKey = function (activeK) {   player.xSpeed = 0;   player.ySpeed = 0;    if (activeK[KEY_W]) {     player.ySpeed = -SPEED;   }   if (activeK[KEY_A]) {     player.xSpeed = -SPEED;   }   if (activeK[KEY_S]) {     player.ySpeed = SPEED;   }   if (activeK[KEY_D]) {     player.xSpeed = SPEED;   }   if (activeK[SPACE]) {     activate(player)   } }  document.onkeydown = function(e) {   if (activeKeys.hasOwnProperty(e.keyCode)) {     activeKeys[e.keyCode] = true;     sendKey(activeKeys)   } }  document.onkeyup = function(e) {   if (activeKeys.hasOwnProperty(e.keyCode)) {     activeKeys[e.keyCode] = false;     sendKey(activeKeys)   } } </code></pre>  <p>Thanks!</p>  <p><em>Note</em>: I originally started from scratch to try to learn a bunch but will likely switch to a game making framework.</p>