<p>Using SQL Server 2012, I have the following data:</p>  <pre><code>Reference      Value --------------------- 1              val 1              val 1              val 2              val 2              val 3              val 3              val </code></pre>  <p>I need to append a number to Value as follows based on the number of unique references. This must only be done if there are different References in the list i.e. more than one unique one:</p>  <pre><code>Reference      Value --------------------- REF123         val 1 REF123         val 1 REF123         val 1 REF789         val 2 REF789         val 2 REF999         val 3 REF999         val 3 </code></pre>