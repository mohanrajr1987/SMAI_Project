<p>Weirdest error, who’s up for a challenge to try and help me? Spent hours yesterday on it and it’s like magic. I can't believe this is happening and it's driving me crazy.</p>  <p>Btw, using:</p>  <ul> <li>Rails 4.2.3</li> <li>Ruby 2.2.3</li> <li>pg 0.18</li> <li><code>Encoding.default_internal = Encoding.default_external = UTF-8</code></li> <li><code>config.encoding = 'utf-8'</code></li> </ul>  <p>It has to do with Postgres, ActiveRecord and Encodings! Turns out that we’ve been getting these errors whenever we create new Users on the database with special characters:</p>  <p><code>Encoding::UndefinedConversionError: "\xC3" from ASCII-8BIT to UTF-8</code></p>  <p><code>\xC3</code> may vary depending on the characters. The weird part is that we’ve set since the beginning EVERYTHING to UTF-8. So it really makes no sense and I digged into it, and used this script:</p>  <pre><code>User.all.each do   |user| user.attributes.each do     |name, value| if value.is_a? String       puts user.email + name.encoding.to_s + value.encoding.to_s     end   end end </code></pre>  <p>And this is the output of one of the users, but all users get the same:</p>  <pre><code>dr_lottahelp@blahblah.comUTF-8UTF-8 dr_lottahelp@blahblah.comUTF-8ASCII-8BIT dr_lottahelp@blahblah.comUTF-8ASCII-8BIT dr_lottahelp@blahblah.comUTF-8ASCII-8BIT dr_lottahelp@blahblah.comUTF-8UTF-8 dr_lottahelp@blahblah.comUTF-8UTF-8 dr_lottahelp@blahblah.comUTF-8UTF-8 dr_lottahelp@blahblah.comUTF-8UTF-8 dr_lottahelp@blahblah.comUTF-8UTF-8 dr_lottahelp@blahblah.comUTF-8UTF-8 dr_lottahelp@blahblah.comUTF-8UTF-8 </code></pre>  <p>Turns out that only 3 fields get the ASCII-8BIT encoding. Which absolutely makes no sense to me!</p>  <p>(Those fields btw, <code>first_name</code>, <code>middle_name</code>, <code>last_name</code>, are exactly the same in the database as the other text fields that got listed on the output, they don't get any special treatment).</p>  <p>Another funny thing is that if I don't fill any of those fields, the encoding is <code>UTF-8</code> for the value. But once I fill it, even if I don't use special characters it will get converted to <code>ASCII-8BIT</code>.</p>  <p>Any suggestions? I've tried every single thing.</p>  <p>Thank you.</p>