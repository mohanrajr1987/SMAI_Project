<p>I'm learning OpenGL according to <a href="http://www.raywenderlich.com/3664/opengl-tutorial-for-ios-opengl-es-2-0" rel="nofollow">this tutorial</a>, and trying to write simple function that draws colored rectangle.</p>  <p>Input params:</p>  <pre><code>size: CGSize, scale: CGFloat, </code></pre>  <p>This part of code works ok:</p>  <pre><code>// Setup context let api = EAGLRenderingAPI.OpenGLES3 let context = EAGLContext(API: api) EAGLContext.setCurrentContext(context)  // Setup render buffer var renderBuffer = GLuint() glGenRenderbuffers(1, &amp;renderBuffer) glBindRenderbuffer(GLenum(GL_RENDERBUFFER), renderBuffer) let bufferWidth = GLsizei(size.width * scale) let bufferHeight = GLsizei(size.height * scale) let bufferFormat = GLenum(GL_RGBA8) glRenderbufferStorage(GLenum(GL_RENDERBUFFER), bufferFormat, bufferWidth, bufferHeight)  // Setup frame buffer var frameBuffer = GLuint() glGenFramebuffers(1, &amp;frameBuffer) glBindFramebuffer(GLenum(GL_FRAMEBUFFER), frameBuffer) glFramebufferRenderbuffer(GLenum(GL_FRAMEBUFFER), GLenum(GL_COLOR_ATTACHMENT0), GLenum(GL_RENDERBUFFER), renderBuffer)  // Draw glClearColor(1, 0.5, 0.5, 1) glClear(GLbitfield(GL_COLOR_BUFFER_BIT)) </code></pre>  <p>Most problematic part is to create an UIImage:</p>  <pre><code>// Get bytes let byteLength = Int(bufferWidth * bufferHeight) * 4; let bytes = malloc(byteLength) glReadPixels(0, 0, bufferWidth, bufferHeight, bufferFormat, GLenum(GL_UNSIGNED_BYTE), bytes) print( glGetError() ) // prints 1280 (GL_INVALID_ENUM) !!!  // Create a CGImage let dataProvider = CGDataProviderCreateWithData(nil, bytes, byteLength, nil) let colorspace = CGColorSpaceCreateDeviceRGB() let bitmapInfo: CGBitmapInfo = [.ByteOrder32Little, CGBitmapInfo(rawValue: CGImageAlphaInfo.Last.rawValue)] let aCGImage = CGImageCreate(     Int(bufferWidth),      Int(bufferHeight),      8,      4,      4 * Int(bufferWidth),      colorspace,      bitmapInfo,      dataProvider,      nil,      false,      .RenderingIntentDefault     )! let anUIImage = UIImage(CGImage: aCGImage, scale: scale, orientation: .Up) </code></pre>  <p>While <code>glReadPixels</code> generates GL_INVALID_ENUM error, I'm not even sure if my way to create UIImage is correct.</p>