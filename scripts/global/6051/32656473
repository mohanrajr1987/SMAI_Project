<p>The following snippet is processing a UTF8-encoded text file (building HL7 segments for hospital data, FYI):</p>  <pre><code>set linecounter 0 set newmsg ""  foreach line [split $data \n] {     incr linecounter     set seg [append "OBX|"  $linecounter "|" [string trimright $line] "||||||V" \n]     lappend newmsg $seg }  echo "This is the new message: " $newmsg </code></pre>  <p>If I echo out each <code>$seg</code> inside the loop, I get each individual line in the text file, like so (file content of course):</p>  <pre><code>line1 line2 line3 etc... </code></pre>  <p>Once done with the loop however, <code>$newmsg</code> reads as:</p>  <pre><code>line1  line1 line2  line1 line2 line3 etc... </code></pre>  <p>I have changed <code>lappend</code> to <code>append</code> inside the loop, <code>set $seg</code> to <code>""</code> after appending it to <code>$newmsg</code> inside the loop, all to no avail. Thoughts?</p>