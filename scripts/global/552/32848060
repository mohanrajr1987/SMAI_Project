<p>We've been building messenger like app with share extension (from safari). Right now we've encountered a big problem Extension crashes when im trying to get url string</p>  <p>CRASH:</p>  <p>Tread 1</p>  <p>Unhandled Exception:</p>  <p>0 Mono 0x01746691 mono_handle_exception_internal + 2168</p>  <p>1 Mono 0x01745e13 mono_handle_exception + 30</p>  <p>2 Mono 0x0173ed2d mono_arm_throw_exception + 104</p>  <p>3 com.XXX.ShareExtension 0x00268e44 throw_exception + 64</p>  <p>at ObjCRuntime.Runtime.throw_ns_exception (intptr) [0x00000] in /Users/builder/data/lanes/2077/d8e9592a/source/maccore/runtime/Delegates.generated.cs:100 at (wrapper native-to-managed) ObjCRuntime.Runtime.throw_ns_exception (intptr) &lt;0x00048></p>  <p>6 com.XXX.ShareExtension 0x006fe5c0 xamarin_throw_ns_exception + 52</p>  <p>7 com.XXX.ShareExtension 0x007004b0 _ZL17exception_handlerP11NSException + 224</p>  <p>8 CoreFoundation 0x242cbba9 + 644</p>  <p>9 libobjc.A.dylib 0x35c7f087 + 174</p>  <p>10 libc++abi.dylib 0x35463e17 + 78</p>  <p>11 libc++abi.dylib 0x354638f7 __cxa_rethrow + 102</p>  <p>12 libobjc.A.dylib 0x35c7ef47 objc_exception_rethrow + 42</p>  <p>Which means mono crashes. Looking further I see:</p>  <p>Tread 2</p>  <p>iOS_ShareExtension[336] : Unhandled managed exception:</p>  <p>Objective-C exception thrown. Name: NSInvalidArgumentException Reason: </p>  <p>NSGetSizeAndAlignment(): unsupported type encoding spec 'Y' at 'Y‚Äû h≈∏0i≈∏√™o≈∏√ª' in 'Y‚Äû h≈∏0i≈∏√™o≈∏√ª'</p>  <p>Native stack trace:</p>  <p>0 CoreFoundation 0x242cb883 + 150</p>  <p>1 libobjc.A.dylib 0x35c7edff objc_exception_throw + 38</p>  <p>2 CoreFoundation 0x242cce71 + 536</p>  <p>3 CoreFoundation 0x242cef69 + 60</p>  <p>4 CoreFoundation 0x241f9515 + 516</p>  <p>5 libextension.dylib 0x355c2e47 + 150</p>  <p>6 com.XXX.ShareExtension 0x000643f4  wrapper_managed_to_native_ObjCRuntime_Messaging_void_objc_msgSend_IntPtr_IntPtr_IntPtr_intptr_intptr_intptr_intptr_intptr + 128</p>  <p>7 com.XXX.ShareExtension 0x0003a5e8 Foundation_NSItemProvider_LoadItem_string_Foundation_NSDictionary_System_Action_2_Foundation_NSObject_Foundation_NSError + 384</p>  <p>8 com.XXX.ShareExtension 0x0000c5d4 iOS_ShareExtension_ShareViewController_ViewDidLoad + 1048</p>  <p>My code that crashes:</p>  <pre><code>    NSExtensionItem content = ExtensionContext.InputItems [0];      foreach (NSItemProvider item in content.Attachments) {         if (item.HasItemConformingTo ("public.url")){             item.LoadItem (UTType.URL,null, OnItemLoaded);             break;         }     } </code></pre>  <p>and then:</p>  <pre><code>NSUrl url = objectLoaded as NSUrl; _sharedURl = url.AbsoluteString; // THIS CRASH!!! </code></pre>  <p>Any idea how to bypass this? I've even tried coverting this NSUrl in various ways.</p>