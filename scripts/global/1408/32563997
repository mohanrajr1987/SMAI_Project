<p>I always use to return the number of rows ,use a foreach loop. In a part of the project I need to get a procedure with dynamic data. Procedure code:</p>  <pre><code>ALTER procedure [dbo].[abcde] @fldStatusIdString nvarchar(max) as begin         declare @Query nvarchar(max)     set @Query = '     SELECT a.fldEstateId, a.fldEstateTitle, a.fldThumbnail,a.fldPrice,fldAcceptDate     FROM    (                 SELECT dbo.tblImages.fldEstateId, dbo.tblImages.fldThumbnail, dbo.tblEstates.fldEstateTitle,                  dbo.tblEstates.fldPrice, dbo.tblEstates.fldAcceptDate,  ROW_NUMBER() OVER (PARTITION BY dbo.tblImages.fldEstateId                  ORDER BY dbo.tblEstates.fldAcceptDate) AS RowNumber                 FROM    dbo.tblImages INNER JOIN    dbo.tblEstates ON dbo.tblEstates.fldEstateId = dbo.tblImages.fldEstateId                 WHERE   (dbo.tblEstates.fldStatusOfAccept = 1)'                 set @Query +='and (fldStatusId in('+@fldStatusIdString+'))             ) AS a     WHERE   a.RowNumber = 1     order by fldEstateId             '             execute sp_executesql  @Query end </code></pre>  <p>When i use above procedure, can not use ToList in foreach loop. If the normal procedure is not a problem, but if i use a above way(input data with the number of variables), I get an error. C# Code:</p>  <pre><code>List&lt;Join_Estates_Images_Model&gt; ListAll = new List&lt;Join_Estates_Images_Model&gt;(); foreach (var item in db.abcde(fldStatusIdString).ToList()) {     Join_Estates_Images_Model _entity = new Join_Estates_Images_Model();     _entity.fldEstateId = item.fldEstateId;     _entity.fldEstateTitle = item.fldEstateTitle;     _entity.fldThumbnail = item.fldThumbnail;     _entity.fldPrice = Convert.ToDecimal(item.fldPrice);     _entity.fldAcceptDate = item.fldAcceptDate;     ListAll.Add(_entity); } return ListAll; </code></pre>  <p>Error message:</p>  <pre><code>Error    14    'int' does not contain a definition for 'ToList' and no extension method 'ToList' accepting a first argument of type 'int' could be found (are you missing a using directive or an assembly reference?) </code></pre>  <p>I used 'using System.Linq'</p>