<p>I need to modify a registry value for my application to remove a flag (<strong>HIGHDPIAWARE</strong>) if it is there. </p>  <pre><code>[HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers] "C:\\Program Files (x86)\\My Applications\\MyApp.exe"="DISABLETHEMES DISABLEDWM HIGHDPIAWARE" </code></pre>  <p>Installer is created using <code>InstallShield 2011</code>. I created a batch file to look for this value and remove data <code>HIGHDPIAWARE</code> from value. Bat file works fine when run manually. </p>  <ol> <li>I then converted this bat file to exe </li> <li>Added it in Install Shield as a custom action</li> <li>Set the "In-Script Execution" property of custom action to "Deferred Execution in System context"</li> <li><p>It is launched during install but I see the error <code>registry key not found</code> in the out put window (I left echo on for debug purpose).</p>  <p>SET PARENTREGKEY=HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers SET MYAPPEXEPATHVALUE64Bit=%programfiles(x86)%\MYAPPS\MYAPP.exe SET MYAPPEXEPATHVALUE32Bit=%programfiles%\MYAPPS\MYAPP.exe</p>  <p>REM Check the architecture and query the MYAPP exe key accordingly</p>  <p>if defined PROGRAMFILES(x86) SET REGVALUE=%MYAPPEXEPATHVALUE64Bit% if not defined PROGRAMFILES(x86) SET REGVALUE=%MYAPPEXEPATHVALUE32Bit%</p>  <p>Reg query "%PARENTREGKEY%" /v "%REGVALUE%" if %ERRORLEVEL% EQU 0 (   REM do some action )</p></li> </ol>  <p>If I set the "In-Script Execution" property of custom action to "Immediate Execution" then the reg query works fine. I want to set deferred execution so that it works for user with less privileges.</p>  <p>Any ideas?</p>