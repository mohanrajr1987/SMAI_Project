<p>In the Phoenix Framework, how does one route a custom media type in Accepts?</p>  <p><a href="https://github.com/phoenixframework/phoenix/blob/master/lib/phoenix/controller.ex#L826" rel="nofollow">Phoenix's own code comments</a> indicate the following is all that is necessary—plus a recompile of deps, though the need for that escapes me. But, this seems not to work:</p>  <p>config.exs:</p>  <pre><code>[…]  config :plug, :mimes, %{   "application/vnd.api+json" =&gt; ["json-api"] } </code></pre>  <p>router.ex:</p>  <pre><code>pipeline :api do   plug :accepts, ["json-api"] end  […]  scope "/", SomeApp do   pipe_through :api    […] </code></pre>  <p>some_test.ex:</p>  <pre><code>setup do   conn = conn() |&gt; put_req_header("accept", "application/vnd.api+json")   {:ok, conn: conn} end </code></pre>  <p>All tests' requests (using conn from setup) receive HTTP 406 responses.</p>