<p>Still new to Python and I'm trying to create a list of files in a directory but ignoring some folders from a list.</p>  <p>This is what I have so far, thought the ignore part isn't working and I'm not sure why.</p>  <pre><code>import os from fnmatch import fnmatch  def walk_with_ignore_list(apath, excludes):   pattern = "*.txt"   dirList = []    for path, subdirs, files in os.walk(apath):     for name in files:       if fnmatch(name, pattern):         f = os.path.join(path, name)         subdirs[:] = [d for d in subdirs if d not in excludes]         # print (f)         dirList.append(f)   return dirList  # Set input directory someDir = "C:\\temp\\stuff"  # Exclude directory list xList = [ "C:\\temp\\stuff\\morestuff", "C:\\temp\\forks" ]  mylist = walk_with_ignore_list(someDir, xList)  for i in range(0, len(mylist)):   print mylist[i] </code></pre>