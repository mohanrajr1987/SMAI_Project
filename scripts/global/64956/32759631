<p>The code below produce an stackoverflow error.  The idea is to format the amount when or after user type  an amount. </p>  <p>500 -> 500.00</p>  <p>1000 -> 1 000.00</p>  <p>29999.55-> 29 999.55</p>  <p>.. .. ..</p>  <pre><code>   edit_amount.addTextChangedListener(new TextWatcher() {          @Override         public void onTextChanged(CharSequence s, int start, int before, int count) {          }          @Override         public void beforeTextChanged(CharSequence s, int start, int count,                                       int after) {             // TODO Auto-generated method stub         }          @Override         public void afterTextChanged(Editable s) {               if (edit_amount.getText().toString().length()&gt;0){                    edit_amount.setText(                         currencyFormat(edit_amount.getText().toString()));              }else {}           }     });      public String currencyFormat(String number){          String credits="";          try {             //en, us              if (TextUtils.isEmpty(MyApplication.pref.GetPreferences("AppCurrency"))){                  credits = NumberFormat.getCurrencyInstance(new Locale("fr", "FR")).format(Double.valueOf(number));              }else {                  if (MyApplication.pref.GetPreferences("AppCurrency").equals("Euro")) {                      credits = NumberFormat.getCurrencyInstance(new Locale("fr", "FR")).format(Double.valueOf(number));                  } else {                      credits = NumberFormat.getCurrencyInstance(new Locale("en", "US")).format(Double.valueOf(number));                  }             }          }catch(Exception ex){              credits = "mCredits";          }            return credits;     } </code></pre>