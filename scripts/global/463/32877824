<p>I'm trying to track down some performance issues we are experiencing intermittently after upgrading from ColdFusion 9 to 11.  JVM version went from 1.6/1.7 to 1.8(currently U40)</p>  <p>Server runs fine for around a week and then goes through periods of performance degradation until re-start. These periods last 30 seconds to a minute and occur every few minutes.  Duration extends and time-in-between reduces as time goes on.  Upon re-start performance returns to normal</p>  <p>Stack traces taken at the time of performance degradation indicate a lot of threads "Waiting on Condition", however I cannot see the condition.  Usually, I would expect to see the reason the thread is waiting on the top of the stack trace.</p>  <p>In this case, we do not.</p>  <p>Looking @ GC logs, this does not appear to be related to STW GC collections. (they are approx every 30 mins to every hour) </p>  <p>Stack traces taken 2 seconds part show the threads are moving to different parts of code, only to hit up against the "Waiting for Condition" again. In fact, the same request (thread) can move Waiting for Condition through it's observable life. </p>  <p>If I throw significant load at the server, when it is running fine then I don't see any "Waiting for Condition" in worker threads. </p>  <p>Here is an example stack trace.</p>  <blockquote>   <p>"ajp-bio-8014-exec-281" #70085 daemon prio=5 os_prio=0 tid=0x0000000074c73000 nid=0x21b0 waiting on condition [0x00000000487cb000]      java.lang.Thread.State: RUNNABLE       at cfCPStandard2ecfc1872558760$funcGETMAINCONTENTHEADER.runFunction(D:\JO3\jobOffice\sys\jo\core\de\templates\cp\CPStandard.cfc)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:487)       at coldfusion.filter.SilentFilter.invoke(SilentFilter.java:47)       at coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:420)       at coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:383)       at coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:95)       at coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:334)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:231)       at coldfusion.runtime.CfJspPage._invokeUDF(CfJspPage.java:2845)       at cfCPStandard2ecfc1872558760$funcLOADPAGEHEADER.runFunction(D:\JO3\jobOffice\sys\jo\core\de\templates\cp\CPStandard.cfc:54)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:487)       at coldfusion.filter.SilentFilter.invoke(SilentFilter.java:47)       at coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:420)       at coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:383)       at coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:95)       at coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:334)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:231)       at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:643)       at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:432)       at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:402)       at coldfusion.runtime.CfJspPage._invoke(CfJspPage.java:2483)       at cfDisplayEngine2ecfc1810328208$funcPOSTPROCESS.runFunction(D:\JO3\jobOffice\sys\jo\core\m2plugin\DisplayEngine.cfc:52)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:487)       at coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:420)       at coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:383)       at coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:95)       at coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:334)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:231)       at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:643)       at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:432)       at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:402)       at coldfusion.runtime.CfJspPage._invoke(CfJspPage.java:2483)       at cfPluginManager2ecfc1495337580$funcPOSTPROCESS.runFunction(D:\JO3\jobOffice\MachII\framework\PluginManager.cfc:591)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:487)       at coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:420)       at coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:383)       at coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:95)       at coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:334)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:231)       at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:643)       at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:432)       at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:402)       at coldfusion.runtime.CfJspPage._invoke(CfJspPage.java:2483)       at cfRequestHandler2ecfc1676430457$funcPROCESSEVENTS.runFunction(D:\JO3\jobOffice\MachII\framework\RequestHandler.cfc:308)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:487)       at coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:420)       at coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:383)       at coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:95)       at coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:334)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:231)       at coldfusion.runtime.CfJspPage._invokeUDF(CfJspPage.java:2845)       at cfRequestHandler2ecfc1676430457$funcHANDLEREQUEST.runFunction(D:\JO3\jobOffice\MachII\framework\RequestHandler.cfc:208)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:487)       at coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:420)       at coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:383)       at coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:95)       at coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:334)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:231)       at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:643)       at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:432)       at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:402)       at coldfusion.runtime.CfJspPage._invoke(CfJspPage.java:2483)       at cfmach2dii2ecfc1440816939$funcHANDLEREQUEST.runFunction(D:\JO3\jobOffice\MachII\mach-ii.cfc:210)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:487)       at coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:420)       at coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:383)       at coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:95)       at coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:334)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:231)       at coldfusion.runtime.CfJspPage._invokeUDF(CfJspPage.java:2845)       at cfmach2dii2ecfc1440816939$funcONREQUESTSTART.runFunction(D:\JO3\jobOffice\MachII\mach-ii.cfc:121)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:487)       at coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:420)       at coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:383)       at coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:95)       at coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:334)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:231)       at coldfusion.runtime.CfJspPage._invokeUDF(CfJspPage.java:2845)       at coldfusion.runtime.CfJspPage._invoke(CfJspPage.java:2503)       at cfApplication2ecfc1530162842$funcONREQUESTSTART.runFunction(D:\JO3\wwwroot\Application.cfc:233)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:487)       at coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:420)       at coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:383)       at coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:95)       at coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:334)       at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:231)       at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:643)       at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:432)       at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:402)       at coldfusion.runtime.AppEventInvoker.invoke(AppEventInvoker.java:108)       at coldfusion.runtime.AppEventInvoker.onRequestStart(AppEventInvoker.java:279)       at coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:455)       at coldfusion.filter.MonitoringFilter.invoke(MonitoringFilter.java:40)       at coldfusion.filter.PathFilter.invoke(PathFilter.java:142)       at coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:94)       at coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28)       at coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:38)       at coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:58)       at coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38)       at coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)       at coldfusion.filter.CachingFilter.invoke(CachingFilter.java:62)       at coldfusion.CfmServlet.service(CfmServlet.java:219)       at coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89)       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)       at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)       at coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42)       at coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)       at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)       at sun.reflect.GeneratedMethodAccessor87.invoke(Unknown Source)       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)       at java.lang.reflect.Method.invoke(Method.java:497)       at com.intergral.fusionreactor.j2ee.filterchain.WrappedFilterChain.doFilter(WrappedFilterChain.java:97)       at com.intergral.fusionreactor.j2ee.filter.FusionReactorRequestHandler.doNext(FusionReactorRequestHandler.java:472)       at com.intergral.fusionreactor.j2ee.filter.FusionReactorRequestHandler.doHttpServletRequest(FusionReactorRequestHandler.java:312)       at com.intergral.fusionreactor.j2ee.filter.FusionReactorRequestHandler.doFusionRequest(FusionReactorRequestHandler.java:192)       at com.intergral.fusionreactor.j2ee.filter.FusionReactorRequestHandler.handle(FusionReactorRequestHandler.java:507)       at com.intergral.fusionreactor.j2ee.filter.FusionReactorCoreFilter.doFilter(FusionReactorCoreFilter.java:36)       at sun.reflect.GeneratedMethodAccessor72.invoke(Unknown Source)       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)       at java.lang.reflect.Method.invoke(Method.java:497)       at com.intergral.fusionreactor.j2ee.filterchain.WrappedFilterChain.doFilter(WrappedFilterChain.java:79)       at sun.reflect.GeneratedMethodAccessor59.invoke(Unknown Source)       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)       at java.lang.reflect.Method.invoke(Method.java:497)       at com.intergral.fusionreactor.agent.filter.FusionReactorStaticFilter.doFilter(FusionReactorStaticFilter.java:53)       at com.intergral.fusionreactor.agent.pointcuts.NewFilterChainPointCut$1.invoke(NewFilterChainPointCut.java:41)       at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java)       at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)       at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)       at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:501)       at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)       at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)       at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)       at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:422)       at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:199)       at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607)       at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)       - locked &lt;0x000000051d486850> (a org.apache.tomcat.util.net.SocketWrapper)       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)       at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)       at java.lang.Thread.run(Thread.java:745)</p> </blockquote>  <p>My question is: how do I track down what [0x00000000487cb000] is? It seems like it's coming from withing the JVM itself. (ie, not a user-code generated wait).</p>