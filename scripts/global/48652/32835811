<p>Currently i'am developing a some messaging application. Server side can take me a text with some bb codes: <code>Check this out! :) [IMG]http://somedomain.com/image.jpg[/IMG] [IMG]http://domain.com/image3.jpg[/IMG]</code></p>  <p>For parsing smiles i use these code:</p>  <pre><code>public class BbCodedText { private static final Factory spannableFactory = Spannable.Factory         .getInstance();  private static final Map&lt;Pattern, Integer&gt; emoticons = new HashMap&lt;Pattern, Integer&gt;();  static {     addPattern(emoticons, ":)", R.drawable.smile_face);     addPattern(emoticons, ":))", R.drawable.smile_very_face);     addPattern(emoticons, ":)))", R.drawable.joy_face); }  private static void addPattern(Map&lt;Pattern, Integer&gt; map, String smile,                                int resource) {     map.put(Pattern.compile(Pattern.quote(smile)), resource); }  public static boolean addSmiles(Context context, Spannable spannable) {     boolean hasChanges = false;     for (Map.Entry&lt;Pattern, Integer&gt; entry : emoticons.entrySet()) {         Matcher matcher = entry.getKey().matcher(spannable);         while (matcher.find()) {             boolean set = true;             for (ImageSpan span : spannable.getSpans(matcher.start(), matcher.end(), ImageSpan.class))                 if (spannable.getSpanStart(span) &gt;= matcher.start()                         &amp;&amp; spannable.getSpanEnd(span) &lt;= matcher.end())                     spannable.removeSpan(span);                 else {                     set = false;                     break;                 }             if (set) {                 hasChanges = true;                  Drawable emoji = ContextCompat.getDrawable(context, entry.getValue());                 emoji.setBounds(0,0, 30, 30);                   spannable.setSpan(                         new ImageSpan(emoji, ImageSpan.ALIGN_BASELINE),                         matcher.start(), matcher.end(),                         Spannable.SPAN_EXCLUSIVE_EXCLUSIVE                 );             }         }     }      return hasChanges; }  public static Spannable getSmiledText(Context context, CharSequence text) {     Spannable spannable = spannableFactory.newSpannable(text);     addSmiles(context, spannable);     return spannable; } } </code></pre>  <p>And smiles works fine:</p>  <p><a href="http://i.stack.imgur.com/covoq.png" rel="nofollow"><img src="http://i.stack.imgur.com/covoq.png" alt="enter image description here"></a></p>  <p>But how i can change my Adapter, Activity, or somethins else to use images in chat message like this:</p>  <p><a href="http://i.stack.imgur.com/fr3Tm.png" rel="nofollow"><img src="http://i.stack.imgur.com/fr3Tm.png" alt="enter image description here"></a></p>