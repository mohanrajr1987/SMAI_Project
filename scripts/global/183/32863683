<p>I'm trying to call an Azure API App configured with Azure AD authentication. Assume for the purposes of this question I cannot use the Azure SDK and need to write code to get a token and insert it into the API request.*</p>  <p>I have established that there are two modes - 'client flow' and 'server flow', where client flow entails following at least one redirect to an issuer to get a token, and server flow where the server does this for you. Since I'm talking about doing this in code, following redirects would be possible but fiddly, so I'd prefer to use a mode where the URI or URIs to visit are known ahead of time and return content, rather than redirecting. The following diagram illustrates how the gateway routes all requests.</p>  <p><a href="http://i.stack.imgur.com/oB1qn.png" rel="nofollow"><img src="http://i.stack.imgur.com/oB1qn.png" alt="API app credential flow"></a></p>  <p>I think the mode I need is client flow, which would go something like:</p>  <ul> <li>Get an access token from the identity provider (which is what? how do I find out where this resides? what is the format of the request I have to send to the IdP?)</li> <li>Pass the access token to the gateway (in what format?)</li> <li>Receive another token in the gateway response</li> <li>Supply this token in a header when making an API request (which header?)</li> </ul>  <p>How am I supposed to do this? The Azure documentation doesn't give enough detail about how it works, and expects all users to just use the SDK, which hides what is actually happening.</p>  <p><em>The actual reason is that ultimately this will need to be called from BizTalk, which uses the WCF WebHttpBinding to call restful services. I'm writing a custom behaviour to insert a token header into the request, but I need to know how this token should be acquired. It's possible to run arbitrary code in BizTalk but trying to do this makes the solution complicated, and config-only or mostly-config with minimal, loosely-coupled code is the simpler solution</em></p>