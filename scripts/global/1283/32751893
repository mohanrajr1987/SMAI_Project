<p>I am making 2 classes for Chat server client for a project I am working on. The problem is server can see the message that sent to it(from client) and it can send those messages out to every clients <strong>BUT</strong> each client has to type in some input first if he wants to see the message from other users. I have no clue what I did wrong. Please help me out. Thanks in advance :)</p>  <p>Server Class</p>  <pre><code>import java.net.*;  import java.util.ArrayList; import java.io.*;   public class TestServer extends Thread {  protected Socket clientSocket; public static ArrayList&lt;Socket&gt; ConnectionArray = new ArrayList&lt;Socket&gt;(); public static ArrayList&lt;String&gt; CurrentUsers = new ArrayList&lt;String&gt;(); final static int PORT = 22;  public static void main(String[] args) throws IOException  {      ServerSocket serverSocket = null;       try     {                    serverSocket = new ServerSocket(PORT);          System.out.println ("Connection Socket Created");         try          {              while (true)             {                  System.out.println ("Waiting for Connection");                  Socket sock = serverSocket.accept();                  ConnectionArray.add(sock);                  System.out.println("Client connected from: " + sock.getLocalAddress().getHostName());                                     new TestServer (sock);                                }         }         catch (IOException e)          {              System.err.println("Accept failed.");              System.exit(1);          }      }      catch (IOException e)      {           System.err.println("Could not listen on port: " + PORT);           System.exit(1);      }      finally     {          try {               serverSocket.close();               }          catch (IOException e)              {                System.err.println("Could not close port: 10008.");                System.exit(1);               }          }    }      private TestServer (Socket inSock)   {     clientSocket = inSock;     start();   }  public void run() {     System.out.println ("New Communication Thread Started");     //System.out.println ("Client connected from: " + sock.getLocalAddress().getHostName());      try {           PrintWriter out = new PrintWriter(clientSocket.getOutputStream(),true);           BufferedReader in = new BufferedReader(new InputStreamReader( clientSocket.getInputStream()));            String inputLine;            while (true)               {                  inputLine = in.readLine();                 System.out.println ("Server: " + inputLine);                       for(int i = 1; i &lt;= TestServer.ConnectionArray.size(); i++)                     {                            System.out.println("Total Connection: " + ConnectionArray.size());                         Socket TEMP_SOCK = (Socket) TestServer.ConnectionArray.get(i-1);                         if (clientSocket != TEMP_SOCK)                        {                             PrintWriter TEMP_OUT = new PrintWriter(TEMP_SOCK.getOutputStream(), true);                             TEMP_OUT.println(inputLine);                             TEMP_OUT.flush();                                                           System.out.println("Sending to: " + TEMP_SOCK.getLocalAddress().getHostName());                        }                     }                   if (inputLine.equals("Bye."))                    break;               }               out.close();               in.close();               clientSocket.close();      }      catch (IOException e)      {           System.err.println("Problem with Communication Server");          System.exit(1);      }  } }  </code></pre>  <p>Client Class</p>  <pre><code>import java.io.*; import java.net.*;  public class TestClient  { public static void main(String[] args) throws IOException  {      String serverHostname = new String ("127.0.0.1");      if (args.length &gt; 0)        serverHostname = args[0];     System.out.println ("Attemping to connect to host " +             serverHostname);      Socket echoSocket = null;     PrintWriter out = null;     BufferedReader in = null;      try {         echoSocket = new Socket(serverHostname, 22);         out = new PrintWriter(echoSocket.getOutputStream(), true);         in = new BufferedReader(new InputStreamReader(echoSocket.getInputStream()));     } catch (UnknownHostException e) {         System.err.println("Don't know about host: " + serverHostname);         System.exit(1);     } catch (IOException e) {         System.err.println("Couldn't get I/O for "                            + "the connection to: " + serverHostname);         System.exit(1);     }      BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));     String userInput;      System.out.println ("Type Message (\"Bye.\" to quit)");     while ((userInput = stdIn.readLine()) != null)      {                    out.println(userInput);                   if (userInput.equals("Bye."))             break;          System.out.println("Other user: " + in.readLine());     }         out.close();         in.close();         stdIn.close();         echoSocket.close();    } } </code></pre>