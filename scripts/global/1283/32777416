<p>I am using an apollo broker and mosquitto C client library. After successfully publishing the message I disconnect the client using the mosquitto_disconnect(mosq) function. but it looks like the port that the client used to connect with the broker is still not free. Is there any way to manually free the port that the client used to connect with the broker in a c program?</p>  <pre><code>void on_publish(struct mosquitto *mosq, void *userdata, int mid) {      mosquitto_disconnect(mosq);      log_print("mqtt",1,"Inside publish callback");   }  int sendData_mqtt(char *address, char *port, char* url, char *data) {     struct mosquitto *mosq;     int err;      char *clean_session = "true";     char *retain_flag = "true";     int port1= atoi(port);      mosq = mosquitto_new("unknown", clean_session, NULL);     mosquitto_publish_callback_set(mosq, on_publish);      mosquitto_username_pw_set(mosq,"admin","password");      err=mosquitto_connect(mosq, address,port1,60);     if(err != 0 ){         log_print("mqtt",1,"connect error= %s\n",mosquitto_strerror(err));         return -1;     }         else              log_print("mqtt",1,"successfully connected");     err = mosquitto_publish(mosq, NULL, "subject", strlen(data), data, 1, retain_flag);      sleep(5);     if(err != 0 ) {         log_print("mqtt",1,"Publish error = %s\n",mosquitto_strerror(err));         return -1;         }        mosquitto_loop_forever(mosq,-1,1);       return 10;   } </code></pre>