<p>sorry for my english but I speak in Spanish</p>  <p>I have a program that works in sdk 15 to 21 (I have updated the build.gradle in sdk 22), but when you use SDK 22 generates me the following error:</p>  <pre><code>java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.String java.net.InetAddress.getHostAddress()' on a null object reference </code></pre>  <p>here code</p>  <pre><code>public class Server {      SocketServerReplyThread socketServerReplyThread;      public Server(Socket socket, int c, String ip, String cadenatalleres, String txtPORT, int origen, Context ctx, String imei)     {         socketServerReplyThread = new SocketServerReplyThread(                 c,                 socket.getInetAddress().getHostAddress(),     &lt;&lt;&lt;------- ERROR HERE                 cadenatalleres,                 txtPORT,                 origen,                 ctx,                 imei);          try {             socket.close();         } catch (IOException e) {             e.printStackTrace();         }     }      public void Ejecutar(){         socketServerReplyThread.run();     }      private class SocketServerReplyThread extends Thread{          private Socket hostThreadSocket;         int cnt;         String iplocal;         String cadenatalleresloc;         String txtPORT;         int origen;         Context ctx;         String imei;           //Constructor de la clase que recibe socket y cantidad de aparatos conectados         SocketServerReplyThread(int c, String ip, String cadenatalleres,String txtPORT, int origen,Context ctx,String imei)         {             this.cnt = c;             this.iplocal =ip;             this.cadenatalleresloc = cadenatalleres;             this.txtPORT = txtPORT;             this.origen = origen;             this.ctx = ctx;             this.imei = imei;         }          @Override         public void run(){             ...             }catch (Exception e){                 e.printStackTrace();             }         }     } } </code></pre>  <p>help plis... i same trid using</p>  <pre><code>socket.getInetAddress().toString().substring(1, socket.getInetAddress().toString().length()), </code></pre>