<p>I'm collecting temperatures in CouchDB and would like to query for the average temperature by room, year, month, day, hour.  Unfortunately, when I execute my query (see below) I'm getting all months, not just the month I specify in my query. However, if I specify just a single room I get only the month I specify in my query.  How do I query all rooms for just a specified period?</p>  <p><strong>Map Function:</strong></p>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-js lang-js prettyprint-override"><code>function(doc) {   if(doc.type == "TempHumid"){ 	var d = new Date(doc.datetime); 	for(var i in doc.path)     		emit([doc.path[i], d.getFullYear(),d.getMonth() + 1,d.getDate(), d.getHours()], +doc.temp); 	} }</code></pre> </div> </div> </p>  <p><strong>Reduce Function:</strong></p>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-js lang-js prettyprint-override"><code>function(keys, values, rereduce) {     var avg, length;     if (!rereduce){        length = values.length 	var total = sum(values) 	avg = parseFloat(total / length).toFixed(2)     }else{         length = sum(values.map(function(v){return v[1]}))         avg = parseFloat(sum(values.map(function(v){             return v[0] * (v[1] / length)             }))).toFixed(2)     }     return [avg, length] }</code></pre> </div> </div> </p>  <p><strong>Query All Rooms:</strong></p>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-js lang-js prettyprint-override"><code>http://127.0.0.1:5984/dev_data_v2/_design/views/_view/avg_temp?reduce=true&amp;group_level=3&amp;startkey=["a",2015,9,1,0]&amp;endkey=["z",2015,10,1,0]</code></pre> </div> </div> </p>  <p><strong>Query Result:</strong></p>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-js lang-js prettyprint-override"><code>{"rows":[   {"key":["Bedroom 1",2015,9],"value":["73.63",2292]},   {"key":["Home",2015,8],"value":["75.27",1476]},   {"key":["Home",2015,9],"value":["74.59",14859]},   {"key":["Bedroom 2",2015,8],"value":["81.16",8]},   {"key":["Bedroom 2",2015,9],"value":["73.88",2964]},   {"key":["Kitchen",2015,9],"value":["74.44",3352]},   {"key":["Main Level",2015,9],"value":["74.43",3352]},   {"key":["Bedroom 3",2015,8],"value":["75.35",705]},   {"key":["Bedroom 3",2015,9],"value":["75.72",3270]},   {"key":["Office",2015,8],"value":["75.14",763]},   {"key":["Office",2015,9],"value":["74.98",2981]},   {"key":["Upstairs",2015,8],"value":["75.27",1476]},   {"key":["Upstairs",2015,9],"value":["74.64",11507]} ]}</code></pre> </div> </div> </p>  <p><strong>Query All Rooms:</strong></p>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-js lang-js prettyprint-override"><code>http://127.0.0.1:5984/dev_data_v2/_design/views/_view/avg_temp?reduce=true&amp;group_level=3&amp;startkey=["Bedroom 2",2015,9,1,0]&amp;endkey=["Bedroom 2",2015,10,1,0]</code></pre> </div> </div> </p>  <p><strong>Query Result:</strong></p>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-js lang-js prettyprint-override"><code>{"rows":[   {"key":["Bedroom 2",2015,9],"value":["73.88",2964]} ]}</code></pre> </div> </div> </p>