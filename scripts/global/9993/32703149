<p>How can i fix this error, it happens when i'm trying to deposit a skin. TypeError:Cannot read property 'length' of undefined</p>  <p>Code:</p>  <pre><code>        if(row.length &gt; 0)      {                 mysqlConnection.query('UPDATE `games` SET `starttime`=UNIX_TIMESTAMP() WHERE `id` = \'' + current_game + '\'', function(err, row, fields) {});         } </code></pre>  <p>Added more code This is the full function code for the bot, if you need to full code set, let me know:</p>  <pre><code>function checkoffers(number) {     if (number &gt; 0) {         offers.getOffers({             get_received_offers: 1,             active_only: 1,             get_sent_offers: 0,             get_descriptions: 1,             language: "en_us"         }, function(error, body) {             if(error) return;             if(body.response.trade_offers_received){                 body.response.trade_offers_received.forEach(function(offer) {                     if (offer.trade_offer_state == 2){                         if(offer.items_to_give) {                             offers.declineOffer({tradeOfferId: offer.tradeofferid});                             return;                         }                         mysqlConnection.query('SELECT `value` FROM `info` WHERE `name`=\'maxitems\'', function(err, row, fields) {                             if(offer.items_to_receive.length &gt; 10) {                                 offers.declineOffer({tradeOfferId: offer.tradeofferid});                                 offer.items_to_receive = [];                                 mysqlConnection.query('INSERT INTO `messages` (`userid`,`msg`,`from`) VALUES (\''+offer.steamid_other+'\',\'toomuch\',\'System\')', function(err, row, fields) {});                                 return;                             }                         });                         offers.loadPartnerInventory({partnerSteamId: offer.steamid_other, appId: 730, contextId: 2, tradeOfferId: offer.tradeofferid, language: "en"}, function(err, hitems) {                             if(err) {                                 steam.webLogOn(function(newCookie) {                                     offers.setup({                                         sessionID: globalSessionID,                                         webCookie: newCookie                                     }, function(err) {                                         if (err) {                                         }                                     });                                 });                                 recheck = true;                                 return;                             }                             var items = offer.items_to_receive;                             var wgg=[],num=0;                             for (var i = 0; i &lt; items.length; i++) {                                 for(var j=0; j &lt; hitems.length; j++) {                                     if(items[i].assetid == hitems[j].id) {                                         wgg[num] = hitems[j];                                         num++;                                         break;                                     }                                 }                             }                             var price=[];                             for(var i=0; i &lt; num; i++) {                                 if(wgg[i].appid != 730) {                                     offers.declineOffer({tradeOfferId: offer.tradeofferid});                                     mysqlConnection.query('INSERT INTO `messages` (`userid`,`msg`,`from`) VALUES (\''+offer.steamid_other+'\',\'onlycsgo\',\'System\')', function(err, row, fields) {});                                     return;                                 }                                 if(wgg[i].market_name.indexOf("Souvenir") != -1) {                                     offers.declineOffer({tradeOfferId: offer.tradeofferid});                                     mysqlConnection.query('INSERT INTO `messages` (`userid`,`msg`,`from`) VALUES (\''+offer.steamid_other+'\',\'souvenir\',\'System\')', function(err, row, fields) {});                                     return;                                 }                                 var itemname = wgg[i].market_name;                                 var url = 'http://'+sitename+'/cost.php?item='+encodeURIComponent(itemname);                                 (function(someshit) {                                 request(url, function(error, response, body){                                     if(!error &amp;&amp; response.statusCode === 200){                                         if(body == "notfound") { offers.declineOffer({tradeOfferId: offer.tradeofferid}); mysqlConnection.query('INSERT INTO `messages` (`userid`,`msg`,`from`) VALUES (\''+offer.steamid_other+'\',\'notavailable\',\'System\')', function(err, row, fields) {}); }                                         else {                                             wgg[someshit].cost = parseFloat(body);                                         }                                     } else offers.declineOffer({tradeOfferId: offer.tradeofferid});                                 });})(i)                             }                             setTimeout(function() {                                 var sum=0;                                 for(var i=0; i &lt; num; i++) {                                     sum += wgg[i].cost;                                 }                                 mysqlConnection.query('SELECT `value` FROM `info` WHERE `name`=\'minbet\'', function(err, row, fields) {                                     if(sum &lt; 0.10) {                                          num = 0;                                         offers.declineOffer({tradeOfferId: offer.tradeofferid});                                         mysqlConnection.query('INSERT INTO `messages` (`userid`,`msg`,`from`) VALUES (\''+offer.steamid_other+'\',\'toosmall!\',\'System\')', function(err, row, fields) {});                                         return;                                     }                                 });                                                 steamuserinfo.getUserInfo(offer.steamid_other, function(error, data){                                                     if(error) throw error;                                                     var datadec = JSON.parse(JSON.stringify(data.response));                                                     var name = datadec.players[0].personaname;                                                     var avatar = datadec.players[0].avatarfull;                                                      if(num == 0) return;                                                      mysqlConnection.query('SELECT `value` FROM `info` WHERE `name`=\'current_game\'', function(err, row, fields) {                                                         var current_game = (1);                                                         mysqlConnection.query('SELECT `cost`,`itemsnum` FROM `games` WHERE `id`=\''+current_game+'\'', function(err, row, fields) {                                                             var current_bank = parseFloat(0);                                                             var itemsnum = 50;                                                          if(row.length &gt; 0)      {                                                                  mysqlConnection.query('UPDATE `games` SET `starttime`=UNIX_TIMESTAMP() WHERE `id` = \'' + current_game + '\'', function(err, row, fields) {});                                                             }                                                              for(var j=0; j &lt; num; j++) {                                                                 mysqlConnection.query('INSERT INTO `game' + current_game + '` (`userid`,`username`,`item`,`color`,`value`,`avatar`,`image`,`from`,`to`) VALUES (\'' + offer.steamid_other + '\',\'' + name + '\',\'' + wgg[j].market_name + '\',\'' + wgg[j].name_color + '\',\'' + wgg[j].cost + '\',\'' + avatar + '\',\'' + wgg[j].icon_url + '\',\''+current_bank+'\'+\'0\',\''+current_bank+'\'+\''+wgg[j].cost+'\')', function(err, row, fields) {});                                                                 mysqlConnection.query('UPDATE `games` SET `itemsnum`=`itemsnum`+1, `cost`=`cost`+\''+wgg[j].cost+'\' WHERE `id` = \'' + current_game + '\'', function(err, row, fields) {});                                                                 current_bank = parseFloat(current_bank + wgg[j].cost);                                                                 itemsnum++;                                                             }                                                               if(itemsnum &gt; 50) {                                                                 proceedWinners();                                                             }                                                             offers.acceptOffer({tradeOfferId: offer.tradeofferid});                                                             console.log('Accepted trade offer #'+offer.tradeofferid+' by '+name+' ('+offer.steamid_other+')');                                                         });                                                     });                                                 });                                 },3000);                         });                     }                 });             }         });     } } </code></pre>  <p>Let me know if i need you need more to help me :)</p>