<pre><code>import math, functools  def splitPairs(word):    return [(word[:i+1], word[i+1:]) for i in range(len(word))]  def segment(word):    if not word: return []    allSegmentations = [[first] + segment(rest)                        for (first, rest) in splitPairs(word)]    return max(allSegmentations, key = wordSeqFitness)  class OneGramDist(dict):     def __init__(self):         self.gramCount = 0         for line in open('Norvig Word Library.txt'):             (word, count) = line[:-1].split('\t')             self[word] = int(count)             self.gramCount += self[word]      def __call__(self, word):         if word in self:             return float(self[word]) / self.gramCount         else:             return 1.0/ self.gramCount  singleWordProb = OneGramDist()  def wordSegFitness(words):     return functools.reduce(lambda x,y: x+y),     (math.log10(singleWordProblem(w)) for w in words) </code></pre>  <p>I'm trying to improve the word segmentation in some text files I have. Some of the words contained in the file have been joined together (e.g. <code>hellothere</code> or <code>himynameis</code>), and they need to be split apart using Na√Øve Bayesian segmentation. I'm trying to call <code>segment(word)</code> where <code>word = "hellothere"</code>, and am getting the error <code>NameError: global name 'wordSeqFitness' is not defined</code>. I define the method all right, but I don't know why I can't run <code>segment()</code>.</p>