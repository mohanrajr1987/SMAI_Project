<p>I have problem with PDO and commiting multiqueries. Here is my php code:</p>  <pre><code>public function executeSql($multiQuery, $conn) {     $arrQuery = mb_split(';\s*?(-- )?.*?\n', $multiQuery);      $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);      $conn-&gt;beginTransaction();     try {         foreach ($arrQuery as $query) {             if (strlen(trim($query)) &gt; 0) {                 echo "&lt;BR&gt;&lt;BR&gt;" . $query;                 $conn-&gt;exec($query);             }         }     } catch (Exception $e) {         echo "&lt;hr&gt;RollBack";         $conn-&gt;rollback();         throw $e;     }     echo "&lt;hr&gt;Commit";     $conn-&gt;commit();     return true; } </code></pre>  <p>And my SQL:</p>  <pre><code>INSERT INTO config_new SET nazwa='test', wartosc=123;  ALTER TABLE `koszty_rodzaje` DROP FOREIGN KEY `koszty_rodzaje_ibfk_2`, ADD FOREIGN KEY (`temat_id`) REFERENCES `tematy` (`temat_id`) ON DELETE CASCADE ON UPDATE CASCADE; </code></pre>  <p>Second query generates error, but first is always inserted :/</p>  <p>Here is my response:</p>  <pre><code>INSERT INTO config_new SET nazwa = 'dummy', wartosc = 1;  ALTER TABLE `koszty_rodzaje` DROP FOREIGN KEY `koszty_rodzaje_ibfk_2`, ADD FOREIGN KEY (`temat_id`) REFERENCES `tematy` ( `temat_id` ) ON DELETE CASCADE ON UPDATE CASCADE;   INSERT INTO config_new SET nazwa='test', wartosc=123  ALTER TABLE `koszty_rodzaje` DROP FOREIGN KEY `koszty_rodzaje_ibfk_2`, ADD FOREIGN KEY (`temat_id`) REFERENCES `tematy` (`temat_id`) ON DELETE CASCADE ON UPDATE CASCADE; RollBack Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000]:  General error: 1025 Error on rename of  './smaczny39/koszty_rodzaje' to './smaczny39/#sql2-3212-dafd68'  (errno: 152)' in /glowna/funkcje/klient.class.php:502   Stack trace: #0 /glowna/funkcje/klient.class.php(502):    PDO-&gt;exec('???ALTER TABLE ...') #1 /glowna/funkcje/klient.class.php(550):    cl_klient-&gt;executeSql('INSERT INTO con...', Object(PDO))    #2 /glowna/admin.php(41):     cl_klient-&gt;cron_aktualizuj_baze_klienta('1111', '2.0.0-pre.1')    #3 {main} thrown in /glowna/funkcje/klient.class.php on line 502 </code></pre>  <p>As You see <code>RollBack</code> is executed and no <code>Commit</code> so why first query is inserted in DB?</p>  <p>If I give query like this:</p>  <pre><code>INSERT INTO config_new SET nazwa='test', wartosc=123;  INSERT INTO config_new SET nazwa=testa, wartosc=123; </code></pre>  <p>Also got error and no new values are inserted so works as it should.</p>