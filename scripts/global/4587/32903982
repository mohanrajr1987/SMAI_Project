<p>I'm stuck at MongoDB. I have two collections: <strong>col1</strong> and <strong>col2</strong> with the following data:</p>  <p><strong>col1</strong></p>  <pre><code>{"_id": 1, "_value": {"property":"test"}} </code></pre>  <p><strong>col2</strong></p>  <pre><code>{"_id": 1, "_value": {"another_property":"another_test"}} </code></pre>  <p>What I want is to merge these two documents and insert it to a third collection. Here is my code:</p>  <pre class="lang-php prettyprint-override"><code>$mapCol1 = new \MongoCode('function() {emit(this._id, {col1 : this._value, col2 : null});}'); $mapCol2 = new \MongoCode('function() {emit(this._id, {col2: this._value, col1 : null});}'); $reduce = new \MongoCode('     function(key, values) {         var result = {col1: null, col2: null};          values.forEach(function(value) {             result.col2 = value.col2;             if (value.col1 !== null &amp;&amp; result.col1 === null) {                 result.col1 = value.col1;             }         });          return result;     } ');  $this-&gt;connection-&gt;command(     [         'mapreduce' =&gt; 'col1',         'map' =&gt; $mapCol1,         'reduce' =&gt; $reduce,         'out' =&gt; 'reduced',     ],     [         'socketTimeoutMS' =&gt; -1,     ] ); $this-&gt;connection-&gt;command(     [         'mapreduce' =&gt; 'col2',         'map' =&gt; $mapCol2,         'reduce' =&gt; $reduce,         'out' =&gt; 'reduced',     ],     [         'socketTimeoutMS' =&gt; -1,     ] ); </code></pre>  <p>But for some reason I get this as a result:</p>  <pre><code>db.reduced.find() { "_id" : "1", "value" : {"col2" : {"another_property":"another_test"}, "col1" : null} } </code></pre>  <p>I can't figure out why <strong>col1</strong> is always null.</p>  <p>Thanks.</p>