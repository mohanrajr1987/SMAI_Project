<p>I've created nodeJS application which need to create server which works OK like following in file server.js</p>  <pre><code>http.createServer(app).listen(app.get('port'), function (err) {     if (err) {         console.error(err);     } else {         runProcess();         console.log('Server listening on port ' + app.get('port'));     } }); </code></pre>  <p>Now I need to pass this server to some file and my app built like following</p>  <pre><code>server.js   app.js   routes.js    action.js </code></pre>  <p>So I did it quick like following,<strong>There is better way to do that ?</strong> </p>  <p>this is the <strong>server.js</strong> after the changes</p>  <pre><code>var server = http.createServer(app); app.setServer(server); server.createServer(app).listen(app.get('port'), function (err) {     if (err) {         console.error(err);     } else {         runProcess();         console.log('Server listening on port ' + app.get('port'));     } }); </code></pre>  <p>in the <strong>app.js</strong> I've the router file and I did like following</p>  <pre><code>app.use('/', routes.router, function (req, res, next) {     next(); });  app.setServer = function(http) {     routes.setServer(http); }  module.exports = app; </code></pre>  <p>This code I put in the <strong>router.js</strong> file</p>  <pre><code>module.exports = {     router: applicationRouters,     setServer: function(http) {         //here I set server to the file action.js         action.setServer(http);     } } </code></pre>  <p>and in the action js I do the following</p>  <pre><code>module.exports = {     setServer: function(http) { </code></pre>  <p>...</p>  <p>is there is better/nicer way to write it in nodeJS ?</p>