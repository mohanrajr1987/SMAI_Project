<p>Hey I've been trying to upgrade a rails app from rails 3 to rails 4 and one of the things I'm having trouble with is working on a gem that has a conditional <code>has_one</code> association that will syntactically work with both versions. See below: </p>  <p>Rails 3 syntax:</p>  <pre><code>has_one :foo,    class_name: 'Gem::Foo', foreign_key: :foo_key, primary_key: :bar_key   conditions: proc { proc_logic } </code></pre>  <p>Rails 4 syntax: </p>  <pre><code>has_one :foo,   -&gt; { where( proc_logic in where clause) },    class_name: 'Gem::Foo', foreign_key: :foo_key, primary_key: :bar_key </code></pre>  <p>It seems that both ways of implementing <code>conditions</code> on a Rails association are mutually exclusive (deprecated in Rails 4, incompatible in Rails 3). Is there a way to reach a compromise so that the code will work on both rails versions? </p>