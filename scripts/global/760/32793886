<p>I have a single node file which does the following:</p>  <p>It listens on two ports: 80 and 443 (for https). It redirects connections on 80 to 443.</p>  <p>And on 443 is a reverse proxy that does a round-robin redirects to several local servers over plain http.</p>  <p>The problem that I have is that in the actual target servers, I am unable to get the actual remote IP address of the browser. I get the address of the reverse proxy. The request is made by the reverse proxy, so thats expected I guess.</p>  <p>So, I did the following in the reverse proxy (only relevant code lines shown):</p>  <pre><code>    proxy = httpProxy.createServer();      var https_app = express();     https.createServer(sslCerts, https_app).listen(443, function () {      ...     });       https_app.all("/",function(req, res) {         ...         //res.append('X-Forwarded-For',req.connection.remoteAddress);         proxy.web(req,res, {target: local_server});         ...     } </code></pre>  <p>I need to do something like res.append('X-Forwarded-For',req.connection.remoteAddress) to the proxy server.. in its request header.  The issue of setting the address is secondary. I first need to set the header itself which can be read by the target server.  The proxy itself does not set this header, which I think it should by default. Or should it? Or does it and I am doing something wrong to read it?</p>