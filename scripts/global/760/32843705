<p>i want:: WIFI settings -> advanced -> DHCP - > proxy manual -> and then put host name and port no here</p>  <p>Below to lollipop my code is working but in lollipop its not working please help </p>  <p>code is here </p>  <pre><code>        //get the current wifi configuration         WifiManager manager = (WifiManager)getSystemService(Context.WIFI_SERVICE);         WifiConfiguration config = GetCurrentWifiConfiguration(manager);         if(null == config)             return;          try         {             //get the link properties from the wifi configuration             Object linkProperties = getField(config, "linkProperties");             if(null == linkProperties)                 return;              //get the setHttpProxy method for LinkProperties             Class proxyPropertiesClass = Class.forName("android.net.ProxyProperties");             Class[] setHttpProxyParams = new Class[1];             setHttpProxyParams[0] = proxyPropertiesClass;             Class lpClass = Class.forName("android.net.LinkProperties");             Method setHttpProxy = lpClass.getDeclaredMethod("setHttpProxy", setHttpProxyParams);             setHttpProxy.setAccessible(true);              //get ProxyProperties constructor             Class[] proxyPropertiesCtorParamTypes = new Class[3];             proxyPropertiesCtorParamTypes[0] = String.class;             proxyPropertiesCtorParamTypes[1] = int.class;             proxyPropertiesCtorParamTypes[2] = String.class;              Constructor proxyPropertiesCtor = proxyPropertiesClass.getConstructor(proxyPropertiesCtorParamTypes);              //create the parameters for the constructor             Object[] proxyPropertiesCtorParams = new Object[3];             proxyPropertiesCtorParams[0] = "XXX.XXX.X.XX";             proxyPropertiesCtorParams[1] = 8118;             proxyPropertiesCtorParams[2] = null;              //create a new object using the params             Object proxySettings = proxyPropertiesCtor.newInstance(proxyPropertiesCtorParams);              //pass the new object to setHttpProxy             Object[] params = new Object[1];             params[0] = proxySettings;             setHttpProxy.invoke(linkProperties, params);              setProxySettings("STATIC", config);              //save the settings             manager.updateNetwork(config);             manager.disconnect();             manager.reconnect();         }            catch(Exception e)         {             e.printStackTrace();             System.out.println("error");         } </code></pre>  <p>Thanks in advance.</p>