<p>In brief: does <code>llvm</code>/<code>clang</code> support 'weak' attribute?</p>  <p>I'm learning some Arduino library sources (HardwareSerial.cpp to be more detailed) and i've found some interesting attribute <code>weak</code> that i've never used before:</p>  <pre><code>#if defined(HAVE_HWSERIAL0)   void serialEvent() __attribute__((weak));   bool Serial0_available() __attribute__((weak)); #endif </code></pre>  <p>I've found it interesting and i've read that linker should set it to NULL if it's not defined.</p>  <p>However in my tests with <code>clang</code> i'm unable to use it.</p>  <p>lib.cpp:</p>  <pre><code>#include "lib.h" #include &lt;stdio.h&gt;  void my_weak_func() __attribute__((weak));  void lib_func() {     printf("lib_func()\n");      if (my_weak_func)         my_weak_func(); } </code></pre>  <p>lib.h:</p>  <pre><code>#ifndef LIB_FUNC #define LIB_FUNC  void lib_func();  #endif </code></pre>  <p>main.cpp:</p>  <pre><code>#include "lib.h" #include &lt;stdio.h&gt;  #ifdef DEFINE_WEAK void my_weak_func() {     printf("my_weak_func()\n");  } #endif  int main() {      lib_func();      printf("finished\n");     return 0; } </code></pre>  <p>if i use <code>g++ lib.cpp main.cpp -o main -DDEFINE_WEAK</code> i'm able to use it:</p>  <pre><code>MBA-Anton:Weak_issue asmirnov$ ./main lib_func() my_weak_func() finished </code></pre>  <p>but if i use <code>g++ lib.cpp main.cpp -o main</code> i'm unable to link the app:</p>  <pre><code>Undefined symbols for architecture x86_64:   "my_weak_func()", referenced from:       lib_func() in lib-ceb555.o ld: symbol(s) not found for architecture x86_64 clang: error: linker command failed with exit code 1 (use -v to see invocation) </code></pre>  <p>To be more detailed about clang:</p>  <pre><code>MBA-Anton:Weak_issue asmirnov$ g++ --version Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk/usr/include/c++/4.2.1 Apple LLVM version 6.1.0 (clang-602.0.53) (based on LLVM 3.6.0svn) Target: x86_64-apple-darwin14.3.0 Thread model: posix </code></pre>  <p><strong>What should i do? Is <code>weak</code> attribute supported by llvm/clang?</strong></p>  <p>PS. I've already tried to rewrite lib.cpp in the way <a href="https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPFrameworks/Concepts/WeakLinking.html" rel="nofollow">Apple describes</a> and still the same linker error:</p>  <pre><code>#include "lib.h" #include &lt;stdio.h&gt;  extern void my_weak_func() __attribute__((weak_import));  void lib_func() {     printf("lib_func()\n");      if (my_weak_func != NULL)         my_weak_func(); } </code></pre>