<p>I want to insert record if it not exists by 2 columns, and if exists update column 3, here's the query:</p>  <pre><code>INSERT INTO aktai_islaidos_id (akto_id, islaidos_id, savikaina)        SELECT * FROM (SELECT ? as a, ? as b, ? as c) AS tmp        WHERE NOT EXISTS (              SELECT akto_id, islaidos_id, savikaina FROM aktai_islaidos_id               WHERE akto_id = a AND islaidos_id = b        ) ON DUPLICATE KEY UPDATE savikaina = VALUES(c); </code></pre>  <p>Now I'm getting error what c not exists in fields list, I understand why, but I didn't know how to complete this query correctly and didn't find any examples like what only where selects duplicate all columns, thanks!</p>  <p>EDIT: Figured out this with stored procedure:</p>  <pre><code>CREATE PROCEDURE update(        IN akt_id INT,        IN isl_id INT,        IN sav INT) BEGIN        IF (SELECT count(*) FROM aktai_islaidos_id WHERE akto_id = akt_id AND islaidos_id = isl_id) &gt; 0 THEN             BEGIN                  UPDATE aktai_islaidos_id SET savikaina = sav WHERE akto_id = akt_id AND islaidos_id = isl_id;             END;        ELSE             BEGIN                  INSERT INTO aktai_islaidos_id (akto_id, islaidos_id, savikaina) VALUES (akt_id, isl_id, sav);             END;        END IF; END </code></pre>