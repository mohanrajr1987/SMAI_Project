<p>I'm trying to proxy XML data in Sinatra to get a request from the user, make a request to the destination resource and return to the response body to the user. For instance:</p>  <pre><code>require 'sinatra' require 'sinatra/synchrony' require 'faraday' Faraday.default_adapter = :em_synchrony  get '/' do   res = Faraday.get 'https://example.com/data.xml'   res.body end </code></pre>  <p>This example works but when testing with Apache's benchmark tool it displays failed requests. For example:</p>  <pre><code>$ab -n 10 -c 3 http://127.0.0.1:4567/  Server Software:        thin Server Hostname:        127.0.0.1 Server Port:            4567  Document Path:          / Document Length:        10028 bytes  Concurrency Level:      3 Time taken for tests:   1.490 seconds Complete requests:      10 Failed requests:        6    (Connect: 0, Receive: 0, Length: 6, Exceptions: 0) Total transferred:      102362 bytes HTML transferred:       100272 bytes Requests per second:    6.71 [#/sec] (mean) Time per request:       446.952 [ms] (mean) Time per request:       148.984 [ms] (mean, across all concurrent requests) Transfer rate:          67.10 [Kbytes/sec] received  Connection Times (ms)               min  mean[+/-sd] median   max Connect:        0    0   0.0      0       0 Processing:   211  373  90.4    406     529 Waiting:      211  373  90.4    406     529 Total:        212  374  90.4    406     529  Percentage of the requests served within a certain time (ms)   50%    406   66%    416   75%    422   80%    431   90%    529   95%    529   98%    529   99%    529  100%    529 (longest request) </code></pre>  <p>The AB test fails every time in different combinations. Does someone have ideas how to fix this problem?</p>