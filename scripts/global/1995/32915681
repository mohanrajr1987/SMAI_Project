<p>I have a Hadoop cluster with 3 machines, 1 NameNode and 2 DataNodes. I was in the process of upgrading from <code>2.5.1</code> to <code>2.7.1</code> but at some point decided to stay with <code>2.5.1</code> for now temporarily. As the various hdfs commands (like <code>-ls</code>, <code>-cat</code>, <code>-copyFromLocal</code>) working and I was able to read and write files I assumed things were working fine. But I noticed  a huge amount of <code>editlog</code> files. Furthermore, the <code>fsimage</code> was stuck at the transaction <code>00000</code>. At this point I suspected that no checkpointing was made which was confirmed by entries in the logs. Then I checked the <code>VERSION</code> in both NN and DNs. Although the clusterID was the same in all 3 machines, I realized that the the <code>layoutVersion</code> was different in NameNode (-57) and DataNodes (-55). I also noticed this entry in the log (in DataNodes):</p>  <pre><code>org.apache.hadoop.hdfs.server.common.Storage: Data-node version: -55 and name-node layout version: -57 </code></pre>  <p>I have tried <code>rollingUpgrade upgrade</code> but it won't let me because apparently <code>there is nothing to upgrade</code>.</p>  <p>I have some data in the hdfs that I will need. I could <code>copyToLocal</code> everything and perform a <code>namenode format</code> and then <code>moveFromLocal</code> thereafter, but I would like to keep the data with the permission and owner information intact in the cluster.  Any suggestions?</p>