<p>I'm trying to create simple widget that return images with available thumbnails from single URL. I can't figure it out, how to pass url stored in instance <code>$chosen_image_url;</code> to <code>$image_url = '';</code> . Please Help. Widget code:</p>  <pre><code>class MyWidget extends WP_Widget {     function __construct() {         parent::__construct(         'mywidget_widget',          __( 'My Widget', 'text_domain' ),          array( 'description' =&gt; __( 'My Widget', 'text_domain' ), )      ); } public function widget($args, $instance) {      extract( $args );     $chosen_image_url = ! empty( $instance['chosen_image_url'] ) ? $instance['chosen_image_url'] : '';     echo $before_widget;      echo $chosen_image_url; // works fine, return stored url      $image_url = 'http://my-domain.com/wp-content/uploads/2015/09/chosen-images.jpg';  // image url need to be --- $chosen_image_url !!!!!!!!!     $image_id = pippin_get_image_id($image_url); // store the image ID in a var     $image_thumb = wp_get_attachment_image_src($image_id, 'large'); // retrieve the thumbnail size of our image     echo $image_thumb[0]; // works fine, display the image thumb - large   echo $after_widget;  } function update( $new_instance, $old_instance ) {     $instance = $old_instance;     $instance['chosen_image_url'] = esc_url( $new_instance['chosen_image_url'] );     return $instance; } function form( $instance ) {     $instance = wp_parse_args( (array) $instance, array(         'chosen_image_url' =&gt;  '',     ) );     $chosen_image_url = esc_url( $instance['chosen_image_url'] ); ?&gt; &lt;p&gt; &lt;label for=" &lt;?php echo $this-&gt;get_field_id( 'chosen_image_url' ); ?&gt;"&gt;     &lt;?php _e( 'Image URL', 'mywidget_widget' ); ?&gt;:&lt;/label&gt; &lt;br /&gt; &lt;input type="text" class="img widefat" name=" &lt;?php echo $this-&gt;get_field_name( 'chosen_image_url' ); ?&gt;" id=" &lt;?php echo $this-&gt;get_field_id( 'chosen_image_url' ); ?&gt;" value=" &lt;?php echo $chosen_image_url; ?&gt;" /&gt; &lt;br /&gt; &lt;input type="button" class="select-img button button-primary" value=" &lt;?php _e( 'Upload', 'mywidget_widget' ); ?&gt;" data-uploader_title=" &lt;?php _e( 'Select Image', 'mywidget_widget' ); ?&gt;" data-uploader_button_text=" &lt;?php _e( 'Choose Image', 'mywidget_widget' ); ?&gt;" style="margin:10px 0;" /&gt; &lt;/p&gt; &lt;?php } } add_action( 'widgets_init', function(){ register_widget( 'MyWidget' ); }); ?&gt; </code></pre>  <p>for Attachment ID in function.php</p>  <pre><code>function pippin_get_image_id($image_url) { global $wpdb; $attachment = $wpdb-&gt;get_col($wpdb-&gt;prepare("SELECT ID FROM $wpdb-&gt;posts WHERE guid='%s';", $image_url ));      return $attachment[0];  }  </code></pre>  <p>any help is very appreciated</p>