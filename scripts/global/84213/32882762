<p>I am having a basic collection view which has normal data-source and delegate methods. I am trying to upload the images in those cells one by one and hence trying to delete the cells which have been uploaded.</p>  <p>This is my code:-</p>  <pre><code>-(IBAction)btn_uploadRxs:(id)sender{       NSLog(@"the total assets maintained are %lu", (unsigned long)_arr_assetsMaintained.count);      NSMutableArray *mutableOperations = [NSMutableArray array];    int imageUploadCount = (int)[self extractFullSizeImagesToUpload].count;    // second for loop is to initialize the operations and then queue them.     for (int i = 0; i&lt;imageUploadCount; i++) {           NSData *imageData = UIImageJPEGRepresentation([[self extractFullSizeImagesToUpload] objectAtIndex:i],1.0);          NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];         [request setHTTPMethod:@"POST"];          NSLog(@"the url constructed is %@", [NSString stringWithFormat:@"%@/%@/%@/%@",uploadRxUrl,@"4004DD85-1421-4992-A811-8E2F3B2E49F7",@"5293",[_arr_imageNames objectAtIndex:i]]);         [request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@/%@/%@/%@.jpg",uploadRxUrl,@"4004DD85-1421-4992-A811-8E2F3B2E49F7",@"5293",[_arr_imageNames objectAtIndex:i]]]];         [request setValue:@"binary/octet-stream" forHTTPHeaderField:@"Content-Type"];          [request setHTTPBody:imageData];         AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];          [mutableOperations addObject:operation];     }       NSArray *operations = [AFURLConnectionOperation batchOfRequestOperations:mutableOperations progressBlock:^(NSUInteger numberOfFinishedOperations, NSUInteger totalNumberOfOperations) {         NSLog(@"%lu of %lu complete", numberOfFinishedOperations, totalNumberOfOperations);                 NSIndexPath * indexOfImageTobeDeleted = [_selectedItemsIndexPaths objectAtIndex:numberOfFinishedOperations-1];             [_arr_assetsMaintained removeObjectAtIndex:indexOfImageTobeDeleted.item];             [_arr_images removeObjectAtIndex:indexOfImageTobeDeleted.item];             if ( [_arr_selectedCells containsObject:[NSString stringWithFormat:@"%ld",(long)indexOfImageTobeDeleted.row]]  )             {                 [_arr_selectedCells removeObject:[NSString stringWithFormat:@"%ld",(long)indexOfImageTobeDeleted.row]];                 //[cell.img_selctedRxs setHidden:TRUE];               }             countBeforeClearingAssets = countBeforeClearingAssets - 1;             //Reload the items of UICollectionView performBatchUpdates Block             [_albumImagesCollection performBatchUpdates:^{             [_albumImagesCollection deleteItemsAtIndexPaths:@[indexOfImageTobeDeleted]];             } completion:nil];         } completionBlock:^(NSArray *operations) {         NSLog(@"All operations in batch complete");     }];      [[NSOperationQueue mainQueue] addOperations:operations waitUntilFinished:NO];      // third is to maintain the progress block for each image to be uploaded one after the other.     for (AFHTTPRequestOperation *operation in mutableOperations){          [operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {             [_progressOverLayView setAlpha:0.7f];             [_progressView setHidden:FALSE];             [_progressView setProgress: totalBytesWritten*1.0f / totalBytesExpectedToWrite animated: YES];             NSLog(@"Sent %lld of %lld bytes and progress is %f", totalBytesWritten, totalBytesExpectedToWrite, totalBytesWritten*1.0f /  totalBytesExpectedToWrite);             if(totalBytesWritten &gt;= totalBytesExpectedToWrite)             {                 //progressView.hidden = YES;                 [self setComplete];             }         }];     }  } </code></pre>  <p>I am using </p>  <pre><code>_selectedItemsIndexPaths = [_albumImagesCollection indexPathsForSelectedItems]; </code></pre>  <p>for getting the indexes of the selected cells. I am trying to delete the cell whenever the operation is completed.  The problem comes when the first cell is deleted after the first image upload, the collection view reloads and hence the <code>selectedItemsIndexPaths</code> does not get updated and then the app crashes when I try to remove an object from the array which is actually out of bounds of the current array or the selected cell index gets changed and hence the wrong cell gets deleted. </p>  <p>What is the proper way to achieve this functionality? Please suggest how to update the array of selected cell indexes.</p>