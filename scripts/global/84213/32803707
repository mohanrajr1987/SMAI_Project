<p>I have been all day trying to use a CollectionViewController instead of a ViewController. In my storyboard I have a CollectionViewController,  collection view inside, and a button inside the cell. My code is: On CollectionViewController:</p>  <pre><code>override func numberOfSectionsInCollectionView(collectionView: UICollectionView) -&gt; Int {     return 1 } override func collectionView(collectionView: UICollectionView, numberOfItemsInSection section: Int) -&gt; Int {     return numberOfButtons } override func collectionView(collectionView: UICollectionView, cellForItemAtIndexPath indexPath: NSIndexPath) -&gt; UICollectionViewCell {     let cell = collectionView.dequeueReusableCellWithReuseIdentifier(reuseIdentifier, forIndexPath: indexPath) as! CustomCollectionViewCell      cell.buttonInCell.selected = buttonsStatusList[indexPath.row]     cell.setContents(indexPath.row)     cell.updateButtonAppearance()      return cell } override func collectionView(collectionView: UICollectionView, didSelectItemAtIndexPath indexPath: NSIndexPath) {     let tappedCell = collectionView.dequeueReusableCellWithReuseIdentifier("cell", forIndexPath: indexPath) as! CustomCollectionViewCell     tappedCell.buttonInCell.selected = !tappedCell.buttonInCell.selected     buttonsStatusList[indexPath.row] = tappedCell.buttonInCell.selected     tappedCell.updateButtonAppearance() } </code></pre>  <p>In CustomCollectionViewCell I have:</p>  <pre><code>@IBOutlet weak var buttonInCell: UIButton!  let buttonBorderWidth: CGFloat = 1.0 var buttonRadius: CGFloat!  required init?(coder aDecoder: NSCoder) {     super.init(coder: aDecoder)     buttonRadius = frame.height / 2 }  func setContents(row: Int) {     buttonInCell.setTitle(String(row + 1), forState: .Normal)     buttonInCell.setTitleColor(UIColor.blueColor(), forState: UIControlState.Normal)     buttonInCell.layer.cornerRadius = buttonRadius     buttonInCell.layer.borderColor = UIColor.blueColor().CGColor     buttonInCell.layer.borderWidth = buttonBorderWidth }  func updateButtonAppearance() {     if buttonInCell.selected {         buttonInCell.setTitleColor(UIColor.whiteColor(), forState: .Normal)         buttonInCell.layer.backgroundColor = UIColor.blueColor().CGColor     } else {         buttonInCell.setTitleColor(UIColor.blueColor(), forState: .Normal)         buttonInCell.layer.backgroundColor = UIColor.whiteColor().CGColor     } } </code></pre>  <p>I guess the problem is in the connections of the Storyboard but I'm not able to find it. The error I get is: <code>Could not cast value of type 'UICollectionViewCell' (0x10c7b6408) to 'UICollectionViewController.CustomCollectionViewCell' (0x10aee8470).</code> In <code>dequeueReusableCellWithReuseIdentifier</code></p>