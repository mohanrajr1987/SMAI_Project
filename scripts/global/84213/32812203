<p>simple: I want to tap a collectionView cell=> expand it, tapping again=>collapse it.</p>  <pre><code>- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath{  UICollectionViewCell *cell = [collectionView cellForItemAtIndexPath:indexPath]; [collectionView performBatchUpdates:^()  {      if (self.previousContentOffset.y == 0) {          self.previousContentOffset = collectionView.contentOffset;      }      bool cellCollapsed = [self isCellExpanded:indexPath];      if (cellCollapsed) {          //collapse cell          [self.expandedCells removeObject:indexPath];           [collectionView setContentOffset:self.previousContentOffset animated:YES];          self.previousContentOffset = CGPointZero;      }      else      {          //cell is expanded          [self.expandedCells addObject:indexPath];          [collectionView setContentOffset:CGPointMake(0, CGRectGetMinY(cell.frame)) animated:YES];      }   }completion:nil]; }   - (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {     CGFloat side = collectionView.frame.size.width - 20;     CGFloat height = 244;      if ([self isCellExpanded:indexPath]) {         height = CGRectGetHeight(self.view.frame);     }     return CGSizeMake(side, height); }   - (BOOL)isCellExpanded:(NSIndexPath *)indexPath {     BOOL cellCollapsed = NO;     for (NSIndexPath *setIndexPath in self.expandedCells)     {         if (setIndexPath.row == indexPath.row) {             cellCollapsed = YES;         }     }     return cellCollapsed; } </code></pre>  <p>result cause the top collection View cell suddenly appear or flicker!! </p>  <p>does anyone have any idea? I'm using default UICollectionViewFlowLayout.</p>  <p><a href="http://i.stack.imgur.com/zOJBw.gif" rel="nofollow"><img src="http://i.stack.imgur.com/zOJBw.gif" alt="enter image description here"></a></p>