<p>I have created a stored procedure for search purpose with dynamic query. And I also passing number of parameters in this procedure. Execution of this procedure is very slow. I want to make it fast. Here is my procedure:</p>  <pre><code>CREATE DEFINER=`HenricksenCRM2`@`%` PROCEDURE `spSearchAll`(      p_ACTION INT,      p_PROJECT_CUSTOMER INT,      p_PROJECT_NAME VARCHAR(50),      p_PROJECT_SALESPERSON INT,      p_PROJECT_MANAGER INT,      p_PROJECT_PMF INT,      p_PROJECT_TYPE INT,      p_PROJECT_DESIGNER INT,      p_PROJECT_LEAD INT,      p_PROJECT_AANDD INT,      p_PROJECT_REFD INT,      p_PROJECT_VENDOR INT,      p_PROJECT_GENERALCONTRACTOR INT,      p_PROJECT_PUNCHLIST nvarchar(1),      p_PROJECT_LOCATION INT,      p_PROJECT_CLIENTTYPE INT,      p_PROJECT_INSTALLDATE VARCHAR(50),      p_PROJECT_INSTALLDATETO VARCHAR(50),      p_PROJECT_ORDERENTRYDATE VARCHAR(50),      p_PROJECT_ORDERENTRYDATETO VARCHAR(50),      p_PROJECT_MOVEINDATE VARCHAR(50),      p_PROJECT_MOVEINDATETO VARCHAR(50),     p_PROJECT_GEOGRAPHY INT,     p_PROJECT_SYSTEMENTRYDATE VARCHAR(50),     p_PROJECT_TO_SYSTEM_ENTRY_DATE VARCHAR(50),     p_PROJECT_STATUS INT,      p_PROJECT_INDUSTRY INT,     p_PROJECT_ACTIVE_FLAG NVARCHAR(1),       p_USERID INT,     p_ROLE INT ) BEGIN     IF p_ACTION = 1     THEN         BEGIN             DECLARE v_SQL_ VARCHAR(65535);             SET v_SQL_ = CONCAT('Select  distinct(P.ProjectID) AS PID,                 C.CustomerName,                 P.ProjectDescription AS ProjectName,                  I.IndustryTypeDescription AS Type,                  P.TargetedOrderEntryDate AS TOED,                  P.ProjectEntryDate AS EntryDate,                  P.Probability AS Prob,                  P.ProjectDollarVolume AS Volume                 FROM  tblProjectType AS T RIGHT OUTER JOIN                 tblProjectTypeSelected AS S ON T.ProjectTypeID = S.TypeID RIGHT OUTER JOIN                 tblProject AS P ON S.ProjectID = P.ProjectID LEFT OUTER JOIN                 tblCustomer AS C ON P.CustomerID = C.CustomerID LEFT OUTER JOIN                 tblIndustry AS I ON P.IndustryTypeID = I.IndustryTypeID                 WHERE                  P.ProjectDescription LIKE "%' , p_PROJECT_NAME , '%"');              IF p_PROJECT_PUNCHLIST = '1'              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.ProjectPunchlistCreated = 1 ');              END IF;              IF p_PROJECT_PUNCHLIST = '2'              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.ProjectPunchlistCreated = 0 ');              END IF;              IF p_PROJECT_TYPE &lt;&gt; 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND S.TypeID = ' , CONVERT(p_PROJECT_TYPE, CHAR(50)));              END IF;               IF p_PROJECT_CUSTOMER &lt;&gt; 0             THEN                 SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.CustomerID = ' , CONVERT(p_PROJECT_CUSTOMER, CHAR(50)));             END IF;              IF p_PROJECT_SALESPERSON &lt;&gt; 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.ProjectID IN (Select EntityID from tblProjectResources where relatedid = ' , CONVERT(p_PROJECT_SALESPERSON, CHAR(50)) , ' and relatedtype = 7 and entitytype = 1) ');              END IF;               IF p_PROJECT_MANAGER &lt;&gt; 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.ProjectID IN (Select EntityID from tblProjectResources where relatedid = ' , CONVERT(p_PROJECT_MANAGER, CHAR(50)) , ' and relatedtype = 4 and entitytype = 1) ');              END IF;               IF p_PROJECT_PMF &lt;&gt; 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.ProjectID IN (Select EntityID from tblProjectResources where relatedid = ' , CONVERT(p_PROJECT_PMF, CHAR(50)) , ' and relatedtype = 5 and entitytype = 1) ');              END IF;               IF p_PROJECT_DESIGNER &lt;&gt; 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.ProjectID IN (Select EntityID from tblProjectResources where relatedid = ' , CONVERT(p_PROJECT_DESIGNER, CHAR(50)) , ' and relatedtype = 3 and entitytype = 1) ');              END IF;               IF p_PROJECT_LEAD &lt;&gt; 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.ProjectID IN (Select EntityID from tblProjectResources where relatedid = ' , CONVERT(p_PROJECT_LEAD, CHAR(50)) , ' and relatedtype = 8 and entitytype = 1) ');              END IF;               IF p_PROJECT_AANDD &lt;&gt; 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.ProjectID IN (Select EntityID from tblProjectResources where relatedid = ' , CONVERT(p_PROJECT_AANDD, CHAR(50)) , ' and relatedtype = 9 and entitytype = 1) ');              END IF;               IF p_PROJECT_REFD &lt;&gt; 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.ProjectID IN (Select EntityID from tblProjectResources where relatedid = ' , CONVERT(p_PROJECT_REFD, CHAR(50)) , ' and relatedtype = 10 and entitytype = 1) ');              END IF;               IF p_PROJECT_VENDOR &lt;&gt; 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.ProjectID IN (Select EntityID from tblProjectResources where relatedid = ' , CONVERT(p_PROJECT_VENDOR, CHAR(50)) , ' and relatedtype = 6 and entitytype = 1) ');              END IF;               IF p_PROJECT_GENERALCONTRACTOR &lt;&gt; 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.ProjectID IN (Select EntityID from tblProjectResources where relatedid = ' , CONVERT(p_PROJECT_GENERALCONTRACTOR, CHAR(50)) , ' and relatedtype = 11 and entitytype = 1) ');              END IF;               IF p_PROJECT_LOCATION &lt;&gt; 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.LocationID = ' , CONVERT(p_PROJECT_LOCATION, CHAR(50)));              END IF;               IF p_PROJECT_CLIENTTYPE &lt;&gt; 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.CLIENTTYPEID = ' , CONVERT(p_PROJECT_CLIENTTYPE, CHAR(50)));              END IF;               IF p_PROJECT_INSTALLDATE &lt;&gt; '' AND p_PROJECT_INSTALLDATETO &lt;&gt; ''              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.TARGETEDINSTALLDATE BETWEEN "' , p_PROJECT_INSTALLDATE , '" AND "' , p_PROJECT_INSTALLDATETO , '"');              END IF;               IF p_PROJECT_INSTALLDATE &lt;&gt; '' AND p_PROJECT_INSTALLDATETO = ''              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.TARGETEDINSTALLDATE = "' , p_PROJECT_INSTALLDATE , '"');              END IF;               IF p_PROJECT_INSTALLDATE = '' AND p_PROJECT_INSTALLDATETO &lt;&gt; ''              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.TARGETEDINSTALLDATE = "' , p_PROJECT_INSTALLDATETO , '"');              END IF;               IF p_PROJECT_MOVEINDATE &lt;&gt; '' AND p_PROJECT_MOVEINDATETO &lt;&gt; ''              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.TARGETEDMOVEINDATE BETWEEN "' , p_PROJECT_MOVEINDATE , '" AND "' , p_PROJECT_MOVEINDATETO , '"');              END IF;               IF p_PROJECT_MOVEINDATE &lt;&gt; '' AND p_PROJECT_MOVEINDATETO = ''              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.TARGETEDMOVEINDATE = "' , p_PROJECT_MOVEINDATE , '"');              END IF;               IF p_PROJECT_MOVEINDATE = '' AND p_PROJECT_MOVEINDATETO &lt;&gt; ''              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.TARGETEDMOVEINDATE = "' , p_PROJECT_MOVEINDATETO , '"');              END IF;               IF p_PROJECT_ORDERENTRYDATE &lt;&gt; '' AND p_PROJECT_ORDERENTRYDATETO &lt;&gt; ''              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.TARGETEDORDERENTRYDATE BETWEEN "' , p_PROJECT_ORDERENTRYDATE , '" AND "' , p_PROJECT_ORDERENTRYDATETO , '"');              END IF;               IF p_PROJECT_GEOGRAPHY &lt;&gt; 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.GEOGRAPHY = ' , CONVERT(p_PROJECT_GEOGRAPHY, CHAR(50)));              END IF;              IF p_PROJECT_SYSTEMENTRYDATE &lt;&gt; '' AND p_PROJECT_TO_SYSTEM_ENTRY_DATE &lt;&gt; ''              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.PROJECTENTRYDATE BETWEEN "' , p_PROJECT_SYSTEMENTRYDATE , '" AND "' , p_PROJECT_TO_SYSTEM_ENTRY_DATE , '"');              END IF;               IF p_PROJECT_SYSTEMENTRYDATE &lt;&gt; '' AND p_PROJECT_TO_SYSTEM_ENTRY_DATE = ''              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.PROJECTENTRYDATE = "' , p_PROJECT_SYSTEMENTRYDATE  , '"');              END IF;               IF p_PROJECT_SYSTEMENTRYDATE = '' AND p_PROJECT_TO_SYSTEM_ENTRY_DATE &lt;&gt; ''             THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.PROJECTENTRYDATE = "' , p_PROJECT_TO_SYSTEM_ENTRY_DATE  , '"');              END IF;              IF p_PROJECT_STATUS &lt;&gt; 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.PROJECTSTATUSCODE = ' , CONVERT(p_PROJECT_STATUS, CHAR(50)));              END IF;              IF p_PROJECT_INDUSTRY &lt;&gt; 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.IndustryTypeID = ' , CONVERT(p_PROJECT_INDUSTRY, CHAR(50)));              END IF;              IF p_PROJECT_ACTIVE_FLAG = 0              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.DISPOSITIONID = 0 ');              END IF;               IF p_PROJECT_ACTIVE_FLAG = 1              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.DISPOSITIONID &lt;&gt; 0 ');              END IF;              IF p_ROLE &lt;&gt; 1              THEN                  SET v_SQL_ = CONCAT(v_SQL_ , ' AND P.ProjectID IN (select projectID from tblProject where leadSourceID in (select resourceID from tblResource where UserID = ' , CONVERT(p_USERID, CHAR(50)) , ' ) OR ADInfluencerID in (select resourceID from tblResource where UserID = ' , CONVERT(p_USERID, CHAR(50)) , ') OR RealEstateDeveloperID in (select resourceID from tblResource where UserID = ' , CONVERT(p_USERID, CHAR(50)) , ') OR GCContractorID in (select resourceID from tblResource where UserID = ' , CONVERT(p_USERID, CHAR(50)) , ') OR PMFirmID in (select resourceID from tblResource where UserID =' , CONVERT(p_USERID, CHAR(50)) , ') OR PROJECTID in(select entityid from tblProjectResources where relatedid in (select resourceID from tblResource where UserID = ' , CONVERT(p_USERID, CHAR(50)) , ' )) )');              END IF;              -- print @SQL1              SET @stmt_str =  v_SQL_;             PREPARE stmt FROM @stmt_str;             EXECUTE stmt;             DEALLOCATE PREPARE stmt;         END;     END IF; END </code></pre>  <p>Please help me to optimize it and make it fast. Thanks.</p>