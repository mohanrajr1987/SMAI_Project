<p>I have the following (simplified) stored procedure:</p>  <pre><code>    CREATE FUNCTION [dbo].[UDF_FulfilmentBatch](@FulfilmentID INT) RETURNS     @Result TABLE (             [sequence]  INT,             membershipid    BIGINT,             membershipNo    VARCHAR(255)     )     AS     BEGIN      DECLARE @_sequence  INT     DECLARE @_membershipid  BIGINT     DECLARE @_membershipNo  VARCHAR(255)      SET @_sequence = 1      IF @FulfilmentID = 4     BEGIN         DECLARE FulfilCursor CURSOR FAST_FORWARD FOR              SELECT * from VW_FulfilmentExtract_HH     END IF @FulfilmentID = 3     BEGIN         DECLARE FulfilCursor CURSOR FAST_FORWARD FOR              SELECT * from VW_FulfilmentExtract_ID     END     ELSE IF @FulfilmentID = 2     BEGIN         DECLARE FulfilCursor CURSOR FAST_FORWARD FOR              SELECT * from VW_FulfilmentExtract_Art     END     ELSE         DECLARE FulfilCursor CURSOR FAST_FORWARD FOR              SELECT * from VW_FulfilmentExtract_Tha      OPEN FulfilCursor      FETCH NEXT FROM FulfilCursor INTO @_membershipid, @_membershipNo      WHILE @@FETCH_STATUS = 0 BEGIN          INSERT INTO @Result         VALUES (@_sequence, @_membershipid, @_membershipNo)           SET @_sequence = @_sequence + 1           FETCH NEXT FROM FulfilCursor INTO @_membershipid, @_membershipNo     END      CLOSE FulfilCursor     DEALLOCATE FulfilCursor      RETURN      END         GO </code></pre>  <p>My problem is, that when FulfilmentID = 4, I wan to add an extra field - 'Delivery'</p>  <p>If have tried the following:</p>  <pre><code>CREATE FUNCTION [dbo].[UDF_FulfilmentBatch](@FulfilmentID INT) RETURNS         @Result TABLE (                 [sequence]  INT,                 membershipid    BIGINT,                 membershipNo    VARCHAR(255)         IF @FulfilmentID = 4         BEGIN         ,Delivery   VARCHAR(255)         END         )         AS         BEGIN          DECLARE @_sequence  INT         DECLARE @_membershipid  BIGINT         DECLARE @_membershipNo  VARCHAR(255) IF @FulfilmentID = 4         BEGIN         DECLARE @_Delivery  VARCHAR(255)         END          SET @_sequence = 1          IF @FulfilmentID = 4         BEGIN             DECLARE FulfilCursor CURSOR FAST_FORWARD FOR                  SELECT * from VW_FulfilmentExtract_HH         END     IF @FulfilmentID = 3         BEGIN             DECLARE FulfilCursor CURSOR FAST_FORWARD FOR                  SELECT * from VW_FulfilmentExtract_ID         END         ELSE IF @FulfilmentID = 2         BEGIN             DECLARE FulfilCursor CURSOR FAST_FORWARD FOR                  SELECT * from VW_FulfilmentExtract_Art         END         ELSE             DECLARE FulfilCursor CURSOR FAST_FORWARD FOR                  SELECT * from VW_FulfilmentExtract_Tha          OPEN FulfilCursor          FETCH NEXT FROM FulfilCursor INTO @_membershipid, @_membershipNo          WHILE @@FETCH_STATUS = 0 BEGIN              INSERT INTO @Result             VALUES (@_sequence, @_membershipid, @_membershipNo IF @FulfilmentID=4 BEGIN @_Delivery  )                 SET @_sequence = @_sequence + 1               FETCH NEXT FROM FulfilCursor INTO @_membershipid, @_membershipNo         END          CLOSE FulfilCursor         DEALLOCATE FulfilCursor          RETURN          END             GO </code></pre>  <p>But this did not work (Please excuse any syntax errors, this is a rough typing for SO)</p>  <p>Form searching the web there does not seem to be much on this. Can it be done?</p>