<p>I have the following code fragment from a store procedure written on mysql.</p>  <p>When I run it, I get </p>  <pre><code>ERROR 1137 (HY000): Can't reopen table: 'temPer'   ...      OPEN curs;      conts: LOOP         FETCH curs INTO var_org, var_profile;         IF done = 1 THEN              LEAVE conts;         END IF;          call modulo_user_obter_organizacoes_filhas_c(var_org);         call modulo_user_obter_perfis_filhos_c(var_profile);          INSERT INTO temp_modulo_user_obter_menus_user_organizacao         select *         from              (SELECT org_id, modulo_user_obter_profile_user_organizacao(in_user, in_org) as profile_id              FROM   temp_modulo_user_obter_organizacoes_filhas              WHERE org_id = in_org               ) as orgs         INNER JOIN             profile_menu_organizacaotipo as pmo         ON               orgs.profile_id = pmo.profile_id         INNER JOIN             temp_modulo_user_obter_perfis_filhos as temPer         ON             temPer.profile_id = pmo.profile_id         INNER JOIN             menu as m         ON             pmo.menu_id = m.id         LEFT JOIN             submenu as s         ON             m.id = s.menu_id;      END LOOP;      CLOSE curs;  ... </code></pre>  <p>Where the SP:</p>  <pre><code>modulo_usuario_obter_perfis_filhos_c(var_org); </code></pre>  <p>drops, creates, and fills the temporary table:</p>  <pre><code>temp_modulo_usuario_obter_perfis_filhos  </code></pre>  <p>which is the table with the alias temPer. I'm aware I cannot alias a temp table more than twice on a query, but in this case I'm just using the alias temPer once.</p>  <p>What is the problem on using temPer the way is being used here?</p>