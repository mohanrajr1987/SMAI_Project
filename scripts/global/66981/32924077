<p>Consider the following Puppet-provisioned Vagrant project directory structure:</p>  <pre><code>environments/   dev/     manifests/       site.pp   &lt;- Some standard Puppet stuff in here.   prod/     manifests/       site.pp   &lt;- Very similar to dev/manifests/site.pp, but with some prod differences manifests/   default.pp    &lt;- Empty, but a place I'd like to keep common parts of the site.pp files modules/ Vagrantfile     &lt;- See below. Puppetfile </code></pre>  <p>and the following (simplified) Vagrantfile:</p>  <pre><code># -*- mode: ruby -*- # vi: set ft=ruby :  envs = ["local", "dev"]  Vagrant.configure(2) do |config|   config.vm.box = "puppetlabs/centos-7.0-64-puppet"    envs.each do |env|     config.vm.define env do |node|       node.vm.provision "puppet" do |puppet|         puppet.environment_path = "environments"         puppet.module_path = "modules"         puppet.environment = env       end     end   end end </code></pre>  <p>What options are available to me if I'd like to factor out the common parts of the two <code>site.pp</code> files into a single file?</p>  <hr>  <p>I have tried the following strategies to no avail:</p>  <p><strong>1 - One Manifest Per Environment Which "Inherits" From a Single Project-Wide Manifest</strong></p>  <p>After some reading I'm not even sure this is possible.  There used to be the <code>import</code> command which I feel like could have been what I was looking for, but that has been deprecated in newer versions of Puppet.</p>  <p><strong>2 - A Single Project-Wide Manifest and One Hiera File Per Environment</strong></p>  <p>I consider this the least-attractive of the two options since it means the only way to distinguish between environments is via data, and some things are just better expressed with differences in manifests.</p>  <p>However I can't even get this to work.  Given the following <code>environment.conf</code> files in the <code>dev/</code> and <code>prod/</code> folders:</p>  <pre><code>manifest = ../../manifests/default.pp </code></pre>  <p>gives me an error about not being able to find the <code>default.pp</code> file.</p>  <hr>  <p>Basically I need to a way to stop duplication between environments.  My project is actually more complicated than that above, given that the manifests are getting rather large and unwieldy, and I have more than two environments.  I also feel like the fact I'm using Vagrant here (which has it's own ways of passing options to Puppet) is complicating things further.</p>  <p>Any help at all would be appreciated here.</p>