<p>I wrote a very simple script to output the host machine's MAC addresses to a text file.</p>  <p>The script is exiting right after line 3 - <code>'IF DEFINED WRITEOK ('.</code></p>  <pre><code>@echo off  cls  copy /Y NUL "%CD%\.writable" &gt; NUL 2&gt;&amp;1 &amp;&amp; set WRITEOK=1 IF DEFINED WRITEOK (  rem ---- we have write access ----  set DIR=%CD%\interfaces  set FILE=%DIR%\%USERNAME%.txt  IF NOT EXIST "%DIR%" (   MKDIR "%DIR%"   echo DIR '%DIR%' was created  ) else (   echo DIR '%DIR%' already exists  ) for /f "tokens=2 delims=:" %%i in ('ipconfig /all ^| findstr /i "Physical Host"') do (   echo %%i &gt;&gt; "%FILE%"   echo OUTPUT written to '%FILE%'  )  ) else (  rem ---- we don't ----  echo DIR '%DIR%' is not writable )  echo. echo DONE! pause </code></pre>