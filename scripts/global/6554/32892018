<p>Here's the code:</p>  <pre class="lang-rb prettyprint-override"><code>require 'rmagick' include Magick img = Image.read('mountains.jpg').first.   resize_to_fit(320, 320).quantize(256, GRAYColorspace) img.write('tmp/debug/gray.png') pxls = img.export_pixels(0, 0, img.columns, img.rows, 'I') img2 = Image.constitute(img.columns, img.rows, 'I', pxls) img2.write('tmp/debug/gray2.png') </code></pre>  <p>As far as I can understand, the gray.png and gray2.png should be the same. In fact, they are not:</p>  <p><img src="http://i.imgur.com/yoHBQ98.png" alt="gray.png"> vs  <img src="http://i.imgur.com/JnbYGzX.png" alt="gray2.png"></p>  <p>What am I missing here?</p>