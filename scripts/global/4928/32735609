<p>I have a table with timereports from users. Now i want all timereports during one week from a specific user will be shown on one row instead of 7 different rows (1 for each day). The Insert statement down below is done 7 times (1 for each day). </p>  <p>If a insertstatements variables (ProjID, ActivityID, TimeCodeID, TimeUnitID and tempUserID matches one specific row in #tempTable should it add the new values (Quant) to the specific row in temptable instead of create a new row in temptable. But if one of the ID's doesnt match should it be a new row.</p>  <p>Here are my code:</p>  <pre><code>CREATE PROC getweek2 @UserID nvarchar(50) , @DateFrom datetime AS  CREATE TABLE #tempTable ( id int primary key identity(1,1) , ProjID nvarchar(50) , ActivityID nvarchar(50) , TimeCodeID nvarchar(50) , QuantMon decimal(18,2) , QuantTue decimal(18,2) , QuantWed decimal(18,2) , QuantThu decimal(18,2) , QuantFri decimal(18,2) , QuantSat decimal(18,2) , QuantSun decimal(18,2) , QuantSum decimal(18,2) , tempUserID nvarchar(50) , TimeUnitID nvarchar(50) )  INSERT INTO #tempTable  SELECT  t.a3CloudTimeProjectID AS ProjID , t.a3CloudTimeActivityID AS ActivityID , t.a3CloudTimeCodeID AS TimeCodeID , SUM(t.a3CloudTimeQuantity) AS QuantMon , SUM(0) AS QuantTue , SUM(0) AS QuantWed , SUM(0) AS QuantThu , SUM(0) AS QuantFri , SUM(0) AS QuantSat , SUM(0) AS QuantSun , SUM(t.a3CloudTimeQuantity) AS QuantSum , t.a3CloudTimeUserID AS tempUserID , t.a3CloudTimeUnitID AS TimeUnitID FROM a3CloudTime t WHERE t.a3CloudTimeUserID = @UserID AND t.a3CloudTimeDate = @DateFrom  AND NOT EXISTS ( SELECT  te.ProjID, te.ActivityID, te.TimeCodeID, te.TimeUnitID, te.QuantMon,          te.QuantTue, te.QuantWed , te.QuantThu , te.QuantFri , te.QuantSat, te.QuantSun, te.QuantSum FROM    #tempTable te WHERE   te.ProjID = t.a3CloudTimeProjectID AND te.ActivityID = t.a3CloudTimeActivityID AND te.TimeCodeID = t.a3CloudTimeCodeID AND te.TimeUnitID = t.a3CloudTimeUnitID ) GROUP BY a3CloudTimeProjectID, a3CloudTimeCodeID, a3CloudTimeActivityID, a3CloudTimeUserID, a3CloudTimeUnitID    SELECT ProjID AS HiddenColData01 , tempUserID AS HiddenColData02 , p.a3CloudProjectName AS ColData01 , a.a3CloudActivityName AS ColData02 , us.a3CloudUserName AS ColData03 , '00' + CONVERT (nvarchar(10),c.a3CloudTimeCodeNumber) + '-' +     c.a3CloudTimeCodeName AS ColData04 , QuantMon AS ColData05 , QuantTue AS ColData06 , QuantWed AS ColData07 , QuantThu AS ColData08 , QuantFri AS ColData09 , QuantSat AS ColData10 , QuantSun AS ColData11 , QuantSum AS ColData12   FROM #tempTable tt  INNER JOIN a3CloudProject p ON p.a3CloudProjectID = tt.ProjID INNER JOIN a3CloudActivity a ON a.a3CloudActivityID = tt.ActivityID INNER JOIN a3CloudTimeCode c ON c.a3CloudTimeCodeID = tt.TimeCodeID INNER JOIN a3CloudTimeUnit u ON u.a3CloudTimeUnitID = tt.TimeUnitID INNER JOIN a3CloudUser us ON us.a3CloudUserID = tt.tempUserID  GO </code></pre>  <p>And the result will be:</p>  <pre><code>5CF51017-2404-42B4-B12E-56B5B83B86E3    69fef3ef-10ee-4019-9e80-772261cf712a      Förvaltning   Konsult Fredrik Krantz  001-Normal  1.00    0.00    0.00    0.00     0.00   0.00    0.00    1.00 5CF51017-2404-42B4-B12E-56B5B83B86E3    69fef3ef-10ee-4019-9e80-772261cf712a    Förvaltning Konsult Fredrik Krantz  003-OB 75%  0.00    0.00    0.00    0.00    0.00    4.00    0.00    4.00 </code></pre>  <p>But it should be:</p>  <pre><code>5CF51017-2404-42B4-B12E-56B5B83B86E3    69fef3ef-10ee-4019-9e80-772261cf712a      Förvaltning   Konsult Fredrik Krantz  001-Normal  1.00    3.00    5.00    5.00     0.00   0.00    0.00    14.00 5CF51017-2404-42B4-B12E-56B5B83B86E3    69fef3ef-10ee-4019-9e80-772261cf712a    Förvaltning Konsult Fredrik Krantz  003-OB 75%  0.00    0.00    0.00    0.00    0.00    4.00    0.00    4.00 </code></pre>  <p>The difference between the actual result and my wanted result is that the insert statement doesnt update the values (Quant) in tempTable.</p>  <p>Maybe i should have some IF statement, but doesnt know how i will write it in the sproc.</p>