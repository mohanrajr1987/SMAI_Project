<p>Maybe I don't understand the streams but I have servlet like this:</p>  <pre><code>String filename  = "test.pdf";           String Str1 = new String("Lorem ipsum dolor sit amet, eos omnes mandamus in, modus voluptua ei mel. Nec et illud facete maluisset, "); byte[] Str2 = Str1.getBytes();  InputStream inputStream = null; inputStream = new ByteArrayInputStream(Str2);  byte[] buffer = new byte[DEFAULT_BUFFER_SIZE]; ByteArrayOutputStream baos = new ByteArrayOutputStream();  int bytesRead; while (  (bytesRead = inputStream.read(buffer)) != -1)    baos.write(buffer, 0, bytesRead);  response.setContentType("application/pdf"); response.setHeader("Content-Disposition", "attachment; filename=\"" + filename + "\""); OutputStream os = response.getOutputStream(); baos.writeTo(os); os.flush(); os.close(); </code></pre>  <p>But when I try to open the file after save there's error:</p>  <p><a href="http://i.stack.imgur.com/Lj887.png" rel="nofollow"><img src="http://i.stack.imgur.com/Lj887.png" alt="enter image description here"></a> </p>  <p>I checked and the baos have string "Lorem ipsum". What I am doing wrong?</p>