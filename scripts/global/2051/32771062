<p>A PIP extension code using a "RedAttributeFinder" class is working now. It correctly register its claims  into the WSO2 PDP extension console display.</p>  <p>I start to create a XACML policy now, addressing  the field that returns the dynamic data value delivered by the extension program (for example a field named "<a href="http://w3.red.com/subject/employeeCountryCode" rel="nofollow">http://w3.red.com/subject/employeeCountryCode</a>"). </p>  <p>The key field for a data look-up is: <code>urn:oasis:names:tc:xacml:1.0:resource:resource-id</code>  , which maps a user identity in an email format.    </p>  <p><strong>Question 1:</strong>  How is invocation of the “getAttributesValues” method done at the "RedAttributeFinder" class, registered at the start of WSO2. What triggers the call of the method from the PDP process (or its incoming requests)?   </p>  <p>In the sample code, as well as at my implementation, the key field is the resource-id which is loaded as part of the PEP request implementation.  </p>  <pre><code>.. myRequest += "&lt;Attributes Category=\"urn:oasis:names:tc:xacml:1.0:subject-category:access-subject\"&gt;" + "\n";  myRequest += "&lt;Attribute AttributeId=\"urn:oasis:names:tc:xacml:1.0:subject:subject-id\" IncludeInResult=\"false\"&gt;" + "\n";  myRequest += "&lt;AttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"&gt;tony@br.red.com&lt;/AttributeValue&gt;" + "\n";  myRequest += "&lt;/Attribute&gt;" + "\n";   myRequest += "&lt;/Attributes&gt;" + "\n";  myRequest += "&lt;Attributes Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:resource\"&gt;" + "\n";  myRequest += "&lt;Attribute AttributeId=\"urn:oasis:names:tc:xacml:1.0:resource:resource-id\" IncludeInResult=\"true\"&gt;" + "\n";  ..  </code></pre>  <p>This is the key input for the "getAttributesValues()" and will return a country code (similar to the role [blue, silver, gold] definition in the WSO2 example code [  available here <a href="https://svn.wso2.org/repos/wso2/carbon/platform/trunk/components/identity/org.wso2.carbon.identity.samples.entitlement.pip/" rel="nofollow">https://svn.wso2.org/repos/wso2/carbon/platform/trunk/components/identity/org.wso2.carbon.identity.samples.entitlement.pip/</a> ] .    </p>  <p>In the sample, I see that the required resolution of roles value, for example "blue" is part of the Policy target definition. </p>  <p><strong>Question 2:</strong>  Is this placement inside target section a requirement to call the dynamic PIP look-up, one per requests, or can it also be placed at other parts of the policy, like for example inside a rule? </p>  <p>I was able to test the PEP to PDP interaction with a rule definition, only by defining static variables, receiving "permit", a rule that I would like to change to the dynamic data obtained from the PIP implementation and its extension, addressing the new fields added by the code.          </p>