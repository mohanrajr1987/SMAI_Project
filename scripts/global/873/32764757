<p>I have an array generate by <strong>Database Query Builder</strong> of Laravel 5.1.x.</p>  <pre><code>array:96 [▼   0 =&gt; {#1256 ▼     +"customer_id": 58     +"city": "Rio de Janeiro"     +"program_id": 3     +"program": "PROGRAMA XPTO"     +"subregion": "SUB-REGIÃO UM"     +"mr_name": "2015/02"     +"info_1": 8     +"info_2": 9     +"info_3": 239     +"info_4": 10     +"info_5": 295     +"info_6": "12.3430962343096"   }   1 =&gt; {#1255 ▼     +"customer_id": 58     +"city": "Rio de Janeiro"     +"program_id": 3     +"program": "PROGRAMA XPTO"     +"subregion": "SUB-REGIÃO UM"     +"mr_name": "2015/03"     +"info_1": 8     +"info_2": 9     +"info_3": 239     +"info_4": 21     +"info_5": 377     +"info_6": "7.51145646543136"   }   2 =&gt; {#1254 ▼     +"customer_id": 58     +"city": "Rio de Janeiro"     +"program_id": 3     +"program": "PROGRAMA XPTO"     +"subregion": "SUB-REGIÃO UM"     +"mr_name": "2015/04"     +"info_1": 8     +"info_2": 9     +"info_3": 239     +"info_4": 19     +"info_5": 607     +"info_6": "13.3670997577626"   }   ... ] </code></pre>  <p>Problem: I want to group that information like this.</p>  <pre><code>array: [▼     "customers" =&gt; { ▼         +"Rio de Janeiro": array [▼             +"programs": array [▼                 "PROGRAMA XPTO": array [▼                     +"subregions": array [▼                         "SUB-REGIÃO UM": array [▼                             "months": array [▼                                 "2015/02": array [],                                 "2015/03": array [],                                 "2015/04": array [],                                 "2015/05": array [],                                 "2015/06": array [],                                 "2015/07": array [],                                 ...                             ]                         ]                     ]                 ]             ]         ]     ]   ... ] </code></pre>  <p>Using pure PHP and iterate each value I get an extra 5-10 seconds for render the page (code below):</p>  <pre><code>if (!empty($result)) {     $city = $result[0]-&gt;city;     $program = null;     $subregion = null;     $school = null;     $class = null;      $data['customers'] = [];      foreach ($result as $r =&gt; $row) {         if (isset($data[$row-&gt;city])) {             continue;         }          $city = $row-&gt;city;         $data['customers'][$city] = [];         $data['customers'][$city]['customer_id'] = $row-&gt;customer_id;          foreach ($result as $pid =&gt; $programs) {             if ($city == $programs-&gt;city) {                 if (isset($data[$city]['programs'][$programs-&gt;program])) {                     continue;                 }                  $program = $programs-&gt;program;                  $data['customers'][$city]['programs'][$program] = [                     'program_id' =&gt; $programs-&gt;program_id,                     'total_escolas' =&gt; false,                     'total_turmas' =&gt; false,                     'students' =&gt; false,                     'subregions' =&gt; []                 ];                  foreach ($result as $subId =&gt; $subregions) {                     if (($city == $subregions-&gt;city)                         and ($program == $subregions-&gt;program)                     ) {                         $subregion = $subregions-&gt;subregion;                         $data['customers'][$city]['programs'][$program]['subregions'][$subregions-&gt;subregion] = [                             'months' =&gt; []                         ];                          foreach ($result as $mId =&gt; $months) {                             if (($city == $months-&gt;city)                                 and ($program == $months-&gt;program)                                 and ($subregion == $months-&gt;subregion)                                 and !empty($data['customers'][$city]['programs'][$program]['subregions'][$subregion]['months'][$months-&gt;mr_name])                             ) {                                 $mr_name = $months-&gt;mr_name;                                 $data['customers'][$city]['programs'][$program]['subregions'][$subregion]['months'][$mr_name] = [                                     'info_1' =&gt; $months-&gt;info_1,                                     'info_2' =&gt; $months-&gt;info_2,                                     'info_3' =&gt; $months-&gt;info_3,                                     'info_4' =&gt; $months-&gt;info_4,                                     'info_5' =&gt; $months-&gt;info_5,                                     'info_6' =&gt; $months-&gt;info_6                                 ];                             }                         }                     }                 }             }         }     } } </code></pre>  <p>Obs.: my query run in 137ms and the page load in avg 8 seconds.</p>  <hr>  <ul> <li>What am I doing wrong? </li> <li>There is another way to group these data?</li> </ul>  <hr>  <p>If you need more information tell me.</p>