<p>I am working on a social media site and I am having a problem in profile page. Before I explain you exact problem, let me explain what I am actually trying to do. </p>  <p>Imagine Facebook... When you go into someone's profile page, you see an "Add Friend" button. But if you go back your page, you won't see the same "Add Friend" button even though, they use the same view. This is what I was trying to do. And I did it. No problem so far. </p>  <p>My problem starts here. I would like to switch the colour, text, and href of "Add Friend" according to friendship table.</p>  <p>So, if I am not friend with a person, when I go into person's page "Add Friend" will appear. (This is done.) But if I sent a request already and waiting for other user to respond, I want to change button colour to yellow, change text to "Cancel Request", and href.</p>  <p>This is my helper and this method figures out whether to display buttons or not:</p>  <pre><code>module ProfilesHelper    # display_buttons   # ---------------   # Purpose of this helper is to find out if user is in his/her own profile page.   # According to that, this statement will decide to display buttons or not.    def display_buttons     if (params[:id].to_s == current_user.id.to_s) || ((params[:username].to_s == current_user.username.to_s) &amp;&amp; !params[:username].to_s.blank?)       # This is current user's profile, that's why do not display buttons.     else       render 'common/profile_buttons'     end   end  end </code></pre>  <p>Now, I have already designed bunch of if statements to figure out which button to use in a profile. And implemented that code to the above code.</p>  <pre><code>module ProfilesHelper    # display_buttons   # ---------------   # Purpose of this helper is to find out if user is in his/her own profile page.   # According to that, this statement will decide to display buttons or not.    def display_buttons     if (params[:id].to_s == current_user.id.to_s) || ((params[:username].to_s == current_user.username.to_s) &amp;&amp; !params[:username].to_s.blank?)       # This is current user's profile, that's why do not display buttons.     else       if user_id == current_user.id &amp;&amp; friend_id == params[:id] &amp;&amp; status == 'pending'         # Cancel Request, (Yellow Button)       elsif user_id == params[:id] &amp;&amp; friend_id == current_user.id &amp;&amp; status == 'requested'         # Accept Request, (Green Button)       elsif  user_id == current_user.id &amp;&amp; friend_id == params[:id] &amp;&amp; status == 'accepted'         # Unfriend, (Red Button)       else         # Add Friend, (Blue Button)         render 'common/profile_buttons'       end     end   end  end </code></pre>  <p>Okay, My first problem is that, friend_id, user_id, and status are in friendship table. How can I access this columns, so I can make this if statement work?</p>  <p>Second question: As you can see in the else statement, I use render to display buttons. So, after I make this if statement work (with the help of you), I need to pass variable or somehow manipulate render from helper. So, how can I do that? (If I use separate buttons partial and render the correct one, I can fix the problem but I will be repeating myself. So, this is not the correct way I guess.)</p>  <p>By the way, this is the profile_buttons partial:</p>  <pre><code>&lt;div class='buttons'&gt;   &lt;%= link_to 'Add Friend', add_path(@profile.id), :class =&gt; 'btn btn-primary btn-sm button' %&gt;   &lt;%= link_to 'Send Message', profile_path, :class =&gt; 'btn btn-default btn-sm button' %&gt; &lt;/div&gt; </code></pre>  <p>Thank you.</p>  <p><strong>EDIT</strong></p>  <p>I guess I figured out the way to access database from helper. I defined this in controller:</p>  <p>@friendship = Friendship.find_by_user_id_and_friend_id(current_user.id, @profile.id)</p>  <p>So, by adding @friendship in front of user_id etc. I can access them. But @profile.id is nil. No idea why. But I can print @profile.id in a view.</p>