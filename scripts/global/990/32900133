<p>I have huge binary matrices of many columns, and I am trying to get a count of zeroes and ones in each field, for each file, while keeping track of the file and the headers. Each file has the same headers and number of columns (but variable number of rows) and it is like this:</p>  <pre><code>File 1: Header1 Header2 Header3 Header4 0 1 0 1  0 1 0 1 1 0 0 1 0 1 0 1  File 2: Header1 Header2 Header3 Header4 0 1 0 0  0 0 0 0 0 0 0 1 </code></pre>  <p>Desired output with counts of 0/1</p>  <pre><code>    Header1 Header2 Header3 Header4 Total File1 1 3 0 4  4 File2 0 1 0 1  3 </code></pre>  <p>For now I have a count of values equal to ones for only file1, but it comes out with each row as a header while I would like the original headers to stay as headers and also this doesn't print a 0 if there are no ones... And it does not contain the original file name, so it is not right overall! Can you please direct me to the correct way to do this?</p>  <pre><code>awk 'NF&gt;0{   for (i=1; i&lt;=NF; i++)        if(NR==1)h[i]=$i;else if($i==1) a[i]++;   } END{for(i=1; i&lt;=length(a); i++) print h[i], a[i], NR}' file1 </code></pre>