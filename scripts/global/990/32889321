<p>I have a list <code>list.txt</code></p>  <pre><code>1    10691    0.12    54    +    1    10692    0.13    55    - 2    10720    0.23    -1    +    2    10721    0.13    43    - 3    10832    0.43    123    +    3    10833    0.13    88    - 4    11032    0.22    -1    +    4    11033    0.13    -1    - 5    11248    0.12    45    +    5    11249    0.13    -1    - 6    15214    0.88    33    +    6    15215    0.13    45    - </code></pre>  <p>I wish to extract data from columns 3 ($3) and 8 ($8) using a few rules:</p>  <p>Compare columns 4 ($4) and 9 ($9)</p>  <p>i) If both are negative, output "-1". </p>  <p>ii) If $4 &lt; 0 and $9 > 0, output $3; If $4 > 0 and $9 &lt; 0, output $8.</p>  <p>iii) If both $4 and $ 9 >0, output $3+$8</p>  <p>So I tried something like this:</p>  <pre><code>awk '{a[$4]; b[$9]}   END{     for (x in a) {       for (y in b) {         if (x &gt;0 &amp;&amp; y &gt;0) {           print $3+$8         }         else if (x &gt;0 &amp;&amp; y &lt;=0) {           print $3;         }         else if (x &lt;= 0 &amp;&amp; y &gt;0) {           print $8;         }         else if (x &lt;=0 &amp;&amp; y &lt;=0) {           print "-1";         }        }     }   }' list.txt </code></pre>  <p>Somehow this script doesn't give the correct number of lines (should be equal to list.txt) or the right data :(</p>  <p>Using <code>list.txt</code> one should get </p>  <pre><code>0.25 0.13 0.56 -1 0.12 1.01 </code></pre>