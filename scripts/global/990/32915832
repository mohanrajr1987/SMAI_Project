<p>In the <code>awk</code> below the location <code>$1</code> and calculated average <code>$4</code> are printed.  I can not seem to get the syntax correct to include $2 in the output between <code>$1</code> and <code>$4</code>.  Thank you :).</p>  <pre><code>awk '{   if(len==0){      last=$1;total=$4;len=1;getline   }   if($1!=last){       printf("%s\t%f\n", last, total/len);       last=$1;total=$4;len=1   }   else{        total+=$4;len+=1   } } END{   printf("%s\t%f\n", last, total/len) }' Input.bed &gt; output.txt </code></pre>  <p><strong>Input.bed</strong></p>  <pre><code>chr1:955542-955763  AGRN:exon.1 1   0 chr1:955542-955763  AGRN:exon.1 2   0 chr1:955542-955763  AGRN:exon.2 3   0 chr1:955542-955763  AGRN:exon.2 4   1 </code></pre>  <p><strong>Current output.txt</strong></p>  <pre><code>chr1:955542-955763  21.289593 chr1:957570-957852  304.861702 </code></pre>  <p><strong>Desired output.txt</strong></p>  <pre><code>chr1:955542-955763 AGRN:exon.1  21.289593 chr1:957570-957852 AGRN:exon.2  304.861702 </code></pre>  <p>Maybe</p>  <pre><code>awk '{if(len==0){last=$1;**name=$2**,total=$4;len=1;getline}if($1!=last){printf("%s\t%f\n", last, ,**name**, total/len);last=$1;name=$2;total=$4;len=1}else{total+=$4;len+=1}}END{printf("%s\t%f\n", last,**name**, total/len)}' Input.bed &gt; output.txt </code></pre>  <p>The input and outputs posted are not real so the #'s don't mean much :)</p>  <p><strong>Edit:</strong></p>  <pre><code>awk '{for (i=1; i&lt;=NF; i++) print i, $i}' IonXpress_008_150902_4column.bed | head -4 1 chr1:955542-955763 2 AGRN:exon.1 3 1 4 0 </code></pre>