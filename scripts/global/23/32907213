<p>I have a query whose XML structure is different based of its entity type. XML is stored in SQL Server table, additional column will have the path which will help to know where is the Identity element[Id] in XML. </p>  <p><code>updatedXML.xmlentity</code> has the XML and <code>/Message/InfoList/Info/Id</code> is stored in <code>updatedXML.entityIdPath</code>.</p>  <p>How to use <code>updatedXML.entityIdPath</code> in <code>XML.nodes()</code> function so that single query pulls the entityid of each xml stored in table with xml.nodes?</p>  <p>Sample Query, with path as string literal in nodes function.</p>  <pre><code>select X.E.value('.','bigint') As EntityId  from updatedXML.xmlentity.nodes('/Message/InfoList/Info/Id') as X(E)) </code></pre>  <p>Table having XML storage with few metadata as individual column.</p>  <p><a href="http://i.stack.imgur.com/2qNPs.png" rel="nofollow"><img src="http://i.stack.imgur.com/2qNPs.png" alt="Table having XML entity in it"></a></p>  <p>Adding only two for sample XML structures.</p>  <p>Below image has XML structure in table updatedXML  - entityIdPath is <em>Message/InfoList/Info/Id</em>  - entityType  is 1</p>  <p><a href="http://i.stack.imgur.com/qa2xM.png" rel="nofollow"><img src="http://i.stack.imgur.com/qa2xM.png" alt="enter image description here"></a> </p>  <p>Below image has XML structure in table updatedXML  - entityIdPath is <em>Message/Customers/Info/CustId</em>  - entityType  is 2</p>  <p><a href="http://i.stack.imgur.com/5JHxO.png" rel="nofollow"><img src="http://i.stack.imgur.com/5JHxO.png" alt="enter image description here"></a></p>  <p>Both XML structures are diffrent, likewise there are many XML structures different from each other. To spot the identity of each XML, path is stored in entityIdPath.  </p>