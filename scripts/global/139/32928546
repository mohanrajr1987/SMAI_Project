<p>I have a method that groups a given String ArrayList into ArrayList of String ArrayList, with each of the String ArrayList containing strings of the same length. The method is:</p>  <p>public static ArrayList>  getGrouping(ArrayList strlist)</p>  <pre><code> {      Map&lt;Integer, ArrayList&lt;String&gt;&gt; mapOfList = new HashMap&lt;Integer, ArrayList&lt;String&gt;&gt;();       /*      * Define ArrayList of ArrayList to build the output to return, and,       *another ArrayList to act as sub-array to build the output     */     ArrayList&lt;ArrayList&lt;String&gt;&gt; outer = new ArrayList&lt;ArrayList&lt;String&gt;&gt;();     ArrayList&lt;String&gt; inner = new ArrayList&lt;String&gt;();     String temp;            /*      * populate the map of lists in the format map &lt;length of string , list of strings of this length      */     for(int i = 0; i &lt;strlist.size(); i++)     {         temp = strlist.get(i);           if (temp ==  null)             continue;         int len = temp.length();         len = new Integer(len);         if(mapOfList.get(len) == null)             {                 mapOfList.put(len, new ArrayList&lt;String&gt;());             }         mapOfList.get(len).add(temp);        }      /*      * Build sub ArrayList using ArrayList at every entry and add this to the outer ArrayList to be returned      */     for(Map.Entry&lt;Integer, ArrayList&lt;String&gt;&gt; entry : mapOfList.entrySet())         {                        inner = entry.getValue();                        outer.add(inner);                    }    return outer;     } </code></pre>  <p>I am new to TestNG and trying to write test methods for the above. I am having trouble building the expected result (which is ArrayList of String ArrayList). What's the best way to do it? The way I do it now throws the error:</p>  <p>java.lang.ClassCastException: java.util.Arrays$ArrayList cannot be cast to java.util.ArrayList</p>  <p>Also they way I build the input is probably not the best way. Could this be done better? The TestNG  @Test method I have now which fails is:</p>  <pre><code>public void testWithNullValues()     {        ArrayList&lt;ArrayList&lt;String&gt;&gt; oup = new ArrayList&lt;ArrayList&lt;String&gt;&gt;();        ArrayList&lt;String&gt; inp = new ArrayList&lt;String&gt;();        inp.add("abc");        inp.add("ba");        inp.add("bdc");        inp.add(null);        inp.add("bfed");        inp.add(null);        inp.add("bdsf");        inp.add("a");        inp.add("b");        inp.add("bdcjkhwd");        oup = GroupListOfString.getGrouping(inp);        ArrayList&lt;ArrayList&lt;String&gt;&gt; expectedResult = new ArrayList&lt;ArrayList&lt;String&gt;&gt;();       expectedResult.add((ArrayList&lt;String&gt;) Arrays.asList("a", "b"));       expectedResult.add((ArrayList&lt;String&gt;) Arrays.asList("ba"));       expectedResult.add((ArrayList&lt;String&gt;) Arrays.asList("abc", "bdc"));       expectedResult.add((ArrayList&lt;String&gt;) Arrays.asList("bfed","bdsf"));       expectedResult.add((ArrayList&lt;String&gt;) Arrays.asList("bdcjkhwd"));        Assert.assertEquals(expectedResult, oup);        inp.clear();     } </code></pre>  <p>Thanks in Advance!</p>