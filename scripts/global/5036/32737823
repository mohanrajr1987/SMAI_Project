<p>I'm trying to generate a unique reference per person attached to an account. This is in a MySQL SELECT statement. Normally, as I have a unique reference for both person and account, I'd just concat them. However, I'm restricted to a range of 0 to 9999 so I need to create a reference which is unique at account level.</p>  <p>I created the following:</p>  <pre><code>    SELECT @n := @n + 1 n,     ID,     NAME     FROM table1, (SELECT @n := 0) m     ORDER BY ID,NAME </code></pre>  <p>which provide the following:</p>  <pre><code>   1    1027000001  Mr a    2    1027000001  Mr b    3    1027000001  Mr c    4    1062000001  Mr d    5    1062000001  Mr e </code></pre>  <p>But what I would actually like is:</p>  <pre><code>   1    1027000001  Mr a    2    1027000001  Mr b    3    1027000001  Mr c    1    1062000001  Mr d    2    1062000001  Mr e </code></pre>  <p>Thanks for any help you can provide.</p>