<p>I am using <a href="https://github.com/christophesmet/android_maskable_layout" rel="nofollow">https://github.com/christophesmet/android_maskable_layout</a>  to display image in different shapes.</p>  <p>I need to add border around this mask layout for which I added the following code to mask the bitmap with border:</p>  <pre><code>private Bitmap makeBorderMask(@Nullable Drawable drawable, int margin) {  if (drawable != null) {     if (getMeasuredWidth() &gt; 0 &amp;&amp; getMeasuredHeight() &gt; 0) {         Bitmap mask = Bitmap.createBitmap(getMeasuredWidth(), getMeasuredHeight(),Bitmap.Config.ARGB_8888);         Canvas canvas = new Canvas(mask);         if (margin == 0) {             final MarginLayoutParams lp = (MarginLayoutParams) this.getLayoutParams();             margin = lp.leftMargin;         }          drawable.setBounds(0, 0, getMeasuredWidth(), getMeasuredHeight());         drawable.setColorFilter(Color.WHITE, PorterDuff.Mode.MULTIPLY);         drawable.draw(canvas);          if (margin &gt;0) {             drawable.setBounds(margin, margin, getMeasuredWidth() - margin, getMeasuredHeight() - margin             drawable.setColorFilter(Color.BLUE, PorterDuff.Mode.MULTIPLY);             drawable.draw(canvas);         }          return mask;     } } return null; } </code></pre>  <p>The code is adding white border around the image; I can see it from the debugger.</p>  <p>But the <code>dispatchDraw</code> method is not showing this border, it's displaying only the blue circle:</p>  <pre><code>@Override  protected void dispatchDraw(Canvas canvas) {  super.dispatchDraw(canvas); if (mFinalMask != null &amp;&amp; mPaint != null) {         mPaint.setXfermode(mPorterDuffXferMode);         canvas.drawBitmap(mFinalMask, 0.0f, 0.0f, mPaint)     mPaint.setXfermode(null); } else {     log("Mask or paint is null ..."); } } </code></pre>  <p>here is my layout:</p>  <pre><code>&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"   xmlns:app="http://schemas.android.com/apk/res-auto"   android:id="@+id/rLayout1"   android:layout_width="fill_parent"   android:layout_height="fill_parent"   android:layout_centerInParent="true"&gt;  &lt;FrameLayout         android:id="@+id/frame3"         android:layout_width="match_parent"         android:layout_height="match_parent"         android:layout_centerInParent="true"         &gt;                    &lt;com.christophesmet.android.views.maskableframelayout.MaskableFrameLayout             android:id="@+id/maskLayout1"             android:layout_width="match_parent"             app:porterduffxfermode="DST_IN"             app:mask="@drawable/circle_transparent"              android:layout_height="match_parent"             android:layout_margin="5dp"            &gt;             &lt;ImageView                 android:id="@+id/shape1"                 android:layout_width="match_parent"                 android:layout_height="match_parent"                 android:adjustViewBounds="true"                 android:scaleType="fitXY"                 android:background="@color/transparent"                 /&gt;         &lt;/com.christophesmet.android.views.maskableframelayout.MaskableFrameLayout&gt;  &lt;/FrameLayout&gt; &lt;/RelativeLayout&gt; </code></pre>  <p>I have couple of observations:</p>  <p><strong>i.</strong> If in the layout, instead of <code>app:porterduffxfermode="DST_IN"</code>, I use  <code>app:porterduffxfermode="SRC_IN"</code> then the border appears but the image which I add in run time is not visible anymore (as if it goes in the background or the mask hid the image)</p>  <p><strong>ii.</strong> If I make the outer image transparent (<code>drawable.setAlpha(50)</code>) then also border appears with background color and its being transparent, image becomes visible behind this border</p>  <p>Any suggestion to fix this issue will be truly appreciated</p>