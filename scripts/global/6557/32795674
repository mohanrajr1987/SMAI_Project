<p>I am building an app that takes pictures with the camera or from the gallery and I need it to rotate(if required) every given image/bitmap to portrait. For now i use this code for rotating and it doesn't work all the time:</p>  <pre><code>private static Bitmap rotateImageIfRequired(Context context, Bitmap img, Uri selectedImage) {      // Detect rotation     int rotation = getRotation(context, selectedImage);     if (rotation != 0) {         Matrix matrix = new Matrix();         matrix.postRotate(rotation);         Bitmap rotatedImg = Bitmap.createBitmap(img, 0, 0, img.getWidth(), img.getHeight(), matrix, true);         img.recycle();         return rotatedImg;     } else {         return img;     } }  private static int getRotation(Context context, Uri selectedImage) {     int rotation = 0;     ContentResolver content = context.getContentResolver();       Cursor mediaCursor = content.query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,             new String[]{"orientation", "date_added"}, null, null, "date_added desc");      if (mediaCursor != null &amp;&amp; mediaCursor.getCount() != 0) {         while (mediaCursor.moveToNext()) {             rotation = mediaCursor.getInt(0);             break;         }     }     mediaCursor.close();     return rotation; } </code></pre>  <p>I need to fix this code or a good method that gets a bitmap check its rotation and rotate it if needed. Thanks</p>