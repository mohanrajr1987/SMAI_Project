<p>How to add a timestamp to bash script log for every command (exclude set, echo, log) ?</p>  <p>Im running a backup script and want to log all commands with timestamp:</p>  <pre><code> #./svnbackup.sh 2&amp;&gt;1 | timestamp_xtrace &gt; ./svn-backup.log 2&gt;&amp;1 </code></pre>  <p>this is my function, which doesnt work:</p>  <pre><code> timestamp_xtrace() {    while IFS= read -r line; do      if [[ "$line" =~ "^+ set" ]] &amp;&amp; [[ "$line" =~ "^+ echo" ]] &amp;&amp; [[ "$line" =~ "^+ log" ]]; then          echo "$(date) $line";      fi    done  } </code></pre>  <p>i want to exclude some commands (set, echo , log...)  but it doesnt work.. does someone have a hint to solve my problem?</p>