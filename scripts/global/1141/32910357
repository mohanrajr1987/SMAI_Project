<p>I am building an ActiveAdmin page, backed by an ActiveRecord model, <code>ModelA</code>, that has a <code>has_one</code> relationship to another model, we'll call it <code>Image</code>. I want to design it so that <code>ModelA</code> can have one of two sub-classes of <code>Image</code>, called <code>ImageMobile</code> and <code>ImageDesktop</code>, to be determined after <code>Image</code> is created but before it is saved. Here is what my models look like:</p>  <pre><code>class ModelA &lt; ActiveRecord::Base     has_one :image, class_name: 'Image'     accepts_nested_attributes_for :image end  class Image &lt; ActiveRecord::Base     attr_accessible :attachment end  class ImageDesktop &lt; Image     DEFAULT_WIDTH = 1500      if defined?(Paperclip)         has_attached_file :attachment, {             styles: {                 scale_1x: "#{DEFAULT_WIDTH}",                 scale_2x: "#{DEFAULT_WIDTH*2}",             }          }     end     # Do some stuff with DEFAULT_WIDTH end  class ImageMobile &lt; Image     DEFAULT_WIDTH = 400      if defined?(Paperclip)         has_attached_file :attachment, {             styles: {                 scale_1x: "#{DEFAULT_WIDTH}",                 scale_2x: "#{DEFAULT_WIDTH*2}",             }          }     end end </code></pre>  <p>So the sub-classes each have a <code>DEFAULT_WIDTH</code> that is unique to it and necessary for Paperclip to do image manipulation. Following, is my ActiveAdmin code for uploading the image to attach to <code>ModelA</code>.</p>  <pre><code>    form do |f|         f.inputs "Details" do             if f.object.image.nil?                 f.object.build_image             end             f.has_many :image, new_record: false, allow_destroy: false do |img|                 img.input :attachment, required: true, as: :file             end         end          f.actions do             f.action :submit, label: "Create"             f.action :cancel, label: "Cancel"         end     end </code></pre>  <p>I'm wondering if there is a way to branch on the <code>has_one</code>, either through a callback or whatever, so I can choose which of the sub-classes to use depending on the image that I upload through ActiveAdmin?</p>