<p>The drop down box is dynamically populated based on what the customer the user has been assigned to. The problem is that when I want to search for customers that the user is assigned to (if they choose the option of viewing <code>All</code> customers), I would have to do a query like:</p>  <p>Query 1:</p>  <p><code>SELECT * FROM LotDispDashBoardDB.disp_dummy where (customer = 'DL1' or customer = 'BC1') and stage like 'T%' and lot_status like 'close%';</code></p>  <p>I don't want to do</p>  <p>Query 2:</p>  <p><code>SELECT * FROM LotDispDashBoardDB.disp_dummy where stage like 'T%' and lot_status like 'close%';</code></p>  <p>because I want users to be able to see their own assigned customers only, I do not want them to see all the available customers.</p>  <p>The dropdown box has only one fixed value which is 'All', the rest of it are the individual customer names. If the user selects 'All' means he wants to view 'All' his assigned customers. In the controller below, if he selects all I would get the <code>$all_customer</code> array. If not I would just get the customer selected.</p>  <p>In the model to know if it's all or not I detect whether the value received is an array or not. If it's an array, I iterate through it an use code igniter's active record <code>$this-&gt;db-&gt;or_where('customer', $customer);</code> to do the query. The <strong>MAIN PROBLEM</strong> is the query. As stated before I am try to do like Query 1. <strong>How can I put the brackets and dynamically write the <code>where</code> clause?</strong></p>  <p>Controller:</p>  <pre><code>public function load_lot_table() {     // Get customers from session     $customer_session = $this-&gt;session-&gt;userdata['logged_in']['customers'];      foreach($customer_session as $cust_object)     {         $all_customer[] = $cust_object-&gt;customer;     }      // Get form values     if($this-&gt;input-&gt;get())     {         $selected_customer = $this-&gt;input-&gt;get('cust_drop_down');         $stage = $this-&gt;input-&gt;get('area_drop_down');         $lot_status = $this-&gt;input-&gt;get('status_drop_down');         $search_lot = ltrim( $this-&gt;input-&gt;get('search_lot') );          if($selected_customer == 'all')         {             $customer = $all_customer;         }         else         {             $customer = $selected_customer;         }     }     else     {         // Default values when page is loaded because form is not submitted yet         $customer = $all_customer;         $stage = 'all';         $lot_status = 'all';         $search_lot = '';     }      // Keys are the column names     $search = array(     'customer' =&gt; $customer,     'stage' =&gt; $stage,     'lot_status' =&gt; $lot_status,     'search_lot' =&gt; $search_lot     );      // Paginate retrieved lots     $results = $this-&gt;paginate_create_table($search);      /*** other codes ***/  }  private function paginate_create_table($search = null) {     if( is_array( $search['customer'] ) )     {         $customer = 'all';     }     else     {         $customer = $search['customer'];     }      // Set pagination configuration     $config = array();     $config['base_url'] = base_url()."index.php/Home/on_hold_lot";     $config['suffix'] = '?cust_drop_down='.$customer.'&amp;area_drop_down='.$search['stage'].'&amp;status_drop_down='.$search['lot_status'].'&amp;search_lot='.$search['search_lot'];     $config['first_url'] = $config['base_url'].$config['suffix'];     $config['total_rows'] = $this-&gt;home_model-&gt;fetch_lots('rows', $search);     $config['per_page'] = 10;     $config['uri_segment'] = 3;      /*** Other codes ****/ } </code></pre>  <p>Model:</p>  <pre><code>public function fetch_lots($return, $search = null, $limit = null, $start = 0) {     if($limit != null)     {         $this-&gt;db-&gt;limit($limit, $start);     }      if($search != null)     {         if( $search['customer'] != 'all' &amp;&amp; !is_array( $search['customer'] ) )         {             $this-&gt;db-&gt;where('customer', $search['customer']);         }         elseif( is_array( $search['customer'] ) )         {             foreach($search['customer'] as $customer)             {                 $this-&gt;db-&gt;or_where('customer', $customer);             }         }          if($search['stage'] != 'all')         {             $this-&gt;db-&gt;like('stage', $search['stage'], 'after');         }          if($search['lot_status'] != 'all')         {             $this-&gt;db-&gt;like('lot_status', $search['lot_status'], 'after');         }          if($search['search_lot'] != '')         {             $this-&gt;db-&gt;where('utac_lot', $search['search_lot']);         }     }     /*** Other codes ***/ } </code></pre>