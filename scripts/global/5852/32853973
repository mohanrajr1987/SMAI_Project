<p>I have a vector of <code>shared_ptr&lt;SomeClass&gt;</code> named <code>allParts</code>.</p>  <p>The code is like below:  </p>  <pre><code>void function thisIsWhereItStarts(){     vector&lt;shared_ptr&lt;SomeClass&gt; &gt; allParts;     for(i=0;i&lt;N;i++){         allParts.push_back(function_which_returns_shared_ptr_someclass());     }  // Then I use this vector as below:       for(vector&lt;shared_ptr&lt;SomeClass&gt; &gt;::iterator it = allParts.begin(); it!=allParts.end(); it++){          (*it)-&gt;function_of_SomeClass() ; // THIS GIVES SEGMENTATION FAULT     } } </code></pre>  <p>I've used vector of pointers a number of times before, but this is the first time I'm using <code>shared_ptr</code> . </p>  <p>The function which returns the <code>shared_ptr</code> is like this:  </p>  <pre><code>shared_ptr&lt;SomeClass&gt; function_which_returns_shared_ptr_someclass(){      shared_ptr&lt;SomeClass&gt; part(new SomeClass);     if(part-&gt;some_function(some_parameter)){          return part;     }else{          return shared_ptr&lt;SomeClass&gt;();     }  }  </code></pre>