<p>I have a unique requirement to highlight search terms on an encrypted solr document. The field to be highlighted is stored as encrypted data (but indexed as plain text). To show the search results to user it is decrypted on the client side.</p>  <p>To highlight search terms, I'm planning to use embedded solr to reindex the result document on client (with same schema and solrconfig) in memory using RamDirectoryFactory. Typical data size to be highlighted would be few hundred kbs. Very few could be in MB range. </p>  <p>Since embedded solr also needs creation of core directory, would the above solution work in a multi threaded environment? Although index is in memory but the physical core/config directory would possibly be shared due to multithreaded client. I am creating embedded solr server and returning highlight results in method scope only. </p>