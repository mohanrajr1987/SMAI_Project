<p>I have a problem in all my activities, when I press the back button it works properly, but when I press the context menu button before, nothing happens when I press back. I am talking about the phone buttons, not the toolbar icon for back navigation. Has anyone ever dealt with this?</p>  <p>EDIT: No menu shows, onPrepareOptionsMenu() is removed, the phone vibrates when I press back but no action. I see that if I inflate a menu, it worsk properly after the first back that closes te popup.</p>  <p>I see that this happens only if I set the toolbar with setSupportActionBar(toolbar);</p>