<p>I am trying to make an app to turn on mobile data on click. However, it requires to detect if mobile data is already on. If it is already on, data1.png is displayed else data0.png. However, for some reason it is not changing. TEST 2 is running though. (wdata is Image Button) This is the code:</p>  <pre><code>      ConnectivityManager cm = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);     try {         Class cmClass = Class.forName(cm.getClass().getName());         Method method = cmClass.getDeclaredMethod("getMobileDataEnabled");         method.setAccessible(true); // Make the method callable         // get the setting for "mobile data"         mobEnabled = (Boolean)method.invoke(cm);     } catch (Exception e) {         // Some problem accessible private API         // TODO do whatever error handling you want here     }     Toast.makeText(MainActivity.this, ""+mobEnabled, Toast.LENGTH_SHORT).show(); </code></pre>  <p>IF MOBILE DATA IS ENABLED, IT RETURNS TRUE.</p>  <pre><code>    if(mobEnabled){         wdata1=getResources().getDrawable(R.drawable.data1);         Toast.makeText(MainActivity.this, ":Test 1:"+mobEnabled, Toast.LENGTH_SHORT).show(); //RUNS          wdata.setImageDrawable(wdata1);// DOESN'T SET      }else{         wdata1 =                 getResources().getDrawable(R.drawable.data0);         Toast.makeText(MainActivity.this, ":Test 2:"+mobEnabled, Toast.LENGTH_SHORT).show();          wdata.setImageDrawable(wdata1);      } </code></pre>  <p>I have used the Drawable wdata1 in other areas:</p>  <pre><code>        wdata.setOnClickListener(new View.OnClickListener() {         @Override         public void onClick(View v) {             if(mobileDataEnabled(getApplicationContext())){                 setMobileDataEnabled(getApplicationContext(), false);                 wdata1 =                         getResources().getDrawable(R.drawable.data0);                 amobileDataEnabled = false;                }else{                 setMobileDataEnabled(getApplicationContext(),true);                 wdata1 =                         getResources().getDrawable(R.drawable.data1);                 amobileDataEnabled = true;              }             wdata.setImageDrawable(wdata1);         }     }); </code></pre>  <p>And in the onResume() method:</p>  <pre><code>   if( amobileDataEnabled){         wdata1 =                 getResources().getDrawable(R.drawable.data1);         wdata.setImageDrawable(wdata1);      }else {         wdata1 =                 getResources().getDrawable(R.drawable.data0);        wdata.setImageDrawable(wdata1);     } </code></pre>