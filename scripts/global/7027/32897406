<p>I am using <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#spring-mvc-test-server-htmlunit" rel="nofollow">Spring Test MVC HtmlUnit</a> with Geb to drive functional tests for my Spring MVC application. I would like to check that some session variables are saved properly during an interaction. I tried creating a test controller to return those variables, but HtmlUnit and <code>mvc.perform()</code> are using different sessions. Is there a way to use a single shared session between them?</p>  <p>driver setup:</p>  <pre><code>MockMvc mvc = MockMvcBuilders.webAppContextSetup(ctx)     .apply(SecurityMockMvcConfigurers.springSecurity())     .build()  HtmlUnitDriver driver = MockMvcHtmlUnitDriverBuilder.mockMvcSetup(mvc).javascriptEnabled(true).build() </code></pre>  <p>test:</p>  <pre><code>when:     via ProtectedPage  then:     // this uses session A     at LoginPage  and:     // this uses session B     println mvc.perform(get('/test/sessionAttributes')).andReturn().response.contentAsString </code></pre>