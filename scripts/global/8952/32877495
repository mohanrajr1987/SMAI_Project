<p>I wrote a C Language Function for PostgreSQL. It imports data from OpenStreetMap into my own database but it seems I have a memory leak somewhere. I tried to check it with valgrind:  </p>  <pre><code>LD_PRELOAD='/some/path/libohdm-import.so' valgrind --leak-check=full psql ohdm-dev -c "select ohdmImport('somefile.osm');" </code></pre>  <p>but every time I get the following error:</p>  <pre><code>valgrind: symbol lookup error: /some/path/libohdm-import.so: undefined symbol: SPI_processed </code></pre>  <p>I imported the header files from postgres correctly. The function successfully finishes with smaller map data like Fiji Islands but with bigger ones I get a Out-of-Memory.</p>  <p>My question is: How do I get valgrind to run with this?</p>