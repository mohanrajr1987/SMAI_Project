<p>I'm trying to port a Ruby script in puppet. As far as I know, the only way to achieve that is by creating a custom function in a module. Feel free to tell me if there's another way. I tried my first test as shown on <a href="https://docs.puppetlabs.com/guides/custom_functions.html" rel="nofollow">https://docs.puppetlabs.com/guides/custom_functions.html</a> , I declared a new module in:</p>  <pre><code>/etc/puppet/modules/custom_module </code></pre>  <p>and edited a new function file called <code>/etc/puppet/modules/custom_module/lib/puppet/parser/functions/newfunction</code> with this code:</p>  <pre><code>module Puppet::Parser::Functions     newfunction(:write_line_to_file) do |args|             filename = args[0]             str = args[1]             File.open(filename, 'a') {|fd| fd.puts str }     end end </code></pre>  <p>Then I used in this manifest <code>/etc/puppet/environments/desarrollo/manifests/des.pp</code> with this content:</p>  <pre><code>node "develserver" {         write_line_to_file('/tmp/some_file', "Hello world!") } </code></pre>  <p>And finally when I run a <code>puppet agent -tod</code> it shows me the following error:</p>  <pre><code>Error: Could not retrieve catalog from remote server: Error 400 on SERVER: Unknown function write_line_to_file at /etc/puppet/environments/desarrollo/manifests/des.pp:5 on node develserver </code></pre>  <p>What am I doing wrong?</p>