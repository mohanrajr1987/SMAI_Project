<p>Im embedding youtube videos into a page and when the PlayerState changes (when the video is player or paused) im adding and removing the video-playing class to the container. </p>  <p>The following works fine when there is just 1 video. However if there are 2 videos then the class is added and almost immediately removed. </p>  <p>I think this is because the <code>window.YT.PlayerState</code> isnt limited the current video whos state has changed. How can I correct this scope? </p>  <p>Note, only 1 video will ever play at a time. The videos are in a carousel and are paused when you go to the next slide. </p>  <pre><code>    if ($youtubeVideos.length) {       var tag = document.createElement('script'),         firstScriptTag = document.getElementsByTagName('script')[0];       tag.src = '//www.youtube.com/iframe_api';       firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);        window.onYouTubeIframeAPIReady = function() {         $youtubeVideos.each(function () {           var player = new window.YT.Player(this.id, {             events: {               onReady: function (e) {                 var state = e.target.getPlayerState();                 if (state === window.YT.PlayerState.BUFFERING || state === window.YT.PlayerState.PLAYING) {                   $element.addClass('video-playing');                   activePlayer = player;                 }               },               onStateChange: function (e) {                 if (e.data === window.YT.PlayerState.BUFFERING || e.data === window.YT.PlayerState.PLAYING) {                   $element.addClass('video-playing');                   activePlayer = player;                 } else {                   $element.removeClass('video-playing');                   activePlayer = null;                 }               }             }           });         });       };     } </code></pre>