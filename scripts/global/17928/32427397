<p>I'm woking on my first custom view which extends LinearLayout. The view consists two parts header view and content view. Header view is on top and has set margin from right. Content view is below: <a href="http://i.stack.imgur.com/fcuCr.png" rel="nofollow"><img src="http://i.stack.imgur.com/fcuCr.png" alt="enter image description here"></a></p>  <p>I achive header margin with : <code>view.layout(...)</code> in overridden method <code>protected void onLayout(...)</code> in xml preview everything looks great but when I set TextView as header view with set text and gravity center I found out that text is ignoring borders it looks like (black is visible, gray invisible): <a href="http://i.stack.imgur.com/f6Gff.png" rel="nofollow"><img src="http://i.stack.imgur.com/f6Gff.png" alt="enter image description here"></a></p>  <p>But I need to accept borders: <a href="http://i.stack.imgur.com/aEINJ.png" rel="nofollow"><img src="http://i.stack.imgur.com/aEINJ.png" alt="enter image description here"></a></p>  <p>I tried to set layoutParams to headerView in <code>protected void onLayout(...)</code> method which solved my problem but I got infinity warning: <code>requestLayout() improperly called by android.widget.TextView...</code> another thing I try is to set layoutParams in <code>protected void onMeasure</code> method but in xml preview text has vertical orientation and looks like:</p>  <pre><code>t h i s ... </code></pre>  <p>so I think that this two approaches are not correct, therefore my question is how to set header view width in correct way? thanks</p>