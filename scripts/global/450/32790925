<p>Is it possible to do a nullity check and an access in a macro?</p>  <p>Eg:</p>  <pre><code>#define LOG(mystruct, severity, format, ...) ({ \   severity_t current = ERROR; \   if (mystruct) { \     current = mystruct-&gt;error_level; \   } \   if (severity &gt;= current) { \    ... //handle logging    } \ }) </code></pre>  <p>If I call this with <code>LOG(NULL, DEBUG, "test %s", "one");</code> I get an error as such:</p>  <p><code>error: member reference base type 'void' is not a structure or union        note: expanded from macro 'LOG'        current = mystruct-&gt;error_level;</code></p>  <p>mystruct is defined as:</p>  <pre><code>typedef struct mystruct_t {   severity_t error_level; } </code></pre>  <p>I want to allow the possibility of working with a NULL <code>mystruct</code>. Eg: case of when there is an error creating the structure itself.</p>