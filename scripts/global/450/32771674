<p>I'm trying to implement a generic stack in C, with the help of a big macro (not the best way, but that's not the point here).  This macro contains functions declarations, structures and functions calls, with a <code>TYPE</code> type that would be replaced by what needed:</p>  <pre><code>#define STACK(TYPE)                                                          \ (                                                                            \     struct stack                                                             \     {                                                                        \         size_t           size;                                               \         struct container *top;                                               \     };                                                                       \                                                                              \     struct container                                                         \     {                                                                        \         TYPE             data;                                               \         struct container *next;                                              \     };                                                                       \                                                                              \     struct stack *stack_init(void)                                           \     {                                                                        \         struct stack *s = malloc(sizeof (struct stack));                     \         if (!s)                                                              \             return NULL;                                                     \         return s;                                                            \     }                                                                        \     ... ... ) </code></pre>  <p>This header file would be called in any .c file with this line </p>  <pre><code>#include "utils_stack.h" STACK(int) </code></pre>  <p>Thing is, after trying every possible form of syntax gcc told me to try, I can't find a way to get it to work. I tried with parenthesis, brackets, both, none... The code just simply won't work. Here is the error I get with the above syntax for example: <code>error: expected identifier or ‘(’ before ‘struct’</code></p>  <p>While trying to run gcc with the -E flag, I clearly see that <code>TYPE</code> is being replaced by <code>int</code>.</p>  <p>So here is my question, <strong>How do I need to write my macro to be able to... use it ?</strong></p>  <p>Thank you in advance</p>