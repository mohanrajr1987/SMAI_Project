<p>I have a JNI function in C which is getting passed in a Java FILE class which represents a directory listing. I would like to call the list() function and get the list of strings (files in the directory). What is the best way to do this?</p>  <p>Right now I have</p>  <pre><code>static void* my_function(JNIEnv *env, jobject obj, jobject dir){     jarray listRet;     jclass cls = (*env)-&gt;GetObjectClass(env, dir);     jmethodID method = (*env)-&gt;GetMethodID(env, cls, "list", "()[Ljava/lang/String");     listRet = (*env)-&gt;CallObjectMethod(env, cls, method);      jsize stringCount = (*env)-&gt;GetArrayLength(env, listRet); } </code></pre>  <p>However, by adding logging statements, it seems that it never gets past the GetObjectClass call. So, is this call correct? Further, is the GetMethodID call correct? The return type of list() is a (java) String[]. Is there anywhere else that I'm going wrong?</p>