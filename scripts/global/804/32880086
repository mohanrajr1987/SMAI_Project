<p>I am new to jni and objective c. I want to convert CFArray to int[] in java and return the data.</p>  <p>I have tried the following 2 methods but I didn't get the result.</p>  <pre><code>CFArrayRef windowids =CGWindowListCreate(kCGWindowListOptionOnScreenOnly ,kCGNullWindowID);  jintArray res = (*jenv)-&gt;NewIntArray(jenv, CFArrayGetCount(windowids)); for (int i=0;i&lt;CFArrayGetCount(windowids);i++) {    res[i]=CFArrayGetValueAtIndex(windowids,i); } return res; </code></pre>  <p>and</p>  <pre><code>CFArrayRef windowids =CGWindowListCreate(kCGWindowListOptionOnScreenOnly ,kCGNullWindowID);  jintArray res = (*jenv)-&gt;NewIntArray(jenv, CFArrayGetCount(windowids)); (*jenv)-&gt;SetIntArrayRegion(jenv, res, 0, CFArrayGetCount(windowids), windowids); return res; </code></pre>  <p>How to properly convert the CFArrayRef to java int array?</p>