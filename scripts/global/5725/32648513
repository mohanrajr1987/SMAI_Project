<p>I'm creating a database for a project in which I need to declare a foreign key on another foreign key for the sake of a checking constraint.</p>  <p>I have a <code>Person</code> table and a <code>Groups</code> table, both of these contain a <code>DepartmentID</code>. Whenever I insert a new task in the <code>Task</code> table, I want to check that the <code>Groups.DepartmentID</code> matches the <code>Person.DepartmentID</code>.</p>  <p>The idea is that a task is linked to a person and has 2 types, a grouptype which defines if its database work, financial work etc and a tasktype which defines if its maintenance, training etc. When a person tries to add a task with a groupType that is not for his/her department it should fail.</p>  <p>I tried adding these attributes to the <code>Task</code> table as a foreign key, however declaring a foreign key on a non-unique or non-primary key isn't accepted in Microsoft SQL Server (the <code>DepartmentID</code> in the <code>Person</code> and <code>Group</code> tables cannot be unique!).</p>  <p>Anyone knows how to fix this?</p>  <pre><code>CREATE TABLE Department  (     ID int PRIMARY KEY IDENTITY,     Name varchar(50),     UNIQUE ("Name") )  CREATE TABLE Groups (     ID int IDENTITY,     GroupType varchar(50) PRIMARY KEY,     Description varchar(255) DEFAULT ('-'),     DepartmentID int          FOREIGN KEY (DepartmentID) REFERENCES Department(ID), )  CREATE TABLE Person  (     ID int PRIMARY KEY IDENTITY,     Name varchar(50),     DepartmentID int           FOREIGN KEY (DepartmentID) REFERENCES Department(ID) )  CREATE TABLE TaskType (     ID int IDENTITY,     TaskType varchar(50) PRIMARY KEY,     Description varchar(255) DEFAULT ('-'),  )  CREATE TABLE Task (     ID int IDENTITY,     TimeFrame decimal(4,2),     Yearcount int,     GroupType varchar(50),     TaskType varchar(50),      WeekNr int,     ExceptionDetail varchar(255) DEFAULT ('-'),     PersonID int ) </code></pre>  <p>These are the FK attributes in the task table that are not accepted:</p>  <pre><code>GDID int FOREIGN KEY REFERENCES Groups(DepartmentID), PDID int FOREIGN KEY REFERENCES Person(DepartmentID), CHECK (GDID = PDID),      UNIQUE ("TaskType", "GroupType", "WeekNr", "Yearcount"), FOREIGN KEY (TaskType) REFERENCES TaskType(TaskType), FOREIGN KEY (PersonID) REFERENCES Person(ID), FOREIGN KEY (GroupType) REFERENCES Groups(GroupType) </code></pre>