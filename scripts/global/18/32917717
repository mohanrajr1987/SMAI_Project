<p>I have a CSV file with following headers and (sample) data:</p>  <pre><code>StopName,RouteName,Travel_Direction,Latitude,Longitude StreetA @ StreetB,1 NameA,DirectionA,Lat,Long StreetC @ StreetD,1 NameA,DirectionA,Lat,Long ... StreetE @ StreetF,1 NameA,DirectionB,Lat,Long StreetG @ StreetH,1 NameA,DirectionB,Lat,Long ... StreetI @ StreetJ,2 NameB,DirectionC,Lat,Long StreetK @ StreetL,2 NameB,DirectionC,Lat,Long ... StreetM @ StreetN,2 NameB,DirectionD,Lat,Long StreetO @ StreetP,2 NameB,DirectionD,Lat,Long . . . </code></pre>  <p>I am wanting to use regex (currently in Notepad++) to get the following results:</p>  <pre><code>1 NameA - DirectionA=[[StreetA @ StreetB,[Lat,Long]], [StreetC @ StreetD,[Lat,Long]], ...] 1 NameA - DirectionB=[[StreetD @ StreetE,[Lat,Long]], [StreetF @ StreetG,[Lat,Long]], ...] 2 NameB - DirectionC=[[StreetH @ StreetI,[Lat,Long]], [StreetJ @ StreetK,[Lat,Long]], ...] 2 NameB - DirectionD=[[StreetL @ StreetM,[Lat,Long]], [StreetN @ StreetO,[Lat,Long]], ...] . . . </code></pre>  <p>With the Regex and Substitution,</p>  <pre><code>RgX: ^([^,]*),([^,]*),([^,]*),(.*) Sub: $2 - $3=[$1,[\4]]  Demo: https://regex101.com/r/gS9hD6/1 </code></pre>  <p>I have gotten this far:</p>  <pre><code>1 NameA - DirectionA=[StreetA @ StreetB,[Lat,Long]] 1 NameA - DirectionA=[StreetC @ StreetD,[Lat,Long]] 1 NameA - DirectionB=[StreetE @ StreetF,[Lat,Long]] 1 NameA - DirectionB=[StreetG @ StreetH,[Lat,Long]] 2 NameB - DirectionC=[StreetI @ StreetJ,[Lat,Long]] 2 NameB - DirectionC=[StreetK @ StreetL,[Lat,Long]] 2 NameB - DirectionD=[StreetM @ StreetN,[Lat,Long]] 2 NameB - DirectionD=[StreetO @ StreetP,[Lat,Long]] </code></pre>  <p>In a new regex, I tried splitting the above result on "=", but didn't know where to go from there.</p>  <p>I think one way to get the desired results would be to keep first unique instance of what's before "=", replace new line with "," and enclose it with a [..] to make it an array form.</p>  <p><strong>Edit:</strong> There are about 10k stops (total), but only about 100 unique routes.</p>  <p><strong>Edit 2:</strong> (maybe I am asking for too many changes now)</p>  <p>For first regex:</p>  <ul> <li>What if I want to use "\n" instead of "="?</li> </ul>  <p>At beginning of 2nd regex replacement,</p>  <ul> <li>What if I have only RouteName and StopName columns, like this: <code>1 NameA - DirectionA=[StreetA @ StreetB, ...]</code>?</li> <li>Similarly, what if I only have RouteName and Coordinates, like this: <code>1 NameA - DirectionA=[[Lat,Long]]</code>?</li> </ul>