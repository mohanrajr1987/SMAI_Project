<p>I am Trying To upload images to imageview from gallery and camera.When i Choose image from gallery to upload to imageview its Work Perfactly.But when i Select camera captured Image for upload to imageview Its Crash And Showing the error.It is  perfectly working on api 17 but not on api 22.</p>  <p>Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.String android.net.Uri.getScheme()' on a null object reference</p>  <p>My code is.....</p>  <pre><code>@Override protected void onActivityResult(int requestCode, int resultCode, Intent data) {  // Load the images from gallery and camera     super.onActivityResult(requestCode, resultCode, data);      if (requestCode == RESULT_LOAD_IMAGE &amp;&amp; resultCode == RESULT_OK &amp;&amp; null != data) {         Uri selectedImage = data.getData();         String[] filePathColumn = { MediaStore.Images.Media.DATA };          Cursor cursor = getContentResolver().query(selectedImage,                 filePathColumn,null,null,null);         cursor.moveToFirst();          int columnIndex = cursor.getColumnIndex(filePathColumn[0]);         String picturePath = cursor.getString(columnIndex);         cursor.close();          ImageView imageView = (ImageView) findViewById(R.id.icon);         imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));      }     else if (resultCode == RESULT_OK) {         if (requestCode == 1) {             File f = new File(Environment.getExternalStorageDirectory().toString());             for (File temp : f.listFiles()) {                 if (temp.getName().equals("temp.jpg")) {                     f = temp;                     break;                 }             }             try {                 Bitmap bitmap;                 BitmapFactory.Options bitmapOptions = new BitmapFactory.Options();                  bitmap = BitmapFactory.decodeFile(f.getAbsolutePath(),                         bitmapOptions);                  icon.setImageBitmap(bitmap);                  String path = android.os.Environment                         .getExternalStorageDirectory()                         + File.separator                         + "Phoenix" + File.separator + "default";                 f.delete();                 OutputStream outFile = null;                 File file = new File(path, String.valueOf(System.currentTimeMillis()) + ".jpg");                 try {                     outFile = new FileOutputStream(file);                     bitmap.compress(Bitmap.CompressFormat.JPEG, 85, outFile);                     outFile.flush();                     outFile.close();                 } catch (FileNotFoundException e) {                     e.printStackTrace();                 } catch (IOException e) {                     e.printStackTrace();                 } catch (Exception e) {                     e.printStackTrace();                 }             } catch (Exception e) {                 e.printStackTrace();             }         }     }} </code></pre>