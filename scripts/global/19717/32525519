<p>I have to parse an html page organized this way:</p>  <pre><code>&lt;li id="ctl00_EFG" class="current"&gt;   &lt;a id="ctl00_SGB" href="http://SGI/EFG"&gt;EFG&lt;/a&gt;   &lt;ul style="width:535px;"&gt;     &lt;li class="top_border"&gt;       &lt;a style='color: #d94129; font-weight: bold;' href="http://SGI/EFG/regione-abruzzo" title="EFGAbruzzo"&gt;Abruzzo&lt;/a&gt;       &lt;ul style="width:100%;"&gt;         &lt;li&gt;           &lt;a href="http://SGI/EFG/chieti" title="EFG chieti" rel="nofollow"&gt;Chieti&lt;/a&gt;         &lt;/li&gt;         &lt;li&gt;           &lt;a href="http://SGI/EFG/pescara" title="EFG pescara" rel="nofollow"&gt;Pescara&lt;/a&gt;         &lt;/li&gt;       &lt;/ul&gt;     &lt;/li&gt;     &lt;li class="top_border"&gt;&lt;a style='color: #d94129; font-weight: bold;' href="http://SGI/EFG/regione-valdaosta" title="EFGValDAosta"&gt;Val d'Aosta&lt;/a&gt;       &lt;ul style="width:100%;"&gt;         &lt;li&gt;           &lt;a href="http://SGI/EFG/aosta" title="EFG aosta" rel="nofollow"&gt;Aosta&lt;/a&gt;         &lt;/li&gt;       &lt;/ul&gt;     &lt;/li&gt;   &lt;/ul&gt; &lt;/li&gt; </code></pre>  <p>I need to extract an object with the regions and the cities, like this:</p>  <pre><code>{   "Abruzzo": [     "Chieti" , "Pescara",   ],   "Val d'Aosta": [     "Aosta",   ], }; </code></pre>  <p>I am using <em>cheerio</em> from <em>node.js</em>, but I added jquery to the tags since <em>cheerio</em> uses jquery-style selector (AFAIK...).</p>  <p>I have come with this partial solution, which is <em>not</em> working ...</p>  <pre><code>$('a[id="ctl00_SGB"]').next().find('ul li').each(function(i, elem) {   var $categoryTop = $(this);   var region = $categoryTop.find('a').first().attr('rel', ':not(nofollow)').text();   console.log('region:', region);   $(elem).find('ul li a').each(function(i, elem2) {     console.log('elem2:', $(elem2).text()); }); </code></pre>  <p>Any clue?</p>  <p><em>P.S.: I am changing a question inserted yesterday, and answered correctly. Unfortunately, I did simplify it a bit too much, so I couldn't use the correct answer to my use case...</em></p>