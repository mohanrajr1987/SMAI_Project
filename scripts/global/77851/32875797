<p>I'm constructing a <code>UITableViewCell</code> via a nib file. I also have a corresponding <code>UITableViewCell</code> subclass which the nib's outlets are connected to. </p>  <p>I need a dynamically sized <code>UIImageView</code> (only the width) to be the background of my tableviewcell's label. Is there a way this can be achieved via autolayout? </p>  <p>I've tried setting the imageview as a subview of the label in code:</p>  <pre><code>[theLabel sizeToFit] CGRect boundingRect = [theLabel.text boundingRectWithSize: theLabel.frame.size options:NSStringDrawingUsesLineFragmentOrigin attributes:0 context:0]; UIImageView *background = [[UIImageView alloc]initWithFrame:boundingRect]; background.image = [UIImage imageNamed: @"validImageName"]]; [theLabel addSubview: background]; </code></pre>  <p>However this does not result in the correct frame. I've also considered setting the background of the label with <code>[UIColor colorWithPatternImage: @"aValidImageName"];</code> but this does not include padding on the background image. Also, the background image contains rounded corners which I want to retain (which this method cuts). Any ideas are appreciated. </p>