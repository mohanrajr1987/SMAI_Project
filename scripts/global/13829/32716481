<p>In boost doc(<a href="http://www.boost.org/doc/libs/1_59_0/libs/smart_ptr/shared_ptr.htm#ThreadSafety" rel="nofollow">Shared_ptr doc</a>), I see there is a example which is thread unsafe:</p>  <pre><code>//--- Example 4 ---  // thread A p3 = p2; // reads p2, writes p3  // thread B // p2 goes out of scope: undefined, the destructor is considered a "write access" </code></pre>  <p>How to deal with this case? how can I control if p2 has go out of scope?</p>