<p>Forward requests using proxy_pass. If url typed is www.yyy.com/9.157/7.134/live/playlist.m3u8 </p>  <p>I want to proxy_pass it to 10.5.a.b:1935/live/playlist.m3u8 ,</p>  <p>where the first two octets (10.5) remain constant , all i need to do is extract 9.157 and 7.134 from the url and proxy pass it to 10.5.a.b:1935 or (if 10.5.9.157:1935 is down proxy_pass to 10.5.7.134:1935 )  </p>  <p>this is how my nginx config looks </p>  <p>location / {</p>  <pre><code>       rewrite (\/)(([0-9][0-9][0-9]|[0-9][0-9]|[0-9])\.([0-9][0-9][0-9]|[0-9][0-9]|[0-9]))(\/)  http://10.5.$2:1935/live/suhas_712_media_240p/playlist.m3u8  redirect;  } </code></pre>  <p>the above code is working but then i do not want to redirect, i want to do something like following </p>  <p>proxy_pass 10.5.a.b:1935 </p>  <p>how to pass extracted values to a,b?</p>  <p>Thanks </p>