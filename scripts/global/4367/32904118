<p>So I have attempted to add a PayPal IPN system to my website, everything works on this code apart from the "Update" section, if anybody knows why I am having a problem it would be great to have some help! Thanks all. </p>  <pre><code>Custom Variable: &lt;input type="hidden" name="custom" value="&lt;? echo $pcn_number; ?&gt;"&gt; </code></pre>  <p>IPN Code:</p>  <pre><code> // assign posted variables to local variables     $item_name = $_POST['item_name'];     $item_number = $_POST['item_number'];     $payment_status = $_POST['payment_status'];     if ($_POST['mc_gross'] != NULL)         $payment_amount = $_POST['mc_gross'];     else         $payment_amount = $_POST['mc_gross1'];     $payment_currency = $_POST['mc_currency'];     $txn_id = $_POST['txn_id'];     $receiver_email = $_POST['receiver_email'];     $payer_email = $_POST['payer_email'];     $custom = $_POST['custom'];     $first_name = $_POST['first_name'];     $last_name = $_POST['last_name'];                if($payment_status == 'Completed'){                   if($payment_currency == 'GBP'){                        $txn_id_check = mysqli_query($conn, "SELECT `txn_id` FROM `payment_logs` WHERE `txn_id`='".$txn_id."'");                       if(mysqli_num_rows($txn_id_check)!= 1){                             ///// Insert payment in to Payment Log Database /////                           mysqli_query($conn, "INSERT INTO `payment_logs` VALUES ('','".$first_name."','".$last_name."','".$payer_email."','".$txn_id."','Â£".$payment_amount."',NOW())");                            ///// Update PCN as Paid in Database /////                           mysqli_query($conn, "UPDATE `parkingtickets` SET `paid`='1', `paid_date`= NOW() WHERE `pcn_number`='".$custom."");                            ///// Add Payment Complete Email to Email Outbox Database /////                           $messagebody = 'Dear '.$first_name.' '.$last_name.',                          Thank you for your payment to Devon Parking Agency, your PCN will now be automatically removed from the system.                           Please remember that all payment transactions may take up to 3 working days to process, the payment will display on your account as *PayPal DPA.                           If you have any problems, please feel free to contact us:                          http://devonparkingagency.co.uk                           This is an automated response, please do NOT reply to this email.                         ';                          mysqli_query($conn, "INSERT INTO `email_outbox` VALUES ('','Ready',NOW(),'".$payer_email."','".$first_name."','autoresponse@devonparkingagency.co.uk','DPA Payment Complete','".$messagebody."','0')");                        }                    }               } </code></pre>