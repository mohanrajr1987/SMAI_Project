<p>Have been trying to upload the following png file to google cloud storage through app engine: </p>  <p><a href="http://i.stack.imgur.com/IJW4o.png" rel="nofollow"><img src="http://i.stack.imgur.com/IJW4o.png" alt="enter image description here"></a></p>  <p>Before the upload, I'm running this through PIL to take care of any image rotations or changes in background color etc</p>  <p>However, I'm getting really bad image quality when running PIL manipulations through the app even though running the same commands in python command line comes out fine</p>  <p><a href="http://i.stack.imgur.com/C0570.png" rel="nofollow"><img src="http://i.stack.imgur.com/C0570.png" alt="enter image description here"></a></p>  <p>Anybody have ideas? </p>  <p>For the PIL commands, I'm just running the following:</p>  <pre><code>imtemp = Image.open('/[path]/logo.png') size = max(imtemp.size[0],imtemp.size[1])  im = Image.new('RGBA', (size,size), (255,255,255,0)) im.paste(imtemp, ((size-imtemp.size[0])/2,(size-imtemp.size[1])/2))  imtemp = im  im = Image.new('RGB', (size,size), '#FFFFFF')  im.paste(imtemp, (0,0), imtemp)  im.show() </code></pre>  <p>Have tried below, but still no luck</p>  <pre><code>    imtemp = Image.open(StringIO(imagedata)).convert("RGBA")     im = Image.new("RGB", imtemp.size, "#FFFFFF")     im.paste(imtemp, None, imtemp)     imageoutput = StringIO()     im.save(imageoutput, format="PNG", quality=85, optimize=True, progressive=True)     imageoutput = imageoutput.getvalue() </code></pre>