<p>I have a huge navigation with multiple drop-down-menus. On touch-devices I want to disable all links on a node and clone these links as first childs into their sub-menus. </p>  <p>The following code works great for the first level, but it has to work on deeply nested menus, too. Can anyone help? </p>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-js lang-js prettyprint-override"><code>$('nav &gt; ul &gt; li &gt; a').each(function(index, value) {   $("nav &gt; ul &gt; li.has-sub-menu:nth-child(" + index + ") &gt; a")     .clone()     .insertBefore(".has-sub-menu:nth-child(" + index + ") &gt; ul &gt; li:first-child")     .wrap('&lt;li&gt;&lt;/li&gt;')     .prepend("About: "); });  $('.has-sub-menu &gt; a').removeAttr('href', '#');</code></pre> <pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"&gt;&lt;/script&gt; &lt;nav class="site-nav"&gt;   &lt;ul&gt;     &lt;li class="has-sub-menu"&gt;&lt;a href="http://some-link.io"&gt;Animals&lt;/a&gt;       &lt;ul class="sub-menu"&gt;         &lt;li class="has-sub-menu"&gt;&lt;a href="http://some-link.io"&gt;Birds&lt;/a&gt;           &lt;ul class="sub-menu"&gt;             &lt;li class="has-sub-menu"&gt;&lt;a href="http://some-link.io"&gt;Seabirds&lt;/a&gt;               &lt;ul class="sub-menu"&gt;                 &lt;li&gt;                   &lt;a href="http://some-link.io"&gt;Gull&lt;/a&gt;                 &lt;/li&gt;                 &lt;li&gt;                   &lt;a href="http://some-link.io"&gt;Sea Eagle&lt;/a&gt;                 &lt;/li&gt;               &lt;/ul&gt;             &lt;/li&gt;           &lt;/ul&gt;         &lt;/li&gt;         &lt;li&gt;           &lt;a href="http://some-link.io"&gt;Reptiles&lt;/a&gt;         &lt;/li&gt;         &lt;li&gt;           &lt;a href="http://some-link.io"&gt;Fishes&lt;/a&gt;         &lt;/li&gt;         &lt;li class="has-sub-menu"&gt;           &lt;a href="http://some-link.io"&gt;Mammals&lt;/a&gt;           &lt;ul class="sub-menu"&gt;             &lt;li class="has-sub-menu"&gt;               &lt;a href="http://some-link.io"&gt;Bipeds&lt;/a&gt;               &lt;ul class="sub-menu"&gt;                 &lt;li&gt;                   &lt;a href="http://some-link.io"&gt;Monkeys&lt;/a&gt;                 &lt;/li&gt;                 &lt;li&gt;                   &lt;a href="http://some-link.io"&gt;Humans&lt;/a&gt;                 &lt;/li&gt;               &lt;/ul&gt;             &lt;/li&gt;             &lt;li class="has-sub-menu"&gt;               &lt;a href="http://some-link.io"&gt;Quadruped&lt;/a&gt;               &lt;ul class="sub-menu"&gt;                 &lt;li&gt;&lt;a href="http://some-link.io"&gt;Dogs&lt;/a&gt;                 &lt;/li&gt;                 &lt;li&gt;&lt;a href="http://some-link.io"&gt;Cats&lt;/a&gt;                 &lt;/li&gt;               &lt;/ul&gt;             &lt;/li&gt;           &lt;/ul&gt;         &lt;/li&gt;         &lt;li&gt;&lt;a href="http://some-link.io"&gt;Amphibians&lt;/a&gt;         &lt;/li&gt;       &lt;/ul&gt;     &lt;/li&gt;     &lt;li class="has-sub-menu current-menu-item"&gt;       &lt;a href="http://some-link.io"&gt;Cars&lt;/a&gt;       &lt;ul class="sub-menu"&gt;         &lt;li class="has-sub-menu"&gt;           &lt;a href="http://some-link.io"&gt;European-Cars&lt;/a&gt;           &lt;ul class="sub-menu"&gt;             &lt;li class="has-sub-menu"&gt;               &lt;a href="http://some-link.io"&gt;German Cars&lt;/a&gt;               &lt;ul class="sub-menu"&gt;                 &lt;li&gt;                   &lt;a href="http://some-link.io"&gt;Volkswagen&lt;/a&gt;                 &lt;/li&gt;                 &lt;li&gt;                   &lt;a href="http://some-link.io"&gt;Porsche&lt;/a&gt;                 &lt;/li&gt;                 &lt;li&gt;                   &lt;a href="http://some-link.io"&gt;Merzedes Benz&lt;/a&gt;                 &lt;/li&gt;                 &lt;li&gt;                   &lt;a href="http://some-link.io"&gt;Audi&lt;/a&gt;                 &lt;/li&gt;               &lt;/ul&gt;             &lt;/li&gt;             &lt;li&gt;               &lt;a href="http://some-link.io"&gt;Dutch Cars&lt;/a&gt;             &lt;/li&gt;             &lt;li&gt;               &lt;a href="http://some-link.io"&gt;Belgian Cars&lt;/a&gt;             &lt;/li&gt;             &lt;li class="has-sub-menu"&gt;               &lt;a href="http://some-link.io"&gt;Italian Cards&lt;/a&gt;               &lt;ul class="sub-menu"&gt;                 &lt;li&gt;                   &lt;a href="http://some-link.io"&gt;Ferrari&lt;/a&gt;                 &lt;/li&gt;                 &lt;li&gt;                   &lt;a href="http://some-link.io"&gt;Fiat&lt;/a&gt;                 &lt;/li&gt;                 &lt;li&gt;                   &lt;a href="http://some-link.io"&gt;Alfa Romeo&lt;/a&gt;                 &lt;/li&gt;               &lt;/ul&gt;             &lt;/li&gt;           &lt;/ul&gt;         &lt;/li&gt;         &lt;li class="has-sub-menu"&gt;           &lt;a href="http://some-link.io"&gt;Asian Cards&lt;/a&gt;           &lt;ul class="sub-menu"&gt;             &lt;li class="has-sub-menu"&gt;               &lt;a href="http://some-link.io"&gt;Japanese Cars&lt;/a&gt;               &lt;ul class="sub-menu"&gt;                 &lt;li&gt;                   &lt;a href="http://some-link.io"&gt;Toyota&lt;/a&gt;                 &lt;/li&gt;                 &lt;li&gt;                   &lt;a href="http://some-link.io"&gt;Mazda&lt;/a&gt;                 &lt;/li&gt;                 &lt;li&gt;                   &lt;a href="http://some-link.io"&gt;Honda&lt;/a&gt;                 &lt;/li&gt;               &lt;/ul&gt;             &lt;/li&gt;           &lt;/ul&gt;         &lt;/li&gt;         &lt;li class="has-sub-menu"&gt;           &lt;a href="http://some-link.io"&gt;US Cars&lt;/a&gt;           &lt;ul class="sub-menu"&gt;             &lt;li&gt;               &lt;a href="http://some-link.io"&gt;Ford&lt;/a&gt;             &lt;/li&gt;             &lt;li&gt;               &lt;a href="http://some-link.io"&gt;Jeep&lt;/a&gt;             &lt;/li&gt;             &lt;li&gt;               &lt;a href="http://some-link.io"&gt;Dodge&lt;/a&gt;             &lt;/li&gt;             &lt;li&gt;               &lt;a href="http://some-link.io"&gt;Buick&lt;/a&gt;             &lt;/li&gt;           &lt;/ul&gt;         &lt;/li&gt;         &lt;li class="has-sub-menu"&gt;           &lt;a href="http://some-link.io"&gt;African Cars&lt;/a&gt;           &lt;ul class="sub-menu"&gt;             &lt;li&gt;               &lt;a href="http://some-link.io"&gt;Ramses&lt;/a&gt;             &lt;/li&gt;             &lt;li&gt;               &lt;a href="http://some-link.io"&gt;Tarantula&lt;/a&gt;             &lt;/li&gt;             &lt;li&gt;               &lt;a href="http://some-link.io"&gt;Birkin&lt;/a&gt;             &lt;/li&gt;             &lt;li&gt;               &lt;a href="http://some-link.io"&gt;Ranger&lt;/a&gt;             &lt;/li&gt;           &lt;/ul&gt;         &lt;/li&gt;         &lt;li&gt;           &lt;a href="http://some-link.io"&gt;Australian Cars&lt;/a&gt;         &lt;/li&gt;       &lt;/ul&gt;     &lt;/li&gt;     &lt;li&gt;       &lt;a href="http://some-link.io"&gt;Drinks&lt;/a&gt;     &lt;/li&gt;     &lt;li&gt;       &lt;a href="http://some-link.io"&gt;Cigaretts&lt;/a&gt;     &lt;/li&gt;     &lt;li class="has-sub-menu"&gt;       &lt;a href="http://some-link.io"&gt;Colors&lt;/a&gt;       &lt;ul class="sub-menu sub-menu-left"&gt;         &lt;li&gt;           &lt;a href="http://some-link.io"&gt;Red&lt;/a&gt;         &lt;/li&gt;         &lt;li&gt;           &lt;a href="http://some-link.io"&gt;Yellow&lt;/a&gt;         &lt;/li&gt;         &lt;li&gt;           &lt;a href="http://some-link.io"&gt;Green&lt;/a&gt;         &lt;/li&gt;         &lt;li&gt;           &lt;a href="http://some-link.io"&gt;Blue&lt;/a&gt;         &lt;/li&gt;       &lt;/ul&gt;     &lt;/li&gt;   &lt;/ul&gt; &lt;/nav&gt;</code></pre> </div> </div> </p>  <p>My desired strukture looks like this: </p>  <ul> <li>Animals (link removed here)  <ul> <li>About: Animals (this one should be added via jquery)</li> <li>Birds (link removed here)  <ul> <li>About: Birds (this one should be added via jquery)</li> <li>Seabirds (link removed here)</li> <li>About: Seabirds (this one should be added via jquery)</li> <li>Gull</li> <li>Sea Eagle</li> </ul></li> <li>Reptiles</li> <li>Fishes</li> <li>Mammals (link removed here)  <ul> <li>About: Mammals (this one should be added via jquery)</li> <li>Bipeds (link removed here)</li> <li>About: Bipeds (this one should be added via jquery)</li> <li>Monkeys</li> <li>Humans</li> <li>Quadruped (link removed here)</li> <li>About: Quadrupted (this one should be added via jquery)</li> <li>Dogs</li> <li>Cats</li> </ul></li> <li>Amphibians </li> </ul></li> </ul>  <p>â€¦</p>