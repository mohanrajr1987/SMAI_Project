<p>I have to build a function which calculates the room options that are available for a guest.<br> For example; the guest has chosen 2 rooms in his inquiry, 1 room for ‘two adults’ and 1 room for ‘2 adults and a child’.<br> After a couple of calculations there will be 2 arrays. 1 array contains the possible rooms (searched per room inquiry) and 1 array has the availability (how many rooms are available of this room-type in the hotel). </p>  <p>The first array with the possible rooms will for example look like this:</p>  <pre><code>$rooms = array   (   'adultsroom' =&gt; array(15,501,539,18),   'familyroom' =&gt; array(15,501,539)   );  echo '&lt;pre&gt;'; print_r($rooms); echo '&lt;/pre&gt;'; </code></pre>  <p>Where nested array [0] stands for the first searched room inquiry (2 adults) and nested array [1] for the second searched room inquiry (2 adults and a 3 year old child).</p>  <p>So for the first room inquiry the possible room_id’s are '15', '501', '539' en '18'.</p>  <p>The second array with the availability will for example look like this:<br> (room_id’s that are mentioned in the first array will always appear in the availability array)</p>  <pre><code>$roomsavailable = array     (     '15' =&gt; 1,     '501' =&gt; 2,     '539' =&gt; 1,     '18' =&gt; 4     );  echo '&lt;pre&gt;'; print_r($roomsavailable); echo '&lt;/pre&gt;'; </code></pre>  <p>This array indicates that for the chosen arrival date there are 4 rooms available of room_id ‘18’.</p>  <p>The function called 'get_room_combinations' receives these array’s and calculates all the possible room combinations.</p>  <p>The array output will look in this case like this (where [0] in the nested array (2nd level array) stands for the first room inquiry and [1] for the second room inquiry):</p>  <pre><code>function get_room_combinations(array $data, array &amp;$all = array(), array $group = array(), $value = null, $i = 0) {     $keys = array_keys($data);     if (isset($value) === true) {         array_push($group, $value);     }      if ($i &gt;= count($data)) {         array_push($all, $group);     } else {         $currentKey     = $keys[$i];         $currentElement = $data[$currentKey];         foreach ($currentElement as $val) {             get_room_combinations($data, $all, $group, $val, $i + 1);         }     }      return $all; }  $data = array(     array('15', '501', '539', '18'),     array('15', '501', '539'), );  $combos = get_room_combinations($data); echo '&lt;pre&gt;'; print_r($combos); echo '&lt;/pre&gt;'; </code></pre>  <p>I have a piece of code which render one array with 12 combinations. It didn't look at the availability at the moment.</p>  <p>Who can help me here with this script to render one array with the 10 available combinations?</p>  <p>Array (</p>  <p>[0] => Array  (  [0] => 15  [1] => 501  )</p>  <p>[1] => Array  (  [0] => 15  [1] => 539  )</p>  <p>[2] => Array  (  [0] => 501  [1] => 15  )</p>  <p>[3] => Array  (  [0] => 501  [1] => 501  )</p>  <p>[4] => Array  (  [0] => 501  [1] => 539  )</p>  <p>[5] => Array  (  [0] => 539  [1] => 15  )</p>  <p>[6] => Array  (  [0] => 539  [1] => 501  )</p>  <p>[7] => Array  (  [0] => 18  [1] => 15  ) </p>  <p>[8] => Array  (  [0] => 18  [1] => 501  )</p>  <p>[9] => Array  (  [0] => 18  [1] => 539  ) );</p>