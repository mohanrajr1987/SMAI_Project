<p>I have index method</p>  <pre><code>public function indexAction() {         $em = $this-&gt;getDoctrine()-&gt;getManager();         $entities = $em-&gt;getRepository('AppBundle:Blog')-&gt;findAll();         return array(            'entities' =&gt; $entities,        );    }  // End of method  </code></pre>  <p>When I try to unit test case for this action like below</p>  <pre><code>  public function testIndexAction()    {         $entityManager = $this-&gt;getMockBuilder('BlogController')            -&gt;disableOriginalConstructor()            -&gt;setMethods(array('getRepository'))            -&gt;getMock();         $entityManager-&gt;expects($this-&gt;once())            -&gt;method('findAll')            -&gt;will($this-&gt;returnValue(0));        }  // End of method  </code></pre>  <p>It give me error below</p>  <blockquote>   <p>AppBundle\Tests\Controller\BlogController\BlogControllerTest::testIndexAction   Expectation failed for method name is equal to  when   invoked 1 time(s).</p> </blockquote>  <p>Method was expected to be called 1 times, actually called 0 times.</p>