<p>I am using PHPUnit 4.6.4</p>  <p>I am having difficulty understanding on how I can mock a method within tested class, i had a look at some other examples online but non seem to work.</p>  <p>I have a following function in the Auth class</p>  <pre><code>    public function check_that_user_is_admin() {         if ($this-&gt;get_user_role() !== '1') {             // only admin allowed to perform this action             return FALSE;         }          return TRUE;     } </code></pre>  <p>'get_user_role' checks active session to see what user level current user has and returns it's value.</p>  <p>This is a test for the function above</p>  <pre><code>    public function testAuth() {             $mock = $this-&gt;getMockBuilder('Auth')-&gt;disableOriginalConstructor()-&gt;getMock(array('get_user_role'));             $mock-&gt;expects($this-&gt;once())-&gt;method('get_user_role')-&gt;with($this-&gt;returnValue(1));              $this-&gt;assertTrue($mock-&gt;check_that_user_is_admin());     } </code></pre>  <p>Everytime I run the test I receive:  'Failed asserting that null is true.'</p>