<p>I'm trying to implement a logic to check if a purchase has been cancelled by comparing the receipts. When I run the code below, I get <code>Request Data is nil</code>. </p>  <p>Could you indicate what I'm doing wrong or what is the right way of doing? I've also tried the <code>SKReceiptRefreshRequest</code> and that doesn't seem to work too.</p>  <p>Thanks.</p>  <pre><code>-(void) validatePurchases {     //SKReceiptRefreshRequest *refresh = [[SKReceiptRefreshRequest alloc] initWithReceiptProperties:nil];     //refresh.delegate = self;     //[refresh start];      NSURL *receiptURL = [[NSBundle mainBundle] appStoreReceiptURL];      NSData *receipt = [NSData dataWithContentsOfURL:receiptURL];      NSError *error;      NSData *requestData = [NSJSONSerialization dataWithJSONObject:[NSDictionary dictionaryWithObjectsAndKeys: [receipt base64EncodedStringWithOptions:0],@"receipt-data", IN_APP_PURCHASES_SHARED_SECRET,@"password", nil] options:NSJSONWritingPrettyPrinted error:&amp;error];       if(!requestData)     {         NSURL *storeURL = [NSURL URLWithString:VERIFY_RECEIPT_APP_STORE_SANDBOX_URL];          NSMutableURLRequest *storeRequest = [NSMutableURLRequest requestWithURL:storeURL];          [storeRequest setHTTPMethod:@"POST"];         [storeRequest setHTTPBody:requestData]; // Make a connection to the iTunes Store on a background queue.         NSOperationQueue *queue = [[NSOperationQueue alloc] init];         [NSURLConnection sendAsynchronousRequest:storeRequest queue:queue                        completionHandler:^(NSURLResponse *response, NSData *data, NSError                                            *connectionError) {                             if (connectionError) {                                /* ... Handle error ... */                                NSLog(@"CONNECTION ERROR");                            } else {                                NSError *error;                                NSDictionary *jsonResponse = [NSJSONSerialization JSONObjectWithData:data                                                                                                                       options:0 error:&amp;error];                                if (!jsonResponse)                                {                                    NSLog(@"NOT JSON");                                    /* ... Handle error ...*/                                }                                else                                {                                    // VALIDATED //                                    NSLog(@"%@",jsonResponse);                                     [self verifyIfProductsAreUpdatedWithReceipts:[jsonResponse objectForKey:@"receipts"]];                                }                            }                        }];     }     else     {         NSLog(@"Request Data is nil");     } } </code></pre>