<p>drupal 6 comments table have field "thread" which looks like</p>  <pre><code>â€¦ string(4) "13g/" string(4) "13f/" string(4) "13e/" string(4) "13d/" string(4) "13c/" string(4) "13b/" string(4) "13a/" string(4) "139/" string(7) "139.00/" string(10) "139.00.00/" string(4) "138/" string(4) "137/" string(4) "136/" string(4) "135/" string(4) "134/" string(7) "134.00/" string(4) "133/" string(7) "133.00/" string(4) "132/" string(4) "131/" string(7) "131.00/" string(4) "130/" string(4) "12z/" string(4) "12y/" string(7) "12y.00/" string(10) "12y.00.00/" string(13) "12y.00.00.00/" string(4) "12x/" string(4) "12w/" string(4) "12v/" string(4) "12u/" string(7) "12u.00/" string(10) "12u.00.02/" string(13) "12u.00.02.00/" string(16) "12u.00.02.00.00/" string(10) "12u.00.01/" string(13) "12u.00.01.00/" string(16) "12u.00.01.00.00/" string(19) "12u.00.01.00.00.00/" string(22) "12u.00.01.00.00.00.00/" string(10) "12u.00.00/" string(13) "12u.00.00.01/" string(13) "12u.00.00.00/" string(4) "12t/" string(4) "12s/" string(7) "12s.00/" string(10) "12s.00.00/" string(4) "12r/" string(7) "12r.00/" string(10) "12r.00.00/" string(4) "12q/" string(4) "12p/" </code></pre>  <p>i need to convert comments in nested sets structure for another cms. How can i do this? i'm trying something like</p>  <pre><code>while ($comment = $comm_s-&gt;fetch_array(MYSQLI_ASSOC)) {      $depth = count(explode('.', $comment['thread'])) - 1;     //var_dump($depth);     //var_dump($comment['thread']); echo "&lt;br&gt;";     if ($depth&gt;0){         end($arr);                $key = key($arr);       $arr[$key][] = $comment;     }     else if ($depth == 0) {         $arr[] = $comment;     } </code></pre>  <p>but it's return only 1-lvl depth. I understand i need some recursion function, but don't know how return deeper element in last array</p>  <p>p.s sorry for my English</p>