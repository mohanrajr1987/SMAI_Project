<p>I'm looking for an eloquent statement that will give me the max(timestamp) for each room_id, given that all timestamp values are older than 15 days for that room_id.  (essentially any room that hasn't been cleaned in the past 15 days...)</p>  <p><strong>maintenancelog</strong></p>  <pre><code>+----+-------------------+---------+---------------------+ | id | maintenance_value | room_id |      timestamp      | +----+-------------------+---------+---------------------+ |  1 | Cleaned           |       1 | 2015-09-06 00:54:59 | |  2 | Cleaned           |       1 | 2015-09-07 01:55:59 | |  3 | Cleaned           |       2 | 2015-09-06 02:56:59 | |  4 | Cleaned           |       2 | 2015-09-16 03:57:59 | |  5 | Cleaned           |       3 | 2015-09-06 04:58:59 | |  6 | Cleaned           |       3 | 2015-09-07 05:59:59 | +----+-------------------+---------+---------------------+ </code></pre>  <p>I suck with MySQL, but this would be equivalent of an Oracle statement of...</p>  <pre><code>select room_id,max(timestamp) from maintenancelog group by room_id having max(timestamp) &lt; sysdate - 15; </code></pre>  <p>The eloquent statement should return essentially the following.</p>  <pre><code>1, 2015-09-07 01:55:59 3, 2015-09-07 05:59:59  </code></pre>  <p>I've tried...</p>  <pre><code>$dt = Carbon::now(); $checkdate = $dt-&gt;subDays(15); return $this-&gt;groupBy('room_id')-&gt;max('timestamp')-&gt;having('timestamp','&lt;',$checkdate); </code></pre>  <p>but get </p>  <pre><code>Call to a member function having() on string </code></pre>  <p>trying... </p>  <pre><code>return $this-&gt;groupBy('room_id')-&gt;havingRaw("max(timestamp)&lt;sysdate()-15"); </code></pre>  <p>just returns any rows where timestamp is older than 15, ignoring the other max values...</p>