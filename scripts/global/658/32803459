<p>I am trying to upload an image to store on MongoDB through Mongoose.</p>  <p>I am using multiparty to get the uploaded file.</p>  <p>The code works 100% perfectly on my local machine, but when I deploy it on Heroku, it gives the error:</p>  <p><code>TypeError: argument should be a Buffer</code></p>  <p>Here is my code:</p>  <pre><code>exports.create = function (req, res) { 'use strict';  var form = new multiparty.Form();  form.parse(req, function (err, fields, files) {     var file = files.file[0],         contentType = file.headers['content-type'],         body = {};      _.forEach(fields, function (n, key) {         var parsedField = Qs.parse(n)['0'];          try {             parsedField = JSON.parse(parsedField);         } catch (err) {}         body[key] = parsedField;     });     console.log(file.path);     console.log(fs.readFileSync(file.path));      var news = new News(body);     news.thumbnail = {         data: new Buffer(fs.readFileSync(file.path)),         contentType: contentType     };     news.save(function (err) {         if (err) {             return handleError(res, err);         }         return res.status(201);     }); }); }; </code></pre>  <p>This is the console logs in the above code for HEROKU:</p>  <pre><code>Sep 26 17:37:23 csgowin app/web.1:  /tmp/OlvQLn87yfr7O8MURXFoMyYv.gif  Sep 26 17:37:23 csgowin app/web.1:  &lt;Buffer 47 49 46 38 39 61 10 00 10 00 80 00 00 ff ff ff cc cc cc 21 f9 04 00 00 00 00 00 2c 00 00 00 00 10 00 10 00 00 02 1f 8c 6f a0 ab 88 cc dc 81 4b 26 0a ... &gt;  </code></pre>  <p>The is the console logs on my LOCAL MACHINE:</p>  <pre><code>C:\Users\DOLAN~1.ADS\AppData\Local\Temp\TsfwadjjTbJ8iT-OZ3Y1_z3L.gif &lt;Buffer 47 49 46 38 39 61 5c 00 16 00 d5 36 00 bc d8 e4 fe fe ff ae cf df dc ea f1 fd fe fe db e9 f1 ad ce de 46 5a 71 2b 38 50 90 b8 cc 4a 5f 76 9a c3 d7 8f ... &gt; </code></pre>  <p>Does Heroku need any settings or configurations or something?</p>