<p>I'm using sails.js as my backend with bluebird promise, I tried to upload file using req.file.upload, the callback way works just fine and the file gets uploaded:</p>  <pre><code>req.file('file').upload({     maxBytes: 2000000,     dirname: 'uploadFolder' }, function (err, files) {     if (err) {         return res.serverError(err);     }     return res.ok(); } </code></pre>  <p>But the promise way does not:</p>  <pre><code>var Promise = require('bluebird'); var fileUploader = Promise.promisify(req.file('file').upload); fileUploader({     maxBytes: 2000000,     dirname: currentUploadFolder }).then(function(files) {     console.log(files);     return Promise.resolve(files); }).catch(function(err) {     console.log(err);     return Promise.reject(err); }); </code></pre>  <p>File doesn't get uploaded and the console keeps complaining:</p>  <pre><code>data:    app.js:1800 - [TypeError: Cannot read property 'length' of undefined] </code></pre>  <p>Any thoughts please?</p>