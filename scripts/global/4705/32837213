<p>I'm trying to create a simple function to return user location based on browser but it keeps returning undefined:</p>  <pre><code>  function getLocation() {     //get current location     var geo_param;     if(navigator.geolocation) {       navigator.geolocation.getCurrentPosition(function(position) {         // Create geolocation parameter         geo_param = "geolocation=[" + position.coords.latitude + "," + position.coords.longitude + "]";         console.log(geo_param)       });     }     return geo_param   }    function search(activity) {     var searchUrl = "/s?activity=" + activity + "&amp;" + getLocation()     window.location.href = searchUrl;     console.info(searchUrl)   } </code></pre>