<p>So I want to drag and drop something that takes a little while to process, so I'm using a callback. However my <code>.dataTransfer.setData</code> call does nothing then run from the callback. The <code>dataTransfer.setData</code> works from <code>myCallback</code> just fine, and I know the callback is running from the console log.</p>  <p>Any ideas or suggestions for doing this better? </p>  <pre><code>handleDragStart = function(event) {   var foo = [];   this.processFoo(foo,myCallback);    myCallback = function() {     console.log('running callback')     var msg = JSON.stringify(foo);     event.dataTransfer.setData('text/plain', msg); //won't work     }    //event.dataTransfer.setData('text/plain', 'test message'); //works if I uncomment it }  processFoo = function(foo, callback) {   //pretend this has to talk to some external server and takes a while to respond   foo.push("bar");   callback() } </code></pre>  <p>Thanks!</p>