<p>I'm observing the following script hang under a particular scenario described below:</p>  <pre><code>#!/usr/bin/env python  import os import subprocess as sp import time  tres = 0.1 time.sleep(2)  user_at_host = "user@host"  child_proc = sp.Popen(["ssh", "-q", user_at_host, "ls"], preexec_fn=os.setpgrp)  while(child_proc.poll() is None):     time.sleep(tres) </code></pre>  <p>When I run the script with a valid "user@host", I normally just get the output from "ls", but if I push the Enter/Return key before the "sleep(2)" ends, it hangs (with no output) when we get to the "ls" sub-process and I have to interrupt it.</p>  <pre><code>ps aux | grep ls user  14216  0.0  0.0   6844  2856 pts/27   T    18:18   0:00 ssh -q user@host ls </code></pre>  <p>As you can see it's in the "stopped" state.  </p>  <p>If I don't use "preexec_fn=os.setpgrp", there is no hang. </p>  <p>Also, if I replace the remote ssh/ls call with a local ls call, there is no hang. </p>  <p>Any thoughts on why this is happening? </p>  <p>EDIT: Authentication of ssh is performed via public key. There is no output when the process hangs/stops.  I'm using python 2.4.3, but have observed the problem in 2.6.6 as well.</p>