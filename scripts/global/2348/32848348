<p>I'm writing a python script that reads a stream from stdin and passes this stream to <code>subprocess</code> for further processing. The problem is that python hangs after having processed the input stream.</p>  <p>For example, this toy program <code>sorter.py</code> should read from stdin and pass the stream to <code>subprocess</code> for sorting via Unix <code>sort</code>:</p>  <p><code>cat dat.txt | ./sorter.py </code></p>  <p>Here's sorter.py:</p>  <pre><code>#!/usr/bin/env python  import subprocess import sys  p= subprocess.Popen('sort -', stdin= subprocess.PIPE, shell= True) for line in sys.stdin:     p.stdin.write(line) sys.exit() </code></pre>  <p>The stream from <code>cat</code> is correctly sorted but the programs hangs, i.e. sys.exit() is never reached. </p>  <p>I've read quite a few variations on this theme but I can't get it right. Any idea what is missing? </p>  <p>Thank you!</p>  <p>Dario</p>