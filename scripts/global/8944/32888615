<p>In a C program for Linux, with <code>ncursesw</code> and <code>form</code>, I need to read the string stored in a <code>field</code>, with support for UTF-8 characters. When ASCII only is used, it is pretty simple, because the string is stored as an array of <code>char</code>:</p>  <pre><code>char *dest; ... dest = field_buffer(field[0], 0); </code></pre>  <p>If I try to type a UTF-8 and <strong>non-ASCII</strong> character in the field with this code the character does not appear and it is not handled. In <a href="http://stackoverflow.com/questions/9922528/how-to-make-ncurses-display-utf-8-chars-correctly-in-c">this</a> answer for UTF-8 it is suggested to use <code>ncursesw</code>. But with the following code (written following <a href="http://forums.roguetemple.com/index.php?topic=4263.0" rel="nofollow">this guide</a>)</p>  <pre><code>#define _XOPEN_SOURCE_EXTENDED #include &lt;ncursesw/form.h&gt; #include &lt;locale.h&gt;  int main() {         ...         setlocale(LC_ALL, "");         ...         initscr();           wchar_t *dest;         ...         dest = field_buffer(field[0], 0); } </code></pre>  <p>the compiler produces an error:</p>  <pre><code>warning: assignment from incompatible pointer type [enabled by default]   dest = field_buffer(field[0], 0);             ^ </code></pre>  <p>How to obtain from the field an array of <code>wchar_t</code>? <code>ncursesw</code> uses <code>get_wch</code> instead of <code>getch</code>, so which function does it use instead of <code>field_buffer()</code>? I couldn't find it by googling.</p>