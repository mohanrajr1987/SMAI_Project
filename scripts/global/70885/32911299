<p>I'm making a scatter plot. The circles in the plot are contained within multiple group elements. </p>  <p>I am attempting to use <a href="https://github.com/mbostock/d3/wiki/SVG-Controls#brush" rel="nofollow">brush</a> to select circles that fall into the extent of my brush. But the parameter in the brushend function gives data for a single group.</p>  <p>How can I change my code so the brushend function knows which groups are brushed over without having to iterate through all of the circles in the plot?    </p>  <pre><code>&lt;!DOCTYPE html&gt; &lt;meta charset="utf-8"&gt; &lt;head&gt; &lt;style&gt;  #plot {   border-style: solid;   border-width: 4px;   border-color: lightgrey;   display: inline-block;   line-height: 0; }  .extent {   fill: grey;   fill-opacity: 0.5;   stroke: black;   stroke-width: 1px; }  &lt;/style&gt; &lt;script type="text/javascript" src="d3.js"&gt;&lt;/script&gt; &lt;/head&gt;  &lt;body&gt; &lt;div id=plot&gt;   &lt;script&gt;  (function() {   var data = [];    for (i = 0; i &lt; 100; i++) {     var x = Math.floor(Math.random() * 100) + 1;     var y = Math.floor(Math.random() * 100) + 1;     var c = Math.random();      if (c &lt; 0.33) c = "red";     else if (c &lt; 0.66) c = "green";     else c = "blue";      data.push({x: x, y: y, c: c});   }    data = d3.nest()       .key(function(d) { return d.c })       .entries(data);    var svg = d3.select("#plot").append("svg")       .attr("width", 400)       .attr("height", 400)       .selectAll("scatter")       .data(data)       .enter().append("g")       .each(scatter);    var xScale = d3.scale.linear()       .domain([0, 100])       .range([0, 400]);    var yScale = d3.scale.linear()       .domain([0, 100])       .range([400, 0]);    var brush = d3.svg.brush()       .x(xScale)       .y(yScale)       .on("brushend", brushend);    svg.call(brush);    function brushend(d) {   }  })();  function scatter(d) {   var g = d3.select(this);    var xScale = d3.scale.linear()       .domain([0, 100])       .range([0, 400]);    var yScale = d3.scale.linear()       .domain([0, 100])       .range([400, 0]);    g.selectAll("circle")       .data(d.values)       .enter().append("circle")       .attr("r", 4)       .attr("cx", function(d) { return xScale(d.x) })       .attr("cy", function(d) { return yScale(d.y) })       .attr("fill", function(d) { return d.c }); }  &lt;/script&gt; &lt;/div&gt; &lt;/body&gt; &lt;/html&gt; </code></pre>  <p><strong>Edit:</strong> I realized that the brush doesn't work across group elements, so I accepted an answer that doesn't use the parameter that's passed to the brushend function.</p>