<p>A PHP script which creates one big file needs a couple of minutes to run through when it is called. On my website, this script is called via jQuery's AJAX function. Some of our clients use an internet connection that uses a proxy server. These clients report that the AJAX call returns a 502 Bad Gateway error, because the proxy server's timeout limit was reached. To avoid this problem, I added buffer output functionality to the PHP script and extended the AJAX call so that it receives the current file creation status several times while the PHP script is running. Unfortunately, the buffer output does also only work when no proxy server is used.</p>  <p>Which is the best/most common way to avoid this?</p>  <p><strong>Update:</strong> I have extended the existing AJAX request which waits for the file to be created, so that it checks the potentially thrown error and - when indicated - provides a link to re-check the file's existence. This does probably work, but it lacks usability.</p>  <p>This is the current (shortened) JavaScript code:</p>  <pre><code>$(function() {      dataString = "some=para&amp;me=ters";        $.ajax({         type: "POST",         url: "generatefile.php",         cache: false,         timeout: 300000,         xhrFields: {             onprogress: function(e) {                 $("#bufferOutput p").html(e.target.responseText);             }         }     })     .done(function(msg, txtStatus) {         if(/(.)*success$/i.test(msg)) {             $('#fileGeneration').html('&lt;a class="contrastbutton" href="openFile.php?' + dataString + '"&gt;Open file&lt;/a&gt;');         }         else {             $('#fileGeneration').html('').text("Error");         }     })     .fail(function(msg, txtStatus, errorThrown) {         $("#bufferOutput").hide();         if(/badgateway/i.test(errorThrown)) {             $('#fileGeneration').html('').html("Error, re-check file's existence by clicking &lt;a href=\"javascript:checkFileExistence('" + dataString + "')\"&gt;here&lt;/a&gt;.");         }         else {             $('#fileGeneration').html('').text("Error");         }     }); });  function checkFileExistence(dataString) {     $.ajax({         method: "GET",         url: "fileExists.php",         data: dataString     })     .done(function( msg ) {         if(msg == '1') {             $('#fileGeneration').html('&lt;a class="contrastbutton" href="openFile.php?' + dataString + '"&gt;Open file&lt;/a&gt;');         }         else if(msg == '0') {             alert("File does not exist. Check again later.");         }     }); } </code></pre>