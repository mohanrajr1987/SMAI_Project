<p>The code below is a registration form in which before inserting data into database we check If username and email is already taken, actually it was written <code>php</code> <code>mysqli</code> where it worked fine but now I am switching to PDO. The code works fine and data is inserted but it doesn't check email and username, I mean we could insert data again with same email and username. I don't know why isn't it working in this PDO format it worked fine in simple php standard may be because I have not got hands on PDO yet. Please help me. What I want is to check for email and username before inserting data into database and if they are already taken data is not inserted and we get error message.</p>  <pre><code> $exists = "";  $query = $db-&gt;prepare("SELECT COUNT (username) from userss WHERE username = :username ");  $query-&gt;execute(array(':username'=&gt;$un));  if ($query-&gt;fetchAll() == 1) {  $exists .= "u";  }   $query = $db-&gt;prepare("SELECT COUNT (email) from userss WHERE email = :email ");  $query-&gt;execute(array(':email'=&gt;$em));  if ($query-&gt;fetchAll() == 1) {  $exists .= "e";  }   if ($exists == "u") echo "&lt;p&gt;&lt;b&gt;Error:&lt;/b&gt; Username already exists!&lt;/p&gt;";  else if ($exists == "e") echo "&lt;p&gt;&lt;b&gt;Error:&lt;/b&gt; Email already exists!&lt;/p&gt;";  else if ($exists == "ue") echo "&lt;p&gt;&lt;b&gt;Error:&lt;/b&gt; Username and Email already exists!&lt;/p&gt;";   else {   $stmt = "INSERT INTO userss (username,first_name,last_name,email,password,password2,)   VALUES (:username,:first_name,:last_name,:email,:password,:password2,)";  $query = $db-&gt;prepare( $stmt );    $query-&gt;execute( array(':username'=&gt;$un,':first_name'=&gt;$fn,':last_name'=&gt;$ln,':email'=&gt;$em,  ':password'=&gt;$pswd,':password2'=&gt;$pswd2,));  if ($query-&gt;rowCount() == 1) {   header("Location: login.php");   }   else {  echo "error";  } </code></pre>