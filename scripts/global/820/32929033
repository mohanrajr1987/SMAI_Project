<p>Im using Codeigniter Framework for my project. The form Im currently working on needs file upload and Im using <a href="http://hayageek.com/docs/jquery-upload-file.php" rel="nofollow">Hayageek File Upload Plugin</a> which is great but Im facing some issues which Id like to get help for. </p>  <p>My form has some inputs like title, discipline, subject which im sending to the controller by serializing formdata. Next part is a file input which allows only single file upload. Last part is a file input with multple file upload functionality. </p>  <p>I want to first get the serialized data from inputs, also get the filenames of the files uploaded and then save to database. I want to then rename the actual file to the id of each of this record which saves the filenames of the file after which Id like to upload the file. </p>  <p>Let me add the code of what Ive done so far.</p>  <p><div class="snippet" data-lang="js" data-hide="false"> <div class="snippet-code"> <pre class="snippet-code-js lang-js prettyprint-override"><code>&lt;script&gt;   $(document).ready(function() {  var articleFile= $("#singleupload").uploadFile({ url: BASE_URL +"index.php/Article_submission/submitAll", multiple:false, dragDrop:false, allowedTypes:"doc,docx,rtf,pdf", maxFileCount:1, dataType: 'json', autoSubmit:false, fileName:"article_file", extraHTML:function() {     var html = "&lt;div class='form-group'&gt;";     html += "&lt;label class='control-label col-xs-3'for='type'&gt;Article Type&lt;/label&gt;";     html +=" &lt;div class='col-xs-8'&gt;&lt;select name='article_type' class='form-control'&gt;";     html +="&lt;option value=''&gt;Article Type...&lt;/option&gt;";     html +="&lt;option value='1'&gt;Short Description&lt;/option&gt;&lt;option value='2'&gt;Research Article&lt;/option&gt;&lt;option value='3'&gt;Review Article&lt;/option&gt;&lt;/select&gt;";     html += "&lt;/div&gt;&lt;/div&gt;";     return html;   }         	 });  var documentsFiles = $("#fileuploader").uploadFile({  url: BASE_URL +"index.php/Article_submission/submitAll", fileName:"supporting_documents", dragDrop:false, dataType: 'json', extraHTML:function() {     var html = "&lt;div class='form-group'&gt;";     html += "&lt;label class='control-label col-xs-3'for='type'&gt;Document Type&lt;/label&gt;";     html +=" &lt;div class='col-xs-8'&gt;&lt;select name='document_type[]' class='form-control'&gt;";     html +="&lt;option value=''&gt;Document Type...&lt;/option&gt;";     html +="&lt;option value='1'&gt;Figures&lt;/option&gt;&lt;option value='2'&gt;Figures Legend&lt;/option&gt;&lt;option value='3'&gt;Supplemental Figures&lt;/option&gt;&lt;option value='4'&gt;Supplemental Figures Legend&lt;/option&gt;&lt;option value='5'&gt;Data Files&lt;/option&gt;&lt;/select&gt;";     html += "&lt;/div&gt;&lt;/div&gt;";     return html;                }, autoSubmit:false  });  $("#saveDraft").click(function(){     var serializedData = {};     $('#article-upload-Form').serializeArray().map(function(x){serializedData[x.name] = x.value;});          $.ajax({             url: BASE_URL +"index.php/Article_submission/submitAll",             type: "POST",             data:serializedData         });         articleFile.startUpload();         documentsFiles.startUpload();     });      });    &lt;/script&gt;</code></pre> </div> </div>  this is my submitAll function where Im getting the filenames and then sending it to article_upload where Ill be saving it to the database. The problem Im facing is that this submitAll function is called thrice and in each instance it does the job correctly like saving the data to the database or uploading file. but Im not able ti get all the information in one go. As i need all 3 function data at once. I hope Ive made myself clear. Please help me out. </p>  <pre><code>public function submitAll() {      $article_file=$_FILES['article_file']["name"];     $fileCount = count($_FILES["supporting_documents"]["name"]);     $ret=array();     for($i=0; $i &lt; $fileCount; $i++){         $fileName = $_FILES["supporting_documents"]["name"][$i];             //move_uploaded_file($_FILES["supporting_documents"]["tmp_name"][$i],$output_dir.$fileName);         $ret= $fileName;     }     print_r($ret);     $article_details= $this-&gt;article_upload($article_file,$ret);     $this-&gt;upload_article_file();     $this-&gt;upload_supporting_documents(); } </code></pre>  <p>this is the File upload plugins upload code:</p>  <pre><code>public function upload_supporting_documents() {     $output_dir = "./uploads/"; if(isset($_FILES["supporting_documents"])) {     $ret = array();     $error =$_FILES["supporting_documents"]["error"];     //You need to handle  both cases     //If Any browser does not support serializing of multiple files using FormData()      if(!is_array($_FILES["supporting_documents"]["name"])) //single file     {         $fileName = $_FILES["supporting_documents"]["name"];         move_uploaded_file($_FILES["supporting_documents"]["tmp_name"],$output_dir.$fileName);         $ret[]= $fileName;     }     else  //Multiple files, file[]     {       $fileCount = count($_FILES["supporting_documents"]["name"]);       for($i=0; $i &lt; $fileCount; $i++)       {         $fileName = $_FILES["supporting_documents"]["name"][$i];         move_uploaded_file($_FILES["supporting_documents"]["tmp_name"][$i],$output_dir.$fileName);         $ret[]= $fileName;       }      }      return json_encode($ret);     //return $ret;  } } </code></pre>