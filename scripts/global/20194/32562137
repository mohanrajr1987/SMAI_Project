<p>Recently I try to move the model layer and db/migration into rails engine, and I remove unnecessary things in engine, such as controller, view and dummy/app. It did work properly except running cucumber test. When I run the test(in parent app) it will drop the test database and rerun migration. Here is my env config in cucumber and engine.rb.</p>  <p><a href="https://gist.github.com/wellsonjain/790f40a6b299f09776ce" rel="nofollow">https://gist.github.com/wellsonjain/790f40a6b299f09776ce</a></p>  <p>I just made it like kind of namespace under my rails app, it's really weird that it will drop the database. I think the root cause would be the append_migration in engine.rb. When I put back the migration and remove the snippet code in engine.rb, it worked! But the reason i use engine is encapsulate the model and db schema and mount to different rails app. if i canâ€™t append the migration, it's meaningless. Thus, is there anyone encounter this kind of problem before?</p>