<p>I have a question regarding when and where a connection to the database has to be made and closed. I have an array of rows which are to be inserted into or deleted from the database, it's a mixture. </p>  <p>(1)This is my code where i'm just testing out inserting to the database:</p>  <pre><code>include('connect.php');  foreach($array as $row) {     if($row['insert'])     {        insertRow();     }else     {         //deleteRow();     } }  function insertRow() {     $sql = "insert sql statement";      if ($conn-&gt;query($sql) === TRUE) {         echo "New record created successfully";     } else {         echo "Error: " . $sql . "&lt;br&gt;" . $conn-&gt;error;     } } </code></pre>  <p>(2)This doesn't work. So I move my include file here:</p>  <pre><code>foreach($array as $row) {     include('connect.php');     if($row['insert'])     {        insertRow();     }else     {         //deleteRow();     } } </code></pre>  <p>(3)And it still doesn't work so I move my include here which finally works:</p>  <pre><code>function insertRow() {     include('connect.php');     $sql = "insert sql statement";      if ($conn-&gt;query($sql) === TRUE) {         echo "New record created successfully";     } else {         echo "Error: " . $sql . "&lt;br&gt;" . $conn-&gt;error;     } } </code></pre>  <p>And so my question is: Must I make a connection for every sql query and then close it afterwards? So for what I want to do it'll look something like this?</p>  <pre><code>foreach($array as $row) {      if($row['insert'])     {        insertRow();     }else     {         deleteRow();     } }  function insertRow() {     include('connect.php');     $sql = "insert sql statement";      if ($conn-&gt;query($sql) === TRUE) {         echo "New record created successfully";     } else {         echo "Error: " . $sql . "&lt;br&gt;" . $conn-&gt;error;     }     conn-&gt;close(); }  function deleteRow() {     include('connect.php');     $sql = "delete sql statement";      if ($conn-&gt;query($sql) === TRUE) {         echo "New record created successfully";     } else {         echo "Error: " . $sql . "&lt;br&gt;" . $conn-&gt;error;     }     conn-&gt;close(); } </code></pre>  <p>However this seems inefficient especially if I have an array of 100s of rows to insert/delete. Is there a better way of doing this? Thanks a lot.</p>