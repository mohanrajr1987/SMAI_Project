<p>I'm trying to fix my code after the server update to php 5.6, lots of mysqli functions got deprecated, fixed them with a tool. Now I get the errors and I just don't understand where the problem lies, I've tried changing the error_handler on the file and in config in Smarty, but somehow it doesn't make a difference. Also, if use the posted script in a Sandbox I get the error </p>  <blockquote>   <p>syntax error, unexpected '}' on line ...</p> </blockquote>  <p>Please help?!:     </p>  <pre class="lang-php prettyprint-override"><code>  $C=GetData($data,"key", "");   echo 'clave: ';   echo $C;    $THNX = 0;   for ($i =2 ; $i &gt;= $fin; $i--)   {     if ($THN[$i]&gt;8)     {         $THN[$i]=8;     }     $THNX = $THNX+$THN[$i];   }    if ($THNX&lt;12)   {     $THNX=12-$THNX;   }else{     $THNX=0;   }    echo 'Total';    if ($HEC1=='' || $HEC1=='NA') {     $HEC1=0; }  echo number_format($HEC1, 2, '.', '');    echo 'Hours';   if ($THNX==''){$THNX=0;}      echo number_format($THNX, 2, '.', '');  }else{ //&lt;-Syntax error, unexpected '}'     echo 'clave: ';   echo $C=GetData($data=db_fetch_array($rs=db_query($strSQL=$_SESSION[$strTableName."_sql"],$conn)),"clave", ""); ; //&lt;-This one    echo 'DETAILS';   $strSQL2  = "  select `event_descr`, `event_comment`, `hnse`, `hse`, `event_date`  FROM  b_events   Inner Join c_rex   ON event_ID = eventId        Where clave=$C //&lt;-This one  Order by event_date  "; </code></pre>  <p>So I solved it. The problem was indeed the variable wasn't defined somehow nomore. The confused me was that the variable C was used before and caused apparently no error. So what I did was explicitly write the variable with all its other variables. Thanks to all!</p>