<p>I have a simple enough problem of taking a rails 2 route and making it working with rails 4.  The rails 2 version is this:</p>  <pre><code>map.token '/sessions/token', :controller =&gt; 'sessions', :action =&gt; 'token' </code></pre>  <p>I've changed it to:</p>  <pre><code>get '/sessions/token', to: 'sessions#token', as: '/token' </code></pre>  <p>for rails 4.  The problem is when I go to <code>/sessions/token</code> it immediately redirects to <code>/sessions/token/sessions/token</code> and gives a 404</p>  <p>I added <code>byebug</code> to the token method but the request never makes it there before redirecting.  I added it early in the application controller but I reach a point where the next function just stops working.  </p>  <p>The log produces this when requesting <a href="https://delete-me.domain.org/sessions/token" rel="nofollow">https://delete-me.domain.org/sessions/token</a>:</p>  <pre><code>[delete-me] Started GET "/sessions/token" for 127.0.0.1 at 2015-10-02 05:44:27 -0500 [delete-me] Processing by SessionsController#token as HTML [delete-me] Redirected to http://delete-me.domain.org/sessions/token/sessions/token [delete-me] Filter chain halted as :ensure_proper_protocol rendered or redirected [delete-me] Completed 302 Found in 114ms (ActiveRecord: 5.8ms) </code></pre>  <p>I think it gives the <code>:ensure_proper_protocol error</code> because it redirects to <code>http</code> from <code>https</code>.  I don't know why it does that.  Maybe someone has had a similar problem and they can enlighten me.</p>