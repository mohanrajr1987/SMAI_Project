<p>I am starting with unit tests. I've made a change to a class in which I not inject the SessionContext so I can make a lookup when needed.</p>  <pre><code>@Resource private SessionContext ctx; </code></pre>  <p>Now, in my test, I would like to inject it so I can mock the lookup method:</p>  <pre><code>@Mock private SessionContext ctx; </code></pre>  <p>But when I run the test, I get:</p>  <blockquote>   <p>java.lang.NoClassDefFoundError: javax/xml/rpc/handler/MessageContext     at java.lang.Class.getDeclaredMethods0(Native Method)   at   java.lang.Class.privateGetDeclaredMethods(Class.java:2615)    at   java.lang.Class.getDeclaredMethods(Class.java:1860)   at   org.mockito.cglib.core.ReflectUtils.addAllMethods(ReflectUtils.java:349)     at org.mockito.cglib.proxy.Enhancer.getMethods(Enhancer.java:427)   at   org.mockito.cglib.proxy.Enhancer.generateClass(Enhancer.java:457)     at   org.mockito.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)     at   org.mockito.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:217)     at org.mockito.cglib.proxy.Enhancer.createHelper(Enhancer.java:378)     at org.mockito.cglib.proxy.Enhancer.createClass(Enhancer.java:318)     at   org.mockito.internal.creation.jmock.ClassImposterizer.createProxyClass(ClassImposterizer.java:110)     at   org.mockito.internal.creation.jmock.ClassImposterizer.imposterise(ClassImposterizer.java:62)     at   org.powermock.api.mockito.internal.mockcreation.MockCreator.createMethodInvocationControl(MockCreator.java:111)     at   org.powermock.api.mockito.internal.mockcreation.MockCreator.mock(MockCreator.java:60)     at org.powermock.api.mockito.PowerMockito.mock(PowerMockito.java:143)     at   org.powermock.api.extension.listener.AnnotationEnabler.standardInject(AnnotationEnabler.java:84)     at   org.powermock.api.extension.listener.AnnotationEnabler.beforeTestMethod(AnnotationEnabler.java:51)     at   org.powermock.tests.utils.impl.PowerMockTestNotifierImpl.notifyBeforeTestMethod(PowerMockTestNotifierImpl.java:90)     at   org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:292)     at   org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:127)     at   org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:82)     at   org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:282)     at   org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:86)     at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)     at   org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:207)     at   org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:146)     at   org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:120)     at   org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:33)     at   org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:45)     at   org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:118)     at   org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:104)     at   org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)     at   org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:53)     at   org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)     at   org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)     at   org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)     at   org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)     at   org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)     at   org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)   Caused by: java.lang.ClassNotFoundException:   javax.xml.rpc.handler.MessageContext  at   java.net.URLClassLoader$1.run(URLClassLoader.java:366)    at   java.net.URLClassLoader$1.run(URLClassLoader.java:355)    at   java.security.AccessController.doPrivileged(Native Method)    at   java.net.URLClassLoader.findClass(URLClassLoader.java:354)    at   java.lang.ClassLoader.loadClass(ClassLoader.java:425)     at   sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)     at   java.lang.ClassLoader.loadClass(ClassLoader.java:358)     ... 39 more</p> </blockquote>  <p>I find it strange, because I have all the dependencies required (this code works in the real application).</p>  <p>How do I mock and inject  the SessionContext using mockito? (I can't change the mocking framework).</p>