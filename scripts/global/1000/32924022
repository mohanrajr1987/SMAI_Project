<p>For building and running tests I'm using Ant. Testing works at the moment; it generates some output and a report (xml), but I can't use it in CI, as the exit-value is still something the builder is ok with, even if there is a failure.</p>  <p>How can I get a result on failure that will make the ci-runner understand it is an actual failure?</p>  <p>I'm using something like this (removed some classpath clutter):</p>  <pre><code>&lt;target name="junit"&gt;     &lt;junit printsummary="yes"&gt;        &lt;formatter type="xml"/&gt;         &lt;batchtest fork="yes" todir="${report.dir}"&gt;             &lt;fileset dir="${test.dir}" includes="**/*Test.java"/&gt;         &lt;/batchtest&gt;     &lt;/junit&gt; &lt;/target&gt; </code></pre>  <p>I did find out I can add <code>haltonfailure="yes"</code> to the <code>&lt;junit</code>. This halts (and fails) the build, but then it doesn't run all tests; </p>  <p>I'd like to run all the tests, and in the end exit with a failure if there was one.</p>