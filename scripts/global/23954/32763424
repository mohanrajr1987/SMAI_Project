<p>My onreceive</p>  <pre><code> public void onReceive(Context context, Intent intent) {         if(Intent.ACTION_MEDIA_BUTTON.equals(intent.getAction())) {            KeyEvent event = (KeyEvent) intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);            if(event.getKeyCode()==79){                switch(event.getAction()){                 case 1:                     Log.v(TAG,"___________action___________"+call);                        Log.v(TAG,event.getKeyCode()+"    "+event.getAction());                       break;                 case 0:                     if(mic==false){                     Log.v(TAG,"___________action___________"+call);                        Log.v(TAG,event.getKeyCode()+"    "+event.getAction());                           break;               }}}} </code></pre>  <p>Manifest:</p>  <pre><code>&lt;receiver android:name=".BCreceiver"  android:enabled="true" &gt;    &lt;intent-filter android:priority="2147483647"&gt;     &lt;action android:name="android.intent.action.MEDIA_BUTTON" /&gt;                &lt;/intent-filter&gt; </code></pre>  <p></p>  <p>this code work on android 4.03 (capture headset key events during call before default call app) but didn't work in android 4.12</p>