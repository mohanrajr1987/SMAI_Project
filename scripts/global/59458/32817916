<p>I'm using this code to download files from JSF page.</p>  <pre><code>public String downloadFile(String fileName) {     try {          String reportPath = "/opt/download" + File.separator + selectedDownloadValue + File.separator + fileName;          FacesContext facesContext = FacesContext.getCurrentInstance();         HttpServletResponse response = (HttpServletResponse) facesContext.getExternalContext().getResponse();         // use this code if the package is located insight the WAR package          File file = new File(reportPath);          if (!file.exists()) {             response.sendError(HttpServletResponse.SC_NOT_FOUND, "No file " + reportPath);         }          int DEFAULT_BUFFER_SIZE = 10240;         response.setBufferSize(DEFAULT_BUFFER_SIZE);         response.setHeader("Content-Length", String.valueOf(file.length()));    // Display file size during download         response.setHeader("Content-Type", "application/octet-stream");         response.setHeader("Content-Transfer-Encoding", "Binary");         response.setHeader("Content-Disposition", "attachment; filename=\"" + fileName + "\"");          BufferedInputStream bIn = new BufferedInputStream(new FileInputStream(file));          int rLength = -1;          byte[] buffer = new byte[1000];          while ((rLength = bIn.read(buffer, 0, 100)) != -1) {             response.getOutputStream().write(buffer, 0, rLength);         }          FacesContext.getCurrentInstance().responseComplete();     } catch (Exception e) {         e.printStackTrace();     }     return null; } </code></pre>  <p>But for some reason the file that I download is with extension <code>some_file.exe.xht</code> I tried to add additional headers but without result.  Maybe before download I need to get file extension? Is there any solution?</p>