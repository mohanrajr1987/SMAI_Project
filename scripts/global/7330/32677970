<p>Suppose I have a giant repo for an as-of-yet unpublished software product called <a href="https://de.wikipedia.org/wiki/Minister_von_Hammerstein" rel="nofollow">"Hammerstein"</a>, written by the famous German software company "Apfel" of which I am an employee.</p>  <p>One day, "Apfel" spins out the Hammerstein division and sells it to the even <em>more</em> famous company "Oráculo" which renames "Hammerstein" to <a href="https://es.wikipedia.org/wiki/Manzana_reineta" rel="nofollow">"Reineta"</a> as a matter of national pride and decides to open source it.</p>  <p>Agreements mandate that <strong>all</strong> references to "Hammerstein" and "Apfel" be replaced by "Oráculo" and "Reineta" in the repository.</p>  <p>All filenames, all commit messages, <em>everything</em> must be replaced.</p>  <p>So, for example:</p>  <ol> <li><p><code>src/core/ApfelCore/main.cpp</code> must become <code>src/core/OraculoCore/main.cpp</code>.</p></li> <li><p>The commit message that says <code>"Add support for Apfel Groupware Server"</code> must become <code>"Add support for Oraculo Groupware Server"</code></p></li> <li><p>The strings <code>ApfelServerInstance* local_apfel</code>, <code>#define REINETA</code> and <code>Url("http://apfel.de")</code> must become <code>OraculoServerInstance* local_oraculo</code>, <code>#define HAMMERSTEIN</code>, etc.</p></li> </ol>  <p>This applies to <strong>files that are not in <code>HEAD</code> anymore as well.</strong></p>  <p>What is the <strong>simplest</strong> and most pain-free method to achieve it with <strong>minimal manual intervention</strong> (so that it can be applied in batch to a potentially large number of repositories/assets)?</p>  <ol> <li><a href="https://rtyley.github.io/bfg-repo-cleaner/" rel="nofollow">BFG</a> can replace the strings, but it seems to only have a <code>--delete-file</code> option, not a <code>--rename-file</code>, and even then it does not take patterns as an argument</li> <li><a href="http://stackoverflow.com/questions/9984722/git-rename-many-files-and-folders">This approach</a> seems to work only for <code>HEAD</code> and not for the whole history; I have had no luck using it with <code>--tree-filter</code></li> </ol>