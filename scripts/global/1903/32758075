<p>I have a sql query too complex to translate in QueryBuilder. It works by nativequery. The problem is that my entity type asks me a QueryBuilder not a query. Do you have a solution?</p>  <p>This is my query : </p>  <blockquote>   <p>SELECT v.*   FROM vat_rates v<br>   INNER JOIN (<br>   SELECT vr.code as   code2 , MAX(vr.dateIn) AS dateIn2<br>   FROM vat_rates vr<br>   WHERE vr.country = :country       AND vr.dateIn = :dateIn<br>   GROUP BY code  )    AS max ON code2 = v.code AND dateIn =   v.dateIn;</p> </blockquote>  <p>And in my form type :</p>  <pre><code>$builder-&gt;add('vat_rates', 'entity', array(                 'label' =&gt; 'item_vat_rate',                 'class' =&gt; 'MyInvoicingBundle:VatRate',                 'query_builder' =&gt; function(VatRateRepository $cr) use ($options) {                     return $cr-&gt;getListVatRate($options['country'],$options['dateIn']);                                               },                 'attr' =&gt; array('class' =&gt; 'form-control'),             )) </code></pre>  <p>Thanks you and sorry for my bad english.</p>