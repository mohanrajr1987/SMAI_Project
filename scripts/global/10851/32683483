<p>I have a header <code>header.h</code> with a macro definition which expands into a class definition and a source file <code>test.cpp</code> which includes <code>header.h</code> and uses this macro. Then I use <code>RecursiveASTVisitor</code> to visit all <code>CXXRecordDecl</code>'s.</p>  <p>When I visit the CXXRecordDecl which is expansion of the macro (in test.cpp) and query for its <code>SourceLocation</code> and <code>dump()</code> it, the location points to <code>header.h</code> - the location of macro definition.</p>  <p>What I need to get for this CXXRecordDecl is the <code>SourceLocation</code> of macro expansion - in my case it should be <code>test.cpp</code>.</p>  <p>Thanks in advance.</p>