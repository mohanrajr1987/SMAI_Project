<p>I'm attempting to do a deploy using ruby 2.2.3, capistrano, and rvm-capistrano.</p>  <p>When I run:</p>  <pre><code>$ rvm use 2.2.3 </code></pre>  <p>And then:</p>  <pre><code>$ cap deploy </code></pre>  <p>The deploy fails and I get this message:</p>  <pre><code>failed: "rvm_path=$HOME/.rvm $HOME/.rvm/bin/rvm-shell '2.2.0' -c 'git clone -q -b develop --depth 1 &lt;rest of the git clone command&gt;'" on xxx.xxx.xxx.xxx </code></pre>  <p>The server in question doesn't have ruby-2.2.0 installed (just 2.2.3), hence the crash. But it shouldn't need to, because I'm using ruby-2.2.3.</p>  <p>I did some digging and I found that there's an ENV variable, <code>GEM_HOME</code>, that controls which ruby version rvm-capistrano depends on. With my ruby version set using rvm, it seems fine:</p>  <pre><code>$ echo $GEM_HOME /home/rof/.rvm/gems/ruby-2.2.3 </code></pre>  <p>It looks like there is some code inside <code>bundler</code> that changes the GEM_HOME but it feels like a bit of a wild goose change. Wondering if this is a known issue or something that anyone else has come across.</p>  <p>My config/deploy.rb has:</p>  <pre><code>set :rvm_ruby_string, :local  # use the same ruby as used locally for deployment require "rvm/capistrano" </code></pre>