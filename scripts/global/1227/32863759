<p>I need to filter the response of a SOAP web-service. Since SOAP is based on XML, I am thinking about using libxml2, but I am not able to understand how to write an XPATH rule to achieve the desired result.</p>  <p>At the end of the message you'll find an example of the response, where two NotficationMessages are sent, one has a topic <code>tns1:RuleEngine/LineDetector/Crossed</code> , the other one has topic <code>tns1:RuleEngine/CellMotionDetector/Motion</code> .</p>  <p>I am trying to write the following XPATH expressions:</p>  <ul> <li>match any NotficationMessage whose topic is <code>tns1:RuleEngine/LineDetector/Crossed</code></li> <li>match any NotficationMessage whose topic is <code>tns1:RuleEngine//.</code></li> <li>match any NotficationMessage whose topic is everything but <code>tns1:RuleEngine//.</code></li> </ul>  <p>All the examples I found match on tag attributes, not the inhalt of subtags.</p>  <p>So I'm asking.</p>  <ol> <li>are this kinds of matching doable with libxml2 or with XPATH in general?</li> <li>can you please give me a hint about writing the XPATH expressions?</li> </ol>  <p>Thank you for your help</p>  <p>Ottavio</p>  <pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;   &lt;SOAP-ENV:Envelope      xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"      xmlns:wsa="http://www.w3.org/2005/08/addressing"      xmlns:wstop="http://docs.oasis-open.org/wsn/t-1"      xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"      xmlns:tet="http://www.onvif.org/ver10/events/wsdl"      xmlns:tns1="http://www.onvif.org/ver10/topics"     xmlns:tt="http://www.onvif.org/ver10/schema"&gt;     &lt;SOAP-ENV:Header&gt;       &lt;wsa:Action&gt;  http://www.onvif.org/ver10/events/wsdl/PullPointSubscription/PullMessagesResponse       &lt;/wsa:Action&gt;     &lt;/SOAP-ENV:Header&gt;     &lt;SOAP-ENV:Body&gt;       &lt;tet:PullMessagesResponse&gt;         &lt;tet:CurrentTime&gt;           2008-10-10T12:24:58         &lt;/tet:CurrentTime&gt;         &lt;tet:TerminationTime&gt;           2008-10-10T12:25:58         &lt;/tet:TerminationTime&gt;         &lt;wsnt:NotificationMessage&gt;           &lt;wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet"&gt;             tns1:RuleEngine/LineDetector/Crossed           &lt;/wsnt:Topic&gt;           &lt;wsnt:Message&gt;             &lt;tt:Message UtcTime="2008-10-10T12:24:57.321Z"&gt;               &lt;tt:Source&gt;                 &lt;tt:SimpleItem Name="VideoSourceConfigurationToken"                                Value="1"/&gt;                 &lt;tt:SimpleItem Name="VideoAnalyticsConfigurationToken"                                Value="2"/&gt;                 &lt;tt:SimpleItem Value="MyImportantFence1" Name="Rule"/&gt;               &lt;/tt:Source&gt;               &lt;tt:Data&gt;                 &lt;tt:SimpleItem Name="ObjectId" Value="15" /&gt;               &lt;/tt:Data&gt;             &lt;/tt:Message&gt;           &lt;/wsnt:Message&gt;         &lt;/wsnt:NotificationMessage&gt;         &lt;wsnt:NotficationMessage&gt;           &lt;wsnt:Topic Dialect="http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet"&gt;            tns1:RuleEngine/CellMotionDetector/Motion           &lt;/wsnt:Topic&gt;           &lt;wsnt:Message&gt;             &lt;tt:Message UtcTime= "2010-10-20T12:24:57.628"&gt;               &lt;tt:Source&gt;                &lt;tt:SimpleItem Name="VideoSourceConfigurationToken" Value="1"/&gt;                &lt;tt:SimpleItem Name="VideoAnalyticsConfigurationToken" Value="1"/&gt;                &lt;tt:SimpleItem Name="Rule" Value="MotionInDefinedCells"/&gt;               &lt;/tt:Source&gt;                 &lt;tt:Data&gt;                &lt;tt:SimpleItem Name="IsMotion" Value="true"/&gt;               &lt;/tt:Data&gt;             &lt;/tt:Message&gt;           &lt;/wsnt:Message&gt;         &lt;/wsnt:NotficationMessage&gt;       &lt;/tet:PullMessagesResponse&gt;     &lt;/SOAP-ENV:Body&gt; &lt;/SOAP-ENV:Envelope&gt; </code></pre>