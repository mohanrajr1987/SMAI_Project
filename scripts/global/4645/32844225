<p>I get some data with ldap authentication. I can do this correctly with this code.</p>  <pre><code>List&lt;Employees&gt; emps=new ArrayList&lt;Employees&gt;();     String url = "ldap://xxx:389";     String base = "dc=xxx,dc=xxx,dc=xx";     String userDn = "username";     String password = "pass";     try {         LdapContextSource ctxSrc = new LdapContextSource();         ctxSrc.setUrl(url);         ctxSrc.setBase(base);         ctxSrc.setUserDn(userDn);         ctxSrc.setPassword(password);         ctxSrc.afterPropertiesSet();         LdapTemplate lt = new LdapTemplate(ctxSrc);          AndFilter filter = new AndFilter();         filter.and(new EqualsFilter("objectclass", "Person"));         List&lt;String&gt; list = lt.search("", filter.encode(), new ContactAttributeMapperJSON());         emps = new Gson().fromJson(list.toString(), new TypeToken&lt;List&lt;Employees&gt;&gt;() {         }.getType()); </code></pre>  <p>this code works correctly. But i want hide my username and pass. So i get datas from content.xml(Pivotal).This is my content.xml:</p>  <pre><code>&lt;Resource name="ldap/LdapResource" auth="Container"     type="javax.naming.ldap.LdapContext"     factory="xxx"     singleton="false"      java.naming.factory.initial="com.sun.jndi.ldap.LdapCtxFactory"     java.naming.provider.url="ldap://xx:389"     java.naming.security.authentication="simple"     java.naming.security.principal="username"     java.naming.security.credentials="pass." /&gt; </code></pre>  <p>And my new code block :</p>  <pre><code>        List&lt;Employees&gt; emps = new ArrayList&lt;Employees&gt;();     try {         Context initialContext = new InitialContext();         LdapContext ldapContext = (LdapContext) initialContext.lookup("java:comp/env/ldap/LdapResource");         *LdapTemplate lt = new LdapTemplate(ldapContext);*          AndFilter filter = new AndFilter();         filter.and(new EqualsFilter("objectclass", "Person"));         List&lt;String&gt; list = lt.search("", filter.encode(), new ContactAttributeMapperJSON());          emps = new Gson().fromJson(list.toString(), new TypeToken&lt;List&lt;Employees&gt;&gt;() {         }.getType()); </code></pre>  <p>here is my problem. I cant LdapTemplate with LdapContext. It works only LdapContextSource and I cant cast LdapContext to LdapContextSource. What should i do ? </p>  <p>Sorry for my bad English. Thank You.</p>