<p>I have a backbone app which uses <code>#</code>for app navigation and express backend hosted on IIS.</p>  <p>Fragment part is dynamic so I cannot hardcode it into web.config.</p>  <p>I want to do http to https redirection</p>  <pre><code>&lt;rule name="Force HTTPS" enabled="true"&gt;       &lt;match url="(.*)" ignoreCase="false" /&gt;       &lt;conditions&gt;         &lt;add input="{HTTPS}" pattern="off" /&gt;       &lt;/conditions&gt;       &lt;action type="Redirect" url="https://{HTTP_HOST}{REQUEST_URI}" appendQueryString="false" redirectType="Permanent" /&gt; &lt;/rule&gt; </code></pre>  <p>The above works for <code>chrome</code>, <code>firefox</code>, <code>ie10+</code>. It doesn't work for <code>safari 5+</code> &amp; <code>ie9</code> + below.</p>  <p>I get that <code>fragment</code> is not sent to server sources <a href="http://blogs.msdn.com/b/ieinternals/archive/2011/05/17/url-fragments-and-redirects-anchor-hash-missing.aspx" rel="nofollow">link</a>, <a href="http://stackoverflow.com/questions/2286402/url-fragment-and-302-redirects">link2</a>, so it doesn't get appended on redirect in safari &amp; ie9.</p>  <p>I was wondering if there is any workaround via <code>web.config</code> or something else for browsers where it doesn't work?</p>  <p>Last resort would be to drop <code>https</code> redirection in <code>web.config</code> and handle it in <code>express server</code> &amp; <code>backbone client</code> but that would be a bit tedious I guess.</p>  <p>EDIT: </p>  <p>Encoded url seems to redirect properly. Ex. <code>mysite.com/#myapp</code> would redirect to <code>mysite.com</code> while <code>mysite.com/%23myapp</code> would redirect to <code>mysite.com/#myapp</code></p>