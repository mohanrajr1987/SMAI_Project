<p>I am very new to using R and I am having a problem merging or joining two datasets. The first dataset has 47 columns and 143,473 and dataset two has 34  and 2243 rows. </p>  <p>The first dataset consists of fishing hauls with a number of variables that are of interest pertaining to that haul. There is a column called link3 that is a value for a haul from a fishing trip.</p>  <p>The second dataset consists of biological data where each row is a single instance for a seal. There is a column called link3 that is a value for a haul from a fishing trip. There can be several rows that have the same link3. I needed to add columns for 9 species of seals (1 column per species) and then sum up the number of takes per species for each haul. I was successfully able to do this portion.</p>  <p>I am having a problem merging or joining the results of summing the takes of seals by species into the first dataset. I need to add the columns I created for each seal species in the second dataset onto all of the hauls in the first dataset, but keep all of the information from the second dataset intact. I believe this is called a full join from what I could gather from googling and looking on sites like r-blogger, here, etc.</p>  <p>Here is an example of the errors I am getting:</p>  <blockquote>   <h1>Merge gillnet dataset and seal take datasets from Josh &amp; Kimberly</h1>      <h1>change from codes to names for seal takes</h1>      <p>library(MASS)   library(readr)   library(dplyr)   library(plyr)   library(data.table)</p>      <p>setwd('c:/Users/dana/Documents/NEFSC_Work/SealGear/DataAnalysisFor1990-2014')</p>      <h1>read in gillnet dataset</h1>      <p>gillnet&lt;-read.csv('c:/Users/dana/Documents/NEFSC_Work/SealGear/Data/gn9014_ForDana2.csv',header=TRUE)   gillnet[1:1,]                   LINK3 YEAR MONTH SEASON   PORTNAME STATE   LONDD   LONDD_SOURCE   1 000199001C030000001 1990     1      W N.OfBoston    24 -70.055 haul_begin_loc     LONDD_SOURCE_CV    LATDD   LATDD_SOURCE LATDD_SOURCE_CV    DEPTH   1              NA 42.44444 haul_begin_loc              NA -84.1248       DEPTH_SOURCE DEPTH_SOURCE_CV     SLOPE   SLOPE_SOURCE SLOPE_SOURCE_CV   1 original_value              NA 0.0870441 original_value              NA     SOAKDUR SOAKDUR_SOURCE SOAKDUR_SOURCE_CV STEAMTIM TIEDNUSD TIEDNUSD_SOURCE   1      48 original_value                NA        3        9  original_value     PRIMSPP1 ACTMMDUSD MSWGTAVG MSWGTAVG_SOURCE MSWGTAVG_SOURCE_CV TWINESIZ   1     5260         9      5.5     ave_min_max                 NA       14     GEARLENTOT GEARLENTOT_SOURCE GEARLENTOT_SOURCE_CV QTR TRIPEXT NEGEAR WEATHER   1         NA                                 NA   1       X    100       2     WAVEHGT GEARCOND AREA    AREA_SOURCE NNETS NNETS_SOURCE NNETS_SOURCE_CV   1       0      210  514 original_value    NA                       NA     MCVERT  MCVERT_SOURCE MCVERT_SOURCE_CV HNGRATIO HNGRATIO_SOURCE   1     20 original_value               NA        5  original_value     HNGRATIO_SOURCE_CV SPACEWID SECMETHOD SEDIMENT REGION REGION2 PINGPERC   1                 NA       NA         0    gr-sd    GOM     GOM        0       FMTONS SECTOR_ID D_COAST D_COAST_SOURCE D_COAST_SOURCE_CV   D_B50   1 0.463572        NA 41593.3 original_value                NA 13092.4       D_B50_SOURCE D_B50_SOURCE_CV  D_B100  D_B100_SOURCE D_B100_SOURCE_CV   1 original_value              NA 1902.63 original_value               NA      D_B200  D_B200_SOURCE D_B200_SOURCE_CV D_B500  D_B500_SOURCE   1 8944.27 original_value               NA 273222 original_value     D_B500_SOURCE_CV ON_LAND  SST    SST_SOURCE SST_SOURCE_CV HPTRP   1               NA       0 4.33 ncdcOisst2Agg            NA       HPTRP_MgmtArea HAUCOMMENTS OBSERVER_ID   1                          NEFOP   class("link3")   [1] "character"</p>      <h1>read in data of seal takes including biological information</h1>      <p>seals &lt;- read.csv('c:/Users/dana/Documents/NEFSC_Work/SealGear/Data/gn_biodat_9014.csv',header=TRUE)   seals[1:1,]                   LINK3 PSID           LINK1 NESPP4 ANMLCOND INCTAKE ENTANGLE   1 000199006F390000003    1 000199006F39000   6981       11       1        0     NETNUM TIMEBRUP ACTMMDCOND TAGNUM1 TAGCODE1 TAGNUM2 TAGCODE2 ANMLONBD PHOTO   1     00     1130          0  D00192        1                0        1     0     NEGEAR ESTLEN INCCOMMENTS SEX BODYTEMP BLUBTHCK GIRTH TOTLEN FLIPLEN FLIPWID   1    100     NA               1       NA       NA    34     NA      NA      NA     WHOLE JAW STOMACH BLUBBER MUSCLE HEAD RPORGANS BMMCOMMENTS   1     0   1       1       0      0    0        0            </p>      <p>sealtypes &lt;- c('harp' = 6981,   +    'hood' = 6982,   +    'ringed' = 6983,   +    'beard' = 6984,   +    'harbs' = 6995,   +    'ribbon' = 6986,   +    'larga' = 6985,   +    'gray' = 6996,   +    'sealnk' = 6994)   seals$SPP &lt;- names(sealtypes)[match(seals$NESPP4, sealtypes)]</p>      <p>names(gillnet) &lt;- tolower(names(gillnet))   names(seals) &lt;- tolower(names(seals))   table(seals$spp, useNA='always')</p> </blockquote>  <p>gray  harbs   harp   hood sealnk        933    912    219      4    175      0 </p>  <blockquote>   <h1>Get number of takes of each species</h1>      <p>seals &lt;- seals  %>%        + mutate(harp = ifelse(spp=='harp', 1, 0),       +    hood = ifelse(spp=='hood', 1, 0),       +    ringed = ifelse(spp=='ringed', 1, 0),       +    beard = ifelse(spp=='beard',1,0),       +    harbs = ifelse(spp=='harbs',1,0),       +    ribbon = ifelse(spp=='ribbon',1,0),       +    larga = ifelse(spp=='larga',1,0),       +    gray = ifelse(spp=='gray',1,0),       +    sealnk = ifelse(spp=='sealnk',1,0))</p>      <p>sealsum = seals %>% summarise_each(funs(sum(., na.rm=T)), harp:sealnk)</p>      <p>sealsum_by_link3 &lt;- seals  %>% group_by(link3) %>%    +     summarise_each(funs(sum(., na.rm=T)), harp:sealnk) %>%    +     ungroup()</p>      <h2>summarise_each is shortcut in dplyr for</h2>      <h2>summarise(harp = sum(harp,na.rm=T), hood = sum(hood,   na.rm=T),...,sealnk = sum(sealnk, na.rm=T)</h2>      <h1>put the table created into a dataframe</h1>      <p>sealsum &lt;- as.data.frame.matrix(sealsum_by_link3)   sealsum[1:1,]                   link3 harp hood ringed beard harbs ribbon larga gray sealnk   1 000199006F390000003    1    0      0     0     0      0     0    0      0   class("link3")   [1] "character"</p>      <h1>join the two datasets</h1>      <p>gnobs = gillnet %>% full_join(sealsum)       Joining by: "link3"       Error: cannot join on columns 'link3' x 'link3': Can't join on 'link3' x 'link3' because of incompatible types (tbl_df, data.frame / factor) </p>      <p>another try:   gnobs = gillnet %>% full_join(sealsum_by_link3)       Joining by: "link3"       Warning message:       In outer_join_impl(x, y, by$x, by$y) :     joining factors with different levels, coercing to character vector</p>      <p>gnobs[1:1,]                   link3 year month season   portname state   londd   londd_source   1 000199001C030000001 1990     1      W N.OfBoston    24 -70.055 haul_begin_loc     londd_source_cv    latdd   latdd_source latdd_source_cv    depth   1              NA 42.44444 haul_begin_loc              NA -84.1248       depth_source depth_source_cv     slope   slope_source slope_source_cv   1 original_value              NA 0.0870441 original_value              NA     soakdur soakdur_source soakdur_source_cv steamtim tiednusd tiednusd_source   1      48 original_value                NA        3        9  original_value     primspp1 actmmdusd mswgtavg mswgtavg_source mswgtavg_source_cv twinesiz   1     5260         9      5.5     ave_min_max                 NA       14     gearlentot gearlentot_source gearlentot_source_cv qtr tripext negear weather   1         NA                                 NA   1       X    100       2     wavehgt gearcond area    area_source nnets nnets_source nnets_source_cv   1       0      210  514 original_value    NA                       NA     mcvert  mcvert_source mcvert_source_cv hngratio hngratio_source   1     20 original_value               NA        5  original_value     hngratio_source_cv spacewid secmethod sediment region region2 pingperc   1                 NA       NA         0    gr-sd    GOM     GOM        0       fmtons sector_id d_coast d_coast_source d_coast_source_cv   d_b50   1 0.463572        NA 41593.3 original_value                NA 13092.4       d_b50_source d_b50_source_cv  d_b100  d_b100_source d_b100_source_cv   1 original_value              NA 1902.63 original_value               NA      d_b200  d_b200_source d_b200_source_cv d_b500  d_b500_source   1 8944.27 original_value               NA 273222 original_value     d_b500_source_cv on_land  sst    sst_source sst_source_cv hptrp   1               NA       0 4.33 ncdcOisst2Agg            NA       hptrp_mgmtarea haucomments observer_id harp hood ringed beard harbs ribbon   1                          NEFOP   NA   NA     NA    NA    NA     NA     larga gray sealnk   1    NA   NA     NA   sum(gnobs$harbs)       [1] NA</p> </blockquote>  <p>another try:</p>  <blockquote>   <p>gnobs &lt;- merge(x = gillnet, y = sealsum_by_link3, by = "link3", all.x = TRUE)</p>      <p>sum(gnobs$harbs)        [1] NA</p> </blockquote>  <p>another try:</p>  <blockquote>   <p>gnobs &lt;- join(gillnet, sealsum,       +      type = "full")       Joining by: link3       Error in allocate_column(df[[var]], nrows, dfs, var) :      Data frame column 'harp' not supported by rbind.fill</p> </blockquote>  <p>Tried two types of merge:     gnobs &lt;- merge(gillnet,sealsum,by=c("link3"))     #produces correct dataframe but it is filled with NAs</p>  <pre><code>gnobs &lt;- merge(gillnet,sealsum,by="link3",all=TRUE) #produces this error message:  #Error in if (m &lt; n * p &amp;&amp; (m == 0L || (n * p)%%m))    stop(sprintf(ngettext(m,  :  #missing value where TRUE/FALSE needed #In addition: Warning messages: #1: In `[&lt;-.factor`(`*tmp*`, ri, value = list(link3 = 1L)) : #invalid factor level, NA generated #2: In n * p : NAs produced by integer overflow #3: In n * p : NAs produced by integer overflow </code></pre>  <p>I am totally at a loss for why this isn't working. Can anyone provide any guidance?</p>